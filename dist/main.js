(function(){var Zm;var Up=document.createElement("style");Up.textContent=`@charset "UTF-8";.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0 0 0/0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px #0000001a}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}.maplibregl-ctrl button:not(:disabled):hover{background-color:#0000000d}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:#ffffff80;margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:#ffffff80;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:#0000000d}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.maplibregl-ctrl-attrib a{color:#000000bf;text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:#ffffffbf;border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:#0000000d}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px #0000001a;padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px #00000059;box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:#0006;color:#fff;display:flex;font-size:1.4em;top:0;right:0;bottom:0;left:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(width <= 480px){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}body{margin:0;padding:0;position:relative}.gpx_viewer{align-items:center;display:flex;justify-content:center;margin:0;padding:0;position:relative}.map_container{height:100vh;width:100vw}.popup{z-index:2}.popup-body{display:flex;flex-direction:column}.popup-body .popup-body-image{margin-top:12px;width:100%}.popup-body .popup-body-desc{display:flex;justify-content:space-between;margin-top:4px}.popup-body .popup-body-desc .popup-body-desc-timestamp{color:gray;font-style:italic;margin-left:12px;white-space:nowrap}.control-box{display:grid;grid-template-rows:auto auto;padding:8px;position:absolute;right:24px;row-gap:16px;top:24px;z-index:1}.animation-control-box{display:grid;row-gap:8px;position:relative}.animation-control-box .disp-control-box{display:flex;justify-content:flex-end}.animation-control-box .disp-control-box .disp-control-button{background-color:#f5f5f5;border:1px solid gray;border-radius:0 4px 4px 0;color:#696969;cursor:pointer;display:flex;font-size:1.6rem;font-weight:700;justify-content:center;height:36px;width:48px}.animation-control-box .disp-control-box .disp-control-button .disp-control-button-label{transform:scaleX(.65)}.animation-control-box .disp-control-box .disp-control-button:first-of-type{border-radius:4px 0 0 4px;border-right-width:0}.animation-control-box .disp-control-box .disp-control-button:hover{background-color:#dcdcdc}.animation-control-box .disp-control-box .disp-control-button.is-active,.animation-control-box .disp-control-box .disp-control-button.is-active:hover{background-color:#1e90ff;color:#fff}.animation-control-box .disp-control-box .disp-control-button.is-heading-up .disp-control-button-label div{transform:skew(-60deg,10deg) scale(.75)}.animation-control-box .disp-control-box .disp-control-button.is-heading-up .disp-control-button-label:before{content:"◯";opacity:.75;position:absolute;transform:skew(40deg,-20deg) scale(2,.75)}.animation-control-box .current-position-box{background-color:#fff;border:1px solid black;font-size:1.6rem;height:36px;line-height:36px;position:relative;text-align:center}.animation-control-box .position-control-box{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr}.animation-control-box .position-control-box .control-button{align-items:center;background-color:#f5f5f5;border:1px solid gray;border-right-width:0;color:#696969;cursor:pointer;display:flex;font-size:1rem;height:24px;justify-content:center;line-height:24px;text-align:center}.animation-control-box .position-control-box .control-button .control-button-label{-webkit-user-select:none;user-select:none}.animation-control-box .position-control-box .control-button.button-first{border-radius:4px 0 0 4px}.animation-control-box .position-control-box .control-button.button-last{border-radius:0 4px 4px 0;border-right-width:1px}.animation-control-box .position-control-box .control-button.button-prev .control-button-label,.animation-control-box .position-control-box .control-button.button-next .control-button-label{transform:scaleX(.75)}.animation-control-box .position-control-box .control-button.button-play .control-button-label{transform:scaleX(1.5)}.animation-control-box .position-control-box .control-button.button-stop{display:none}.animation-control-box .position-control-box .control-button.button-stop .control-button-label{letter-spacing:-.25rem;margin-top:-3px;text-indent:-.25rem;transform:scaleX(6)}.animation-control-box .position-control-box .control-button:hover{background-color:#dcdcdc}.animation-control-box .position-control-box .control-button.disabled{pointer-events:none}.animation-control-box .position-control-box .control-button.disabled .control-button-label{opacity:.4}.animation-control-box .position-control-box.is-playing .button-play{display:none}.animation-control-box .position-control-box.is-playing .button-stop{display:flex}.point-list-box{background-color:#fff;border:1px solid black;display:grid;grid-template-rows:24px 1fr;position:relative}.point-list-header{height:24px}.point-list-steps{height:24px;line-height:24px;padding:0 8px}.point-list-min-button{cursor:pointer;font-size:20px;height:20px;line-height:20px;position:absolute;right:8px;top:2px;transition:transform .3s ease;width:20px}.point-list-min-button.is-closed{transform:rotate(-180deg)}.point-list-table-container{display:grid;grid-template-rows:1fr;max-height:300px;transition:grid-template-rows .3s ease,opacity .3s ease}.point-list-table-container .point-list-table-container-inner{overflow:hidden}.point-list-table-container .point-list-table-container-inner .point-list-table{max-height:300px;overflow-y:auto}.point-list-table-container .point-list-table-container-inner .point-list-table table{font-size:.675rem;width:100%}.point-list-table-container .point-list-table-container-inner .point-list-table thead th{height:unset;padding:0 8px;position:sticky;top:0;z-index:1}.point-list-table-container .point-list-table-container-inner .point-list-table tbody tr:hover,.point-list-table-container .point-list-table-container-inner .point-list-table tbody tr.selected-row{color:#00f;background-color:#e0ffff;cursor:pointer}.point-list-table-container .point-list-table-container-inner .point-list-table tbody tr td{padding:0 8px;text-align:right;--kuc-readonly-table-header-3-width: 60px}.point-list-table-container.is-closed{opacity:0;grid-template-rows:0fr}.record-select{left:36px;position:absolute;top:24px;width:600px;z-index:1}.loader{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:ease-in-out;border:solid 8px;border-color:#666666 rgba(102,102,102,.062745098) rgba(102,102,102,.062745098);border-radius:50%;position:absolute;height:40px;width:40px;z-index:20}@keyframes spin{to{transform:rotate(360deg)}}
/*$vite$:1*/`,document.head.appendChild(Up);const Hp=async(b,p=!1)=>{if(!b.toLowerCase().endsWith(".json"))return[];const a=await hh(b);if(!a.ok)return[];try{const u=await a.json();return p?u:u.records?u.records:[]}catch{return[]}},hh=async b=>await fetch(b),Vf=async b=>{const p=await hh(b);return p.ok?await p.blob():[]};function jp(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}var qp,Gp={exports:{}},fc=(qp||(qp=1,Gp.exports=function(){var b={},p={};function a(u,s,T){if(p[u]=T,u==="index"){var k="var sharedModule = {}; ("+p.shared+")(sharedModule); ("+p.worker+")(sharedModule);",$={};return p.shared($),p.index(b,$),typeof window<"u"&&b.setWorkerUrl(window.URL.createObjectURL(new Blob([k],{type:"text/javascript"}))),b}}return a("shared",0,function(u){function s(i,e,o,l){return new(o||(o=Promise))(function(d,f){function g(I){try{x(l.next(I))}catch(E){f(E)}}function y(I){try{x(l.throw(I))}catch(E){f(E)}}function x(I){var E;I.done?d(I.value):(E=I.value,E instanceof o?E:new o(function(A){A(E)})).then(g,y)}x((l=l.apply(i,e||[])).next())})}function T(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}typeof SuppressedError=="function"&&SuppressedError;var k=$;function $(i,e){this.x=i,this.y=e}$.prototype={clone:function(){return new $(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,e){return this.clone()._rotateAround(i,e)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var e=i.x-this.x,o=i.y-this.y;return e*e+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,e){return Math.atan2(this.x*e-this.y*i,this.x*i+this.y*e)},_matMult:function(i){var e=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=e,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var e=Math.cos(i),o=Math.sin(i),l=o*this.x+e*this.y;return this.x=e*this.x-o*this.y,this.y=l,this},_rotateAround:function(i,e){var o=Math.cos(i),l=Math.sin(i),d=e.y+l*(this.x-e.x)+o*(this.y-e.y);return this.x=e.x+o*(this.x-e.x)-l*(this.y-e.y),this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},$.convert=function(i){return i instanceof $?i:Array.isArray(i)?new $(i[0],i[1]):i};var X=T(k),J=Zt;function Zt(i,e,o,l){this.cx=3*i,this.bx=3*(o-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(l-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=e,this.p2x=o,this.p2y=l}Zt.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,e){if(e===void 0&&(e=1e-6),i<0)return 0;if(i>1)return 1;for(var o=i,l=0;l<8;l++){var d=this.sampleCurveX(o)-i;if(Math.abs(d)<e)return o;var f=this.sampleCurveDerivativeX(o);if(Math.abs(f)<1e-6)break;o-=d/f}var g=0,y=1;for(o=i,l=0;l<20&&(d=this.sampleCurveX(o),!(Math.abs(d-i)<e));l++)i>d?g=o:y=o,o=.5*(y-g)+g;return o},solve:function(i,e){return this.sampleCurveY(this.solveCurveX(i,e))}};var St=T(J);let ge,Ae;function Ye(){return ge==null&&(ge=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ge}function gi(){if(Ae==null&&(Ae=!1,Ye())){const e=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(e){for(let l=0;l<5*5;l++){const d=4*l;e.fillStyle=`rgb(${d},${d+1},${d+2})`,e.fillRect(l%5,Math.floor(l/5),1,1)}const o=e.getImageData(0,0,5,5).data;for(let l=0;l<5*5*4;l++)if(l%4!=3&&o[l]!==l){Ae=!0;break}}}return Ae||!1}function oi(i,e,o,l){const d=new St(i,e,o,l);return f=>d.solve(f)}const ft=oi(.25,.1,.25,1);function wt(i,e,o){return Math.min(o,Math.max(e,i))}function Nt(i,e,o){const l=o-e,d=((i-e)%l+l)%l+e;return d===e?o:d}function Qt(i,...e){for(const o of e)for(const l in o)i[l]=o[l];return i}let Tt=1;function ee(i,e,o){const l={};for(const d in i)l[d]=e.call(this,i[d],d,i);return l}function Ht(i,e,o){const l={};for(const d in i)e.call(this,i[d],d,i)&&(l[d]=i[d]);return l}function jt(i){return Array.isArray(i)?i.map(jt):typeof i=="object"&&i?ee(i,jt):i}const Kt={};function ae(i){Kt[i]||(Kt[i]=!0)}function be(i,e,o){return(o.y-i.y)*(e.x-i.x)>(e.y-i.y)*(o.x-i.x)}function Ve(i){return typeof WorkerGlobalScope<"u"&&i!==void 0&&i instanceof WorkerGlobalScope}let de=null;function Ee(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const bi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function yi(i,e,o,l,d){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const f=new VideoFrame(i,{timestamp:0});try{const g=f==null?void 0:f.format;if(!g||!g.startsWith("BGR")&&!g.startsWith("RGB"))throw new Error(`Unrecognized format ${g}`);const y=g.startsWith("BGR"),x=new Uint8ClampedArray(l*d*4);if(yield f.copyTo(x,function(I,E,A,P,L){const V=4*Math.max(-E,0),N=(Math.max(0,A)-A)*P*4+V,Z=4*P,Y=Math.max(0,E),lt=Math.max(0,A);return{rect:{x:Y,y:lt,width:Math.min(I.width,E+P)-Y,height:Math.min(I.height,A+L)-lt},layout:[{offset:N,stride:Z}]}}(i,e,o,l,d)),y)for(let I=0;I<x.length;I+=4){const E=x[I];x[I]=x[I+2],x[I+2]=E}return x}finally{f.close()}})}let si,Ge;const Yn="AbortError";function vn(){return new Error(Yn)}const sn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function xn(i){return sn.REGISTERED_PROTOCOLS[i.substring(0,i.indexOf("://"))]}const Sa="global-dispatcher";class wn extends Error{constructor(e,o,l,d){super(`AJAXError: ${o} (${e}): ${l}`),this.status=e,this.statusText=o,this.url=l,this.body=d}}const Mo=()=>Ve(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Pn=function(i,e){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){const l=xn(i.url);if(l)return l(i,e);if(Ve(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,targetMapId:Sa},e)}if(!(/^file:/.test(o=i.url)||/^file:/.test(Mo())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(l,d){return s(this,void 0,void 0,function*(){const f=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,cache:l.cache,referrer:Mo(),signal:d.signal});l.type!=="json"||f.headers.has("Accept")||f.headers.set("Accept","application/json");const g=yield fetch(f);if(!g.ok){const I=yield g.blob();throw new wn(g.status,g.statusText,l.url,I)}let y;y=l.type==="arrayBuffer"||l.type==="image"?g.arrayBuffer():l.type==="json"?g.json():g.text();const x=yield y;if(d.signal.aborted)throw vn();return{data:x,cacheControl:g.headers.get("Cache-Control"),expires:g.headers.get("Expires")}})}(i,e);if(Ve(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,mustQueue:!0,targetMapId:Sa},e)}var o;return function(l,d){return new Promise((f,g)=>{var y;const x=new XMLHttpRequest;x.open(l.method||"GET",l.url,!0),l.type!=="arrayBuffer"&&l.type!=="image"||(x.responseType="arraybuffer");for(const I in l.headers)x.setRequestHeader(I,l.headers[I]);l.type==="json"&&(x.responseType="text",!((y=l.headers)===null||y===void 0)&&y.Accept||x.setRequestHeader("Accept","application/json")),x.withCredentials=l.credentials==="include",x.onerror=()=>{g(new Error(x.statusText))},x.onload=()=>{if(!d.signal.aborted)if((x.status>=200&&x.status<300||x.status===0)&&x.response!==null){let I=x.response;if(l.type==="json")try{I=JSON.parse(x.response)}catch(E){return void g(E)}f({data:I,cacheControl:x.getResponseHeader("Cache-Control"),expires:x.getResponseHeader("Expires")})}else{const I=new Blob([x.response],{type:x.getResponseHeader("Content-Type")});g(new wn(x.status,x.statusText,l.url,I))}},d.signal.addEventListener("abort",()=>{x.abort(),g(vn())}),x.send(l.body)})}(i,e)};function Do(i){if(!i||i.indexOf("://")<=0||i.indexOf("data:image/")===0||i.indexOf("blob:")===0)return!0;const e=new URL(i),o=window.location;return e.protocol===o.protocol&&e.host===o.host}function Jo(i,e,o){o[i]&&o[i].indexOf(e)!==-1||(o[i]=o[i]||[],o[i].push(e))}function Br(i,e,o){if(o&&o[i]){const l=o[i].indexOf(e);l!==-1&&o[i].splice(l,1)}}class Qo{constructor(e,o={}){Qt(this,o),this.type=e}}class tr extends Qo{constructor(e,o={}){super("error",Qt({error:e},o))}}class Rr{on(e,o){return this._listeners=this._listeners||{},Jo(e,o,this._listeners),this}off(e,o){return Br(e,o,this._listeners),Br(e,o,this._oneTimeListeners),this}once(e,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},Jo(e,o,this._oneTimeListeners),this):new Promise(l=>this.once(e,l))}fire(e,o){typeof e=="string"&&(e=new Qo(e,o||{}));const l=e.type;if(this.listens(l)){e.target=this;const d=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const y of d)y.call(this,e);const f=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const y of f)Br(l,y,this._oneTimeListeners),y.call(this,e);const g=this._eventedParent;g&&(Qt(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),g.fire(e))}return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,o){return this._eventedParent=e,this._eventedParentData=o,this}}var dt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ln=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function hs(i,e){const o={};for(const l in i)l!=="ref"&&(o[l]=i[l]);return ln.forEach(l=>{l in e&&(o[l]=e[l])}),o}function Se(i,e){if(Array.isArray(i)){if(!Array.isArray(e)||i.length!==e.length)return!1;for(let o=0;o<i.length;o++)if(!Se(i[o],e[o]))return!1;return!0}if(typeof i=="object"&&i!==null&&e!==null){if(typeof e!="object"||Object.keys(i).length!==Object.keys(e).length)return!1;for(const o in i)if(!Se(i[o],e[o]))return!1;return!0}return i===e}function Di(i,e){i.push(e)}function er(i,e,o){Di(o,{command:"addSource",args:[i,e[i]]})}function kn(i,e,o){Di(e,{command:"removeSource",args:[i]}),o[i]=!0}function Po(i,e,o,l){kn(i,o,l),er(i,e,o)}function ds(i,e,o){let l;for(l in i[o])if(Object.prototype.hasOwnProperty.call(i[o],l)&&l!=="data"&&!Se(i[o][l],e[o][l]))return!1;for(l in e[o])if(Object.prototype.hasOwnProperty.call(e[o],l)&&l!=="data"&&!Se(i[o][l],e[o][l]))return!1;return!0}function zo(i,e,o,l,d,f){i=i||{},e=e||{};for(const g in i)Object.prototype.hasOwnProperty.call(i,g)&&(Se(i[g],e[g])||o.push({command:f,args:[l,g,e[g],d]}));for(const g in e)Object.prototype.hasOwnProperty.call(e,g)&&!Object.prototype.hasOwnProperty.call(i,g)&&(Se(i[g],e[g])||o.push({command:f,args:[l,g,e[g],d]}))}function ir(i){return i.id}function $r(i,e){return i[e.id]=e,i}class It{constructor(e,o,l,d){this.message=(e?`${e}: `:"")+l,d&&(this.identifier=d),o!=null&&o.__line__&&(this.line=o.__line__)}}function Lo(i,...e){for(const o of e)for(const l in o)i[l]=o[l];return i}class Wi extends Error{constructor(e,o){super(o),this.message=o,this.key=e}}class zn{constructor(e,o=[]){this.parent=e,this.bindings={};for(const[l,d]of o)this.bindings[l]=d}concat(e){return new zn(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Bo={kind:"null"},Dt={kind:"number"},me={kind:"string"},ie={kind:"boolean"},Ni={kind:"color"},Jn={kind:"object"},pe={kind:"value"},Qn={kind:"collator"},Q={kind:"formatted"},z={kind:"padding"},B={kind:"resolvedImage"},O={kind:"variableAnchorOffsetCollection"};function G(i,e){return{kind:"array",itemType:i,N:e}}function et(i){if(i.kind==="array"){const e=et(i.itemType);return typeof i.N=="number"?`array<${e}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${e}>`}return i.kind}const at=[Bo,Dt,me,ie,Ni,Q,Jn,G(pe),z,B,O];function st(i,e){if(e.kind==="error")return null;if(i.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!st(i.itemType,e.itemType))&&(typeof i.N!="number"||i.N===e.N))return null}else{if(i.kind===e.kind)return null;if(i.kind==="value"){for(const o of at)if(!st(o,e))return null}}return`Expected ${et(i)} but found ${et(e)} instead.`}function it(i,e){return e.some(o=>o.kind===i.kind)}function mt(i,e){return e.some(o=>o==="null"?i===null:o==="array"?Array.isArray(i):o==="object"?i&&!Array.isArray(i)&&typeof i=="object":o===typeof i)}function yt(i,e){return i.kind==="array"&&e.kind==="array"?i.itemType.kind===e.itemType.kind&&typeof i.N=="number":i.kind===e.kind}const ht=.96422,At=.82521,Yt=4/29,Jt=6/29,ve=3*Jt*Jt,Ie=Jt*Jt*Jt,ye=Math.PI/180,Ke=180/Math.PI;function Me(i){return(i%=360)<0&&(i+=360),i}function di([i,e,o,l]){let d,f;const g=De((.2225045*(i=ne(i))+.7168786*(e=ne(e))+.0606169*(o=ne(o)))/1);i===e&&e===o?d=f=g:(d=De((.4360747*i+.3850649*e+.1430804*o)/ht),f=De((.0139322*i+.0971045*e+.7141733*o)/At));const y=116*g-16;return[y<0?0:y,500*(d-g),200*(g-f),l]}function ne(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function De(i){return i>Ie?Math.pow(i,1/3):i/ve+Yt}function Ne([i,e,o,l]){let d=(i+16)/116,f=isNaN(e)?d:d+e/500,g=isNaN(o)?d:d-o/200;return d=1*cn(d),f=ht*cn(f),g=At*cn(g),[li(3.1338561*f-1.6168667*d-.4906146*g),li(-.9787684*f+1.9161415*d+.033454*g),li(.0719453*f-.2289914*d+1.4052427*g),l]}function li(i){return(i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055)<0?0:i>1?1:i}function cn(i){return i>Jt?i*i*i:ve*(i-Yt)}function Ii(i){return parseInt(i.padEnd(2,i),16)/255}function Vr(i,e){return nr(e?i/100:i,0,1)}function nr(i,e,o){return Math.min(Math.max(e,i),o)}function Zc(i){return!i.some(Number.isNaN)}const Wc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Le{constructor(e,o,l,d=1,f=!0){this.r=e,this.g=o,this.b=l,this.a=d,f||(this.r*=d,this.g*=d,this.b*=d,d||this.overwriteGetter("rgb",[e,o,l,d]))}static parse(e){if(e instanceof Le)return e;if(typeof e!="string")return;const o=function(l){if((l=l.toLowerCase().trim())==="transparent")return[0,0,0,0];const d=Wc[l];if(d){const[g,y,x]=d;return[g/255,y/255,x/255,1]}if(l.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(l)){const g=l.length<6?1:2;let y=1;return[Ii(l.slice(y,y+=g)),Ii(l.slice(y,y+=g)),Ii(l.slice(y,y+=g)),Ii(l.slice(y,y+g)||"ff")]}if(l.startsWith("rgb")){const g=l.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(g){const[y,x,I,E,A,P,L,V,N,Z,Y,lt]=g,nt=[E||" ",L||" ",Z].join("");if(nt==="  "||nt==="  /"||nt===",,"||nt===",,,"){const ct=[I,P,N].join(""),pt=ct==="%%%"?100:ct===""?255:0;if(pt){const xt=[nr(+x/pt,0,1),nr(+A/pt,0,1),nr(+V/pt,0,1),Y?Vr(+Y,lt):1];if(Zc(xt))return xt}}return}}const f=l.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(f){const[g,y,x,I,E,A,P,L,V]=f,N=[x||" ",E||" ",P].join("");if(N==="  "||N==="  /"||N===",,"||N===",,,"){const Z=[+y,nr(+I,0,100),nr(+A,0,100),L?Vr(+L,V):1];if(Zc(Z))return function([Y,lt,nt,ct]){function pt(xt){const Rt=(xt+Y/30)%12,te=lt*Math.min(nt,1-nt);return nt-te*Math.max(-1,Math.min(Rt-3,9-Rt,1))}return Y=Me(Y),lt/=100,nt/=100,[pt(0),pt(8),pt(4),ct]}(Z)}}}(e);return o?new Le(...o,!1):void 0}get rgb(){const{r:e,g:o,b:l,a:d}=this,f=d||1/0;return this.overwriteGetter("rgb",[e/f,o/f,l/f,d])}get hcl(){return this.overwriteGetter("hcl",function(e){const[o,l,d,f]=di(e),g=Math.sqrt(l*l+d*d);return[Math.round(1e4*g)?Me(Math.atan2(d,l)*Ke):NaN,g,o,f]}(this.rgb))}get lab(){return this.overwriteGetter("lab",di(this.rgb))}overwriteGetter(e,o){return Object.defineProperty(this,e,{value:o}),o}toString(){const[e,o,l,d]=this.rgb;return`rgba(${[e,o,l].map(f=>Math.round(255*f)).join(",")},${d})`}}Le.black=new Le(0,0,0,1),Le.white=new Le(1,1,1,1),Le.transparent=new Le(0,0,0,0),Le.red=new Le(1,0,0,1);class bl{constructor(e,o,l){this.sensitivity=e?o?"variant":"case":o?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,o){return this.collator.compare(e,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class yl{constructor(e,o,l,d,f){this.text=e,this.image=o,this.scale=l,this.fontStack=d,this.textColor=f}}class un{constructor(e){this.sections=e}static fromString(e){return new un([new yl(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof un?e:un.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class hn{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof hn)return e;if(typeof e=="number")return new hn([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const o of e)if(typeof o!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new hn(e)}}toString(){return JSON.stringify(this.values)}}const gd=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Sn{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Sn)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let o=0;o<e.length;o+=2){const l=e[o],d=e[o+1];if(typeof l!="string"||!gd.has(l)||!Array.isArray(d)||d.length!==2||typeof d[0]!="number"||typeof d[1]!="number")return}return new Sn(e)}}toString(){return JSON.stringify(this.values)}}class dn{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new dn({name:e,available:!1}):null}}function Fr(i,e,o,l){return typeof i=="number"&&i>=0&&i<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof o=="number"&&o>=0&&o<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[i,e,o,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[i,e,o,l]:[i,e,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function or(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof Le||i instanceof bl||i instanceof un||i instanceof hn||i instanceof Sn||i instanceof dn)return!0;if(Array.isArray(i)){for(const e of i)if(!or(e))return!1;return!0}if(typeof i=="object"){for(const e in i)if(!or(i[e]))return!1;return!0}return!1}function ci(i){if(i===null)return Bo;if(typeof i=="string")return me;if(typeof i=="boolean")return ie;if(typeof i=="number")return Dt;if(i instanceof Le)return Ni;if(i instanceof bl)return Qn;if(i instanceof un)return Q;if(i instanceof hn)return z;if(i instanceof Sn)return O;if(i instanceof dn)return B;if(Array.isArray(i)){const e=i.length;let o;for(const l of i){const d=ci(l);if(o){if(o===d)continue;o=pe;break}o=d}return G(o||pe,e)}return Jn}function Ia(i){const e=typeof i;return i===null?"":e==="string"||e==="number"||e==="boolean"?String(i):i instanceof Le||i instanceof un||i instanceof hn||i instanceof Sn||i instanceof dn?i.toString():JSON.stringify(i)}class Ln{constructor(e,o){this.type=e,this.value=o}static parse(e,o){if(e.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!or(e[1]))return o.error("invalid value");const l=e[1];let d=ci(l);const f=o.expectedType;return d.kind!=="array"||d.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(d=f),new Ln(d,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ri{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const ps={string:me,number:Dt,boolean:ie,object:Jn};class Bn{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");let l,d=1;const f=e[0];if(f==="array"){let y,x;if(e.length>2){const I=e[1];if(typeof I!="string"||!(I in ps)||I==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);y=ps[I],d++}else y=pe;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return o.error('The length argument to "array" must be a positive integer literal',2);x=e[2],d++}l=G(y,x)}else{if(!ps[f])throw new Error(`Types doesn't contain name = ${f}`);l=ps[f]}const g=[];for(;d<e.length;d++){const y=o.parse(e[d],d,pe);if(!y)return null;g.push(y)}return new Bn(l,g)}evaluate(e){for(let o=0;o<this.args.length;o++){const l=this.args[o].evaluate(e);if(!st(this.type,ci(l)))return l;if(o===this.args.length-1)throw new ri(`Expected value to be of type ${et(this.type)}, but found ${et(ci(l))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const vl={"to-boolean":ie,"to-color":Ni,"to-number":Dt,"to-string":me};class Rn{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");const l=e[0];if(!vl[l])throw new Error(`Can't parse ${l} as it is not part of the known types`);if((l==="to-boolean"||l==="to-string")&&e.length!==2)return o.error("Expected one argument.");const d=vl[l],f=[];for(let g=1;g<e.length;g++){const y=o.parse(e[g],g,pe);if(!y)return null;f.push(y)}return new Rn(d,f)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let o,l;for(const d of this.args){if(o=d.evaluate(e),l=null,o instanceof Le)return o;if(typeof o=="string"){const f=e.parseColor(o);if(f)return f}else if(Array.isArray(o)&&(l=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Fr(o[0],o[1],o[2],o[3]),!l))return new Le(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new ri(l||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const l of this.args){o=l.evaluate(e);const d=hn.parse(o);if(d)return d}throw new ri(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const l of this.args){o=l.evaluate(e);const d=Sn.parse(o);if(d)return d}throw new ri(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const l of this.args){if(o=l.evaluate(e),o===null)return 0;const d=Number(o);if(!isNaN(d))return d}throw new ri(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return un.fromString(Ia(this.args[0].evaluate(e)));case"resolvedImage":return dn.fromString(Ia(this.args[0].evaluate(e)));default:return Ia(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const bd=["Unknown","Point","LineString","Polygon"];class ms{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?bd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let o=this._parseColorCache[e];return o||(o=this._parseColorCache[e]=Le.parse(e)),o}}class rr{constructor(e,o,l=[],d,f=new zn,g=[]){this.registry=e,this.path=l,this.key=l.map(y=>`[${y}]`).join(""),this.scope=f,this.errors=g,this.expectedType=d,this._isConstant=o}parse(e,o,l,d,f={}){return o?this.concat(o,l,d)._parse(e,f):this._parse(e,f)}_parse(e,o){function l(d,f,g){return g==="assert"?new Bn(f,[d]):g==="coerce"?new Rn(f,[d]):d}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=e[0];if(typeof d!="string")return this.error(`Expression name must be a string, but found ${typeof d} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const f=this.registry[d];if(f){let g=f.parse(e,this);if(!g)return null;if(this.expectedType){const y=this.expectedType,x=g.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||x.kind!=="value")if(y.kind!=="color"&&y.kind!=="formatted"&&y.kind!=="resolvedImage"||x.kind!=="value"&&x.kind!=="string")if(y.kind!=="padding"||x.kind!=="value"&&x.kind!=="number"&&x.kind!=="array")if(y.kind!=="variableAnchorOffsetCollection"||x.kind!=="value"&&x.kind!=="array"){if(this.checkSubtype(y,x))return null}else g=l(g,y,o.typeAnnotation||"coerce");else g=l(g,y,o.typeAnnotation||"coerce");else g=l(g,y,o.typeAnnotation||"coerce");else g=l(g,y,o.typeAnnotation||"assert")}if(!(g instanceof Ln)&&g.type.kind!=="resolvedImage"&&this._isConstant(g)){const y=new ms;try{g=new Ln(g.type,g.evaluate(y))}catch(x){return this.error(x.message),null}}return g}return this.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,o,l){const d=typeof e=="number"?this.path.concat(e):this.path,f=l?this.scope.concat(l):this.scope;return new rr(this.registry,this._isConstant,d,o||null,f,this.errors)}error(e,...o){const l=`${this.key}${o.map(d=>`[${d}]`).join("")}`;this.errors.push(new Wi(l,e))}checkSubtype(e,o){const l=st(e,o);return l&&this.error(l),l}}class Ro{constructor(e,o){this.type=o.type,this.bindings=[].concat(e),this.result=o}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const o of this.bindings)e(o[1]);e(this.result)}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const l=[];for(let f=1;f<e.length-1;f+=2){const g=e[f];if(typeof g!="string")return o.error(`Expected string, but found ${typeof g} instead.`,f);if(/[^a-zA-Z0-9_]/.test(g))return o.error("Variable names must contain only alphanumeric characters or '_'.",f);const y=o.parse(e[f+1],f+1);if(!y)return null;l.push([g,y])}const d=o.parse(e[e.length-1],e.length-1,o.expectedType,l);return d?new Ro(l,d):null}outputDefined(){return this.result.outputDefined()}}class Te{constructor(e,o){this.type=o.type,this.name=e,this.boundExpression=o}static parse(e,o){if(e.length!==2||typeof e[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const l=e[1];return o.scope.has(l)?new Te(l,o.scope.get(l)):o.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class xl{constructor(e,o,l){this.type=e,this.index=o,this.input=l}static parse(e,o){if(e.length!==3)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,Dt),d=o.parse(e[2],2,G(o.expectedType||pe));return l&&d?new xl(d.type.itemType,l,d):null}evaluate(e){const o=this.index.evaluate(e),l=this.input.evaluate(e);if(o<0)throw new ri(`Array index out of bounds: ${o} < 0.`);if(o>=l.length)throw new ri(`Array index out of bounds: ${o} > ${l.length-1}.`);if(o!==Math.floor(o))throw new ri(`Array index must be an integer, but found ${o} instead.`);return l[o]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class wl{constructor(e,o){this.type=ie,this.needle=e,this.haystack=o}static parse(e,o){if(e.length!==3)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,pe),d=o.parse(e[2],2,pe);return l&&d?it(l.type,[ie,me,Dt,Bo,pe])?new wl(l,d):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${et(l.type)} instead`):null}evaluate(e){const o=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(!l)return!1;if(!mt(o,["boolean","string","number","null"]))throw new ri(`Expected first argument to be of type boolean, string, number or null, but found ${et(ci(o))} instead.`);if(!mt(l,["string","array"]))throw new ri(`Expected second argument to be of type array or string, but found ${et(ci(l))} instead.`);return l.indexOf(o)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Or{constructor(e,o,l){this.type=Dt,this.needle=e,this.haystack=o,this.fromIndex=l}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,pe),d=o.parse(e[2],2,pe);if(!l||!d)return null;if(!it(l.type,[ie,me,Dt,Bo,pe]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${et(l.type)} instead`);if(e.length===4){const f=o.parse(e[3],3,Dt);return f?new Or(l,d,f):null}return new Or(l,d)}evaluate(e){const o=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(!mt(o,["boolean","string","number","null"]))throw new ri(`Expected first argument to be of type boolean, string, number or null, but found ${et(ci(o))} instead.`);let d;if(this.fromIndex&&(d=this.fromIndex.evaluate(e)),mt(l,["string"])){const f=l.indexOf(o,d);return f===-1?-1:[...l.slice(0,f)].length}if(mt(l,["array"]))return l.indexOf(o,d);throw new ri(`Expected second argument to be of type array or string, but found ${et(ci(l))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class kl{constructor(e,o,l,d,f,g){this.inputType=e,this.type=o,this.input=l,this.cases=d,this.outputs=f,this.otherwise=g}static parse(e,o){if(e.length<5)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return o.error("Expected an even number of arguments.");let l,d;o.expectedType&&o.expectedType.kind!=="value"&&(d=o.expectedType);const f={},g=[];for(let I=2;I<e.length-1;I+=2){let E=e[I];const A=e[I+1];Array.isArray(E)||(E=[E]);const P=o.concat(I);if(E.length===0)return P.error("Expected at least one branch label.");for(const V of E){if(typeof V!="number"&&typeof V!="string")return P.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return P.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return P.error("Numeric branch labels must be integer values.");if(l){if(P.checkSubtype(l,ci(V)))return null}else l=ci(V);if(f[String(V)]!==void 0)return P.error("Branch labels must be unique.");f[String(V)]=g.length}const L=o.parse(A,I,d);if(!L)return null;d=d||L.type,g.push(L)}const y=o.parse(e[1],1,pe);if(!y)return null;const x=o.parse(e[e.length-1],e.length-1,d);return x?y.type.kind!=="value"&&o.concat(1).checkSubtype(l,y.type)?null:new kl(l,d,y,f,g,x):null}evaluate(e){const o=this.input.evaluate(e);return(ci(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class _s{constructor(e,o,l){this.type=e,this.branches=o,this.otherwise=l}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return o.error("Expected an odd number of arguments.");let l;o.expectedType&&o.expectedType.kind!=="value"&&(l=o.expectedType);const d=[];for(let g=1;g<e.length-1;g+=2){const y=o.parse(e[g],g,ie);if(!y)return null;const x=o.parse(e[g+1],g+1,l);if(!x)return null;d.push([y,x]),l=l||x.type}const f=o.parse(e[e.length-1],e.length-1,l);if(!f)return null;if(!l)throw new Error("Can't infer output type");return new _s(l,d,f)}evaluate(e){for(const[o,l]of this.branches)if(o.evaluate(e))return l.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[o,l]of this.branches)e(o),e(l);e(this.otherwise)}outputDefined(){return this.branches.every(([e,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class Ta{constructor(e,o,l,d){this.type=e,this.input=o,this.beginIndex=l,this.endIndex=d}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,pe),d=o.parse(e[2],2,Dt);if(!l||!d)return null;if(!it(l.type,[G(pe),me,pe]))return o.error(`Expected first argument to be of type array or string, but found ${et(l.type)} instead`);if(e.length===4){const f=o.parse(e[3],3,Dt);return f?new Ta(l.type,l,d,f):null}return new Ta(l.type,l,d)}evaluate(e){const o=this.input.evaluate(e),l=this.beginIndex.evaluate(e);let d;if(this.endIndex&&(d=this.endIndex.evaluate(e)),mt(o,["string"]))return[...o].slice(l,d).join("");if(mt(o,["array"]))return o.slice(l,d);throw new ri(`Expected first argument to be of type array or string, but found ${et(ci(o))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function fs(i,e){const o=i.length-1;let l,d,f=0,g=o,y=0;for(;f<=g;)if(y=Math.floor((f+g)/2),l=i[y],d=i[y+1],l<=e){if(y===o||e<d)return y;f=y+1}else{if(!(l>e))throw new ri("Input is not a number.");g=y-1}return 0}class Nr{constructor(e,o,l){this.type=e,this.input=o,this.labels=[],this.outputs=[];for(const[d,f]of l)this.labels.push(d),this.outputs.push(f)}static parse(e,o){if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");const l=o.parse(e[1],1,Dt);if(!l)return null;const d=[];let f=null;o.expectedType&&o.expectedType.kind!=="value"&&(f=o.expectedType);for(let g=1;g<e.length;g+=2){const y=g===1?-1/0:e[g],x=e[g+1],I=g,E=g+1;if(typeof y!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(d.length&&d[d.length-1][0]>=y)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const A=o.parse(x,E,f);if(!A)return null;f=f||A.type,d.push([y,A])}return new Nr(f,l,d)}evaluate(e){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(e);const d=this.input.evaluate(e);if(d<=o[0])return l[0].evaluate(e);const f=o.length;return d>=o[f-1]?l[f-1].evaluate(e):l[fs(o,d)].evaluate(e)}eachChild(e){e(this.input);for(const o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}var Xc=Kc;function Kc(i,e,o,l){this.cx=3*i,this.bx=3*(o-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(l-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=e,this.p2x=o,this.p2y=l}Kc.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,e){if(e===void 0&&(e=1e-6),i<0)return 0;if(i>1)return 1;for(var o=i,l=0;l<8;l++){var d=this.sampleCurveX(o)-i;if(Math.abs(d)<e)return o;var f=this.sampleCurveDerivativeX(o);if(Math.abs(f)<1e-6)break;o-=d/f}var g=0,y=1;for(o=i,l=0;l<20&&(d=this.sampleCurveX(o),!(Math.abs(d-i)<e));l++)i>d?g=o:y=o,o=.5*(y-g)+g;return o},solve:function(i,e){return this.sampleCurveY(this.solveCurveX(i,e))}};var yd=function(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}(Xc);function ar(i,e,o){return i+o*(e-i)}function gs(i,e,o){return i.map((l,d)=>ar(l,e[d],o))}const Xi={number:ar,color:function(i,e,o,l="rgb"){switch(l){case"rgb":{const[d,f,g,y]=gs(i.rgb,e.rgb,o);return new Le(d,f,g,y,!1)}case"hcl":{const[d,f,g,y]=i.hcl,[x,I,E,A]=e.hcl;let P,L;if(isNaN(d)||isNaN(x))isNaN(d)?isNaN(x)?P=NaN:(P=x,g!==1&&g!==0||(L=I)):(P=d,E!==1&&E!==0||(L=f));else{let lt=x-d;x>d&&lt>180?lt-=360:x<d&&d-x>180&&(lt+=360),P=d+o*lt}const[V,N,Z,Y]=function([lt,nt,ct,pt]){return lt=isNaN(lt)?0:lt*ye,Ne([ct,Math.cos(lt)*nt,Math.sin(lt)*nt,pt])}([P,L??ar(f,I,o),ar(g,E,o),ar(y,A,o)]);return new Le(V,N,Z,Y,!1)}case"lab":{const[d,f,g,y]=Ne(gs(i.lab,e.lab,o));return new Le(d,f,g,y,!1)}}},array:gs,padding:function(i,e,o){return new hn(gs(i.values,e.values,o))},variableAnchorOffsetCollection:function(i,e,o){const l=i.values,d=e.values;if(l.length!==d.length)throw new ri(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${e.toString()}`);const f=[];for(let g=0;g<l.length;g+=2){if(l[g]!==d[g])throw new ri(`Cannot interpolate values containing mismatched anchors. from[${g}]: ${l[g]}, to[${g}]: ${d[g]}`);f.push(l[g]);const[y,x]=l[g+1],[I,E]=d[g+1];f.push([ar(y,I,o),ar(x,E,o)])}return new Sn(f)}};class Ki{constructor(e,o,l,d,f){this.type=e,this.operator=o,this.interpolation=l,this.input=d,this.labels=[],this.outputs=[];for(const[g,y]of f)this.labels.push(g),this.outputs.push(y)}static interpolationFactor(e,o,l,d){let f=0;if(e.name==="exponential")f=bs(o,e.base,l,d);else if(e.name==="linear")f=bs(o,1,l,d);else if(e.name==="cubic-bezier"){const g=e.controlPoints;f=new yd(g[0],g[1],g[2],g[3]).solve(bs(o,1,l,d))}return f}static parse(e,o){let[l,d,f,...g]=e;if(!Array.isArray(d)||d.length===0)return o.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){const I=d[1];if(typeof I!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:I}}else{if(d[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(d[0])}`,1,0);{const I=d.slice(1);if(I.length!==4||I.some(E=>typeof E!="number"||E<0||E>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:I}}}if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(f=o.parse(f,2,Dt),!f)return null;const y=[];let x=null;l==="interpolate-hcl"||l==="interpolate-lab"?x=Ni:o.expectedType&&o.expectedType.kind!=="value"&&(x=o.expectedType);for(let I=0;I<g.length;I+=2){const E=g[I],A=g[I+1],P=I+3,L=I+4;if(typeof E!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(y.length&&y[y.length-1][0]>=E)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',P);const V=o.parse(A,L,x);if(!V)return null;x=x||V.type,y.push([E,V])}return yt(x,Dt)||yt(x,Ni)||yt(x,z)||yt(x,O)||yt(x,G(Dt))?new Ki(x,l,d,f,y):o.error(`Type ${et(x)} is not interpolatable.`)}evaluate(e){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(e);const d=this.input.evaluate(e);if(d<=o[0])return l[0].evaluate(e);const f=o.length;if(d>=o[f-1])return l[f-1].evaluate(e);const g=fs(o,d),y=Ki.interpolationFactor(this.interpolation,d,o[g],o[g+1]),x=l[g].evaluate(e),I=l[g+1].evaluate(e);switch(this.operator){case"interpolate":return Xi[this.type.kind](x,I,y);case"interpolate-hcl":return Xi.color(x,I,y,"hcl");case"interpolate-lab":return Xi.color(x,I,y,"lab")}}eachChild(e){e(this.input);for(const o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function bs(i,e,o,l){const d=l-o,f=i-o;return d===0?0:e===1?f/d:(Math.pow(e,f)-1)/(Math.pow(e,d)-1)}class Ca{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expectected at least one argument.");let l=null;const d=o.expectedType;d&&d.kind!=="value"&&(l=d);const f=[];for(const y of e.slice(1)){const x=o.parse(y,1+f.length,l,void 0,{typeAnnotation:"omit"});if(!x)return null;l=l||x.type,f.push(x)}if(!l)throw new Error("No output type");const g=d&&f.some(y=>st(d,y.type));return new Ca(g?pe:l,f)}evaluate(e){let o,l=null,d=0;for(const f of this.args)if(d++,l=f.evaluate(e),l&&l instanceof dn&&!l.available&&(o||(o=l.name),l=null,d===this.args.length&&(l=o)),l!==null)break;return l}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function Yc(i,e){return i==="=="||i==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function ys(i,e,o,l){return l.compare(e,o)===0}function Ur(i,e,o){const l=i!=="=="&&i!=="!=";return class $f{constructor(f,g,y){this.type=ie,this.lhs=f,this.rhs=g,this.collator=y,this.hasUntypedArgument=f.type.kind==="value"||g.type.kind==="value"}static parse(f,g){if(f.length!==3&&f.length!==4)return g.error("Expected two or three arguments.");const y=f[0];let x=g.parse(f[1],1,pe);if(!x)return null;if(!Yc(y,x.type))return g.concat(1).error(`"${y}" comparisons are not supported for type '${et(x.type)}'.`);let I=g.parse(f[2],2,pe);if(!I)return null;if(!Yc(y,I.type))return g.concat(2).error(`"${y}" comparisons are not supported for type '${et(I.type)}'.`);if(x.type.kind!==I.type.kind&&x.type.kind!=="value"&&I.type.kind!=="value")return g.error(`Cannot compare types '${et(x.type)}' and '${et(I.type)}'.`);l&&(x.type.kind==="value"&&I.type.kind!=="value"?x=new Bn(I.type,[x]):x.type.kind!=="value"&&I.type.kind==="value"&&(I=new Bn(x.type,[I])));let E=null;if(f.length===4){if(x.type.kind!=="string"&&I.type.kind!=="string"&&x.type.kind!=="value"&&I.type.kind!=="value")return g.error("Cannot use collator to compare non-string types.");if(E=g.parse(f[3],3,Qn),!E)return null}return new $f(x,I,E)}evaluate(f){const g=this.lhs.evaluate(f),y=this.rhs.evaluate(f);if(l&&this.hasUntypedArgument){const x=ci(g),I=ci(y);if(x.kind!==I.kind||x.kind!=="string"&&x.kind!=="number")throw new ri(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${x.kind}, ${I.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const x=ci(g),I=ci(y);if(x.kind!=="string"||I.kind!=="string")return e(f,g,y)}return this.collator?o(f,g,y,this.collator.evaluate(f)):e(f,g,y)}eachChild(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)}outputDefined(){return!0}}}const vd=Ur("==",function(i,e,o){return e===o},ys),xd=Ur("!=",function(i,e,o){return e!==o},function(i,e,o,l){return!ys(0,e,o,l)}),Jc=Ur("<",function(i,e,o){return e<o},function(i,e,o,l){return l.compare(e,o)<0}),Qc=Ur(">",function(i,e,o){return e>o},function(i,e,o,l){return l.compare(e,o)>0}),wd=Ur("<=",function(i,e,o){return e<=o},function(i,e,o,l){return l.compare(e,o)<=0}),kd=Ur(">=",function(i,e,o){return e>=o},function(i,e,o,l){return l.compare(e,o)>=0});class Ea{constructor(e,o,l){this.type=Qn,this.locale=l,this.caseSensitive=e,this.diacriticSensitive=o}static parse(e,o){if(e.length!==2)return o.error("Expected one argument.");const l=e[1];if(typeof l!="object"||Array.isArray(l))return o.error("Collator options argument must be an object.");const d=o.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,ie);if(!d)return null;const f=o.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,ie);if(!f)return null;let g=null;return l.locale&&(g=o.parse(l.locale,1,me),!g)?null:new Ea(d,f,g)}evaluate(e){return new bl(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class vs{constructor(e,o,l,d,f){this.type=me,this.number=e,this.locale=o,this.currency=l,this.minFractionDigits=d,this.maxFractionDigits=f}static parse(e,o){if(e.length!==3)return o.error("Expected two arguments.");const l=o.parse(e[1],1,Dt);if(!l)return null;const d=e[2];if(typeof d!="object"||Array.isArray(d))return o.error("NumberFormat options argument must be an object.");let f=null;if(d.locale&&(f=o.parse(d.locale,1,me),!f))return null;let g=null;if(d.currency&&(g=o.parse(d.currency,1,me),!g))return null;let y=null;if(d["min-fraction-digits"]&&(y=o.parse(d["min-fraction-digits"],1,Dt),!y))return null;let x=null;return d["max-fraction-digits"]&&(x=o.parse(d["max-fraction-digits"],1,Dt),!x)?null:new vs(l,f,g,y,x)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class xs{constructor(e){this.type=Q,this.sections=e}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");const l=e[1];if(!Array.isArray(l)&&typeof l=="object")return o.error("First argument must be an image or text section.");const d=[];let f=!1;for(let g=1;g<=e.length-1;++g){const y=e[g];if(f&&typeof y=="object"&&!Array.isArray(y)){f=!1;let x=null;if(y["font-scale"]&&(x=o.parse(y["font-scale"],1,Dt),!x))return null;let I=null;if(y["text-font"]&&(I=o.parse(y["text-font"],1,G(me)),!I))return null;let E=null;if(y["text-color"]&&(E=o.parse(y["text-color"],1,Ni),!E))return null;const A=d[d.length-1];A.scale=x,A.font=I,A.textColor=E}else{const x=o.parse(e[g],1,pe);if(!x)return null;const I=x.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,d.push({content:x,scale:null,font:null,textColor:null})}}return new xs(d)}evaluate(e){return new un(this.sections.map(o=>{const l=o.content.evaluate(e);return ci(l)===B?new yl("",l,null,null,null):new yl(Ia(l),null,o.scale?o.scale.evaluate(e):null,o.font?o.font.evaluate(e).join(","):null,o.textColor?o.textColor.evaluate(e):null)}))}eachChild(e){for(const o of this.sections)e(o.content),o.scale&&e(o.scale),o.font&&e(o.font),o.textColor&&e(o.textColor)}outputDefined(){return!1}}class Sl{constructor(e){this.type=B,this.input=e}static parse(e,o){if(e.length!==2)return o.error("Expected two arguments.");const l=o.parse(e[1],1,me);return l?new Sl(l):o.error("No image name provided.")}evaluate(e){const o=this.input.evaluate(e),l=dn.fromString(o);return l&&e.availableImages&&(l.available=e.availableImages.indexOf(o)>-1),l}eachChild(e){e(this.input)}outputDefined(){return!1}}class Il{constructor(e){this.type=Dt,this.input=e}static parse(e,o){if(e.length!==2)return o.error(`Expected 1 argument, but found ${e.length-1} instead.`);const l=o.parse(e[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${et(l.type)} instead.`):new Il(l):null}evaluate(e){const o=this.input.evaluate(e);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new ri(`Expected value to be of type string or array, but found ${et(ci(o))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const to=8192;function Sd(i,e){const o=(180+i[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,d=Math.pow(2,e.z);return[Math.round(o*d*to),Math.round(l*d*to)]}function Tl(i,e){const o=Math.pow(2,e.z);return[(d=(i[0]/to+e.x)/o,360*d-180),(l=(i[1]/to+e.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90)];var l,d}function Aa(i,e){i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.max(i[2],e[0]),i[3]=Math.max(i[3],e[1])}function sr(i,e){return!(i[0]<=e[0]||i[2]>=e[2]||i[1]<=e[1]||i[3]>=e[3])}function ws(i,e,o){const l=i[0]-e[0],d=i[1]-e[1],f=i[0]-o[0],g=i[1]-o[1];return l*g-f*d==0&&l*f<=0&&d*g<=0}function xe(i,e,o,l){return(d=[l[0]-o[0],l[1]-o[1]])[0]*(f=[e[0]-i[0],e[1]-i[1]])[1]-d[1]*f[0]!=0&&!(!eu(i,e,o,l)||!eu(o,l,i,e));var d,f}function Id(i,e,o){for(const l of o)for(let d=0;d<l.length-1;++d)if(xe(i,e,l[d],l[d+1]))return!0;return!1}function Hr(i,e,o=!1){let l=!1;for(const y of e)for(let x=0;x<y.length-1;x++){if(ws(i,y[x],y[x+1]))return o;(f=y[x])[1]>(d=i)[1]!=(g=y[x+1])[1]>d[1]&&d[0]<(g[0]-f[0])*(d[1]-f[1])/(g[1]-f[1])+f[0]&&(l=!l)}var d,f,g;return l}function Td(i,e){for(const o of e)if(Hr(i,o))return!0;return!1}function tu(i,e){for(const o of i)if(!Hr(o,e))return!1;for(let o=0;o<i.length-1;++o)if(Id(i[o],i[o+1],e))return!1;return!0}function Cd(i,e){for(const o of e)if(tu(i,o))return!0;return!1}function eu(i,e,o,l){const d=l[0]-o[0],f=l[1]-o[1],g=(i[0]-o[0])*f-d*(i[1]-o[1]),y=(e[0]-o[0])*f-d*(e[1]-o[1]);return g>0&&y<0||g<0&&y>0}function Cl(i,e,o){const l=[];for(let d=0;d<i.length;d++){const f=[];for(let g=0;g<i[d].length;g++){const y=Sd(i[d][g],o);Aa(e,y),f.push(y)}l.push(f)}return l}function iu(i,e,o){const l=[];for(let d=0;d<i.length;d++){const f=Cl(i[d],e,o);l.push(f)}return l}function nu(i,e,o,l){if(i[0]<o[0]||i[0]>o[2]){const d=.5*l;let f=i[0]-o[0]>d?-l:o[0]-i[0]>d?l:0;f===0&&(f=i[0]-o[2]>d?-l:o[2]-i[0]>d?l:0),i[0]+=f}Aa(e,i)}function ou(i,e,o,l){const d=Math.pow(2,l.z)*to,f=[l.x*to,l.y*to],g=[];for(const y of i)for(const x of y){const I=[x.x+f[0],x.y+f[1]];nu(I,e,o,d),g.push(I)}return g}function ru(i,e,o,l){const d=Math.pow(2,l.z)*to,f=[l.x*to,l.y*to],g=[];for(const x of i){const I=[];for(const E of x){const A=[E.x+f[0],E.y+f[1]];Aa(e,A),I.push(A)}g.push(I)}if(e[2]-e[0]<=d/2){(y=e)[0]=y[1]=1/0,y[2]=y[3]=-1/0;for(const x of g)for(const I of x)nu(I,e,o,d)}var y;return g}class lr{constructor(e,o){this.type=ie,this.geojson=e,this.geometries=o}static parse(e,o){if(e.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(or(e[1])){const l=e[1];if(l.type==="FeatureCollection"){const d=[];for(const f of l.features){const{type:g,coordinates:y}=f.geometry;g==="Polygon"&&d.push(y),g==="MultiPolygon"&&d.push(...y)}if(d.length)return new lr(l,{type:"MultiPolygon",coordinates:d})}else if(l.type==="Feature"){const d=l.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new lr(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new lr(l,l)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(o,l){const d=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],g=o.canonicalID();if(l.type==="Polygon"){const y=Cl(l.coordinates,f,g),x=ou(o.geometry(),d,f,g);if(!sr(d,f))return!1;for(const I of x)if(!Hr(I,y))return!1}if(l.type==="MultiPolygon"){const y=iu(l.coordinates,f,g),x=ou(o.geometry(),d,f,g);if(!sr(d,f))return!1;for(const I of x)if(!Td(I,y))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(o,l){const d=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],g=o.canonicalID();if(l.type==="Polygon"){const y=Cl(l.coordinates,f,g),x=ru(o.geometry(),d,f,g);if(!sr(d,f))return!1;for(const I of x)if(!tu(I,y))return!1}if(l.type==="MultiPolygon"){const y=iu(l.coordinates,f,g),x=ru(o.geometry(),d,f,g);if(!sr(d,f))return!1;for(const I of x)if(!Cd(I,y))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let au=class{constructor(i=[],e=(o,l)=>o<l?-1:o>l?1:0){if(this.data=i,this.length=this.data.length,this.compare=e,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:e,compare:o}=this,l=e[i];for(;i>0;){const d=i-1>>1,f=e[d];if(o(l,f)>=0)break;e[i]=f,i=d}e[i]=l}_down(i){const{data:e,compare:o}=this,l=this.length>>1,d=e[i];for(;i<l;){let f=1+(i<<1);const g=f+1;if(g<this.length&&o(e[g],e[f])<0&&(f=g),o(e[f],d)>=0)break;e[i]=e[f],i=f}e[i]=d}};function Ed(i,e,o,l,d){su(i,e,o,l||i.length-1,d||Ad)}function su(i,e,o,l,d){for(;l>o;){if(l-o>600){var f=l-o+1,g=e-o+1,y=Math.log(f),x=.5*Math.exp(2*y/3),I=.5*Math.sqrt(y*x*(f-x)/f)*(g-f/2<0?-1:1);su(i,e,Math.max(o,Math.floor(e-g*x/f+I)),Math.min(l,Math.floor(e+(f-g)*x/f+I)),d)}var E=i[e],A=o,P=l;for(Ma(i,o,e),d(i[l],E)>0&&Ma(i,o,l);A<P;){for(Ma(i,A,P),A++,P--;d(i[A],E)<0;)A++;for(;d(i[P],E)>0;)P--}d(i[o],E)===0?Ma(i,o,P):Ma(i,++P,l),P<=e&&(o=P+1),e<=P&&(l=P-1)}}function Ma(i,e,o){var l=i[e];i[e]=i[o],i[o]=l}function Ad(i,e){return i<e?-1:i>e?1:0}function ks(i,e){if(i.length<=1)return[i];const o=[];let l,d;for(const f of i){const g=Dd(f);g!==0&&(f.area=Math.abs(g),d===void 0&&(d=g<0),d===g<0?(l&&o.push(l),l=[f]):l.push(f))}if(l&&o.push(l),e>1)for(let f=0;f<o.length;f++)o[f].length<=e||(Ed(o[f],e,1,o[f].length-1,Md),o[f]=o[f].slice(0,e));return o}function Md(i,e){return e.area-i.area}function Dd(i){let e=0;for(let o,l,d=0,f=i.length,g=f-1;d<f;g=d++)o=i[d],l=i[g],e+=(l.x-o.x)*(o.y+l.y);return e}const lu=1/298.257223563,cu=lu*(2-lu),uu=Math.PI/180;class El{constructor(e){const o=6378.137*uu*1e3,l=Math.cos(e*uu),d=1/(1-cu*(1-l*l)),f=Math.sqrt(d);this.kx=o*f*l,this.ky=o*f*d*(1-cu)}distance(e,o){const l=this.wrap(e[0]-o[0])*this.kx,d=(e[1]-o[1])*this.ky;return Math.sqrt(l*l+d*d)}pointOnLine(e,o){let l,d,f,g,y=1/0;for(let x=0;x<e.length-1;x++){let I=e[x][0],E=e[x][1],A=this.wrap(e[x+1][0]-I)*this.kx,P=(e[x+1][1]-E)*this.ky,L=0;A===0&&P===0||(L=(this.wrap(o[0]-I)*this.kx*A+(o[1]-E)*this.ky*P)/(A*A+P*P),L>1?(I=e[x+1][0],E=e[x+1][1]):L>0&&(I+=A/this.kx*L,E+=P/this.ky*L)),A=this.wrap(o[0]-I)*this.kx,P=(o[1]-E)*this.ky;const V=A*A+P*P;V<y&&(y=V,l=I,d=E,f=x,g=L)}return{point:[l,d],index:f,t:Math.max(0,Math.min(1,g))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function hu(i,e){return e[0]-i[0]}function Ss(i){return i[1]-i[0]+1}function uo(i,e){return i[1]>=i[0]&&i[1]<e}function Al(i,e){if(i[0]>i[1])return[null,null];const o=Ss(i);if(e){if(o===2)return[i,null];const d=Math.floor(o/2);return[[i[0],i[0]+d],[i[0]+d,i[1]]]}if(o===1)return[i,null];const l=Math.floor(o/2)-1;return[[i[0],i[0]+l],[i[0]+l+1,i[1]]]}function Ml(i,e){if(!uo(e,i.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let l=e[0];l<=e[1];++l)Aa(o,i[l]);return o}function Dl(i){const e=[1/0,1/0,-1/0,-1/0];for(const o of i)for(const l of o)Aa(e,l);return e}function du(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function Da(i,e,o){if(!du(i)||!du(e))return NaN;let l=0,d=0;return i[2]<e[0]&&(l=e[0]-i[2]),i[0]>e[2]&&(l=i[0]-e[2]),i[1]>e[3]&&(d=i[1]-e[3]),i[3]<e[1]&&(d=e[1]-i[3]),o.distance([0,0],[l,d])}function cr(i,e,o){const l=o.pointOnLine(e,i);return o.distance(i,l.point)}function Pl(i,e,o,l,d){const f=Math.min(cr(i,[o,l],d),cr(e,[o,l],d)),g=Math.min(cr(o,[i,e],d),cr(l,[i,e],d));return Math.min(f,g)}function Pd(i,e,o,l,d){if(!uo(e,i.length)||!uo(l,o.length))return 1/0;let f=1/0;for(let g=e[0];g<e[1];++g){const y=i[g],x=i[g+1];for(let I=l[0];I<l[1];++I){const E=o[I],A=o[I+1];if(xe(y,x,E,A))return 0;f=Math.min(f,Pl(y,x,E,A,d))}}return f}function zd(i,e,o,l,d){if(!uo(e,i.length)||!uo(l,o.length))return NaN;let f=1/0;for(let g=e[0];g<=e[1];++g)for(let y=l[0];y<=l[1];++y)if(f=Math.min(f,d.distance(i[g],o[y])),f===0)return f;return f}function ei(i,e,o){if(Hr(i,e,!0))return 0;let l=1/0;for(const d of e){const f=d[0],g=d[d.length-1];if(f!==g&&(l=Math.min(l,cr(i,[g,f],o)),l===0))return l;const y=o.pointOnLine(d,i);if(l=Math.min(l,o.distance(i,y.point)),l===0)return l}return l}function Ld(i,e,o,l){if(!uo(e,i.length))return NaN;for(let f=e[0];f<=e[1];++f)if(Hr(i[f],o,!0))return 0;let d=1/0;for(let f=e[0];f<e[1];++f){const g=i[f],y=i[f+1];for(const x of o)for(let I=0,E=x.length,A=E-1;I<E;A=I++){const P=x[A],L=x[I];if(xe(g,y,P,L))return 0;d=Math.min(d,Pl(g,y,P,L,l))}}return d}function _e(i,e){for(const o of i)for(const l of o)if(Hr(l,e,!0))return!0;return!1}function zl(i,e,o,l=1/0){const d=Dl(i),f=Dl(e);if(l!==1/0&&Da(d,f,o)>=l)return l;if(sr(d,f)){if(_e(i,e))return 0}else if(_e(e,i))return 0;let g=1/0;for(const y of i)for(let x=0,I=y.length,E=I-1;x<I;E=x++){const A=y[E],P=y[x];for(const L of e)for(let V=0,N=L.length,Z=N-1;V<N;Z=V++){const Y=L[Z],lt=L[V];if(xe(A,P,Y,lt))return 0;g=Math.min(g,Pl(A,P,Y,lt,o))}}return g}function Fe(i,e,o,l,d,f){if(!f)return;const g=Da(Ml(l,f),d,o);g<e&&i.push([g,f,[0,0]])}function Pe(i,e,o,l,d,f,g){if(!f||!g)return;const y=Da(Ml(l,f),Ml(d,g),o);y<e&&i.push([y,f,g])}function ur(i,e,o,l,d=1/0){let f=Math.min(l.distance(i[0],o[0][0]),d);if(f===0)return f;const g=new au([[0,[0,i.length-1],[0,0]]],hu),y=Dl(o);for(;g.length>0;){const x=g.pop();if(x[0]>=f)continue;const I=x[1],E=e?50:100;if(Ss(I)<=E){if(!uo(I,i.length))return NaN;if(e){const A=Ld(i,I,o,l);if(isNaN(A)||A===0)return A;f=Math.min(f,A)}else for(let A=I[0];A<=I[1];++A){const P=ei(i[A],o,l);if(f=Math.min(f,P),f===0)return 0}}else{const A=Al(I,e);Fe(g,f,l,i,y,A[0]),Fe(g,f,l,i,y,A[1])}}return f}function Pa(i,e,o,l,d,f=1/0){let g=Math.min(f,d.distance(i[0],o[0]));if(g===0)return g;const y=new au([[0,[0,i.length-1],[0,o.length-1]]],hu);for(;y.length>0;){const x=y.pop();if(x[0]>=g)continue;const I=x[1],E=x[2],A=e?50:100,P=l?50:100;if(Ss(I)<=A&&Ss(E)<=P){if(!uo(I,i.length)&&uo(E,o.length))return NaN;let L;if(e&&l)L=Pd(i,I,o,E,d),g=Math.min(g,L);else if(e&&!l){const V=i.slice(I[0],I[1]+1);for(let N=E[0];N<=E[1];++N)if(L=cr(o[N],V,d),g=Math.min(g,L),g===0)return g}else if(!e&&l){const V=o.slice(E[0],E[1]+1);for(let N=I[0];N<=I[1];++N)if(L=cr(i[N],V,d),g=Math.min(g,L),g===0)return g}else L=zd(i,I,o,E,d),g=Math.min(g,L)}else{const L=Al(I,e),V=Al(E,l);Pe(y,g,d,i,o,L[0],V[0]),Pe(y,g,d,i,o,L[0],V[1]),Pe(y,g,d,i,o,L[1],V[0]),Pe(y,g,d,i,o,L[1],V[1])}}return g}function Is(i){return i.type==="MultiPolygon"?i.coordinates.map(e=>({type:"Polygon",coordinates:e})):i.type==="MultiLineString"?i.coordinates.map(e=>({type:"LineString",coordinates:e})):i.type==="MultiPoint"?i.coordinates.map(e=>({type:"Point",coordinates:e})):[i]}class hr{constructor(e,o){this.type=Dt,this.geojson=e,this.geometries=o}static parse(e,o){if(e.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(or(e[1])){const l=e[1];if(l.type==="FeatureCollection")return new hr(l,l.features.map(d=>Is(d.geometry)).flat());if(l.type==="Feature")return new hr(l,Is(l.geometry));if("type"in l&&"coordinates"in l)return new hr(l,Is(l))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(o,l){const d=o.geometry(),f=d.flat().map(x=>Tl([x.x,x.y],o.canonical));if(d.length===0)return NaN;const g=new El(f[0][1]);let y=1/0;for(const x of l){switch(x.type){case"Point":y=Math.min(y,Pa(f,!1,[x.coordinates],!1,g,y));break;case"LineString":y=Math.min(y,Pa(f,!1,x.coordinates,!0,g,y));break;case"Polygon":y=Math.min(y,ur(f,!1,x.coordinates,g,y))}if(y===0)return y}return y}(e,this.geometries);if(e.geometryType()==="LineString")return function(o,l){const d=o.geometry(),f=d.flat().map(x=>Tl([x.x,x.y],o.canonical));if(d.length===0)return NaN;const g=new El(f[0][1]);let y=1/0;for(const x of l){switch(x.type){case"Point":y=Math.min(y,Pa(f,!0,[x.coordinates],!1,g,y));break;case"LineString":y=Math.min(y,Pa(f,!0,x.coordinates,!0,g,y));break;case"Polygon":y=Math.min(y,ur(f,!0,x.coordinates,g,y))}if(y===0)return y}return y}(e,this.geometries);if(e.geometryType()==="Polygon")return function(o,l){const d=o.geometry();if(d.length===0||d[0].length===0)return NaN;const f=ks(d,0).map(x=>x.map(I=>I.map(E=>Tl([E.x,E.y],o.canonical)))),g=new El(f[0][0][0][1]);let y=1/0;for(const x of l)for(const I of f){switch(x.type){case"Point":y=Math.min(y,ur([x.coordinates],!1,I,g,y));break;case"LineString":y=Math.min(y,ur(x.coordinates,!0,I,g,y));break;case"Polygon":y=Math.min(y,zl(I,x.coordinates,g,y))}if(y===0)return y}return y}(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const jr={"==":vd,"!=":xd,">":Qc,"<":Jc,">=":kd,"<=":wd,array:Bn,at:xl,boolean:Bn,case:_s,coalesce:Ca,collator:Ea,format:xs,image:Sl,in:wl,"index-of":Or,interpolate:Ki,"interpolate-hcl":Ki,"interpolate-lab":Ki,length:Il,let:Ro,literal:Ln,match:kl,number:Bn,"number-format":vs,object:Bn,slice:Ta,step:Nr,string:Bn,"to-boolean":Rn,"to-color":Rn,"to-number":Rn,"to-string":Rn,var:Te,within:lr,distance:hr};class In{constructor(e,o,l,d){this.name=e,this.type=o,this._evaluate=l,this.args=d}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,o){const l=e[0],d=In.definitions[l];if(!d)return o.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const f=Array.isArray(d)?d[0]:d.type,g=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,y=g.filter(([I])=>!Array.isArray(I)||I.length===e.length-1);let x=null;for(const[I,E]of y){x=new rr(o.registry,Cs,o.path,null,o.scope);const A=[];let P=!1;for(let L=1;L<e.length;L++){const V=e[L],N=Array.isArray(I)?I[L-1]:I.type,Z=x.parse(V,1+A.length,N);if(!Z){P=!0;break}A.push(Z)}if(!P)if(Array.isArray(I)&&I.length!==A.length)x.error(`Expected ${I.length} arguments, but found ${A.length} instead.`);else{for(let L=0;L<A.length;L++){const V=Array.isArray(I)?I[L]:I.type,N=A[L];x.concat(L+1).checkSubtype(V,N.type)}if(x.errors.length===0)return new In(l,f,E,A)}}if(y.length===1)o.errors.push(...x.errors);else{const I=(y.length?y:g).map(([A])=>{return P=A,Array.isArray(P)?`(${P.map(et).join(", ")})`:`(${et(P.type)}...)`;var P}).join(" | "),E=[];for(let A=1;A<e.length;A++){const P=o.parse(e[A],1+E.length);if(!P)return null;E.push(et(P.type))}o.error(`Expected arguments of type ${I}, but found (${E.join(", ")}) instead.`)}return null}static register(e,o){In.definitions=o;for(const l in o)e[l]=In}}function pu(i,[e,o,l,d]){e=e.evaluate(i),o=o.evaluate(i),l=l.evaluate(i);const f=d?d.evaluate(i):1,g=Fr(e,o,l,f);if(g)throw new ri(g);return new Le(e/255,o/255,l/255,f,!1)}function Ll(i,e){return i in e}function Ts(i,e){const o=e[i];return o===void 0?null:o}function dr(i){return{type:i}}function Cs(i){if(i instanceof Te)return Cs(i.boundExpression);if(i instanceof In&&i.name==="error"||i instanceof Ea||i instanceof lr||i instanceof hr)return!1;const e=i instanceof Rn||i instanceof Bn;let o=!0;return i.eachChild(l=>{o=e?o&&Cs(l):o&&l instanceof Ln}),!!o&&za(i)&&La(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function za(i){if(i instanceof In&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof lr||i instanceof hr)return!1;let e=!0;return i.eachChild(o=>{e&&!za(o)&&(e=!1)}),e}function qr(i){if(i instanceof In&&i.name==="feature-state")return!1;let e=!0;return i.eachChild(o=>{e&&!qr(o)&&(e=!1)}),e}function La(i,e){if(i instanceof In&&e.indexOf(i.name)>=0)return!1;let o=!0;return i.eachChild(l=>{o&&!La(l,e)&&(o=!1)}),o}function Bl(i){return{result:"success",value:i}}function $o(i){return{result:"error",value:i}}function Gr(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function mu(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function Rl(i){return!!i.expression&&i.expression.interpolated}function we(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function Es(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function Bd(i){return i}function _u(i,e){const o=e.type==="color",l=i.stops&&typeof i.stops[0][0]=="object",d=l||!(l||i.property!==void 0),f=i.type||(Rl(e)?"exponential":"interval");if(o||e.type==="padding"){const E=o?Le.parse:hn.parse;(i=Lo({},i)).stops&&(i.stops=i.stops.map(A=>[A[0],E(A[1])])),i.default=E(i.default?i.default:e.default)}if(i.colorSpace&&(g=i.colorSpace)!=="rgb"&&g!=="hcl"&&g!=="lab")throw new Error(`Unknown color space: "${i.colorSpace}"`);var g;let y,x,I;if(f==="exponential")y=Ra;else if(f==="interval")y=gu;else if(f==="categorical"){y=fu,x=Object.create(null);for(const E of i.stops)x[E[0]]=E[1];I=typeof i.stops[0][0]}else{if(f!=="identity")throw new Error(`Unknown function type "${f}"`);y=Rd}if(l){const E={},A=[];for(let V=0;V<i.stops.length;V++){const N=i.stops[V],Z=N[0].zoom;E[Z]===void 0&&(E[Z]={zoom:Z,type:i.type,property:i.property,default:i.default,stops:[]},A.push(Z)),E[Z].stops.push([N[0].value,N[1]])}const P=[];for(const V of A)P.push([E[V].zoom,_u(E[V],e)]);const L={name:"linear"};return{kind:"composite",interpolationType:L,interpolationFactor:Ki.interpolationFactor.bind(void 0,L),zoomStops:P.map(V=>V[0]),evaluate:({zoom:V},N)=>Ra({stops:P,base:i.base},e,V).evaluate(V,N)}}if(d){const E=f==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:E,interpolationFactor:Ki.interpolationFactor.bind(void 0,E),zoomStops:i.stops.map(A=>A[0]),evaluate:({zoom:A})=>y(i,e,A,x,I)}}return{kind:"source",evaluate(E,A){const P=A&&A.properties?A.properties[i.property]:void 0;return P===void 0?Ba(i.default,e.default):y(i,e,P,x,I)}}}function Ba(i,e,o){return i!==void 0?i:e!==void 0?e:o!==void 0?o:void 0}function fu(i,e,o,l,d){return Ba(typeof o===d?l[o]:void 0,i.default,e.default)}function gu(i,e,o){if(we(o)!=="number")return Ba(i.default,e.default);const l=i.stops.length;if(l===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[l-1][0])return i.stops[l-1][1];const d=fs(i.stops.map(f=>f[0]),o);return i.stops[d][1]}function Ra(i,e,o){const l=i.base!==void 0?i.base:1;if(we(o)!=="number")return Ba(i.default,e.default);const d=i.stops.length;if(d===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[d-1][0])return i.stops[d-1][1];const f=fs(i.stops.map(E=>E[0]),o),g=function(E,A,P,L){const V=L-P,N=E-P;return V===0?0:A===1?N/V:(Math.pow(A,N)-1)/(Math.pow(A,V)-1)}(o,l,i.stops[f][0],i.stops[f+1][0]),y=i.stops[f][1],x=i.stops[f+1][1],I=Xi[e.type]||Bd;return typeof y.evaluate=="function"?{evaluate(...E){const A=y.evaluate.apply(void 0,E),P=x.evaluate.apply(void 0,E);if(A!==void 0&&P!==void 0)return I(A,P,g,i.colorSpace)}}:I(y,x,g,i.colorSpace)}function Rd(i,e,o){switch(e.type){case"color":o=Le.parse(o);break;case"formatted":o=un.fromString(o.toString());break;case"resolvedImage":o=dn.fromString(o.toString());break;case"padding":o=hn.parse(o);break;default:we(o)===e.type||e.type==="enum"&&e.values[o]||(o=void 0)}return Ba(o,i.default,e.default)}In.register(jr,{error:[{kind:"error"},[me],(i,[e])=>{throw new ri(e.evaluate(i))}],typeof:[me,[pe],(i,[e])=>et(ci(e.evaluate(i)))],"to-rgba":[G(Dt,4),[Ni],(i,[e])=>{const[o,l,d,f]=e.evaluate(i).rgb;return[255*o,255*l,255*d,f]}],rgb:[Ni,[Dt,Dt,Dt],pu],rgba:[Ni,[Dt,Dt,Dt,Dt],pu],has:{type:ie,overloads:[[[me],(i,[e])=>Ll(e.evaluate(i),i.properties())],[[me,Jn],(i,[e,o])=>Ll(e.evaluate(i),o.evaluate(i))]]},get:{type:pe,overloads:[[[me],(i,[e])=>Ts(e.evaluate(i),i.properties())],[[me,Jn],(i,[e,o])=>Ts(e.evaluate(i),o.evaluate(i))]]},"feature-state":[pe,[me],(i,[e])=>Ts(e.evaluate(i),i.featureState||{})],properties:[Jn,[],i=>i.properties()],"geometry-type":[me,[],i=>i.geometryType()],id:[pe,[],i=>i.id()],zoom:[Dt,[],i=>i.globals.zoom],"heatmap-density":[Dt,[],i=>i.globals.heatmapDensity||0],"line-progress":[Dt,[],i=>i.globals.lineProgress||0],accumulated:[pe,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Dt,dr(Dt),(i,e)=>{let o=0;for(const l of e)o+=l.evaluate(i);return o}],"*":[Dt,dr(Dt),(i,e)=>{let o=1;for(const l of e)o*=l.evaluate(i);return o}],"-":{type:Dt,overloads:[[[Dt,Dt],(i,[e,o])=>e.evaluate(i)-o.evaluate(i)],[[Dt],(i,[e])=>-e.evaluate(i)]]},"/":[Dt,[Dt,Dt],(i,[e,o])=>e.evaluate(i)/o.evaluate(i)],"%":[Dt,[Dt,Dt],(i,[e,o])=>e.evaluate(i)%o.evaluate(i)],ln2:[Dt,[],()=>Math.LN2],pi:[Dt,[],()=>Math.PI],e:[Dt,[],()=>Math.E],"^":[Dt,[Dt,Dt],(i,[e,o])=>Math.pow(e.evaluate(i),o.evaluate(i))],sqrt:[Dt,[Dt],(i,[e])=>Math.sqrt(e.evaluate(i))],log10:[Dt,[Dt],(i,[e])=>Math.log(e.evaluate(i))/Math.LN10],ln:[Dt,[Dt],(i,[e])=>Math.log(e.evaluate(i))],log2:[Dt,[Dt],(i,[e])=>Math.log(e.evaluate(i))/Math.LN2],sin:[Dt,[Dt],(i,[e])=>Math.sin(e.evaluate(i))],cos:[Dt,[Dt],(i,[e])=>Math.cos(e.evaluate(i))],tan:[Dt,[Dt],(i,[e])=>Math.tan(e.evaluate(i))],asin:[Dt,[Dt],(i,[e])=>Math.asin(e.evaluate(i))],acos:[Dt,[Dt],(i,[e])=>Math.acos(e.evaluate(i))],atan:[Dt,[Dt],(i,[e])=>Math.atan(e.evaluate(i))],min:[Dt,dr(Dt),(i,e)=>Math.min(...e.map(o=>o.evaluate(i)))],max:[Dt,dr(Dt),(i,e)=>Math.max(...e.map(o=>o.evaluate(i)))],abs:[Dt,[Dt],(i,[e])=>Math.abs(e.evaluate(i))],round:[Dt,[Dt],(i,[e])=>{const o=e.evaluate(i);return o<0?-Math.round(-o):Math.round(o)}],floor:[Dt,[Dt],(i,[e])=>Math.floor(e.evaluate(i))],ceil:[Dt,[Dt],(i,[e])=>Math.ceil(e.evaluate(i))],"filter-==":[ie,[me,pe],(i,[e,o])=>i.properties()[e.value]===o.value],"filter-id-==":[ie,[pe],(i,[e])=>i.id()===e.value],"filter-type-==":[ie,[me],(i,[e])=>i.geometryType()===e.value],"filter-<":[ie,[me,pe],(i,[e,o])=>{const l=i.properties()[e.value],d=o.value;return typeof l==typeof d&&l<d}],"filter-id-<":[ie,[pe],(i,[e])=>{const o=i.id(),l=e.value;return typeof o==typeof l&&o<l}],"filter->":[ie,[me,pe],(i,[e,o])=>{const l=i.properties()[e.value],d=o.value;return typeof l==typeof d&&l>d}],"filter-id->":[ie,[pe],(i,[e])=>{const o=i.id(),l=e.value;return typeof o==typeof l&&o>l}],"filter-<=":[ie,[me,pe],(i,[e,o])=>{const l=i.properties()[e.value],d=o.value;return typeof l==typeof d&&l<=d}],"filter-id-<=":[ie,[pe],(i,[e])=>{const o=i.id(),l=e.value;return typeof o==typeof l&&o<=l}],"filter->=":[ie,[me,pe],(i,[e,o])=>{const l=i.properties()[e.value],d=o.value;return typeof l==typeof d&&l>=d}],"filter-id->=":[ie,[pe],(i,[e])=>{const o=i.id(),l=e.value;return typeof o==typeof l&&o>=l}],"filter-has":[ie,[pe],(i,[e])=>e.value in i.properties()],"filter-has-id":[ie,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[ie,[G(me)],(i,[e])=>e.value.indexOf(i.geometryType())>=0],"filter-id-in":[ie,[G(pe)],(i,[e])=>e.value.indexOf(i.id())>=0],"filter-in-small":[ie,[me,G(pe)],(i,[e,o])=>o.value.indexOf(i.properties()[e.value])>=0],"filter-in-large":[ie,[me,G(pe)],(i,[e,o])=>function(l,d,f,g){for(;f<=g;){const y=f+g>>1;if(d[y]===l)return!0;d[y]>l?g=y-1:f=y+1}return!1}(i.properties()[e.value],o.value,0,o.value.length-1)],all:{type:ie,overloads:[[[ie,ie],(i,[e,o])=>e.evaluate(i)&&o.evaluate(i)],[dr(ie),(i,e)=>{for(const o of e)if(!o.evaluate(i))return!1;return!0}]]},any:{type:ie,overloads:[[[ie,ie],(i,[e,o])=>e.evaluate(i)||o.evaluate(i)],[dr(ie),(i,e)=>{for(const o of e)if(o.evaluate(i))return!0;return!1}]]},"!":[ie,[ie],(i,[e])=>!e.evaluate(i)],"is-supported-script":[ie,[me],(i,[e])=>{const o=i.globals&&i.globals.isSupportedScript;return!o||o(e.evaluate(i))}],upcase:[me,[me],(i,[e])=>e.evaluate(i).toUpperCase()],downcase:[me,[me],(i,[e])=>e.evaluate(i).toLowerCase()],concat:[me,dr(pe),(i,e)=>e.map(o=>Ia(o.evaluate(i))).join("")],"resolved-locale":[me,[Qn],(i,[e])=>e.evaluate(i).resolvedLocale()]});class As{constructor(e,o){var l;this.expression=e,this._warningHistory={},this._evaluator=new ms,this._defaultValue=o?(l=o).type==="color"&&Es(l.default)?new Le(0,0,0,0):l.type==="color"?Le.parse(l.default)||null:l.type==="padding"?hn.parse(l.default)||null:l.type==="variableAnchorOffsetCollection"?Sn.parse(l.default)||null:l.default===void 0?null:l.default:null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(e,o,l,d,f,g){return this._evaluator.globals=e,this._evaluator.feature=o,this._evaluator.featureState=l,this._evaluator.canonical=d,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=g,this.expression.evaluate(this._evaluator)}evaluate(e,o,l,d,f,g){this._evaluator.globals=e,this._evaluator.feature=o||null,this._evaluator.featureState=l||null,this._evaluator.canonical=d,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=g||null;try{const y=this.expression.evaluate(this._evaluator);if(y==null||typeof y=="number"&&y!=y)return this._defaultValue;if(this._enumValues&&!(y in this._enumValues))throw new ri(`Expected value to be one of ${Object.keys(this._enumValues).map(x=>JSON.stringify(x)).join(", ")}, but found ${JSON.stringify(y)} instead.`);return y}catch(y){return this._warningHistory[y.message]||(this._warningHistory[y.message]=!0),this._defaultValue}}}function $a(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in jr}function Ms(i,e){const o=new rr(jr,Cs,[],e?function(d){const f={color:Ni,string:me,number:Dt,enum:me,boolean:ie,formatted:Q,padding:z,resolvedImage:B,variableAnchorOffsetCollection:O};return d.type==="array"?G(f[d.value]||pe,d.length):f[d.type]}(e):void 0),l=o.parse(i,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?Bl(new As(l,e)):$o(o.errors)}class Va{constructor(e,o){this.kind=e,this._styleExpression=o,this.isStateDependent=e!=="constant"&&!qr(o.expression)}evaluateWithoutErrorHandling(e,o,l,d,f,g){return this._styleExpression.evaluateWithoutErrorHandling(e,o,l,d,f,g)}evaluate(e,o,l,d,f,g){return this._styleExpression.evaluate(e,o,l,d,f,g)}}class Zr{constructor(e,o,l,d){this.kind=e,this.zoomStops=l,this._styleExpression=o,this.isStateDependent=e!=="camera"&&!qr(o.expression),this.interpolationType=d}evaluateWithoutErrorHandling(e,o,l,d,f,g){return this._styleExpression.evaluateWithoutErrorHandling(e,o,l,d,f,g)}evaluate(e,o,l,d,f,g){return this._styleExpression.evaluate(e,o,l,d,f,g)}interpolationFactor(e,o,l){return this.interpolationType?Ki.interpolationFactor(this.interpolationType,e,o,l):0}}function Fa(i,e){const o=Ms(i,e);if(o.result==="error")return o;const l=o.value.expression,d=za(l);if(!d&&!Gr(e))return $o([new Wi("","data expressions not supported")]);const f=La(l,["zoom"]);if(!f&&!mu(e))return $o([new Wi("","zoom expressions not supported")]);const g=Wr(l);return g||f?g instanceof Wi?$o([g]):g instanceof Ki&&!Rl(e)?$o([new Wi("",'"interpolate" expressions cannot be used with this property')]):Bl(g?new Zr(d?"camera":"composite",o.value,g.labels,g instanceof Ki?g.interpolation:void 0):new Va(d?"constant":"source",o.value)):$o([new Wi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Oa{constructor(e,o){this._parameters=e,this._specification=o,Lo(this,_u(this._parameters,this._specification))}static deserialize(e){return new Oa(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Wr(i){let e=null;if(i instanceof Ro)e=Wr(i.result);else if(i instanceof Ca){for(const o of i.args)if(e=Wr(o),e)break}else(i instanceof Nr||i instanceof Ki)&&i.input instanceof In&&i.input.name==="zoom"&&(e=i);return e instanceof Wi||i.eachChild(o=>{const l=Wr(o);l instanceof Wi?e=l:!e&&l?e=new Wi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&l&&e!==l&&(e=new Wi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Ds(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const e of i.slice(1))if(!Ds(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const bu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Xr(i){if(i==null)return{filter:()=>!0,needGeometry:!1};Ds(i)||(i=Ps(i));const e=Ms(i,bu);if(e.result==="error")throw new Error(e.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,l,d)=>e.value.evaluate(o,l,{},d),needGeometry:yu(i)}}function $d(i,e){return i<e?-1:i>e?1:0}function yu(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let e=1;e<i.length;e++)if(yu(i[e]))return!0;return!1}function Ps(i){if(!i)return!0;const e=i[0];return i.length<=1?e!=="any":e==="=="?$l(i[1],i[2],"=="):e==="!="?pr($l(i[1],i[2],"==")):e==="<"||e===">"||e==="<="||e===">="?$l(i[1],i[2],e):e==="any"?(o=i.slice(1),["any"].concat(o.map(Ps))):e==="all"?["all"].concat(i.slice(1).map(Ps)):e==="none"?["all"].concat(i.slice(1).map(Ps).map(pr)):e==="in"?vu(i[1],i.slice(2)):e==="!in"?pr(vu(i[1],i.slice(2))):e==="has"?Na(i[1]):e!=="!has"||pr(Na(i[1]));var o}function $l(i,e,o){switch(i){case"$type":return[`filter-type-${o}`,e];case"$id":return[`filter-id-${o}`,e];default:return[`filter-${o}`,i,e]}}function vu(i,e){if(e.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(o=>typeof o!=typeof e[0])?["filter-in-large",i,["literal",e.sort($d)]]:["filter-in-small",i,["literal",e]]}}function Na(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function pr(i){return["!",i]}function Ui(i){const e=typeof i;if(e==="number"||e==="boolean"||e==="string"||i==null)return JSON.stringify(i);if(Array.isArray(i)){let d="[";for(const f of i)d+=`${Ui(f)},`;return`${d}]`}const o=Object.keys(i).sort();let l="{";for(let d=0;d<o.length;d++)l+=`${JSON.stringify(o[d])}:${Ui(i[o[d]])},`;return`${l}}`}function Ua(i){let e="";for(const o of ln)e+=`/${Ui(i[o])}`;return e}function Vl(i){const e=i.value;return e?[new It(i.key,e,"constants have been deprecated as of v8")]:[]}function ii(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function mr(i){if(Array.isArray(i))return i.map(mr);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const e={};for(const o in i)e[o]=mr(i[o]);return e}return ii(i)}function Pi(i){const e=i.key,o=i.value,l=i.valueSpec||{},d=i.objectElementValidators||{},f=i.style,g=i.styleSpec,y=i.validateSpec;let x=[];const I=we(o);if(I!=="object")return[new It(e,o,`object expected, ${I} found`)];for(const E in o){const A=E.split(".")[0],P=l[A]||l["*"];let L;if(d[A])L=d[A];else if(l[A])L=y;else if(d["*"])L=d["*"];else{if(!l["*"]){x.push(new It(e,o[E],`unknown property "${E}"`));continue}L=y}x=x.concat(L({key:(e&&`${e}.`)+E,value:o[E],valueSpec:P,style:f,styleSpec:g,object:o,objectKey:E,validateSpec:y},o))}for(const E in l)d[E]||l[E].required&&l[E].default===void 0&&o[E]===void 0&&x.push(new It(e,o,`missing required property "${E}"`));return x}function zs(i){const e=i.value,o=i.valueSpec,l=i.style,d=i.styleSpec,f=i.key,g=i.arrayElementValidator||i.validateSpec;if(we(e)!=="array")return[new It(f,e,`array expected, ${we(e)} found`)];if(o.length&&e.length!==o.length)return[new It(f,e,`array length ${o.length} expected, length ${e.length} found`)];if(o["min-length"]&&e.length<o["min-length"])return[new It(f,e,`array length at least ${o["min-length"]} expected, length ${e.length} found`)];let y={type:o.value,values:o.values};d.$version<7&&(y.function=o.function),we(o.value)==="object"&&(y=o.value);let x=[];for(let I=0;I<e.length;I++)x=x.concat(g({array:e,arrayIndex:I,value:e[I],valueSpec:y,validateSpec:i.validateSpec,style:l,styleSpec:d,key:`${f}[${I}]`}));return x}function Ha(i){const e=i.key,o=i.value,l=i.valueSpec;let d=we(o);return d==="number"&&o!=o&&(d="NaN"),d!=="number"?[new It(e,o,`number expected, ${d} found`)]:"minimum"in l&&o<l.minimum?[new It(e,o,`${o} is less than the minimum value ${l.minimum}`)]:"maximum"in l&&o>l.maximum?[new It(e,o,`${o} is greater than the maximum value ${l.maximum}`)]:[]}function xu(i){const e=i.valueSpec,o=ii(i.value.type);let l,d,f,g={};const y=o!=="categorical"&&i.value.property===void 0,x=!y,I=we(i.value.stops)==="array"&&we(i.value.stops[0])==="array"&&we(i.value.stops[0][0])==="object",E=Pi({key:i.key,value:i.value,valueSpec:i.styleSpec.function,validateSpec:i.validateSpec,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(L){if(o==="identity")return[new It(L.key,L.value,'identity function may not have a "stops" property')];let V=[];const N=L.value;return V=V.concat(zs({key:L.key,value:N,valueSpec:L.valueSpec,validateSpec:L.validateSpec,style:L.style,styleSpec:L.styleSpec,arrayElementValidator:A})),we(N)==="array"&&N.length===0&&V.push(new It(L.key,N,"array must have at least one stop")),V},default:function(L){return L.validateSpec({key:L.key,value:L.value,valueSpec:e,validateSpec:L.validateSpec,style:L.style,styleSpec:L.styleSpec})}}});return o==="identity"&&y&&E.push(new It(i.key,i.value,'missing required property "property"')),o==="identity"||i.value.stops||E.push(new It(i.key,i.value,'missing required property "stops"')),o==="exponential"&&i.valueSpec.expression&&!Rl(i.valueSpec)&&E.push(new It(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(x&&!Gr(i.valueSpec)?E.push(new It(i.key,i.value,"property functions not supported")):y&&!mu(i.valueSpec)&&E.push(new It(i.key,i.value,"zoom functions not supported"))),o!=="categorical"&&!I||i.value.property!==void 0||E.push(new It(i.key,i.value,'"property" property is required')),E;function A(L){let V=[];const N=L.value,Z=L.key;if(we(N)!=="array")return[new It(Z,N,`array expected, ${we(N)} found`)];if(N.length!==2)return[new It(Z,N,`array length 2 expected, length ${N.length} found`)];if(I){if(we(N[0])!=="object")return[new It(Z,N,`object expected, ${we(N[0])} found`)];if(N[0].zoom===void 0)return[new It(Z,N,"object stop key must have zoom")];if(N[0].value===void 0)return[new It(Z,N,"object stop key must have value")];if(f&&f>ii(N[0].zoom))return[new It(Z,N[0].zoom,"stop zoom values must appear in ascending order")];ii(N[0].zoom)!==f&&(f=ii(N[0].zoom),d=void 0,g={}),V=V.concat(Pi({key:`${Z}[0]`,value:N[0],valueSpec:{zoom:{}},validateSpec:L.validateSpec,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{zoom:Ha,value:P}}))}else V=V.concat(P({key:`${Z}[0]`,value:N[0],valueSpec:{},validateSpec:L.validateSpec,style:L.style,styleSpec:L.styleSpec},N));return $a(mr(N[1]))?V.concat([new It(`${Z}[1]`,N[1],"expressions are not allowed in function stops.")]):V.concat(L.validateSpec({key:`${Z}[1]`,value:N[1],valueSpec:e,validateSpec:L.validateSpec,style:L.style,styleSpec:L.styleSpec}))}function P(L,V){const N=we(L.value),Z=ii(L.value),Y=L.value!==null?L.value:V;if(l){if(N!==l)return[new It(L.key,Y,`${N} stop domain type must match previous stop domain type ${l}`)]}else l=N;if(N!=="number"&&N!=="string"&&N!=="boolean")return[new It(L.key,Y,"stop domain value must be a number, string, or boolean")];if(N!=="number"&&o!=="categorical"){let lt=`number expected, ${N} found`;return Gr(e)&&o===void 0&&(lt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new It(L.key,Y,lt)]}return o!=="categorical"||N!=="number"||isFinite(Z)&&Math.floor(Z)===Z?o!=="categorical"&&N==="number"&&d!==void 0&&Z<d?[new It(L.key,Y,"stop domain values must appear in ascending order")]:(d=Z,o==="categorical"&&Z in g?[new It(L.key,Y,"stop domain values must be unique")]:(g[Z]=!0,[])):[new It(L.key,Y,`integer expected, found ${Z}`)]}}function Vo(i){const e=(i.expressionContext==="property"?Fa:Ms)(mr(i.value),i.valueSpec);if(e.result==="error")return e.value.map(l=>new It(`${i.key}${l.key}`,i.value,l.message));const o=e.value.expression||e.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!o.outputDefined())return[new It(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!qr(o))return[new It(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!qr(o))return[new It(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!La(o,["zoom","feature-state"]))return[new It(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!za(o))return[new It(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ja(i){const e=i.key,o=i.value,l=i.valueSpec,d=[];return Array.isArray(l.values)?l.values.indexOf(ii(o))===-1&&d.push(new It(e,o,`expected one of [${l.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(l.values).indexOf(ii(o))===-1&&d.push(new It(e,o,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(o)} found`)),d}function _r(i){return Ds(mr(i.value))?Vo(Lo({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):wu(i)}function wu(i){const e=i.value,o=i.key;if(we(e)!=="array")return[new It(o,e,`array expected, ${we(e)} found`)];const l=i.styleSpec;let d,f=[];if(e.length<1)return[new It(o,e,"filter array must have at least 1 element")];switch(f=f.concat(ja({key:`${o}[0]`,value:e[0],valueSpec:l.filter_operator,style:i.style,styleSpec:i.styleSpec})),ii(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&ii(e[1])==="$type"&&f.push(new It(o,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&f.push(new It(o,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(d=we(e[1]),d!=="string"&&f.push(new It(`${o}[1]`,e[1],`string expected, ${d} found`)));for(let g=2;g<e.length;g++)d=we(e[g]),ii(e[1])==="$type"?f=f.concat(ja({key:`${o}[${g}]`,value:e[g],valueSpec:l.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&f.push(new It(`${o}[${g}]`,e[g],`string, number, or boolean expected, ${d} found`));break;case"any":case"all":case"none":for(let g=1;g<e.length;g++)f=f.concat(wu({key:`${o}[${g}]`,value:e[g],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=we(e[1]),e.length!==2?f.push(new It(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):d!=="string"&&f.push(new It(`${o}[1]`,e[1],`string expected, ${d} found`))}return f}function Ls(i,e){const o=i.key,l=i.validateSpec,d=i.style,f=i.styleSpec,g=i.value,y=i.objectKey,x=f[`${e}_${i.layerType}`];if(!x)return[];const I=y.match(/^(.*)-transition$/);if(e==="paint"&&I&&x[I[1]]&&x[I[1]].transition)return l({key:o,value:g,valueSpec:f.transition,style:d,styleSpec:f});const E=i.valueSpec||x[y];if(!E)return[new It(o,g,`unknown property "${y}"`)];let A;if(we(g)==="string"&&Gr(E)&&!E.tokens&&(A=/^{([^}]+)}$/.exec(g)))return[new It(o,g,`"${y}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(A[1])} }\`.`)];const P=[];return i.layerType==="symbol"&&(y==="text-field"&&d&&!d.glyphs&&P.push(new It(o,g,'use of "text-field" requires a style "glyphs" property')),y==="text-font"&&Es(mr(g))&&ii(g.type)==="identity"&&P.push(new It(o,g,'"text-font" does not support identity functions'))),P.concat(l({key:i.key,value:g,valueSpec:E,style:d,styleSpec:f,expressionContext:"property",propertyType:e,propertyKey:y}))}function Fl(i){return Ls(i,"paint")}function Bs(i){return Ls(i,"layout")}function Ol(i){let e=[];const o=i.value,l=i.key,d=i.style,f=i.styleSpec;o.type||o.ref||e.push(new It(l,o,'either "type" or "ref" is required'));let g=ii(o.type);const y=ii(o.ref);if(o.id){const x=ii(o.id);for(let I=0;I<i.arrayIndex;I++){const E=d.layers[I];ii(E.id)===x&&e.push(new It(l,o.id,`duplicate layer id "${o.id}", previously used at line ${E.id.__line__}`))}}if("ref"in o){let x;["type","source","source-layer","filter","layout"].forEach(I=>{I in o&&e.push(new It(l,o[I],`"${I}" is prohibited for ref layers`))}),d.layers.forEach(I=>{ii(I.id)===y&&(x=I)}),x?x.ref?e.push(new It(l,o.ref,"ref cannot reference another ref layer")):g=ii(x.type):e.push(new It(l,o.ref,`ref layer "${y}" not found`))}else if(g!=="background")if(o.source){const x=d.sources&&d.sources[o.source],I=x&&ii(x.type);x?I==="vector"&&g==="raster"?e.push(new It(l,o.source,`layer "${o.id}" requires a raster source`)):I!=="raster-dem"&&g==="hillshade"?e.push(new It(l,o.source,`layer "${o.id}" requires a raster-dem source`)):I==="raster"&&g!=="raster"?e.push(new It(l,o.source,`layer "${o.id}" requires a vector source`)):I!=="vector"||o["source-layer"]?I==="raster-dem"&&g!=="hillshade"?e.push(new It(l,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):g!=="line"||!o.paint||!o.paint["line-gradient"]||I==="geojson"&&x.lineMetrics||e.push(new It(l,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new It(l,o,`layer "${o.id}" must specify a "source-layer"`)):e.push(new It(l,o.source,`source "${o.source}" not found`))}else e.push(new It(l,o,'missing required property "source"'));return e=e.concat(Pi({key:l,value:o,valueSpec:f.layer,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,objectElementValidators:{"*":()=>[],type:()=>i.validateSpec({key:`${l}.type`,value:o.type,valueSpec:f.layer.type,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,object:o,objectKey:"type"}),filter:_r,layout:x=>Pi({layer:o,key:x.key,value:x.value,style:x.style,styleSpec:x.styleSpec,validateSpec:x.validateSpec,objectElementValidators:{"*":I=>Bs(Lo({layerType:g},I))}}),paint:x=>Pi({layer:o,key:x.key,value:x.value,style:x.style,styleSpec:x.styleSpec,validateSpec:x.validateSpec,objectElementValidators:{"*":I=>Fl(Lo({layerType:g},I))}})}})),e}function Fo(i){const e=i.value,o=i.key,l=we(e);return l!=="string"?[new It(o,e,`string expected, ${l} found`)]:[]}const ku={promoteId:function({key:i,value:e}){if(we(e)==="string")return Fo({key:i,value:e});{const o=[];for(const l in e)o.push(...Fo({key:`${i}.${l}`,value:e[l]}));return o}}};function Rs(i){const e=i.value,o=i.key,l=i.styleSpec,d=i.style,f=i.validateSpec;if(!e.type)return[new It(o,e,'"type" is required')];const g=ii(e.type);let y;switch(g){case"vector":case"raster":return y=Pi({key:o,value:e,valueSpec:l[`source_${g.replace("-","_")}`],style:i.style,styleSpec:l,objectElementValidators:ku,validateSpec:f}),y;case"raster-dem":return y=function(x){var I;const E=(I=x.sourceName)!==null&&I!==void 0?I:"",A=x.value,P=x.styleSpec,L=P.source_raster_dem,V=x.style;let N=[];const Z=we(A);if(A===void 0)return N;if(Z!=="object")return N.push(new It("source_raster_dem",A,`object expected, ${Z} found`)),N;const Y=ii(A.encoding)==="custom",lt=["redFactor","greenFactor","blueFactor","baseShift"],nt=x.value.encoding?`"${x.value.encoding}"`:"Default";for(const ct in A)!Y&&lt.includes(ct)?N.push(new It(ct,A[ct],`In "${E}": "${ct}" is only valid when "encoding" is set to "custom". ${nt} encoding found`)):L[ct]?N=N.concat(x.validateSpec({key:ct,value:A[ct],valueSpec:L[ct],validateSpec:x.validateSpec,style:V,styleSpec:P})):N.push(new It(ct,A[ct],`unknown property "${ct}"`));return N}({sourceName:o,value:e,style:i.style,styleSpec:l,validateSpec:f}),y;case"geojson":if(y=Pi({key:o,value:e,valueSpec:l.source_geojson,style:d,styleSpec:l,validateSpec:f,objectElementValidators:ku}),e.cluster)for(const x in e.clusterProperties){const[I,E]=e.clusterProperties[x],A=typeof I=="string"?[I,["accumulated"],["get",x]]:I;y.push(...Vo({key:`${o}.${x}.map`,value:E,validateSpec:f,expressionContext:"cluster-map"})),y.push(...Vo({key:`${o}.${x}.reduce`,value:A,validateSpec:f,expressionContext:"cluster-reduce"}))}return y;case"video":return Pi({key:o,value:e,valueSpec:l.source_video,style:d,validateSpec:f,styleSpec:l});case"image":return Pi({key:o,value:e,valueSpec:l.source_image,style:d,validateSpec:f,styleSpec:l});case"canvas":return[new It(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ja({key:`${o}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:d,validateSpec:f,styleSpec:l})}}function qa(i){const e=i.value,o=i.styleSpec,l=o.light,d=i.style;let f=[];const g=we(e);if(e===void 0)return f;if(g!=="object")return f=f.concat([new It("light",e,`object expected, ${g} found`)]),f;for(const y in e){const x=y.match(/^(.*)-transition$/);f=f.concat(x&&l[x[1]]&&l[x[1]].transition?i.validateSpec({key:y,value:e[y],valueSpec:o.transition,validateSpec:i.validateSpec,style:d,styleSpec:o}):l[y]?i.validateSpec({key:y,value:e[y],valueSpec:l[y],validateSpec:i.validateSpec,style:d,styleSpec:o}):[new It(y,e[y],`unknown property "${y}"`)])}return f}function Nl(i){const e=i.value,o=i.styleSpec,l=o.sky,d=i.style,f=we(e);if(e===void 0)return[];if(f!=="object")return[new It("sky",e,`object expected, ${f} found`)];let g=[];for(const y in e)g=g.concat(l[y]?i.validateSpec({key:y,value:e[y],valueSpec:l[y],style:d,styleSpec:o}):[new It(y,e[y],`unknown property "${y}"`)]);return g}function Ul(i){const e=i.value,o=i.styleSpec,l=o.terrain,d=i.style;let f=[];const g=we(e);if(e===void 0)return f;if(g!=="object")return f=f.concat([new It("terrain",e,`object expected, ${g} found`)]),f;for(const y in e)f=f.concat(l[y]?i.validateSpec({key:y,value:e[y],valueSpec:l[y],validateSpec:i.validateSpec,style:d,styleSpec:o}):[new It(y,e[y],`unknown property "${y}"`)]);return f}function Hl(i){let e=[];const o=i.value,l=i.key;if(Array.isArray(o)){const d=[],f=[];for(const g in o)o[g].id&&d.includes(o[g].id)&&e.push(new It(l,o,`all the sprites' ids must be unique, but ${o[g].id} is duplicated`)),d.push(o[g].id),o[g].url&&f.includes(o[g].url)&&e.push(new It(l,o,`all the sprites' URLs must be unique, but ${o[g].url} is duplicated`)),f.push(o[g].url),e=e.concat(Pi({key:`${l}[${g}]`,value:o[g],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:i.validateSpec}));return e}return Fo({key:l,value:o})}const jl={"*":()=>[],array:zs,boolean:function(i){const e=i.value,o=i.key,l=we(e);return l!=="boolean"?[new It(o,e,`boolean expected, ${l} found`)]:[]},number:Ha,color:function(i){const e=i.key,o=i.value,l=we(o);return l!=="string"?[new It(e,o,`color expected, ${l} found`)]:Le.parse(String(o))?[]:[new It(e,o,`color expected, "${o}" found`)]},constants:Vl,enum:ja,filter:_r,function:xu,layer:Ol,object:Pi,source:Rs,light:qa,sky:Nl,terrain:Ul,projection:function(i){const e=i.value,o=i.styleSpec,l=o.projection,d=i.style,f=we(e);if(e===void 0)return[];if(f!=="object")return[new It("projection",e,`object expected, ${f} found`)];let g=[];for(const y in e)g=g.concat(l[y]?i.validateSpec({key:y,value:e[y],valueSpec:l[y],style:d,styleSpec:o}):[new It(y,e[y],`unknown property "${y}"`)]);return g},string:Fo,formatted:function(i){return Fo(i).length===0?[]:Vo(i)},resolvedImage:function(i){return Fo(i).length===0?[]:Vo(i)},padding:function(i){const e=i.key,o=i.value;if(we(o)==="array"){if(o.length<1||o.length>4)return[new It(e,o,`padding requires 1 to 4 values; ${o.length} values found`)];const l={type:"number"};let d=[];for(let f=0;f<o.length;f++)d=d.concat(i.validateSpec({key:`${e}[${f}]`,value:o[f],validateSpec:i.validateSpec,valueSpec:l}));return d}return Ha({key:e,value:o,valueSpec:{}})},variableAnchorOffsetCollection:function(i){const e=i.key,o=i.value,l=we(o),d=i.styleSpec;if(l!=="array"||o.length<1||o.length%2!=0)return[new It(e,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let f=[];for(let g=0;g<o.length;g+=2)f=f.concat(ja({key:`${e}[${g}]`,value:o[g],valueSpec:d.layout_symbol["text-anchor"]})),f=f.concat(zs({key:`${e}[${g+1}]`,value:o[g+1],valueSpec:{length:2,value:"number"},validateSpec:i.validateSpec,style:i.style,styleSpec:d}));return f},sprite:Hl};function fr(i){const e=i.value,o=i.valueSpec,l=i.styleSpec;return i.validateSpec=fr,o.expression&&Es(ii(e))?xu(i):o.expression&&$a(mr(e))?Vo(i):o.type&&jl[o.type]?jl[o.type](i):Pi(Lo({},i,{valueSpec:o.type?l[o.type]:o}))}function ql(i){const e=i.value,o=i.key,l=Fo(i);return l.length||(e.indexOf("{fontstack}")===-1&&l.push(new It(o,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&l.push(new It(o,e,'"glyphs" url must include a "{range}" token'))),l}function $n(i,e=dt){let o=[];return o=o.concat(fr({key:"",value:i,valueSpec:e.$root,styleSpec:e,style:i,validateSpec:fr,objectElementValidators:{glyphs:ql,"*":()=>[]}})),i.constants&&(o=o.concat(Vl({key:"constants",value:i.constants,style:i,styleSpec:e,validateSpec:fr}))),Su(o)}function Vn(i){return function(e){return i({...e,validateSpec:fr})}}function Su(i){return[].concat(i).sort((e,o)=>e.line-o.line)}function Fn(i){return function(...e){return Su(i.apply(this,e))}}$n.source=Fn(Vn(Rs)),$n.sprite=Fn(Vn(Hl)),$n.glyphs=Fn(Vn(ql)),$n.light=Fn(Vn(qa)),$n.sky=Fn(Vn(Nl)),$n.terrain=Fn(Vn(Ul)),$n.layer=Fn(Vn(Ol)),$n.filter=Fn(Vn(_r)),$n.paintProperty=Fn(Vn(Fl)),$n.layoutProperty=Fn(Vn(Bs));const gr=$n,Iu=gr.light,Vd=gr.sky,Fd=gr.paintProperty,Tu=gr.layoutProperty;function Gl(i,e){let o=!1;if(e&&e.length)for(const l of e)i.fire(new tr(new Error(l.message))),o=!0;return o}class Kr{constructor(e,o,l){const d=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const g=new Int32Array(this.arrayBuffer);e=g[0],this.d=(o=g[1])+2*(l=g[2]);for(let x=0;x<this.d*this.d;x++){const I=g[3+x],E=g[3+x+1];d.push(I===E?null:g.subarray(I,E))}const y=g[3+d.length+1];this.keys=g.subarray(g[3+d.length],y),this.bboxes=g.subarray(y),this.insert=this._insertReadonly}else{this.d=o+2*l;for(let g=0;g<this.d*this.d;g++)d.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=e,this.padding=l,this.scale=o/e,this.uid=0;const f=l/o*e;this.min=-f,this.max=e+f}insert(e,o,l,d,f){this._forEachCell(o,l,d,f,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(o),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(f)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,o,l,d,f,g){this.cells[f].push(g)}query(e,o,l,d,f){const g=this.min,y=this.max;if(e<=g&&o<=g&&y<=l&&y<=d&&!f)return Array.prototype.slice.call(this.keys);{const x=[];return this._forEachCell(e,o,l,d,this._queryCell,x,{},f),x}}_queryCell(e,o,l,d,f,g,y,x){const I=this.cells[f];if(I!==null){const E=this.keys,A=this.bboxes;for(let P=0;P<I.length;P++){const L=I[P];if(y[L]===void 0){const V=4*L;(x?x(A[V+0],A[V+1],A[V+2],A[V+3]):e<=A[V+2]&&o<=A[V+3]&&l>=A[V+0]&&d>=A[V+1])?(y[L]=!0,g.push(E[L])):y[L]=!1}}}}_forEachCell(e,o,l,d,f,g,y,x){const I=this._convertToCellCoord(e),E=this._convertToCellCoord(o),A=this._convertToCellCoord(l),P=this._convertToCellCoord(d);for(let L=I;L<=A;L++)for(let V=E;V<=P;V++){const N=this.d*V+L;if((!x||x(this._convertFromCellCoord(L),this._convertFromCellCoord(V),this._convertFromCellCoord(L+1),this._convertFromCellCoord(V+1)))&&f.call(this,e,o,l,d,N,g,y,x))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,o=3+this.cells.length+1+1;let l=0;for(let g=0;g<this.cells.length;g++)l+=this.cells[g].length;const d=new Int32Array(o+l+this.keys.length+this.bboxes.length);d[0]=this.extent,d[1]=this.n,d[2]=this.padding;let f=o;for(let g=0;g<e.length;g++){const y=e[g];d[3+g]=f,d.set(y,f),f+=y.length}return d[3+e.length]=f,d.set(this.keys,f),f+=this.keys.length,d[3+e.length+1]=f,d.set(this.bboxes,f),f+=this.bboxes.length,d.buffer}static serialize(e,o){const l=e.toArrayBuffer();return o&&o.push(l),{buffer:l}}static deserialize(e){return new Kr(e.buffer)}}const eo={};function $t(i,e,o={}){if(eo[i])throw new Error(`${i} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:i,writeable:!1}),eo[i]={klass:e,omit:o.omit||[],shallow:o.shallow||[]}}$t("Object",Object),$t("TransferableGridIndex",Kr),$t("Color",Le),$t("Error",Error),$t("AJAXError",wn),$t("ResolvedImage",dn),$t("StylePropertyFunction",Oa),$t("StyleExpression",As,{omit:["_evaluator"]}),$t("ZoomDependentExpression",Zr),$t("ZoomConstantExpression",Va),$t("CompoundExpression",In,{omit:["_evaluate"]});for(const i in jr)jr[i]._classRegistryKey||$t(`Expression_${i}`,jr[i]);function Cu(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Ga(i){return i.$name||i.constructor._classRegistryKey}function Eu(i){return!function(e){if(e===null||typeof e!="object")return!1;const o=Ga(e);return!(!o||o==="Object")}(i)&&(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error||Cu(i)||Ee(i)||ArrayBuffer.isView(i)||i instanceof ImageData)}function Za(i,e){if(Eu(i))return(Cu(i)||Ee(i))&&e&&e.push(i),ArrayBuffer.isView(i)&&e&&e.push(i.buffer),i instanceof ImageData&&e&&e.push(i.data.buffer),i;if(Array.isArray(i)){const f=[];for(const g of i)f.push(Za(g,e));return f}if(typeof i!="object")throw new Error("can't serialize object of type "+typeof i);const o=Ga(i);if(!o)throw new Error(`can't serialize object of unregistered class ${i.constructor.name}`);if(!eo[o])throw new Error(`${o} is not registered.`);const{klass:l}=eo[o],d=l.serialize?l.serialize(i,e):{};if(l.serialize){if(e&&d===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const f in i){if(!i.hasOwnProperty(f)||eo[o].omit.indexOf(f)>=0)continue;const g=i[f];d[f]=eo[o].shallow.indexOf(f)>=0?g:Za(g,e)}i instanceof Error&&(d.message=i.message)}if(d.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(d.$name=o),d}function Yr(i){if(Eu(i))return i;if(Array.isArray(i))return i.map(Yr);if(typeof i!="object")throw new Error("can't deserialize object of type "+typeof i);const e=Ga(i)||"Object";if(!eo[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:o}=eo[e];if(!o)throw new Error(`can't deserialize unregistered class ${e}`);if(o.deserialize)return o.deserialize(i);const l=Object.create(o.prototype);for(const d of Object.keys(i)){if(d==="$name")continue;const f=i[d];l[d]=eo[e].shallow.indexOf(d)>=0?f:Yr(f)}return l}class Zl{constructor(){this.first=!0}update(e,o){const l=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=o),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=l,!0))}}const Au=i=>i>=128&&i<=255,Od=i=>i>=6016&&i<=6143,Nd=i=>i>=8192&&i<=8303,Ud=i=>i>=8448&&i<=8527,Hd=i=>i>=8528&&i<=8591,jd=i=>i>=8960&&i<=9215,Jr=i=>i>=9216&&i<=9279,qd=i=>i>=9280&&i<=9311,Gd=i=>i>=9312&&i<=9471,Zd=i=>i>=9632&&i<=9727,Wd=i=>i>=9728&&i<=9983,Mu=i=>i>=11008&&i<=11263,Du=i=>i>=12272&&i<=12287,Wl=i=>i>=12288&&i<=12351,Oo=i=>i>=12448&&i<=12543,Pu=i=>i>=12688&&i<=12703,$s=i=>i>=12736&&i<=12783,Xl=i=>i>=12800&&i<=13055,Vs=i=>i>=13056&&i<=13311,Xd=i=>i>=19904&&i<=19967,Fs=i=>i>=57344&&i<=63743,Qr=i=>i>=65040&&i<=65055,Kl=i=>i>=65072&&i<=65103,Yl=i=>i>=65104&&i<=65135,br=i=>i>=65280&&i<=65519;function Jl(i){for(const e of i)if(r(e.charCodeAt(0)))return!0;return!1}function Kd(i){for(const e of i)if(!_(e.charCodeAt(0)))return!1;return!0}function Os(i){const e=i.map(o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch{return null}}).filter(o=>o);return new RegExp(e.join("|"),"u")}const Yd=Os(["Arab","Dupl","Mong","Ougr","Syrc"]);function _(i){return!Yd.test(String.fromCodePoint(i))}const t=Os(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function r(i){return!(i!==746&&i!==747&&(i<4352||!(Kl(i)&&!(i>=65097&&i<=65103)||Vs(i)||$s(i)||!(!Wl(i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||Xl(i)||Du(i)||Pu(i)||Oo(i)&&i!==12540||!(!br(i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!Yl(i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||Qr(i)||Xd(i)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(i))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(i))||t.test(String.fromCodePoint(i)))))}function c(i){return!(r(i)||function(e){return!!(Au(e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||Nd(e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||Ud(e)||Hd(e)||jd(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||Jr(e)&&e!==9251||qd(e)||Gd(e)||Zd(e)||Wd(e)&&!(e>=9754&&e<=9759)||Mu(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Wl(e)||Oo(e)||Fs(e)||Kl(e)||Yl(e)||br(e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(i))}const h=Os(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function m(i){return h.test(String.fromCodePoint(i))}function v(i,e){return!(!e&&m(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||Od(i))}function w(i){for(const e of i)if(m(e.charCodeAt(0)))return!0;return!1}const S=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(i){this.pluginStatus=i.pluginStatus,this.pluginURL=i.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(i){this.applyArabicShaping=i.applyArabicShaping,this.processBidirectionalText=i.processBidirectionalText,this.processStyledBidirectionalText=i.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class C{constructor(e,o){this.zoom=e,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Zl,this.transition={})}isSupportedScript(e){return function(o,l){for(const d of o)if(!v(d.charCodeAt(0),l))return!1;return!0}(e,S.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,o=e-Math.floor(e),l=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*o}}}class M{constructor(e,o){this.property=e,this.value=o,this.expression=function(l,d){if(Es(l))return new Oa(l,d);if($a(l)){const f=Fa(l,d);if(f.result==="error")throw new Error(f.value.map(g=>`${g.key}: ${g.message}`).join(", "));return f.value}{let f=l;return d.type==="color"&&typeof l=="string"?f=Le.parse(l):d.type!=="padding"||typeof l!="number"&&!Array.isArray(l)?d.type==="variableAnchorOffsetCollection"&&Array.isArray(l)&&(f=Sn.parse(l)):f=hn.parse(l),{kind:"constant",evaluate:()=>f}}}(o===void 0?e.specification.default:o,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,o,l){return this.property.possiblyEvaluate(this,e,o,l)}}class D{constructor(e){this.property=e,this.value=new M(e,void 0)}transitioned(e,o){return new U(this.property,this.value,o,Qt({},e.transition,this.transition),e.now)}untransitioned(){return new U(this.property,this.value,null,{},0)}}class R{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return jt(this._values[e].value.value)}setValue(e,o){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new D(this._values[e].property)),this._values[e].value=new M(this._values[e].property,o===null?void 0:jt(o))}getTransition(e){return jt(this._values[e].transition)}setTransition(e,o){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new D(this._values[e].property)),this._values[e].transition=jt(o)||void 0}serialize(){const e={};for(const o of Object.keys(this._values)){const l=this.getValue(o);l!==void 0&&(e[o]=l);const d=this.getTransition(o);d!==void 0&&(e[`${o}-transition`]=d)}return e}transitioned(e,o){const l=new j(this._properties);for(const d of Object.keys(this._values))l._values[d]=this._values[d].transitioned(e,o._values[d]);return l}untransitioned(){const e=new j(this._properties);for(const o of Object.keys(this._values))e._values[o]=this._values[o].untransitioned();return e}}class U{constructor(e,o,l,d,f){this.property=e,this.value=o,this.begin=f+d.delay||0,this.end=this.begin+d.duration||0,e.specification.transition&&(d.delay||d.duration)&&(this.prior=l)}possiblyEvaluate(e,o,l){const d=e.now||0,f=this.value.possiblyEvaluate(e,o,l),g=this.prior;if(g){if(d>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(d<this.begin)return g.possiblyEvaluate(e,o,l);{const y=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(g.possiblyEvaluate(e,o,l),f,function(x){if(x<=0)return 0;if(x>=1)return 1;const I=x*x,E=I*x;return 4*(x<.5?E:3*(x-I)+E-.75)}(y))}}return f}}class j{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,o,l){const d=new tt(this._properties);for(const f of Object.keys(this._values))d._values[f]=this._values[f].possiblyEvaluate(e,o,l);return d}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class W{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}hasValue(e){return this._values[e].value!==void 0}getValue(e){return jt(this._values[e].value)}setValue(e,o){this._values[e]=new M(this._values[e].property,o===null?void 0:jt(o))}serialize(){const e={};for(const o of Object.keys(this._values)){const l=this.getValue(o);l!==void 0&&(e[o]=l)}return e}possiblyEvaluate(e,o,l){const d=new tt(this._properties);for(const f of Object.keys(this._values))d._values[f]=this._values[f].possiblyEvaluate(e,o,l);return d}}class K{constructor(e,o,l){this.property=e,this.value=o,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,o,l,d){return this.property.evaluate(this.value,this.parameters,e,o,l,d)}}class tt{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class q{constructor(e){this.specification=e}possiblyEvaluate(e,o){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(o)}interpolate(e,o,l){const d=Xi[this.specification.type];return d?d(e,o,l):e}}class H{constructor(e,o){this.specification=e,this.overrides=o}possiblyEvaluate(e,o,l,d){return new K(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(o,null,{},l,d)}:e.expression,o)}interpolate(e,o,l){if(e.value.kind!=="constant"||o.value.kind!=="constant")return e;if(e.value.value===void 0||o.value.value===void 0)return new K(this,{kind:"constant",value:void 0},e.parameters);const d=Xi[this.specification.type];if(d){const f=d(e.value.value,o.value.value,l);return new K(this,{kind:"constant",value:f},e.parameters)}return e}evaluate(e,o,l,d,f,g){return e.kind==="constant"?e.value:e.evaluate(o,l,d,f,g)}}class ot extends H{possiblyEvaluate(e,o,l,d){if(e.value===void 0)return new K(this,{kind:"constant",value:void 0},o);if(e.expression.kind==="constant"){const f=e.expression.evaluate(o,null,{},l,d),g=e.property.specification.type==="resolvedImage"&&typeof f!="string"?f.name:f,y=this._calculate(g,g,g,o);return new K(this,{kind:"constant",value:y},o)}if(e.expression.kind==="camera"){const f=this._calculate(e.expression.evaluate({zoom:o.zoom-1}),e.expression.evaluate({zoom:o.zoom}),e.expression.evaluate({zoom:o.zoom+1}),o);return new K(this,{kind:"constant",value:f},o)}return new K(this,e.expression,o)}evaluate(e,o,l,d,f,g){if(e.kind==="source"){const y=e.evaluate(o,l,d,f,g);return this._calculate(y,y,y,o)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(o.zoom)-1},l,d),e.evaluate({zoom:Math.floor(o.zoom)},l,d),e.evaluate({zoom:Math.floor(o.zoom)+1},l,d),o):e.value}_calculate(e,o,l,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:e,to:o}:{from:l,to:o}}interpolate(e){return e}}class rt{constructor(e){this.specification=e}possiblyEvaluate(e,o,l,d){if(e.value!==void 0){if(e.expression.kind==="constant"){const f=e.expression.evaluate(o,null,{},l,d);return this._calculate(f,f,f,o)}return this._calculate(e.expression.evaluate(new C(Math.floor(o.zoom-1),o)),e.expression.evaluate(new C(Math.floor(o.zoom),o)),e.expression.evaluate(new C(Math.floor(o.zoom+1),o)),o)}}_calculate(e,o,l,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:e,to:o}:{from:l,to:o}}interpolate(e){return e}}class ut{constructor(e){this.specification=e}possiblyEvaluate(e,o,l,d){return!!e.expression.evaluate(o,null,{},l,d)}interpolate(){return!1}}class _t{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in e){const l=e[o];l.specification.overridable&&this.overridableProperties.push(o);const d=this.defaultPropertyValues[o]=new M(l,void 0),f=this.defaultTransitionablePropertyValues[o]=new D(l);this.defaultTransitioningPropertyValues[o]=f.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=d.possiblyEvaluate({})}}}$t("DataDrivenProperty",H),$t("DataConstantProperty",q),$t("CrossFadedDataDrivenProperty",ot),$t("CrossFadedProperty",rt),$t("ColorRampProperty",ut);const kt="-transition";class Ct extends Rr{constructor(e,o){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),o.layout&&(this._unevaluatedLayout=new W(o.layout)),o.paint)){this._transitionablePaint=new R(o.paint);for(const l in e.paint)this.setPaintProperty(l,e.paint[l],{validate:!1});for(const l in e.layout)this.setLayoutProperty(l,e.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new tt(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,o,l={}){o!=null&&this._validate(Tu,`layers.${this.id}.layout.${e}`,e,o,l)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,o):this.visibility=o)}getPaintProperty(e){return e.endsWith(kt)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,o,l={}){if(o!=null&&this._validate(Fd,`layers.${this.id}.paint.${e}`,e,o,l))return!1;if(e.endsWith(kt))return this._transitionablePaint.setTransition(e.slice(0,-11),o||void 0),!1;{const d=this._transitionablePaint._values[e],f=d.property.specification["property-type"]==="cross-faded-data-driven",g=d.value.isDataDriven(),y=d.value;this._transitionablePaint.setValue(e,o),this._handleSpecialPaintPropertyUpdate(e);const x=this._transitionablePaint._values[e].value;return x.isDataDriven()||g||f||this._handleOverridablePaintPropertyUpdate(e,y,x)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,o,l){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,o){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,o)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Ht(e,(o,l)=>!(o===void 0||l==="layout"&&!Object.keys(o).length||l==="paint"&&!Object.keys(o).length))}_validate(e,o,l,d,f={}){return(!f||f.validate!==!1)&&Gl(this,e.call(gr,{key:o,layerType:this.type,objectKey:l,value:d,styleSpec:dt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const o=this.paint.get(e);if(o instanceof K&&Gr(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const Vt={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Et{constructor(e,o){this._structArray=e,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class vt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,o){return e._trim(),o&&(e.isTransferred=!0,o.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const o=Object.create(this.prototype);return o.arrayBuffer=e.arrayBuffer,o.length=e.length,o.capacity=e.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Pt(i,e=1){let o=0,l=0;return{members:i.map(d=>{const f=Vt[d.type].BYTES_PER_ELEMENT,g=o=le(o,Math.max(e,f)),y=d.components||1;return l=Math.max(l,f),o+=f*y,{name:d.name,type:d.type,components:y,offset:g}}),size:le(o,Math.max(l,e)),alignment:e}}function le(i,e){return Math.ceil(i/e)*e}class Mt extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const d=2*e;return this.int16[d+0]=o,this.int16[d+1]=l,e}}Mt.prototype.bytesPerElement=4,$t("StructArrayLayout2i4",Mt);class Lt extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,l)}emplace(e,o,l,d){const f=3*e;return this.int16[f+0]=o,this.int16[f+1]=l,this.int16[f+2]=d,e}}Lt.prototype.bytesPerElement=6,$t("StructArrayLayout3i6",Lt);class oe extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,d){const f=this.length;return this.resize(f+1),this.emplace(f,e,o,l,d)}emplace(e,o,l,d,f){const g=4*e;return this.int16[g+0]=o,this.int16[g+1]=l,this.int16[g+2]=d,this.int16[g+3]=f,e}}oe.prototype.bytesPerElement=8,$t("StructArrayLayout4i8",oe);class Ue extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,d,f,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,o,l,d,f,g)}emplace(e,o,l,d,f,g,y){const x=6*e;return this.int16[x+0]=o,this.int16[x+1]=l,this.int16[x+2]=d,this.int16[x+3]=f,this.int16[x+4]=g,this.int16[x+5]=y,e}}Ue.prototype.bytesPerElement=12,$t("StructArrayLayout2i4i12",Ue);class he extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,d,f,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,o,l,d,f,g)}emplace(e,o,l,d,f,g,y){const x=4*e,I=8*e;return this.int16[x+0]=o,this.int16[x+1]=l,this.uint8[I+4]=d,this.uint8[I+5]=f,this.uint8[I+6]=g,this.uint8[I+7]=y,e}}he.prototype.bytesPerElement=8,$t("StructArrayLayout2i4ub8",he);class fe extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const d=2*e;return this.float32[d+0]=o,this.float32[d+1]=l,e}}fe.prototype.bytesPerElement=8,$t("StructArrayLayout2f8",fe);class He extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,d,f,g,y,x,I,E){const A=this.length;return this.resize(A+1),this.emplace(A,e,o,l,d,f,g,y,x,I,E)}emplace(e,o,l,d,f,g,y,x,I,E,A){const P=10*e;return this.uint16[P+0]=o,this.uint16[P+1]=l,this.uint16[P+2]=d,this.uint16[P+3]=f,this.uint16[P+4]=g,this.uint16[P+5]=y,this.uint16[P+6]=x,this.uint16[P+7]=I,this.uint16[P+8]=E,this.uint16[P+9]=A,e}}He.prototype.bytesPerElement=20,$t("StructArrayLayout10ui20",He);class Ti extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,d,f,g,y,x,I,E,A,P){const L=this.length;return this.resize(L+1),this.emplace(L,e,o,l,d,f,g,y,x,I,E,A,P)}emplace(e,o,l,d,f,g,y,x,I,E,A,P,L){const V=12*e;return this.int16[V+0]=o,this.int16[V+1]=l,this.int16[V+2]=d,this.int16[V+3]=f,this.uint16[V+4]=g,this.uint16[V+5]=y,this.uint16[V+6]=x,this.uint16[V+7]=I,this.int16[V+8]=E,this.int16[V+9]=A,this.int16[V+10]=P,this.int16[V+11]=L,e}}Ti.prototype.bytesPerElement=24,$t("StructArrayLayout4i4ui4i24",Ti);class Tn extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,l)}emplace(e,o,l,d){const f=3*e;return this.float32[f+0]=o,this.float32[f+1]=l,this.float32[f+2]=d,e}}Tn.prototype.bytesPerElement=12,$t("StructArrayLayout3f12",Tn);class je extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint32[1*e+0]=o,e}}je.prototype.bytesPerElement=4,$t("StructArrayLayout1ul4",je);class Hi extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,d,f,g,y,x,I){const E=this.length;return this.resize(E+1),this.emplace(E,e,o,l,d,f,g,y,x,I)}emplace(e,o,l,d,f,g,y,x,I,E){const A=10*e,P=5*e;return this.int16[A+0]=o,this.int16[A+1]=l,this.int16[A+2]=d,this.int16[A+3]=f,this.int16[A+4]=g,this.int16[A+5]=y,this.uint32[P+3]=x,this.uint16[A+8]=I,this.uint16[A+9]=E,e}}Hi.prototype.bytesPerElement=20,$t("StructArrayLayout6i1ul2ui20",Hi);class zi extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,d,f,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,o,l,d,f,g)}emplace(e,o,l,d,f,g,y){const x=6*e;return this.int16[x+0]=o,this.int16[x+1]=l,this.int16[x+2]=d,this.int16[x+3]=f,this.int16[x+4]=g,this.int16[x+5]=y,e}}zi.prototype.bytesPerElement=12,$t("StructArrayLayout2i2i2i12",zi);class Ci extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,e,o,l,d,f)}emplace(e,o,l,d,f,g){const y=4*e,x=8*e;return this.float32[y+0]=o,this.float32[y+1]=l,this.float32[y+2]=d,this.int16[x+6]=f,this.int16[x+7]=g,e}}Ci.prototype.bytesPerElement=16,$t("StructArrayLayout2f1f2i16",Ci);class Ei extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,d,f,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,o,l,d,f,g)}emplace(e,o,l,d,f,g,y){const x=16*e,I=4*e,E=8*e;return this.uint8[x+0]=o,this.uint8[x+1]=l,this.float32[I+1]=d,this.float32[I+2]=f,this.int16[E+6]=g,this.int16[E+7]=y,e}}Ei.prototype.bytesPerElement=16,$t("StructArrayLayout2ub2f2i16",Ei);class pn extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,l)}emplace(e,o,l,d){const f=3*e;return this.uint16[f+0]=o,this.uint16[f+1]=l,this.uint16[f+2]=d,e}}pn.prototype.bytesPerElement=6,$t("StructArrayLayout3ui6",pn);class No extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,d,f,g,y,x,I,E,A,P,L,V,N,Z,Y){const lt=this.length;return this.resize(lt+1),this.emplace(lt,e,o,l,d,f,g,y,x,I,E,A,P,L,V,N,Z,Y)}emplace(e,o,l,d,f,g,y,x,I,E,A,P,L,V,N,Z,Y,lt){const nt=24*e,ct=12*e,pt=48*e;return this.int16[nt+0]=o,this.int16[nt+1]=l,this.uint16[nt+2]=d,this.uint16[nt+3]=f,this.uint32[ct+2]=g,this.uint32[ct+3]=y,this.uint32[ct+4]=x,this.uint16[nt+10]=I,this.uint16[nt+11]=E,this.uint16[nt+12]=A,this.float32[ct+7]=P,this.float32[ct+8]=L,this.uint8[pt+36]=V,this.uint8[pt+37]=N,this.uint8[pt+38]=Z,this.uint32[ct+10]=Y,this.int16[nt+22]=lt,e}}No.prototype.bytesPerElement=48,$t("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",No);class ta extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,d,f,g,y,x,I,E,A,P,L,V,N,Z,Y,lt,nt,ct,pt,xt,Rt,te,Bt,zt,Wt,Ut){const Ft=this.length;return this.resize(Ft+1),this.emplace(Ft,e,o,l,d,f,g,y,x,I,E,A,P,L,V,N,Z,Y,lt,nt,ct,pt,xt,Rt,te,Bt,zt,Wt,Ut)}emplace(e,o,l,d,f,g,y,x,I,E,A,P,L,V,N,Z,Y,lt,nt,ct,pt,xt,Rt,te,Bt,zt,Wt,Ut,Ft){const gt=32*e,Xt=16*e;return this.int16[gt+0]=o,this.int16[gt+1]=l,this.int16[gt+2]=d,this.int16[gt+3]=f,this.int16[gt+4]=g,this.int16[gt+5]=y,this.int16[gt+6]=x,this.int16[gt+7]=I,this.uint16[gt+8]=E,this.uint16[gt+9]=A,this.uint16[gt+10]=P,this.uint16[gt+11]=L,this.uint16[gt+12]=V,this.uint16[gt+13]=N,this.uint16[gt+14]=Z,this.uint16[gt+15]=Y,this.uint16[gt+16]=lt,this.uint16[gt+17]=nt,this.uint16[gt+18]=ct,this.uint16[gt+19]=pt,this.uint16[gt+20]=xt,this.uint16[gt+21]=Rt,this.uint16[gt+22]=te,this.uint32[Xt+12]=Bt,this.float32[Xt+13]=zt,this.float32[Xt+14]=Wt,this.uint16[gt+30]=Ut,this.uint16[gt+31]=Ft,e}}ta.prototype.bytesPerElement=64,$t("StructArrayLayout8i15ui1ul2f2ui64",ta);class ho extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.float32[1*e+0]=o,e}}ho.prototype.bytesPerElement=4,$t("StructArrayLayout1f4",ho);class po extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,l)}emplace(e,o,l,d){const f=3*e;return this.uint16[6*e+0]=o,this.float32[f+1]=l,this.float32[f+2]=d,e}}po.prototype.bytesPerElement=12,$t("StructArrayLayout1ui2f12",po);class ea extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,l)}emplace(e,o,l,d){const f=4*e;return this.uint32[2*e+0]=o,this.uint16[f+2]=l,this.uint16[f+3]=d,e}}ea.prototype.bytesPerElement=8,$t("StructArrayLayout1ul2ui8",ea);class Wa extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const d=2*e;return this.uint16[d+0]=o,this.uint16[d+1]=l,e}}Wa.prototype.bytesPerElement=4,$t("StructArrayLayout2ui4",Wa);class Yi extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint16[1*e+0]=o,e}}Yi.prototype.bytesPerElement=2,$t("StructArrayLayout1ui2",Yi);class mn extends vt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,d){const f=this.length;return this.resize(f+1),this.emplace(f,e,o,l,d)}emplace(e,o,l,d,f){const g=4*e;return this.float32[g+0]=o,this.float32[g+1]=l,this.float32[g+2]=d,this.float32[g+3]=f,e}}mn.prototype.bytesPerElement=16,$t("StructArrayLayout4f16",mn);class mo extends Et{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new X(this.anchorPointX,this.anchorPointY)}}mo.prototype.size=20;class yr extends Hi{get(e){return new mo(this,e)}}$t("CollisionBoxArray",yr);class Li extends Et{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Li.prototype.size=48;class Ai extends No{get(e){return new Li(this,e)}}$t("PlacedSymbolArray",Ai);class Ji extends Et{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ji.prototype.size=64;class Je extends ta{get(e){return new Ji(this,e)}}$t("SymbolInstanceArray",Je);class vr extends ho{getoffsetX(e){return this.float32[1*e+0]}}$t("GlyphOffsetArray",vr);class Ns extends Lt{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}$t("SymbolLineVertexArray",Ns);class Us extends Et{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Us.prototype.size=12;class zu extends po{get(e){return new Us(this,e)}}$t("TextAnchorOffsetArray",zu);class Lu extends Et{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Lu.prototype.size=8;class Bu extends ea{get(e){return new Lu(this,e)}}$t("FeatureIndexArray",Bu);class Uo extends Mt{}class Ru extends Mt{}class $u extends Mt{}class Vu extends Ue{}class Ql extends he{}class Fu extends fe{}class Ho extends He{}class sg extends Ti{}class lg extends Tn{}class cg extends je{}class Wm extends zi{}class ug extends Ei{}class Hs extends pn{}class Jd extends Wa{}const hg=Pt([{name:"a_pos",components:2,type:"Int16"}],4),{members:dg}=hg;class ji{constructor(e=[]){this.segments=e}prepareSegment(e,o,l,d){let f=this.segments[this.segments.length-1];return e>ji.MAX_VERTEX_ARRAY_LENGTH&&ae(`Max vertices per segment is ${ji.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!f||f.vertexLength+e>ji.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==d)&&(f={vertexOffset:o.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},d!==void 0&&(f.sortKey=d),this.segments.push(f)),f}get(){return this.segments}destroy(){for(const e of this.segments)for(const o in e.vaos)e.vaos[o].destroy()}static simpleSegment(e,o,l,d){return new ji([{vertexOffset:e,primitiveOffset:o,vertexLength:l,primitiveLength:d,vaos:{},sortKey:0}])}}function Xm(i,e){return 256*(i=wt(Math.floor(i),0,255))+wt(Math.floor(e),0,255)}ji.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$t("SegmentVector",ji);const Ou=Pt([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Nu={exports:{}},Km={exports:{}};Km.exports=function(i,e){var o,l,d,f,g,y,x,I;for(l=i.length-(o=3&i.length),d=e,g=3432918353,y=461845907,I=0;I<l;)x=255&i.charCodeAt(I)|(255&i.charCodeAt(++I))<<8|(255&i.charCodeAt(++I))<<16|(255&i.charCodeAt(++I))<<24,++I,d=27492+(65535&(f=5*(65535&(d=(d^=x=(65535&(x=(x=(65535&x)*g+(((x>>>16)*g&65535)<<16)&4294967295)<<15|x>>>17))*y+(((x>>>16)*y&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(f>>>16)&65535)<<16);switch(x=0,o){case 3:x^=(255&i.charCodeAt(I+2))<<16;case 2:x^=(255&i.charCodeAt(I+1))<<8;case 1:d^=x=(65535&(x=(x=(65535&(x^=255&i.charCodeAt(I)))*g+(((x>>>16)*g&65535)<<16)&4294967295)<<15|x>>>17))*y+(((x>>>16)*y&65535)<<16)&4294967295}return d^=i.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0};var pg=Km.exports,Ym={exports:{}};Ym.exports=function(i,e){for(var o,l=i.length,d=e^l,f=0;l>=4;)o=1540483477*(65535&(o=255&i.charCodeAt(f)|(255&i.charCodeAt(++f))<<8|(255&i.charCodeAt(++f))<<16|(255&i.charCodeAt(++f))<<24))+((1540483477*(o>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),l-=4,++f;switch(l){case 3:d^=(255&i.charCodeAt(f+2))<<16;case 2:d^=(255&i.charCodeAt(f+1))<<8;case 1:d=1540483477*(65535&(d^=255&i.charCodeAt(f)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0};var Jm=pg,mg=Ym.exports;Nu.exports=Jm,Nu.exports.murmur3=Jm,Nu.exports.murmur2=mg;var Qd=T(Nu.exports);class Uu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,o,l,d){this.ids.push(Qm(e)),this.positions.push(o,l,d)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=Qm(e);let l=0,d=this.ids.length-1;for(;l<d;){const g=l+d>>1;this.ids[g]>=o?d=g:l=g+1}const f=[];for(;this.ids[l]===o;)f.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return f}static serialize(e,o){const l=new Float64Array(e.ids),d=new Uint32Array(e.positions);return tp(l,d,0,l.length-1),o&&o.push(l.buffer,d.buffer),{ids:l,positions:d}}static deserialize(e){const o=new Uu;return o.ids=e.ids,o.positions=e.positions,o.indexed=!0,o}}function Qm(i){const e=+i;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:Qd(String(i))}function tp(i,e,o,l){for(;o<l;){const d=i[o+l>>1];let f=o-1,g=l+1;for(;;){do f++;while(i[f]<d);do g--;while(i[g]>d);if(f>=g)break;Hu(i,f,g),Hu(e,3*f,3*g),Hu(e,3*f+1,3*g+1),Hu(e,3*f+2,3*g+2)}g-o<l-g?(tp(i,e,o,g),o=g+1):(tp(i,e,g+1,l),l=g)}}function Hu(i,e,o){const l=i[e];i[e]=i[o],i[o]=l}$t("FeaturePositionMap",Uu);class Xa{constructor(e,o){this.gl=e.gl,this.location=o}}class ju extends Xa{constructor(e,o){super(e,o),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class t_ extends Xa{constructor(e,o){super(e,o),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class e_ extends Xa{constructor(e,o){super(e,o),this.current=Le.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const _g=new Float32Array(16);function ep(i){return[Xm(255*i.r,255*i.g),Xm(255*i.b,255*i.a)]}class tc{constructor(e,o,l){this.value=e,this.uniformNames=o.map(d=>`u_${d}`),this.type=l}setUniform(e,o,l){e.set(l.constantOr(this.value))}getBinding(e,o,l){return this.type==="color"?new e_(e,o):new ju(e,o)}}class js{constructor(e,o){this.uniformNames=o.map(l=>`u_${l}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=e.tlbr}setUniform(e,o,l,d){const f=d==="u_pattern_to"?this.patternTo:d==="u_pattern_from"?this.patternFrom:d==="u_pixel_ratio_to"?this.pixelRatioTo:d==="u_pixel_ratio_from"?this.pixelRatioFrom:null;f&&e.set(f)}getBinding(e,o,l){return l.substr(0,9)==="u_pattern"?new t_(e,o):new ju(e,o)}}class xr{constructor(e,o,l,d){this.expression=e,this.type=l,this.maxValue=0,this.paintVertexAttributes=o.map(f=>({name:`a_${f}`,type:"Float32",components:l==="color"?2:1,offset:0})),this.paintVertexArray=new d}populatePaintArray(e,o,l,d,f){const g=this.paintVertexArray.length,y=this.expression.evaluate(new C(0),o,{},d,[],f);this.paintVertexArray.resize(e),this._setPaintValue(g,e,y)}updatePaintArray(e,o,l,d){const f=this.expression.evaluate({zoom:0},l,d);this._setPaintValue(e,o,f)}_setPaintValue(e,o,l){if(this.type==="color"){const d=ep(l);for(let f=e;f<o;f++)this.paintVertexArray.emplace(f,d[0],d[1])}else{for(let d=e;d<o;d++)this.paintVertexArray.emplace(d,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class _o{constructor(e,o,l,d,f,g){this.expression=e,this.uniformNames=o.map(y=>`u_${y}_t`),this.type=l,this.useIntegerZoom=d,this.zoom=f,this.maxValue=0,this.paintVertexAttributes=o.map(y=>({name:`a_${y}`,type:"Float32",components:l==="color"?4:2,offset:0})),this.paintVertexArray=new g}populatePaintArray(e,o,l,d,f){const g=this.expression.evaluate(new C(this.zoom),o,{},d,[],f),y=this.expression.evaluate(new C(this.zoom+1),o,{},d,[],f),x=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(x,e,g,y)}updatePaintArray(e,o,l,d){const f=this.expression.evaluate({zoom:this.zoom},l,d),g=this.expression.evaluate({zoom:this.zoom+1},l,d);this._setPaintValue(e,o,f,g)}_setPaintValue(e,o,l,d){if(this.type==="color"){const f=ep(l),g=ep(d);for(let y=e;y<o;y++)this.paintVertexArray.emplace(y,f[0],f[1],g[0],g[1])}else{for(let f=e;f<o;f++)this.paintVertexArray.emplace(f,l,d);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(d))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,o){const l=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,d=wt(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);e.set(d)}getBinding(e,o,l){return new ju(e,o)}}class ia{constructor(e,o,l,d,f,g){this.expression=e,this.type=o,this.useIntegerZoom=l,this.zoom=d,this.layerId=g,this.zoomInPaintVertexArray=new f,this.zoomOutPaintVertexArray=new f}populatePaintArray(e,o,l){const d=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(d,e,o.patterns&&o.patterns[this.layerId],l)}updatePaintArray(e,o,l,d,f){this._setPaintValues(e,o,l.patterns&&l.patterns[this.layerId],f)}_setPaintValues(e,o,l,d){if(!d||!l)return;const{min:f,mid:g,max:y}=l,x=d[f],I=d[g],E=d[y];if(x&&I&&E)for(let A=e;A<o;A++)this.zoomInPaintVertexArray.emplace(A,I.tl[0],I.tl[1],I.br[0],I.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],I.pixelRatio,x.pixelRatio),this.zoomOutPaintVertexArray.emplace(A,I.tl[0],I.tl[1],I.br[0],I.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],I.pixelRatio,E.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Ou.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Ou.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class i_{constructor(e,o,l){this.binders={},this._buffers=[];const d=[];for(const f in e.paint._values){if(!l(f))continue;const g=e.paint.get(f);if(!(g instanceof K&&Gr(g.property.specification)))continue;const y=fg(f,e.type),x=g.value,I=g.property.specification.type,E=g.property.useIntegerZoom,A=g.property.specification["property-type"],P=A==="cross-faded"||A==="cross-faded-data-driven";if(x.kind==="constant")this.binders[f]=P?new js(x.value,y):new tc(x.value,y,I),d.push(`/u_${f}`);else if(x.kind==="source"||P){const L=n_(f,I,"source");this.binders[f]=P?new ia(x,I,E,o,L,e.id):new xr(x,y,I,L),d.push(`/a_${f}`)}else{const L=n_(f,I,"composite");this.binders[f]=new _o(x,y,I,E,o,L),d.push(`/z_${f}`)}}this.cacheKey=d.sort().join("")}getMaxValue(e){const o=this.binders[e];return o instanceof xr||o instanceof _o?o.maxValue:0}populatePaintArrays(e,o,l,d,f){for(const g in this.binders){const y=this.binders[g];(y instanceof xr||y instanceof _o||y instanceof ia)&&y.populatePaintArray(e,o,l,d,f)}}setConstantPatternPositions(e,o){for(const l in this.binders){const d=this.binders[l];d instanceof js&&d.setConstantPatternPositions(e,o)}}updatePaintArrays(e,o,l,d,f){let g=!1;for(const y in e){const x=o.getPositions(y);for(const I of x){const E=l.feature(I.index);for(const A in this.binders){const P=this.binders[A];if((P instanceof xr||P instanceof _o||P instanceof ia)&&P.expression.isStateDependent===!0){const L=d.paint.get(A);P.expression=L.value,P.updatePaintArray(I.start,I.end,E,e[y],f),g=!0}}}}return g}defines(){const e=[];for(const o in this.binders){const l=this.binders[o];(l instanceof tc||l instanceof js)&&e.push(...l.uniformNames.map(d=>`#define HAS_UNIFORM_${d}`))}return e}getBinderAttributes(){const e=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof xr||l instanceof _o)for(let d=0;d<l.paintVertexAttributes.length;d++)e.push(l.paintVertexAttributes[d].name);else if(l instanceof ia)for(let d=0;d<Ou.members.length;d++)e.push(Ou.members[d].name)}return e}getBinderUniforms(){const e=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof tc||l instanceof js||l instanceof _o)for(const d of l.uniformNames)e.push(d)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,o){const l=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof tc||f instanceof js||f instanceof _o){for(const g of f.uniformNames)if(o[g]){const y=f.getBinding(e,o[g],g);l.push({name:g,property:d,binding:y})}}}return l}setUniforms(e,o,l,d){for(const{name:f,property:g,binding:y}of o)this.binders[g].setUniform(y,d,l.get(g),f)}updatePaintBuffers(e){this._buffers=[];for(const o in this.binders){const l=this.binders[o];if(e&&l instanceof ia){const d=e.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;d&&this._buffers.push(d)}else(l instanceof xr||l instanceof _o)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(e){for(const o in this.binders){const l=this.binders[o];(l instanceof xr||l instanceof _o||l instanceof ia)&&l.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const o=this.binders[e];(o instanceof xr||o instanceof _o||o instanceof ia)&&o.destroy()}}}class Ka{constructor(e,o,l=()=>!0){this.programConfigurations={};for(const d of e)this.programConfigurations[d.id]=new i_(d,o,l);this.needsUpload=!1,this._featureMap=new Uu,this._bufferOffset=0}populatePaintArrays(e,o,l,d,f,g){for(const y in this.programConfigurations)this.programConfigurations[y].populatePaintArrays(e,o,d,f,g);o.id!==void 0&&this._featureMap.add(o.id,l,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,o,l,d){for(const f of l)this.needsUpload=this.programConfigurations[f.id].updatePaintArrays(e,this._featureMap,o,f,d)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function fg(i,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${e}-`,"").replace(/-/g,"_")]}function n_(i,e,o){const l={color:{source:fe,composite:mn},number:{source:ho,composite:fe}},d=function(f){return{"line-pattern":{source:Ho,composite:Ho},"fill-pattern":{source:Ho,composite:Ho},"fill-extrusion-pattern":{source:Ho,composite:Ho}}[f]}(i);return d&&d[o]||l[e][o]}$t("ConstantBinder",tc),$t("CrossFadedConstantBinder",js),$t("SourceExpressionBinder",xr),$t("CrossFadedCompositeBinder",ia),$t("CompositeExpressionBinder",_o),$t("ProgramConfiguration",i_,{omit:["_buffers"]}),$t("ProgramConfigurationSet",Ka);const ui=8192,ip=Math.pow(2,14)-1,o_=-ip-1;function Ya(i){const e=ui/i.extent,o=i.loadGeometry();for(let l=0;l<o.length;l++){const d=o[l];for(let f=0;f<d.length;f++){const g=d[f],y=Math.round(g.x*e),x=Math.round(g.y*e);g.x=wt(y,o_,ip),g.y=wt(x,o_,ip),(y<g.x||y>g.x+1||x<g.y||x>g.y+1)&&ae("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function Ja(i,e){return{type:i.type,id:i.id,properties:i.properties,geometry:e?Ya(i):[]}}function qu(i,e,o,l,d){i.emplaceBack(2*e+(l+1)/2,2*o+(d+1)/2)}class np{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ru,this.indexArray=new Hs,this.segments=new ji,this.programConfigurations=new Ka(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,l){const d=this.layers[0],f=[];let g=null,y=!1;d.type==="circle"&&(g=d.layout.get("circle-sort-key"),y=!g.isConstant());for(const{feature:x,id:I,index:E,sourceLayerIndex:A}of e){const P=this.layers[0]._featureFilter.needGeometry,L=Ja(x,P);if(!this.layers[0]._featureFilter.filter(new C(this.zoom),L,l))continue;const V=y?g.evaluate(L,{},l):void 0,N={id:I,properties:x.properties,type:x.type,sourceLayerIndex:A,index:E,geometry:P?L.geometry:Ya(x),patterns:{},sortKey:V};f.push(N)}y&&f.sort((x,I)=>x.sortKey-I.sortKey);for(const x of f){const{geometry:I,index:E,sourceLayerIndex:A}=x,P=e[E].feature;this.addFeature(x,I,E,l),o.featureIndex.insert(P,I,E,A,this.index)}}update(e,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,dg),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,o,l,d){for(const f of o)for(const g of f){const y=g.x,x=g.y;if(y<0||y>=ui||x<0||x>=ui)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),E=I.vertexLength;qu(this.layoutVertexArray,y,x,-1,-1),qu(this.layoutVertexArray,y,x,1,-1),qu(this.layoutVertexArray,y,x,1,1),qu(this.layoutVertexArray,y,x,-1,1),this.indexArray.emplaceBack(E,E+1,E+2),this.indexArray.emplaceBack(E,E+3,E+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,{},d)}}function r_(i,e){for(let o=0;o<i.length;o++)if(qs(e,i[o]))return!0;for(let o=0;o<e.length;o++)if(qs(i,e[o]))return!0;return!!op(i,e)}function gg(i,e,o){return!!qs(i,e)||!!rp(e,i,o)}function a_(i,e){if(i.length===1)return l_(e,i[0]);for(let o=0;o<e.length;o++){const l=e[o];for(let d=0;d<l.length;d++)if(qs(i,l[d]))return!0}for(let o=0;o<i.length;o++)if(l_(e,i[o]))return!0;for(let o=0;o<e.length;o++)if(op(i,e[o]))return!0;return!1}function bg(i,e,o){if(i.length>1){if(op(i,e))return!0;for(let l=0;l<e.length;l++)if(rp(e[l],i,o))return!0}for(let l=0;l<i.length;l++)if(rp(i[l],e,o))return!0;return!1}function op(i,e){if(i.length===0||e.length===0)return!1;for(let o=0;o<i.length-1;o++){const l=i[o],d=i[o+1];for(let f=0;f<e.length-1;f++)if(yg(l,d,e[f],e[f+1]))return!0}return!1}function yg(i,e,o,l){return be(i,o,l)!==be(e,o,l)&&be(i,e,o)!==be(i,e,l)}function rp(i,e,o){const l=o*o;if(e.length===1)return i.distSqr(e[0])<l;for(let d=1;d<e.length;d++)if(s_(i,e[d-1],e[d])<l)return!0;return!1}function s_(i,e,o){const l=e.distSqr(o);if(l===0)return i.distSqr(e);const d=((i.x-e.x)*(o.x-e.x)+(i.y-e.y)*(o.y-e.y))/l;return i.distSqr(d<0?e:d>1?o:o.sub(e)._mult(d)._add(e))}function l_(i,e){let o,l,d,f=!1;for(let g=0;g<i.length;g++){o=i[g];for(let y=0,x=o.length-1;y<o.length;x=y++)l=o[y],d=o[x],l.y>e.y!=d.y>e.y&&e.x<(d.x-l.x)*(e.y-l.y)/(d.y-l.y)+l.x&&(f=!f)}return f}function qs(i,e){let o=!1;for(let l=0,d=i.length-1;l<i.length;d=l++){const f=i[l],g=i[d];f.y>e.y!=g.y>e.y&&e.x<(g.x-f.x)*(e.y-f.y)/(g.y-f.y)+f.x&&(o=!o)}return o}function vg(i,e,o){const l=o[0],d=o[2];if(i.x<l.x&&e.x<l.x||i.x>d.x&&e.x>d.x||i.y<l.y&&e.y<l.y||i.y>d.y&&e.y>d.y)return!1;const f=be(i,e,o[0]);return f!==be(i,e,o[1])||f!==be(i,e,o[2])||f!==be(i,e,o[3])}function ec(i,e,o){const l=e.paint.get(i).value;return l.kind==="constant"?l.value:o.programConfigurations.get(e.id).getMaxValue(i)}function Gu(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Zu(i,e,o,l,d){if(!e[0]&&!e[1])return i;const f=X.convert(e)._mult(d);o==="viewport"&&f._rotate(-l);const g=[];for(let y=0;y<i.length;y++)g.push(i[y].sub(f));return g}let c_,u_;$t("CircleBucket",np,{omit:["layers"]});var xg={get paint(){return u_=u_||new _t({"circle-radius":new H(dt.paint_circle["circle-radius"]),"circle-color":new H(dt.paint_circle["circle-color"]),"circle-blur":new H(dt.paint_circle["circle-blur"]),"circle-opacity":new H(dt.paint_circle["circle-opacity"]),"circle-translate":new q(dt.paint_circle["circle-translate"]),"circle-translate-anchor":new q(dt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new q(dt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new q(dt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new H(dt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new H(dt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new H(dt.paint_circle["circle-stroke-opacity"])})},get layout(){return c_=c_||new _t({"circle-sort-key":new H(dt.layout_circle["circle-sort-key"])})}},Qi=1e-6,Gs=typeof Float32Array<"u"?Float32Array:Array;function ap(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function h_(i,e,o){var l=e[0],d=e[1],f=e[2],g=e[3],y=e[4],x=e[5],I=e[6],E=e[7],A=e[8],P=e[9],L=e[10],V=e[11],N=e[12],Z=e[13],Y=e[14],lt=e[15],nt=o[0],ct=o[1],pt=o[2],xt=o[3];return i[0]=nt*l+ct*y+pt*A+xt*N,i[1]=nt*d+ct*x+pt*P+xt*Z,i[2]=nt*f+ct*I+pt*L+xt*Y,i[3]=nt*g+ct*E+pt*V+xt*lt,i[4]=(nt=o[4])*l+(ct=o[5])*y+(pt=o[6])*A+(xt=o[7])*N,i[5]=nt*d+ct*x+pt*P+xt*Z,i[6]=nt*f+ct*I+pt*L+xt*Y,i[7]=nt*g+ct*E+pt*V+xt*lt,i[8]=(nt=o[8])*l+(ct=o[9])*y+(pt=o[10])*A+(xt=o[11])*N,i[9]=nt*d+ct*x+pt*P+xt*Z,i[10]=nt*f+ct*I+pt*L+xt*Y,i[11]=nt*g+ct*E+pt*V+xt*lt,i[12]=(nt=o[12])*l+(ct=o[13])*y+(pt=o[14])*A+(xt=o[15])*N,i[13]=nt*d+ct*x+pt*P+xt*Z,i[14]=nt*f+ct*I+pt*L+xt*Y,i[15]=nt*g+ct*E+pt*V+xt*lt,i}Math.hypot||(Math.hypot=function(){for(var i=0,e=arguments.length;e--;)i+=arguments[e]*arguments[e];return Math.sqrt(i)});var ic,wg=h_;function Wu(i,e,o){var l=e[0],d=e[1],f=e[2],g=e[3];return i[0]=o[0]*l+o[4]*d+o[8]*f+o[12]*g,i[1]=o[1]*l+o[5]*d+o[9]*f+o[13]*g,i[2]=o[2]*l+o[6]*d+o[10]*f+o[14]*g,i[3]=o[3]*l+o[7]*d+o[11]*f+o[15]*g,i}ic=new Gs(4),Gs!=Float32Array&&(ic[0]=0,ic[1]=0,ic[2]=0,ic[3]=0);class kg extends Ct{constructor(e){super(e,xg)}createBucket(e){return new np(e)}queryRadius(e){const o=e;return ec("circle-radius",this,o)+ec("circle-stroke-width",this,o)+Gu(this.paint.get("circle-translate"))}queryIntersectsFeature(e,o,l,d,f,g,y,x){const I=Zu(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,y),E=this.paint.get("circle-radius").evaluate(o,l)+this.paint.get("circle-stroke-width").evaluate(o,l),A=this.paint.get("circle-pitch-alignment")==="map",P=A?I:function(V,N){return V.map(Z=>d_(Z,N))}(I,x),L=A?E*y:E;for(const V of d)for(const N of V){const Z=A?N:d_(N,x);let Y=L;const lt=Wu([],[N.x,N.y,0,1],x);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Y*=lt[3]/g.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Y*=g.cameraToCenterDistance/lt[3]),gg(P,Z,Y))return!0}return!1}}function d_(i,e){const o=Wu([],[i.x,i.y,0,1],e);return new X(o[0]/o[3],o[1]/o[3])}class p_ extends np{}let m_;$t("HeatmapBucket",p_,{omit:["layers"]});var Sg={get paint(){return m_=m_||new _t({"heatmap-radius":new H(dt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new H(dt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new q(dt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ut(dt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new q(dt.paint_heatmap["heatmap-opacity"])})}};function sp(i,{width:e,height:o},l,d){if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==e*o*l)throw new RangeError(`mismatched image size. expected: ${d.length} but got: ${e*o*l}`)}else d=new Uint8Array(e*o*l);return i.width=e,i.height=o,i.data=d,i}function __(i,{width:e,height:o},l){if(e===i.width&&o===i.height)return;const d=sp({},{width:e,height:o},l);lp(i,d,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,e),height:Math.min(i.height,o)},l),i.width=e,i.height=o,i.data=d.data}function lp(i,e,o,l,d,f){if(d.width===0||d.height===0)return e;if(d.width>i.width||d.height>i.height||o.x>i.width-d.width||o.y>i.height-d.height)throw new RangeError("out of range source coordinates for image copy");if(d.width>e.width||d.height>e.height||l.x>e.width-d.width||l.y>e.height-d.height)throw new RangeError("out of range destination coordinates for image copy");const g=i.data,y=e.data;if(g===y)throw new Error("srcData equals dstData, so image is already copied");for(let x=0;x<d.height;x++){const I=((o.y+x)*i.width+o.x)*f,E=((l.y+x)*e.width+l.x)*f;for(let A=0;A<d.width*f;A++)y[E+A]=g[I+A]}return e}class nc{constructor(e,o){sp(this,e,1,o)}resize(e){__(this,e,1)}clone(){return new nc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,l,d,f){lp(e,o,l,d,f,1)}}class On{constructor(e,o){sp(this,e,4,o)}resize(e){__(this,e,4)}replace(e,o){o?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new On({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,l,d,f){lp(e,o,l,d,f,4)}}function f_(i){const e={},o=i.resolution||256,l=i.clips?i.clips.length:1,d=i.image||new On({width:o,height:l});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const f=(g,y,x)=>{e[i.evaluationKey]=x;const I=i.expression.evaluate(e);d.data[g+y+0]=Math.floor(255*I.r/I.a),d.data[g+y+1]=Math.floor(255*I.g/I.a),d.data[g+y+2]=Math.floor(255*I.b/I.a),d.data[g+y+3]=Math.floor(255*I.a)};if(i.clips)for(let g=0,y=0;g<l;++g,y+=4*o)for(let x=0,I=0;x<o;x++,I+=4){const E=x/(o-1),{start:A,end:P}=i.clips[g];f(y,I,A*(1-E)+P*E)}else for(let g=0,y=0;g<o;g++,y+=4)f(0,y,g/(o-1));return d}$t("AlphaImage",nc),$t("RGBAImage",On);const cp="big-fb";class Ig extends Ct{createBucket(e){return new p_(e)}constructor(e){super(e,Sg),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){e==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=f_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(cp)&&this.heatmapFbos.delete(cp)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let g_;var Tg={get paint(){return g_=g_||new _t({"hillshade-illumination-direction":new q(dt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new q(dt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new q(dt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new q(dt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new q(dt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new q(dt.paint_hillshade["hillshade-accent-color"])})}};class Cg extends Ct{constructor(e){super(e,Tg)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Eg=Pt([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ag}=Eg;function b_(i,e,o=2){const l=e&&e.length,d=l?e[0]*o:i.length;let f=y_(i,0,d,o,!0);const g=[];if(!f||f.next===f.prev)return g;let y,x,I;if(l&&(f=function(E,A,P,L){const V=[];for(let N=0,Z=A.length;N<Z;N++){const Y=y_(E,A[N]*L,N<Z-1?A[N+1]*L:E.length,L,!1);Y===Y.next&&(Y.steiner=!0),V.push($g(Y))}V.sort(Lg);for(let N=0;N<V.length;N++)P=Bg(V[N],P);return P}(i,e,f,o)),i.length>80*o){y=1/0,x=1/0;let E=-1/0,A=-1/0;for(let P=o;P<d;P+=o){const L=i[P],V=i[P+1];L<y&&(y=L),V<x&&(x=V),L>E&&(E=L),V>A&&(A=V)}I=Math.max(E-y,A-x),I=I!==0?32767/I:0}return oc(f,g,o,y,x,I,0),g}function y_(i,e,o,l,d){let f;if(d===function(g,y,x,I){let E=0;for(let A=y,P=x-I;A<x;A+=I)E+=(g[P]-g[A])*(g[A+1]+g[P+1]),P=A;return E}(i,e,o,l)>0)for(let g=e;g<o;g+=l)f=w_(g/l|0,i[g],i[g+1],f);else for(let g=o-l;g>=e;g-=l)f=w_(g/l|0,i[g],i[g+1],f);return f&&Xu(f,f.next)&&(ac(f),f=f.next),f}function Qa(i,e){if(!i)return i;e||(e=i);let o,l=i;do if(o=!1,l.steiner||!Xu(l,l.next)&&ai(l.prev,l,l.next)!==0)l=l.next;else{if(ac(l),l=e=l.prev,l===l.next)break;o=!0}while(o||l!==e);return e}function oc(i,e,o,l,d,f,g){if(!i)return;!g&&f&&function(x,I,E,A){let P=x;do P.z===0&&(P.z=up(P.x,P.y,I,E,A)),P.prevZ=P.prev,P.nextZ=P.next,P=P.next;while(P!==x);P.prevZ.nextZ=null,P.prevZ=null,function(L){let V,N=1;do{let Z,Y=L;L=null;let lt=null;for(V=0;Y;){V++;let nt=Y,ct=0;for(let xt=0;xt<N&&(ct++,nt=nt.nextZ,nt);xt++);let pt=N;for(;ct>0||pt>0&&nt;)ct!==0&&(pt===0||!nt||Y.z<=nt.z)?(Z=Y,Y=Y.nextZ,ct--):(Z=nt,nt=nt.nextZ,pt--),lt?lt.nextZ=Z:L=Z,Z.prevZ=lt,lt=Z;Y=nt}lt.nextZ=null,N*=2}while(V>1)}(P)}(i,l,d,f);let y=i;for(;i.prev!==i.next;){const x=i.prev,I=i.next;if(f?Dg(i,l,d,f):Mg(i))e.push(x.i,i.i,I.i),ac(i),i=I.next,y=I.next;else if((i=I)===y){g?g===1?oc(i=Pg(Qa(i),e),e,o,l,d,f,2):g===2&&zg(i,e,o,l,d,f):oc(Qa(i),e,o,l,d,f,1);break}}}function Mg(i){const e=i.prev,o=i,l=i.next;if(ai(e,o,l)>=0)return!1;const d=e.x,f=o.x,g=l.x,y=e.y,x=o.y,I=l.y,E=d<f?d<g?d:g:f<g?f:g,A=y<x?y<I?y:I:x<I?x:I,P=d>f?d>g?d:g:f>g?f:g,L=y>x?y>I?y:I:x>I?x:I;let V=l.next;for(;V!==e;){if(V.x>=E&&V.x<=P&&V.y>=A&&V.y<=L&&Zs(d,y,f,x,g,I,V.x,V.y)&&ai(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function Dg(i,e,o,l){const d=i.prev,f=i,g=i.next;if(ai(d,f,g)>=0)return!1;const y=d.x,x=f.x,I=g.x,E=d.y,A=f.y,P=g.y,L=y<x?y<I?y:I:x<I?x:I,V=E<A?E<P?E:P:A<P?A:P,N=y>x?y>I?y:I:x>I?x:I,Z=E>A?E>P?E:P:A>P?A:P,Y=up(L,V,e,o,l),lt=up(N,Z,e,o,l);let nt=i.prevZ,ct=i.nextZ;for(;nt&&nt.z>=Y&&ct&&ct.z<=lt;){if(nt.x>=L&&nt.x<=N&&nt.y>=V&&nt.y<=Z&&nt!==d&&nt!==g&&Zs(y,E,x,A,I,P,nt.x,nt.y)&&ai(nt.prev,nt,nt.next)>=0||(nt=nt.prevZ,ct.x>=L&&ct.x<=N&&ct.y>=V&&ct.y<=Z&&ct!==d&&ct!==g&&Zs(y,E,x,A,I,P,ct.x,ct.y)&&ai(ct.prev,ct,ct.next)>=0))return!1;ct=ct.nextZ}for(;nt&&nt.z>=Y;){if(nt.x>=L&&nt.x<=N&&nt.y>=V&&nt.y<=Z&&nt!==d&&nt!==g&&Zs(y,E,x,A,I,P,nt.x,nt.y)&&ai(nt.prev,nt,nt.next)>=0)return!1;nt=nt.prevZ}for(;ct&&ct.z<=lt;){if(ct.x>=L&&ct.x<=N&&ct.y>=V&&ct.y<=Z&&ct!==d&&ct!==g&&Zs(y,E,x,A,I,P,ct.x,ct.y)&&ai(ct.prev,ct,ct.next)>=0)return!1;ct=ct.nextZ}return!0}function Pg(i,e){let o=i;do{const l=o.prev,d=o.next.next;!Xu(l,d)&&v_(l,o,o.next,d)&&rc(l,d)&&rc(d,l)&&(e.push(l.i,o.i,d.i),ac(o),ac(o.next),o=i=d),o=o.next}while(o!==i);return Qa(o)}function zg(i,e,o,l,d,f){let g=i;do{let y=g.next.next;for(;y!==g.prev;){if(g.i!==y.i&&Vg(g,y)){let x=x_(g,y);return g=Qa(g,g.next),x=Qa(x,x.next),oc(g,e,o,l,d,f,0),void oc(x,e,o,l,d,f,0)}y=y.next}g=g.next}while(g!==i)}function Lg(i,e){return i.x-e.x}function Bg(i,e){const o=function(d,f){let g=f;const y=d.x,x=d.y;let I,E=-1/0;do{if(x<=g.y&&x>=g.next.y&&g.next.y!==g.y){const N=g.x+(x-g.y)*(g.next.x-g.x)/(g.next.y-g.y);if(N<=y&&N>E&&(E=N,I=g.x<g.next.x?g:g.next,N===y))return I}g=g.next}while(g!==f);if(!I)return null;const A=I,P=I.x,L=I.y;let V=1/0;g=I;do{if(y>=g.x&&g.x>=P&&y!==g.x&&Zs(x<L?y:E,x,P,L,x<L?E:y,x,g.x,g.y)){const N=Math.abs(x-g.y)/(y-g.x);rc(g,d)&&(N<V||N===V&&(g.x>I.x||g.x===I.x&&Rg(I,g)))&&(I=g,V=N)}g=g.next}while(g!==A);return I}(i,e);if(!o)return e;const l=x_(o,i);return Qa(l,l.next),Qa(o,o.next)}function Rg(i,e){return ai(i.prev,i,e.prev)<0&&ai(e.next,i,i.next)<0}function up(i,e,o,l,d){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-o)*d|0)|i<<8))|i<<4))|i<<2))|i<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-l)*d|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function $g(i){let e=i,o=i;do(e.x<o.x||e.x===o.x&&e.y<o.y)&&(o=e),e=e.next;while(e!==i);return o}function Zs(i,e,o,l,d,f,g,y){return(d-g)*(e-y)>=(i-g)*(f-y)&&(i-g)*(l-y)>=(o-g)*(e-y)&&(o-g)*(f-y)>=(d-g)*(l-y)}function Vg(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!function(o,l){let d=o;do{if(d.i!==o.i&&d.next.i!==o.i&&d.i!==l.i&&d.next.i!==l.i&&v_(d,d.next,o,l))return!0;d=d.next}while(d!==o);return!1}(i,e)&&(rc(i,e)&&rc(e,i)&&function(o,l){let d=o,f=!1;const g=(o.x+l.x)/2,y=(o.y+l.y)/2;do d.y>y!=d.next.y>y&&d.next.y!==d.y&&g<(d.next.x-d.x)*(y-d.y)/(d.next.y-d.y)+d.x&&(f=!f),d=d.next;while(d!==o);return f}(i,e)&&(ai(i.prev,i,e.prev)||ai(i,e.prev,e))||Xu(i,e)&&ai(i.prev,i,i.next)>0&&ai(e.prev,e,e.next)>0)}function ai(i,e,o){return(e.y-i.y)*(o.x-e.x)-(e.x-i.x)*(o.y-e.y)}function Xu(i,e){return i.x===e.x&&i.y===e.y}function v_(i,e,o,l){const d=Yu(ai(i,e,o)),f=Yu(ai(i,e,l)),g=Yu(ai(o,l,i)),y=Yu(ai(o,l,e));return d!==f&&g!==y||!(d!==0||!Ku(i,o,e))||!(f!==0||!Ku(i,l,e))||!(g!==0||!Ku(o,i,l))||!(y!==0||!Ku(o,e,l))}function Ku(i,e,o){return e.x<=Math.max(i.x,o.x)&&e.x>=Math.min(i.x,o.x)&&e.y<=Math.max(i.y,o.y)&&e.y>=Math.min(i.y,o.y)}function Yu(i){return i>0?1:i<0?-1:0}function rc(i,e){return ai(i.prev,i,i.next)<0?ai(i,e,i.next)>=0&&ai(i,i.prev,e)>=0:ai(i,e,i.prev)<0||ai(i,i.next,e)<0}function x_(i,e){const o=hp(i.i,i.x,i.y),l=hp(e.i,e.x,e.y),d=i.next,f=e.prev;return i.next=e,e.prev=i,o.next=d,d.prev=o,l.next=o,o.prev=l,f.next=l,l.prev=f,l}function w_(i,e,o,l){const d=hp(i,e,o);return l?(d.next=l.next,d.prev=l,l.next.prev=d,l.next=d):(d.prev=d,d.next=d),d}function ac(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function hp(i,e,o){return{i,x:e,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function dp(i,e,o){const l=o.patternDependencies;let d=!1;for(const f of e){const g=f.paint.get(`${i}-pattern`);g.isConstant()||(d=!0);const y=g.constantOr(null);y&&(d=!0,l[y.to]=!0,l[y.from]=!0)}return d}function pp(i,e,o,l,d){const f=d.patternDependencies;for(const g of e){const y=g.paint.get(`${i}-pattern`).value;if(y.kind!=="constant"){let x=y.evaluate({zoom:l-1},o,{},d.availableImages),I=y.evaluate({zoom:l},o,{},d.availableImages),E=y.evaluate({zoom:l+1},o,{},d.availableImages);x=x&&x.name?x.name:x,I=I&&I.name?I.name:I,E=E&&E.name?E.name:E,f[x]=!0,f[I]=!0,f[E]=!0,o.patterns[g.id]={min:x,mid:I,max:E}}}return o}class mp{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $u,this.indexArray=new Hs,this.indexArray2=new Jd,this.programConfigurations=new Ka(e.layers,e.zoom),this.segments=new ji,this.segments2=new ji,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,l){this.hasPattern=dp("fill",this.layers,o);const d=this.layers[0].layout.get("fill-sort-key"),f=!d.isConstant(),g=[];for(const{feature:y,id:x,index:I,sourceLayerIndex:E}of e){const A=this.layers[0]._featureFilter.needGeometry,P=Ja(y,A);if(!this.layers[0]._featureFilter.filter(new C(this.zoom),P,l))continue;const L=f?d.evaluate(P,{},l,o.availableImages):void 0,V={id:x,properties:y.properties,type:y.type,sourceLayerIndex:E,index:I,geometry:A?P.geometry:Ya(y),patterns:{},sortKey:L};g.push(V)}f&&g.sort((y,x)=>y.sortKey-x.sortKey);for(const y of g){const{geometry:x,index:I,sourceLayerIndex:E}=y;if(this.hasPattern){const A=pp("fill",this.layers,y,this.zoom,o);this.patternFeatures.push(A)}else this.addFeature(y,x,I,l,{});o.featureIndex.insert(e[I].feature,x,I,E,this.index)}}update(e,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l)}addFeatures(e,o,l){for(const d of this.patternFeatures)this.addFeature(d,d.geometry,d.index,o,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ag),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,o,l,d,f){for(const g of ks(o,500)){let y=0;for(const L of g)y+=L.length;const x=this.segments.prepareSegment(y,this.layoutVertexArray,this.indexArray),I=x.vertexLength,E=[],A=[];for(const L of g){if(L.length===0)continue;L!==g[0]&&A.push(E.length/2);const V=this.segments2.prepareSegment(L.length,this.layoutVertexArray,this.indexArray2),N=V.vertexLength;this.layoutVertexArray.emplaceBack(L[0].x,L[0].y),this.indexArray2.emplaceBack(N+L.length-1,N),E.push(L[0].x),E.push(L[0].y);for(let Z=1;Z<L.length;Z++)this.layoutVertexArray.emplaceBack(L[Z].x,L[Z].y),this.indexArray2.emplaceBack(N+Z-1,N+Z),E.push(L[Z].x),E.push(L[Z].y);V.vertexLength+=L.length,V.primitiveLength+=L.length}const P=b_(E,A);for(let L=0;L<P.length;L+=3)this.indexArray.emplaceBack(I+P[L],I+P[L+1],I+P[L+2]);x.vertexLength+=y,x.primitiveLength+=P.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,f,d)}}let k_,S_;$t("FillBucket",mp,{omit:["layers","patternFeatures"]});var Fg={get paint(){return S_=S_||new _t({"fill-antialias":new q(dt.paint_fill["fill-antialias"]),"fill-opacity":new H(dt.paint_fill["fill-opacity"]),"fill-color":new H(dt.paint_fill["fill-color"]),"fill-outline-color":new H(dt.paint_fill["fill-outline-color"]),"fill-translate":new q(dt.paint_fill["fill-translate"]),"fill-translate-anchor":new q(dt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ot(dt.paint_fill["fill-pattern"])})},get layout(){return k_=k_||new _t({"fill-sort-key":new H(dt.layout_fill["fill-sort-key"])})}};class Og extends Ct{constructor(e){super(e,Fg)}recalculate(e,o){super.recalculate(e,o);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new mp(e)}queryRadius(){return Gu(this.paint.get("fill-translate"))}queryIntersectsFeature(e,o,l,d,f,g,y){return a_(Zu(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,y),d)}isTileClipped(){return!0}}const Ng=Pt([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Ug=Pt([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Hg}=Ng;var na={},jg=k,I_=Ws;function Ws(i,e,o,l,d){this.properties={},this.extent=o,this.type=0,this._pbf=i,this._geometry=-1,this._keys=l,this._values=d,i.readFields(qg,this,e)}function qg(i,e,o){i==1?e.id=o.readVarint():i==2?function(l,d){for(var f=l.readVarint()+l.pos;l.pos<f;){var g=d._keys[l.readVarint()],y=d._values[l.readVarint()];d.properties[g]=y}}(o,e):i==3?e.type=o.readVarint():i==4&&(e._geometry=o.pos)}function Gg(i){for(var e,o,l=0,d=0,f=i.length,g=f-1;d<f;g=d++)l+=((o=i[g]).x-(e=i[d]).x)*(e.y+o.y);return l}Ws.types=["Unknown","Point","LineString","Polygon"],Ws.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var e,o=i.readVarint()+i.pos,l=1,d=0,f=0,g=0,y=[];i.pos<o;){if(d<=0){var x=i.readVarint();l=7&x,d=x>>3}if(d--,l===1||l===2)f+=i.readSVarint(),g+=i.readSVarint(),l===1&&(e&&y.push(e),e=[]),e.push(new jg(f,g));else{if(l!==7)throw new Error("unknown command "+l);e&&e.push(e[0].clone())}}return e&&y.push(e),y},Ws.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var e=i.readVarint()+i.pos,o=1,l=0,d=0,f=0,g=1/0,y=-1/0,x=1/0,I=-1/0;i.pos<e;){if(l<=0){var E=i.readVarint();o=7&E,l=E>>3}if(l--,o===1||o===2)(d+=i.readSVarint())<g&&(g=d),d>y&&(y=d),(f+=i.readSVarint())<x&&(x=f),f>I&&(I=f);else if(o!==7)throw new Error("unknown command "+o)}return[g,x,y,I]},Ws.prototype.toGeoJSON=function(i,e,o){var l,d,f=this.extent*Math.pow(2,o),g=this.extent*i,y=this.extent*e,x=this.loadGeometry(),I=Ws.types[this.type];function E(L){for(var V=0;V<L.length;V++){var N=L[V];L[V]=[360*(N.x+g)/f-180,360/Math.PI*Math.atan(Math.exp((180-360*(N.y+y)/f)*Math.PI/180))-90]}}switch(this.type){case 1:var A=[];for(l=0;l<x.length;l++)A[l]=x[l][0];E(x=A);break;case 2:for(l=0;l<x.length;l++)E(x[l]);break;case 3:for(x=function(L){var V=L.length;if(V<=1)return[L];for(var N,Z,Y=[],lt=0;lt<V;lt++){var nt=Gg(L[lt]);nt!==0&&(Z===void 0&&(Z=nt<0),Z===nt<0?(N&&Y.push(N),N=[L[lt]]):N.push(L[lt]))}return N&&Y.push(N),Y}(x),l=0;l<x.length;l++)for(d=0;d<x[l].length;d++)E(x[l][d])}x.length===1?x=x[0]:I="Multi"+I;var P={type:"Feature",geometry:{type:I,coordinates:x},properties:this.properties};return"id"in this&&(P.id=this.id),P};var Zg=I_,T_=C_;function C_(i,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(Wg,this,e),this.length=this._features.length}function Wg(i,e,o){i===15?e.version=o.readVarint():i===1?e.name=o.readString():i===5?e.extent=o.readVarint():i===2?e._features.push(o.pos):i===3?e._keys.push(o.readString()):i===4&&e._values.push(function(l){for(var d=null,f=l.readVarint()+l.pos;l.pos<f;){var g=l.readVarint()>>3;d=g===1?l.readString():g===2?l.readFloat():g===3?l.readDouble():g===4?l.readVarint64():g===5?l.readVarint():g===6?l.readSVarint():g===7?l.readBoolean():null}return d}(o))}C_.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var e=this._pbf.readVarint()+this._pbf.pos;return new Zg(this._pbf,e,this.extent,this._keys,this._values)};var Xg=T_;function Kg(i,e,o){if(i===3){var l=new Xg(o,o.readVarint()+o.pos);l.length&&(e[l.name]=l)}}na.VectorTile=function(i,e){this.layers=i.readFields(Kg,{},e)},na.VectorTileFeature=I_,na.VectorTileLayer=T_;const Yg=na.VectorTileFeature.types,_p=Math.pow(2,13);function sc(i,e,o,l,d,f,g,y){i.emplaceBack(e,o,2*Math.floor(l*_p)+g,d*_p*2,f*_p*2,Math.round(y))}class fp{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Vu,this.centroidVertexArray=new Uo,this.indexArray=new Hs,this.programConfigurations=new Ka(e.layers,e.zoom),this.segments=new ji,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,l){this.features=[],this.hasPattern=dp("fill-extrusion",this.layers,o);for(const{feature:d,id:f,index:g,sourceLayerIndex:y}of e){const x=this.layers[0]._featureFilter.needGeometry,I=Ja(d,x);if(!this.layers[0]._featureFilter.filter(new C(this.zoom),I,l))continue;const E={id:f,sourceLayerIndex:y,index:g,geometry:x?I.geometry:Ya(d),properties:d.properties,type:d.type,patterns:{}};this.hasPattern?this.features.push(pp("fill-extrusion",this.layers,E,this.zoom,o)):this.addFeature(E,E.geometry,g,l,{}),o.featureIndex.insert(d,E.geometry,g,y,this.index,!0)}}addFeatures(e,o,l){for(const d of this.features){const{geometry:f}=d;this.addFeature(d,f,d.index,o,l)}}update(e,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Hg),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Ug.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,o,l,d,f){for(const g of ks(o,500)){const y={x:0,y:0,vertexCount:0};let x=0;for(const V of g)x+=V.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const V of g){if(V.length===0||Qg(V))continue;let N=0;for(let Z=0;Z<V.length;Z++){const Y=V[Z];if(Z>=1){const lt=V[Z-1];if(!Jg(Y,lt)){I.vertexLength+4>ji.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const nt=Y.sub(lt)._perp()._unit(),ct=lt.dist(Y);N+ct>32768&&(N=0),sc(this.layoutVertexArray,Y.x,Y.y,nt.x,nt.y,0,0,N),sc(this.layoutVertexArray,Y.x,Y.y,nt.x,nt.y,0,1,N),y.x+=2*Y.x,y.y+=2*Y.y,y.vertexCount+=2,N+=ct,sc(this.layoutVertexArray,lt.x,lt.y,nt.x,nt.y,0,0,N),sc(this.layoutVertexArray,lt.x,lt.y,nt.x,nt.y,0,1,N),y.x+=2*lt.x,y.y+=2*lt.y,y.vertexCount+=2;const pt=I.vertexLength;this.indexArray.emplaceBack(pt,pt+2,pt+1),this.indexArray.emplaceBack(pt+1,pt+2,pt+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+x>ji.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(x,this.layoutVertexArray,this.indexArray)),Yg[e.type]!=="Polygon")continue;const E=[],A=[],P=I.vertexLength;for(const V of g)if(V.length!==0){V!==g[0]&&A.push(E.length/2);for(let N=0;N<V.length;N++){const Z=V[N];sc(this.layoutVertexArray,Z.x,Z.y,0,0,1,1,0),y.x+=Z.x,y.y+=Z.y,y.vertexCount+=1,E.push(Z.x),E.push(Z.y)}}const L=b_(E,A);for(let V=0;V<L.length;V+=3)this.indexArray.emplaceBack(P+L[V],P+L[V+2],P+L[V+1]);I.primitiveLength+=L.length/3,I.vertexLength+=x;for(let V=0;V<y.vertexCount;V++){const N=Math.floor(y.x/y.vertexCount),Z=Math.floor(y.y/y.vertexCount);this.centroidVertexArray.emplaceBack(N,Z)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,f,d)}}function Jg(i,e){return i.x===e.x&&(i.x<0||i.x>ui)||i.y===e.y&&(i.y<0||i.y>ui)}function Qg(i){return i.every(e=>e.x<0)||i.every(e=>e.x>ui)||i.every(e=>e.y<0)||i.every(e=>e.y>ui)}let E_;$t("FillExtrusionBucket",fp,{omit:["layers","features"]});var t0={get paint(){return E_=E_||new _t({"fill-extrusion-opacity":new q(dt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new H(dt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new q(dt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new q(dt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ot(dt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new H(dt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new H(dt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new q(dt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class e0 extends Ct{constructor(e){super(e,t0)}createBucket(e){return new fp(e)}queryRadius(){return Gu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(e,o,l,d,f,g,y,x){const I=Zu(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,y),E=this.paint.get("fill-extrusion-height").evaluate(o,l),A=this.paint.get("fill-extrusion-base").evaluate(o,l),P=function(V,N){const Z=[];for(const Y of V){const lt=[Y.x,Y.y,0,1];Wu(lt,lt,N),Z.push(new X(lt[0]/lt[3],lt[1]/lt[3]))}return Z}(I,x),L=function(V,N,Z,Y){const lt=[],nt=[],ct=Y[8]*N,pt=Y[9]*N,xt=Y[10]*N,Rt=Y[11]*N,te=Y[8]*Z,Bt=Y[9]*Z,zt=Y[10]*Z,Wt=Y[11]*Z;for(const Ut of V){const Ft=[],gt=[];for(const Xt of Ut){const Gt=Xt.x,re=Xt.y,Oe=Y[0]*Gt+Y[4]*re+Y[12],$e=Y[1]*Gt+Y[5]*re+Y[13],xi=Y[2]*Gt+Y[6]*re+Y[14],io=Y[3]*Gt+Y[7]*re+Y[15],Ri=xi+xt,wi=io+Rt,tn=Oe+te,en=$e+Bt,nn=xi+zt,ni=io+Wt,ki=new X((Oe+ct)/wi,($e+pt)/wi);ki.z=Ri/wi,Ft.push(ki);const qi=new X(tn/ni,en/ni);qi.z=nn/ni,gt.push(qi)}lt.push(Ft),nt.push(gt)}return[lt,nt]}(d,A,E,x);return function(V,N,Z){let Y=1/0;a_(Z,N)&&(Y=A_(Z,N[0]));for(let lt=0;lt<N.length;lt++){const nt=N[lt],ct=V[lt];for(let pt=0;pt<nt.length-1;pt++){const xt=nt[pt],Rt=[xt,nt[pt+1],ct[pt+1],ct[pt],xt];r_(Z,Rt)&&(Y=Math.min(Y,A_(Z,Rt)))}}return Y!==1/0&&Y}(L[0],L[1],P)}}function lc(i,e){return i.x*e.x+i.y*e.y}function A_(i,e){if(i.length===1){let o=0;const l=e[o++];let d;for(;!d||l.equals(d);)if(d=e[o++],!d)return 1/0;for(;o<e.length;o++){const f=e[o],g=i[0],y=d.sub(l),x=f.sub(l),I=g.sub(l),E=lc(y,y),A=lc(y,x),P=lc(x,x),L=lc(I,y),V=lc(I,x),N=E*P-A*A,Z=(P*L-A*V)/N,Y=(E*V-A*L)/N,lt=l.z*(1-Z-Y)+d.z*Z+f.z*Y;if(isFinite(lt))return lt}return 1/0}{let o=1/0;for(const l of e)o=Math.min(o,l.z);return o}}const i0=Pt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:n0}=i0,o0=Pt([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:r0}=o0,a0=na.VectorTileFeature.types,s0=Math.cos(Math.PI/180*37.5),M_=Math.pow(2,14)/.5;class gp{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Ql,this.layoutVertexArray2=new Fu,this.indexArray=new Hs,this.programConfigurations=new Ka(e.layers,e.zoom),this.segments=new ji,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,l){this.hasPattern=dp("line",this.layers,o);const d=this.layers[0].layout.get("line-sort-key"),f=!d.isConstant(),g=[];for(const{feature:y,id:x,index:I,sourceLayerIndex:E}of e){const A=this.layers[0]._featureFilter.needGeometry,P=Ja(y,A);if(!this.layers[0]._featureFilter.filter(new C(this.zoom),P,l))continue;const L=f?d.evaluate(P,{},l):void 0,V={id:x,properties:y.properties,type:y.type,sourceLayerIndex:E,index:I,geometry:A?P.geometry:Ya(y),patterns:{},sortKey:L};g.push(V)}f&&g.sort((y,x)=>y.sortKey-x.sortKey);for(const y of g){const{geometry:x,index:I,sourceLayerIndex:E}=y;if(this.hasPattern){const A=pp("line",this.layers,y,this.zoom,o);this.patternFeatures.push(A)}else this.addFeature(y,x,I,l,{});o.featureIndex.insert(e[I].feature,x,I,E,this.index)}}update(e,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l)}addFeatures(e,o,l){for(const d of this.patternFeatures)this.addFeature(d,d.geometry,d.index,o,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,r0)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,n0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,o,l,d,f){const g=this.layers[0].layout,y=g.get("line-join").evaluate(e,{}),x=g.get("line-cap"),I=g.get("line-miter-limit"),E=g.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const A of o)this.addLine(A,e,y,x,I,E);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,f,d)}addLine(e,o,l,d,f,g){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Y=0;Y<e.length-1;Y++)this.totalDistance+=e[Y].dist(e[Y+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const y=a0[o.type]==="Polygon";let x=e.length;for(;x>=2&&e[x-1].equals(e[x-2]);)x--;let I=0;for(;I<x-1&&e[I].equals(e[I+1]);)I++;if(x<(y?3:2))return;l==="bevel"&&(f=1.05);const E=this.overscaling<=16?15*ui/(512*this.overscaling):0,A=this.segments.prepareSegment(10*x,this.layoutVertexArray,this.indexArray);let P,L,V,N,Z;this.e1=this.e2=-1,y&&(P=e[x-2],Z=e[I].sub(P)._unit()._perp());for(let Y=I;Y<x;Y++){if(V=Y===x-1?y?e[I+1]:void 0:e[Y+1],V&&e[Y].equals(V))continue;Z&&(N=Z),P&&(L=P),P=e[Y],Z=V?V.sub(P)._unit()._perp():N,N=N||Z;let lt=N.add(Z);lt.x===0&&lt.y===0||lt._unit();const nt=N.x*Z.x+N.y*Z.y,ct=lt.x*Z.x+lt.y*Z.y,pt=ct!==0?1/ct:1/0,xt=2*Math.sqrt(2-2*ct),Rt=ct<s0&&L&&V,te=N.x*Z.y-N.y*Z.x>0;if(Rt&&Y>I){const Wt=P.dist(L);if(Wt>2*E){const Ut=P.sub(P.sub(L)._mult(E/Wt)._round());this.updateDistance(L,Ut),this.addCurrentVertex(Ut,N,0,0,A),L=Ut}}const Bt=L&&V;let zt=Bt?l:y?"butt":d;if(Bt&&zt==="round"&&(pt<g?zt="miter":pt<=2&&(zt="fakeround")),zt==="miter"&&pt>f&&(zt="bevel"),zt==="bevel"&&(pt>2&&(zt="flipbevel"),pt<f&&(zt="miter")),L&&this.updateDistance(L,P),zt==="miter")lt._mult(pt),this.addCurrentVertex(P,lt,0,0,A);else if(zt==="flipbevel"){if(pt>100)lt=Z.mult(-1);else{const Wt=pt*N.add(Z).mag()/N.sub(Z).mag();lt._perp()._mult(Wt*(te?-1:1))}this.addCurrentVertex(P,lt,0,0,A),this.addCurrentVertex(P,lt.mult(-1),0,0,A)}else if(zt==="bevel"||zt==="fakeround"){const Wt=-Math.sqrt(pt*pt-1),Ut=te?Wt:0,Ft=te?0:Wt;if(L&&this.addCurrentVertex(P,N,Ut,Ft,A),zt==="fakeround"){const gt=Math.round(180*xt/Math.PI/20);for(let Xt=1;Xt<gt;Xt++){let Gt=Xt/gt;if(Gt!==.5){const Oe=Gt-.5;Gt+=Gt*Oe*(Gt-1)*((1.0904+nt*(nt*(3.55645-1.43519*nt)-3.2452))*Oe*Oe+(.848013+nt*(.215638*nt-1.06021)))}const re=Z.sub(N)._mult(Gt)._add(N)._unit()._mult(te?-1:1);this.addHalfVertex(P,re.x,re.y,!1,te,0,A)}}V&&this.addCurrentVertex(P,Z,-Ut,-Ft,A)}else if(zt==="butt")this.addCurrentVertex(P,lt,0,0,A);else if(zt==="square"){const Wt=L?1:-1;this.addCurrentVertex(P,lt,Wt,Wt,A)}else zt==="round"&&(L&&(this.addCurrentVertex(P,N,0,0,A),this.addCurrentVertex(P,N,1,1,A,!0)),V&&(this.addCurrentVertex(P,Z,-1,-1,A,!0),this.addCurrentVertex(P,Z,0,0,A)));if(Rt&&Y<x-1){const Wt=P.dist(V);if(Wt>2*E){const Ut=P.add(V.sub(P)._mult(E/Wt)._round());this.updateDistance(P,Ut),this.addCurrentVertex(Ut,Z,0,0,A),P=Ut}}}}addCurrentVertex(e,o,l,d,f,g=!1){const y=o.y*d-o.x,x=-o.y-o.x*d;this.addHalfVertex(e,o.x+o.y*l,o.y-o.x*l,g,!1,l,f),this.addHalfVertex(e,y,x,g,!0,-d,f),this.distance>M_/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,o,l,d,f,g))}addHalfVertex({x:e,y:o},l,d,f,g,y,x){const I=.5*(this.lineClips?this.scaledDistance*(M_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(f?1:0),(o<<1)+(g?1:0),Math.round(63*l)+128,Math.round(63*d)+128,1+(y===0?0:y<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const E=x.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,E),x.primitiveLength++),g?this.e2=E:this.e1=E}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,o){this.distance+=e.dist(o),this.updateScaledDistance()}}let D_,P_;$t("LineBucket",gp,{omit:["layers","patternFeatures"]});var z_={get paint(){return P_=P_||new _t({"line-opacity":new H(dt.paint_line["line-opacity"]),"line-color":new H(dt.paint_line["line-color"]),"line-translate":new q(dt.paint_line["line-translate"]),"line-translate-anchor":new q(dt.paint_line["line-translate-anchor"]),"line-width":new H(dt.paint_line["line-width"]),"line-gap-width":new H(dt.paint_line["line-gap-width"]),"line-offset":new H(dt.paint_line["line-offset"]),"line-blur":new H(dt.paint_line["line-blur"]),"line-dasharray":new rt(dt.paint_line["line-dasharray"]),"line-pattern":new ot(dt.paint_line["line-pattern"]),"line-gradient":new ut(dt.paint_line["line-gradient"])})},get layout(){return D_=D_||new _t({"line-cap":new q(dt.layout_line["line-cap"]),"line-join":new H(dt.layout_line["line-join"]),"line-miter-limit":new q(dt.layout_line["line-miter-limit"]),"line-round-limit":new q(dt.layout_line["line-round-limit"]),"line-sort-key":new H(dt.layout_line["line-sort-key"])})}};class l0 extends H{possiblyEvaluate(e,o){return o=new C(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(e,o)}evaluate(e,o,l,d){return o=Qt({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(e,o,l,d)}}let Ju;class c0 extends Ct{constructor(e){super(e,z_),this.gradientVersion=0,Ju||(Ju=new l0(z_.paint.properties["line-width"].specification),Ju.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if(e==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!function(l){return l._styleExpression!==void 0}(o)&&o._styleExpression.expression instanceof Nr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,o){super.recalculate(e,o),this.paint._values["line-floorwidth"]=Ju.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new gp(e)}queryRadius(e){const o=e,l=L_(ec("line-width",this,o),ec("line-gap-width",this,o)),d=ec("line-offset",this,o);return l/2+Math.abs(d)+Gu(this.paint.get("line-translate"))}queryIntersectsFeature(e,o,l,d,f,g,y){const x=Zu(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,y),I=y/2*L_(this.paint.get("line-width").evaluate(o,l),this.paint.get("line-gap-width").evaluate(o,l)),E=this.paint.get("line-offset").evaluate(o,l);return E&&(d=function(A,P){const L=[];for(let V=0;V<A.length;V++){const N=A[V],Z=[];for(let Y=0;Y<N.length;Y++){const lt=N[Y-1],nt=N[Y],ct=N[Y+1],pt=Y===0?new X(0,0):nt.sub(lt)._unit()._perp(),xt=Y===N.length-1?new X(0,0):ct.sub(nt)._unit()._perp(),Rt=pt._add(xt)._unit(),te=Rt.x*xt.x+Rt.y*xt.y;te!==0&&Rt._mult(1/te),Z.push(Rt._mult(P)._add(nt))}L.push(Z)}return L}(d,E*y)),function(A,P,L){for(let V=0;V<P.length;V++){const N=P[V];if(A.length>=3){for(let Z=0;Z<N.length;Z++)if(qs(A,N[Z]))return!0}if(bg(A,N,L))return!0}return!1}(x,d,I)}isTileClipped(){return!0}}function L_(i,e){return e>0?e+2*i:i}const u0=Pt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),h0=Pt([{name:"a_projected_pos",components:3,type:"Float32"}],4);Pt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const d0=Pt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Pt([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const B_=Pt([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),p0=Pt([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function m0(i,e,o){return i.sections.forEach(l=>{l.text=function(d,f,g){const y=f.layout.get("text-transform").evaluate(g,{});return y==="uppercase"?d=d.toLocaleUpperCase():y==="lowercase"&&(d=d.toLocaleLowerCase()),S.applyArabicShaping&&(d=S.applyArabicShaping(d)),d}(l.text,e,o)}),i}Pt([{name:"triangle",components:3,type:"Uint16"}]),Pt([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Pt([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Pt([{type:"Float32",name:"offsetX"}]),Pt([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Pt([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const cc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var vi=24,R_=Re,$_=function(i,e,o,l,d){var f,g,y=8*d-l-1,x=(1<<y)-1,I=x>>1,E=-7,A=d-1,P=i[e+A];for(A+=-1,f=P&(1<<-E)-1,P>>=-E,E+=y;E>0;f=256*f+i[e+A],A+=-1,E-=8);for(g=f&(1<<-E)-1,f>>=-E,E+=l;E>0;g=256*g+i[e+A],A+=-1,E-=8);if(f===0)f=1-I;else{if(f===x)return g?NaN:1/0*(P?-1:1);g+=Math.pow(2,l),f-=I}return(P?-1:1)*g*Math.pow(2,f-l)},V_=function(i,e,o,l,d,f){var g,y,x,I=8*f-d-1,E=(1<<I)-1,A=E>>1,P=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=0,V=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(y=isNaN(e)?1:0,g=E):(g=Math.floor(Math.log(e)/Math.LN2),e*(x=Math.pow(2,-g))<1&&(g--,x*=2),(e+=g+A>=1?P/x:P*Math.pow(2,1-A))*x>=2&&(g++,x/=2),g+A>=E?(y=0,g=E):g+A>=1?(y=(e*x-1)*Math.pow(2,d),g+=A):(y=e*Math.pow(2,A-1)*Math.pow(2,d),g=0));d>=8;i[o+L]=255&y,L+=1,y/=256,d-=8);for(g=g<<d|y,I+=d;I>0;i[o+L]=255&g,L+=1,g/=256,I-=8);i[o+L-1]|=128*V};function Re(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Re.Varint=0,Re.Fixed64=1,Re.Bytes=2,Re.Fixed32=5;var bp=4294967296,F_=1/bp,O_=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function wr(i){return i.type===Re.Bytes?i.readVarint()+i.pos:i.pos+1}function Xs(i,e,o){return o?4294967296*e+(i>>>0):4294967296*(e>>>0)+(i>>>0)}function N_(i,e,o){var l=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));o.realloc(l);for(var d=o.pos-1;d>=i;d--)o.buf[d+l]=o.buf[d]}function _0(i,e){for(var o=0;o<i.length;o++)e.writeVarint(i[o])}function f0(i,e){for(var o=0;o<i.length;o++)e.writeSVarint(i[o])}function g0(i,e){for(var o=0;o<i.length;o++)e.writeFloat(i[o])}function b0(i,e){for(var o=0;o<i.length;o++)e.writeDouble(i[o])}function y0(i,e){for(var o=0;o<i.length;o++)e.writeBoolean(i[o])}function v0(i,e){for(var o=0;o<i.length;o++)e.writeFixed32(i[o])}function x0(i,e){for(var o=0;o<i.length;o++)e.writeSFixed32(i[o])}function w0(i,e){for(var o=0;o<i.length;o++)e.writeFixed64(i[o])}function k0(i,e){for(var o=0;o<i.length;o++)e.writeSFixed64(i[o])}function Qu(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+16777216*i[e+3]}function Ks(i,e,o){i[o]=e,i[o+1]=e>>>8,i[o+2]=e>>>16,i[o+3]=e>>>24}function U_(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+(i[e+3]<<24)}Re.prototype={destroy:function(){this.buf=null},readFields:function(i,e,o){for(o=o||this.length;this.pos<o;){var l=this.readVarint(),d=l>>3,f=this.pos;this.type=7&l,i(d,e,this),this.pos===f&&this.skip(l)}return e},readMessage:function(i,e){return this.readFields(i,e,this.readVarint()+this.pos)},readFixed32:function(){var i=Qu(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=U_(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Qu(this.buf,this.pos)+Qu(this.buf,this.pos+4)*bp;return this.pos+=8,i},readSFixed64:function(){var i=Qu(this.buf,this.pos)+U_(this.buf,this.pos+4)*bp;return this.pos+=8,i},readFloat:function(){var i=$_(this.buf,this.pos,0,23,4);return this.pos+=4,i},readDouble:function(){var i=$_(this.buf,this.pos,0,52,8);return this.pos+=8,i},readVarint:function(i){var e,o,l=this.buf;return e=127&(o=l[this.pos++]),o<128?e:(e|=(127&(o=l[this.pos++]))<<7,o<128?e:(e|=(127&(o=l[this.pos++]))<<14,o<128?e:(e|=(127&(o=l[this.pos++]))<<21,o<128?e:function(d,f,g){var y,x,I=g.buf;if(y=(112&(x=I[g.pos++]))>>4,x<128||(y|=(127&(x=I[g.pos++]))<<3,x<128)||(y|=(127&(x=I[g.pos++]))<<10,x<128)||(y|=(127&(x=I[g.pos++]))<<17,x<128)||(y|=(127&(x=I[g.pos++]))<<24,x<128)||(y|=(1&(x=I[g.pos++]))<<31,x<128))return Xs(d,y,f);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(o=l[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,e=this.pos;return this.pos=i,i-e>=12&&O_?function(o,l,d){return O_.decode(o.subarray(l,d))}(this.buf,e,i):function(o,l,d){for(var f="",g=l;g<d;){var y,x,I,E=o[g],A=null,P=E>239?4:E>223?3:E>191?2:1;if(g+P>d)break;P===1?E<128&&(A=E):P===2?(192&(y=o[g+1]))==128&&(A=(31&E)<<6|63&y)<=127&&(A=null):P===3?(x=o[g+2],(192&(y=o[g+1]))==128&&(192&x)==128&&((A=(15&E)<<12|(63&y)<<6|63&x)<=2047||A>=55296&&A<=57343)&&(A=null)):P===4&&(x=o[g+2],I=o[g+3],(192&(y=o[g+1]))==128&&(192&x)==128&&(192&I)==128&&((A=(15&E)<<18|(63&y)<<12|(63&x)<<6|63&I)<=65535||A>=1114112)&&(A=null)),A===null?(A=65533,P=1):A>65535&&(A-=65536,f+=String.fromCharCode(A>>>10&1023|55296),A=56320|1023&A),f+=String.fromCharCode(A),g+=P}return f}(this.buf,e,i)},readBytes:function(){var i=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,i);return this.pos=i,e},readPackedVarint:function(i,e){if(this.type!==Re.Bytes)return i.push(this.readVarint(e));var o=wr(this);for(i=i||[];this.pos<o;)i.push(this.readVarint(e));return i},readPackedSVarint:function(i){if(this.type!==Re.Bytes)return i.push(this.readSVarint());var e=wr(this);for(i=i||[];this.pos<e;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Re.Bytes)return i.push(this.readBoolean());var e=wr(this);for(i=i||[];this.pos<e;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Re.Bytes)return i.push(this.readFloat());var e=wr(this);for(i=i||[];this.pos<e;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Re.Bytes)return i.push(this.readDouble());var e=wr(this);for(i=i||[];this.pos<e;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Re.Bytes)return i.push(this.readFixed32());var e=wr(this);for(i=i||[];this.pos<e;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Re.Bytes)return i.push(this.readSFixed32());var e=wr(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Re.Bytes)return i.push(this.readFixed64());var e=wr(this);for(i=i||[];this.pos<e;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Re.Bytes)return i.push(this.readSFixed64());var e=wr(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed64());return i},skip:function(i){var e=7&i;if(e===Re.Varint)for(;this.buf[this.pos++]>127;);else if(e===Re.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Re.Fixed32)this.pos+=4;else{if(e!==Re.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(i,e){this.writeVarint(i<<3|e)},realloc:function(i){for(var e=this.length||16;e<this.pos+i;)e*=2;if(e!==this.length){var o=new Uint8Array(e);o.set(this.buf),this.buf=o,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),Ks(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),Ks(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),Ks(this.buf,-1&i,this.pos),Ks(this.buf,Math.floor(i*F_),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),Ks(this.buf,-1&i,this.pos),Ks(this.buf,Math.floor(i*F_),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(e,o){var l,d;if(e>=0?(l=e%4294967296|0,d=e/4294967296|0):(d=~(-e/4294967296),4294967295^(l=~(-e%4294967296))?l=l+1|0:(l=0,d=d+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(f,g,y){y.buf[y.pos++]=127&f|128,f>>>=7,y.buf[y.pos++]=127&f|128,f>>>=7,y.buf[y.pos++]=127&f|128,f>>>=7,y.buf[y.pos++]=127&f|128,y.buf[y.pos]=127&(f>>>=7)}(l,0,o),function(f,g){var y=(7&f)<<4;g.buf[g.pos++]|=y|((f>>>=3)?128:0),f&&(g.buf[g.pos++]=127&f|((f>>>=7)?128:0),f&&(g.buf[g.pos++]=127&f|((f>>>=7)?128:0),f&&(g.buf[g.pos++]=127&f|((f>>>=7)?128:0),f&&(g.buf[g.pos++]=127&f|((f>>>=7)?128:0),f&&(g.buf[g.pos++]=127&f)))))}(d,o)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var e=this.pos;this.pos=function(l,d,f){for(var g,y,x=0;x<d.length;x++){if((g=d.charCodeAt(x))>55295&&g<57344){if(!y){g>56319||x+1===d.length?(l[f++]=239,l[f++]=191,l[f++]=189):y=g;continue}if(g<56320){l[f++]=239,l[f++]=191,l[f++]=189,y=g;continue}g=y-55296<<10|g-56320|65536,y=null}else y&&(l[f++]=239,l[f++]=191,l[f++]=189,y=null);g<128?l[f++]=g:(g<2048?l[f++]=g>>6|192:(g<65536?l[f++]=g>>12|224:(l[f++]=g>>18|240,l[f++]=g>>12&63|128),l[f++]=g>>6&63|128),l[f++]=63&g|128)}return f}(this.buf,i,this.pos);var o=this.pos-e;o>=128&&N_(e,o,this),this.pos=e-1,this.writeVarint(o),this.pos+=o},writeFloat:function(i){this.realloc(4),V_(this.buf,i,this.pos,0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),V_(this.buf,i,this.pos,0,52,8),this.pos+=8},writeBytes:function(i){var e=i.length;this.writeVarint(e),this.realloc(e);for(var o=0;o<e;o++)this.buf[this.pos++]=i[o]},writeRawMessage:function(i,e){this.pos++;var o=this.pos;i(e,this);var l=this.pos-o;l>=128&&N_(o,l,this),this.pos=o-1,this.writeVarint(l),this.pos+=l},writeMessage:function(i,e,o){this.writeTag(i,Re.Bytes),this.writeRawMessage(e,o)},writePackedVarint:function(i,e){e.length&&this.writeMessage(i,_0,e)},writePackedSVarint:function(i,e){e.length&&this.writeMessage(i,f0,e)},writePackedBoolean:function(i,e){e.length&&this.writeMessage(i,y0,e)},writePackedFloat:function(i,e){e.length&&this.writeMessage(i,g0,e)},writePackedDouble:function(i,e){e.length&&this.writeMessage(i,b0,e)},writePackedFixed32:function(i,e){e.length&&this.writeMessage(i,v0,e)},writePackedSFixed32:function(i,e){e.length&&this.writeMessage(i,x0,e)},writePackedFixed64:function(i,e){e.length&&this.writeMessage(i,w0,e)},writePackedSFixed64:function(i,e){e.length&&this.writeMessage(i,k0,e)},writeBytesField:function(i,e){this.writeTag(i,Re.Bytes),this.writeBytes(e)},writeFixed32Field:function(i,e){this.writeTag(i,Re.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(i,e){this.writeTag(i,Re.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(i,e){this.writeTag(i,Re.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(i,e){this.writeTag(i,Re.Fixed64),this.writeSFixed64(e)},writeVarintField:function(i,e){this.writeTag(i,Re.Varint),this.writeVarint(e)},writeSVarintField:function(i,e){this.writeTag(i,Re.Varint),this.writeSVarint(e)},writeStringField:function(i,e){this.writeTag(i,Re.Bytes),this.writeString(e)},writeFloatField:function(i,e){this.writeTag(i,Re.Fixed32),this.writeFloat(e)},writeDoubleField:function(i,e){this.writeTag(i,Re.Fixed64),this.writeDouble(e)},writeBooleanField:function(i,e){this.writeVarintField(i,!!e)}};var yp=T(R_);function S0(i,e,o){i===1&&o.readMessage(I0,e)}function I0(i,e,o){if(i===3){const{id:l,bitmap:d,width:f,height:g,left:y,top:x,advance:I}=o.readMessage(T0,{});e.push({id:l,bitmap:new nc({width:f+6,height:g+6},d),metrics:{width:f,height:g,left:y,top:x,advance:I}})}}function T0(i,e,o){i===1?e.id=o.readVarint():i===2?e.bitmap=o.readBytes():i===3?e.width=o.readVarint():i===4?e.height=o.readVarint():i===5?e.left=o.readSVarint():i===6?e.top=o.readSVarint():i===7&&(e.advance=o.readVarint())}function H_(i){let e=0,o=0;for(const g of i)e+=g.w*g.h,o=Math.max(o,g.w);i.sort((g,y)=>y.h-g.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),o),h:1/0}];let d=0,f=0;for(const g of i)for(let y=l.length-1;y>=0;y--){const x=l[y];if(!(g.w>x.w||g.h>x.h)){if(g.x=x.x,g.y=x.y,f=Math.max(f,g.y+g.h),d=Math.max(d,g.x+g.w),g.w===x.w&&g.h===x.h){const I=l.pop();y<l.length&&(l[y]=I)}else g.h===x.h?(x.x+=g.w,x.w-=g.w):g.w===x.w?(x.y+=g.h,x.h-=g.h):(l.push({x:x.x+g.w,y:x.y,w:x.w-g.w,h:g.h}),x.y+=g.h,x.h-=g.h);break}}return{w:d,h:f,fill:e/(d*f)||0}}class vp{constructor(e,{pixelRatio:o,version:l,stretchX:d,stretchY:f,content:g,textFitWidth:y,textFitHeight:x}){this.paddedRect=e,this.pixelRatio=o,this.stretchX=d,this.stretchY=f,this.content=g,this.version=l,this.textFitWidth=y,this.textFitHeight=x}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class j_{constructor(e,o){const l={},d={};this.haveRenderCallbacks=[];const f=[];this.addImages(e,l,f),this.addImages(o,d,f);const{w:g,h:y}=H_(f),x=new On({width:g||1,height:y||1});for(const I in e){const E=e[I],A=l[I].paddedRect;On.copy(E.data,x,{x:0,y:0},{x:A.x+1,y:A.y+1},E.data)}for(const I in o){const E=o[I],A=d[I].paddedRect,P=A.x+1,L=A.y+1,V=E.data.width,N=E.data.height;On.copy(E.data,x,{x:0,y:0},{x:P,y:L},E.data),On.copy(E.data,x,{x:0,y:N-1},{x:P,y:L-1},{width:V,height:1}),On.copy(E.data,x,{x:0,y:0},{x:P,y:L+N},{width:V,height:1}),On.copy(E.data,x,{x:V-1,y:0},{x:P-1,y:L},{width:1,height:N}),On.copy(E.data,x,{x:0,y:0},{x:P+V,y:L},{width:1,height:N})}this.image=x,this.iconPositions=l,this.patternPositions=d}addImages(e,o,l){for(const d in e){const f=e[d],g={x:0,y:0,w:f.data.width+2,h:f.data.height+2};l.push(g),o[d]=new vp(g,f),f.hasRenderCallback&&this.haveRenderCallbacks.push(d)}}patchUpdatedImages(e,o){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in e.updatedImages)this.patchUpdatedImage(this.iconPositions[l],e.getImage(l),o),this.patchUpdatedImage(this.patternPositions[l],e.getImage(l),o)}patchUpdatedImage(e,o,l){if(!e||!o||e.version===o.version)return;e.version=o.version;const[d,f]=e.tl;l.update(o.data,void 0,{x:d,y:f})}}var oa;$t("ImagePosition",vp),$t("ImageAtlas",j_),u.ah=void 0,(oa=u.ah||(u.ah={}))[oa.none=0]="none",oa[oa.horizontal=1]="horizontal",oa[oa.vertical=2]="vertical",oa[oa.horizontalOnly=3]="horizontalOnly";const th=-17;class uc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,o){const l=new uc;return l.scale=e||1,l.fontStack=o,l}static forImage(e){const o=new uc;return o.imageName=e,o}}class Ys{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,o){const l=new Ys;for(let d=0;d<e.sections.length;d++){const f=e.sections[d];f.image?l.addImageSection(f):l.addTextSection(f,o)}return l}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let o="";for(let l=0;l<e.length;l++){const d=e.charCodeAt(l+1)||null,f=e.charCodeAt(l-1)||null;o+=d&&c(d)&&!cc[e[l+1]]||f&&c(f)&&!cc[e[l-1]]||!cc[e[l]]?e[l]:cc[e[l]]}return o}(this.text)}trim(){let e=0;for(let l=0;l<this.text.length&&ih[this.text.charCodeAt(l)];l++)e++;let o=this.text.length;for(let l=this.text.length-1;l>=0&&l>=e&&ih[this.text.charCodeAt(l)];l--)o--;this.text=this.text.substring(e,o),this.sectionIndex=this.sectionIndex.slice(e,o)}substring(e,o){const l=new Ys;return l.text=this.text.substring(e,o),l.sectionIndex=this.sectionIndex.slice(e,o),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,o)=>Math.max(e,this.sections[o].scale),0)}addTextSection(e,o){this.text+=e.text,this.sections.push(uc.forText(e.scale,e.fontStack||o));const l=this.sections.length-1;for(let d=0;d<e.text.length;++d)this.sectionIndex.push(l)}addImageSection(e){const o=e.image?e.image.name:"";if(o.length===0)return void ae("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(uc.forImage(o)),this.sectionIndex.push(this.sections.length-1)):ae("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function eh(i,e,o,l,d,f,g,y,x,I,E,A,P,L,V){const N=Ys.fromFeature(i,d);let Z;A===u.ah.vertical&&N.verticalizePunctuation();const{processBidirectionalText:Y,processStyledBidirectionalText:lt}=S;if(Y&&N.sections.length===1){Z=[];const pt=Y(N.toString(),xp(N,I,f,e,l,L));for(const xt of pt){const Rt=new Ys;Rt.text=xt,Rt.sections=N.sections;for(let te=0;te<xt.length;te++)Rt.sectionIndex.push(0);Z.push(Rt)}}else if(lt){Z=[];const pt=lt(N.text,N.sectionIndex,xp(N,I,f,e,l,L));for(const xt of pt){const Rt=new Ys;Rt.text=xt[0],Rt.sectionIndex=xt[1],Rt.sections=N.sections,Z.push(Rt)}}else Z=function(pt,xt){const Rt=[],te=pt.text;let Bt=0;for(const zt of xt)Rt.push(pt.substring(Bt,zt)),Bt=zt;return Bt<te.length&&Rt.push(pt.substring(Bt,te.length)),Rt}(N,xp(N,I,f,e,l,L));const nt=[],ct={positionedLines:nt,text:N.toString(),top:E[1],bottom:E[1],left:E[0],right:E[0],writingMode:A,iconsInText:!1,verticalizable:!1};return function(pt,xt,Rt,te,Bt,zt,Wt,Ut,Ft,gt,Xt,Gt){let re=0,Oe=th,$e=0,xi=0;const io=Ut==="right"?1:Ut==="left"?0:.5;let Ri=0;for(const ni of Bt){ni.trim();const ki=ni.getMaxScale(),qi=(ki-1)*vi,$i={positionedGlyphs:[],lineOffset:0};pt.positionedLines[Ri]=$i;const on=$i.positionedGlyphs;let Vi=0;if(!ni.length()){Oe+=zt,++Ri;continue}for(let _n=0;_n<ni.length();_n++){const ke=ni.getSection(_n),qe=ni.getSectionIndex(_n),Ze=ni.getCharCode(_n);let Cn=0,Qe=null,tl=null,jo=null,qo=vi;const no=!(Ft===u.ah.horizontal||!Xt&&!r(Ze)||Xt&&(ih[Ze]||(wi=Ze,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(wi)))));if(ke.imageName){const Hn=te[ke.imageName];if(!Hn)continue;jo=ke.imageName,pt.iconsInText=pt.iconsInText||!0,tl=Hn.paddedRect;const Mi=Hn.displaySize;ke.scale=ke.scale*vi/Gt,Qe={width:Mi[0],height:Mi[1],left:1,top:-3,advance:no?Mi[1]:Mi[0]},Cn=qi+(vi-Mi[1]*ke.scale),qo=Qe.advance;const Sr=no?Mi[0]*ke.scale-vi*ki:Mi[1]*ke.scale-vi*ki;Sr>0&&Sr>Vi&&(Vi=Sr)}else{const Hn=Rt[ke.fontStack],Mi=Hn&&Hn[Ze];if(Mi&&Mi.rect)tl=Mi.rect,Qe=Mi.metrics;else{const Sr=xt[ke.fontStack],_c=Sr&&Sr[Ze];if(!_c)continue;Qe=_c.metrics}Cn=(ki-ke.scale)*vi}no?(pt.verticalizable=!0,on.push({glyph:Ze,imageName:jo,x:re,y:Oe+Cn,vertical:no,scale:ke.scale,fontStack:ke.fontStack,sectionIndex:qe,metrics:Qe,rect:tl}),re+=qo*ke.scale+gt):(on.push({glyph:Ze,imageName:jo,x:re,y:Oe+Cn,vertical:no,scale:ke.scale,fontStack:ke.fontStack,sectionIndex:qe,metrics:Qe,rect:tl}),re+=Qe.advance*ke.scale+gt)}on.length!==0&&($e=Math.max(re-gt,$e),M0(on,0,on.length-1,io,Vi)),re=0;const Un=zt*ki+Vi;$i.lineOffset=Math.max(Vi,qi),Oe+=Un,xi=Math.max(Un,xi),++Ri}var wi;const tn=Oe-th,{horizontalAlign:en,verticalAlign:nn}=wp(Wt);(function(ni,ki,qi,$i,on,Vi,Un,_n,ke){const qe=(ki-qi)*on;let Ze=0;Ze=Vi!==Un?-_n*$i-th:(-$i*ke+.5)*Un;for(const Cn of ni)for(const Qe of Cn.positionedGlyphs)Qe.x+=qe,Qe.y+=Ze})(pt.positionedLines,io,en,nn,$e,xi,zt,tn,Bt.length),pt.top+=-nn*tn,pt.bottom=pt.top+tn,pt.left+=-en*$e,pt.right=pt.left+$e}(ct,e,o,l,Z,g,y,x,A,I,P,V),!function(pt){for(const xt of pt)if(xt.positionedGlyphs.length!==0)return!1;return!0}(nt)&&ct}const ih={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},C0={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},E0={40:!0};function q_(i,e,o,l,d,f){if(e.imageName){const g=l[e.imageName];return g?g.displaySize[0]*e.scale*vi/f+d:0}{const g=o[e.fontStack],y=g&&g[i];return y?y.metrics.advance*e.scale+d:0}}function G_(i,e,o,l){const d=Math.pow(i-e,2);return l?i<e?d/2:2*d:d+Math.abs(o)*o}function A0(i,e,o){let l=0;return i===10&&(l-=1e4),o&&(l+=150),i!==40&&i!==65288||(l+=50),e!==41&&e!==65289||(l+=50),l}function Z_(i,e,o,l,d,f){let g=null,y=G_(e,o,d,f);for(const x of l){const I=G_(e-x.x,o,d,f)+x.badness;I<=y&&(g=x,y=I)}return{index:i,x:e,priorBreak:g,badness:y}}function W_(i){return i?W_(i.priorBreak).concat(i.index):[]}function xp(i,e,o,l,d,f){if(!i)return[];const g=[],y=function(A,P,L,V,N,Z){let Y=0;for(let lt=0;lt<A.length();lt++){const nt=A.getSection(lt);Y+=q_(A.getCharCode(lt),nt,V,N,P,Z)}return Y/Math.max(1,Math.ceil(Y/L))}(i,e,o,l,d,f),x=i.text.indexOf("​")>=0;let I=0;for(let A=0;A<i.length();A++){const P=i.getSection(A),L=i.getCharCode(A);if(ih[L]||(I+=q_(L,P,l,d,e,f)),A<i.length()-1){const V=!((E=L)<11904)&&(!!Kl(E)||!!Vs(E)||!!$s(E)||!!Wl(E)||!!Xl(E)||!!br(E)||!!Du(E)||!!Qr(E)||t.test(String.fromCodePoint(E)));(C0[L]||V||P.imageName||A!==i.length()-2&&E0[i.getCharCode(A+1)])&&g.push(Z_(A+1,I,y,g,A0(L,i.getCharCode(A+1),V&&x),!1))}}var E;return W_(Z_(i.length(),I,y,g,0,!0))}function wp(i){let e=.5,o=.5;switch(i){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:e,verticalAlign:o}}function M0(i,e,o,l,d){if(!l&&!d)return;const f=i[o],g=(i[o].x+f.metrics.advance*f.scale)*l;for(let y=e;y<=o;y++)i[y].x-=g,i[y].y+=d}function D0(i,e,o){const{horizontalAlign:l,verticalAlign:d}=wp(o),f=e[0]-i.displaySize[0]*l,g=e[1]-i.displaySize[1]*d;return{image:i,top:g,bottom:g+i.displaySize[1],left:f,right:f+i.displaySize[0]}}function X_(i){var e,o;let l=i.left,d=i.top,f=i.right-l,g=i.bottom-d;const y=(e=i.image.textFitWidth)!==null&&e!==void 0?e:"stretchOrShrink",x=(o=i.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",I=(i.image.content[2]-i.image.content[0])/(i.image.content[3]-i.image.content[1]);if(x==="proportional"){if(y==="stretchOnly"&&f/g<I||y==="proportional"){const E=Math.ceil(g*I);l*=E/f,f=E}}else if(y==="proportional"&&x==="stretchOnly"&&I!==0&&f/g>I){const E=Math.ceil(f/I);d*=E/g,g=E}return{x1:l,y1:d,x2:l+f,y2:d+g}}function K_(i,e,o,l,d,f){const g=i.image;let y;if(g.content){const Z=g.content,Y=g.pixelRatio||1;y=[Z[0]/Y,Z[1]/Y,g.displaySize[0]-Z[2]/Y,g.displaySize[1]-Z[3]/Y]}const x=e.left*f,I=e.right*f;let E,A,P,L;o==="width"||o==="both"?(L=d[0]+x-l[3],A=d[0]+I+l[1]):(L=d[0]+(x+I-g.displaySize[0])/2,A=L+g.displaySize[0]);const V=e.top*f,N=e.bottom*f;return o==="height"||o==="both"?(E=d[1]+V-l[0],P=d[1]+N+l[2]):(E=d[1]+(V+N-g.displaySize[1])/2,P=E+g.displaySize[1]),{image:g,top:E,right:A,bottom:P,left:L,collisionPadding:y}}const kr=128,ra=32640;function Y_(i,e){const{expression:o}=e;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new C(i+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:l,interpolationType:d}=o;let f=0;for(;f<l.length&&l[f]<=i;)f++;f=Math.max(0,f-1);let g=f;for(;g<l.length&&l[g]<i+1;)g++;g=Math.min(l.length-1,g);const y=l[f],x=l[g];return o.kind==="composite"?{kind:"composite",minZoom:y,maxZoom:x,interpolationType:d}:{kind:"camera",minZoom:y,maxZoom:x,minSize:o.evaluate(new C(y)),maxSize:o.evaluate(new C(x)),interpolationType:d}}}function kp(i,e,o){let l="never";const d=i.get(e);return d?l=d:i.get(o)&&(l="always"),l}const P0=na.VectorTileFeature.types,z0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function nh(i,e,o,l,d,f,g,y,x,I,E,A,P){const L=y?Math.min(ra,Math.round(y[0])):0,V=y?Math.min(ra,Math.round(y[1])):0;i.emplaceBack(e,o,Math.round(32*l),Math.round(32*d),f,g,(L<<1)+(x?1:0),V,16*I,16*E,256*A,256*P)}function Sp(i,e,o){i.emplaceBack(e.x,e.y,o),i.emplaceBack(e.x,e.y,o),i.emplaceBack(e.x,e.y,o),i.emplaceBack(e.x,e.y,o)}function L0(i){for(const e of i.sections)if(w(e.text))return!0;return!1}class Ip{constructor(e){this.layoutVertexArray=new sg,this.indexArray=new Hs,this.programConfigurations=e,this.segments=new ji,this.dynamicLayoutVertexArray=new lg,this.opacityVertexArray=new cg,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ai}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,o,l,d){this.isEmpty()||(l&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,u0.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,h0.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,z0,!0),this.opacityVertexBuffer.itemSize=1),(l||d)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}$t("SymbolBuffers",Ip);class Tp{constructor(e,o,l){this.layoutVertexArray=new e,this.layoutAttributes=o,this.indexArray=new l,this.segments=new ji,this.collisionVertexArray=new ug}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,d0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}$t("CollisionBuffers",Tp);class Js{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(g=>g.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ap([]),this.placementViewportMatrix=ap([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Y_(this.zoom,o["text-size"]),this.iconSizeData=Y_(this.zoom,o["icon-size"]);const l=this.layers[0].layout,d=l.get("symbol-sort-key"),f=l.get("symbol-z-order");this.canOverlap=kp(l,"text-overlap","text-allow-overlap")!=="never"||kp(l,"icon-overlap","icon-allow-overlap")!=="never"||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&!d.isConstant(),this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map(g=>u.ah[g])),this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id),this.sourceID=e.sourceID}createArrays(){this.text=new Ip(new Ka(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Ip(new Ka(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new vr,this.lineVertexArray=new Ns,this.symbolInstances=new Je,this.textAnchorOffsets=new zu}calculateGlyphDependencies(e,o,l,d,f){for(let g=0;g<e.length;g++)if(o[e.charCodeAt(g)]=!0,(l||d)&&f){const y=cc[e.charAt(g)];y&&(o[y.charCodeAt(0)]=!0)}}populate(e,o,l){const d=this.layers[0],f=d.layout,g=f.get("text-font"),y=f.get("text-field"),x=f.get("icon-image"),I=(y.value.kind!=="constant"||y.value.value instanceof un&&!y.value.value.isEmpty()||y.value.value.toString().length>0)&&(g.value.kind!=="constant"||g.value.value.length>0),E=x.value.kind!=="constant"||!!x.value.value||Object.keys(x.parameters).length>0,A=f.get("symbol-sort-key");if(this.features=[],!I&&!E)return;const P=o.iconDependencies,L=o.glyphDependencies,V=o.availableImages,N=new C(this.zoom);for(const{feature:Z,id:Y,index:lt,sourceLayerIndex:nt}of e){const ct=d._featureFilter.needGeometry,pt=Ja(Z,ct);if(!d._featureFilter.filter(N,pt,l))continue;let xt,Rt;if(ct||(pt.geometry=Ya(Z)),I){const Bt=d.getValueAndResolveTokens("text-field",pt,l,V),zt=un.factory(Bt),Wt=this.hasRTLText=this.hasRTLText||L0(zt);(!Wt||S.getRTLTextPluginStatus()==="unavailable"||Wt&&S.isParsed())&&(xt=m0(zt,d,pt))}if(E){const Bt=d.getValueAndResolveTokens("icon-image",pt,l,V);Rt=Bt instanceof dn?Bt:dn.fromString(Bt)}if(!xt&&!Rt)continue;const te=this.sortFeaturesByKey?A.evaluate(pt,{},l):void 0;if(this.features.push({id:Y,text:xt,icon:Rt,index:lt,sourceLayerIndex:nt,geometry:pt.geometry,properties:Z.properties,type:P0[Z.type],sortKey:te}),Rt&&(P[Rt.name]=!0),xt){const Bt=g.evaluate(pt,{},l).join(","),zt=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.ah.vertical)>=0;for(const Wt of xt.sections)if(Wt.image)P[Wt.image.name]=!0;else{const Ut=Jl(xt.toString()),Ft=Wt.fontStack||Bt,gt=L[Ft]=L[Ft]||{};this.calculateGlyphDependencies(Wt.text,gt,zt,this.allowVerticalPlacement,Ut)}}}f.get("symbol-placement")==="line"&&(this.features=function(Z){const Y={},lt={},nt=[];let ct=0;function pt(Bt){nt.push(Z[Bt]),ct++}function xt(Bt,zt,Wt){const Ut=lt[Bt];return delete lt[Bt],lt[zt]=Ut,nt[Ut].geometry[0].pop(),nt[Ut].geometry[0]=nt[Ut].geometry[0].concat(Wt[0]),Ut}function Rt(Bt,zt,Wt){const Ut=Y[zt];return delete Y[zt],Y[Bt]=Ut,nt[Ut].geometry[0].shift(),nt[Ut].geometry[0]=Wt[0].concat(nt[Ut].geometry[0]),Ut}function te(Bt,zt,Wt){const Ut=Wt?zt[0][zt[0].length-1]:zt[0][0];return`${Bt}:${Ut.x}:${Ut.y}`}for(let Bt=0;Bt<Z.length;Bt++){const zt=Z[Bt],Wt=zt.geometry,Ut=zt.text?zt.text.toString():null;if(!Ut){pt(Bt);continue}const Ft=te(Ut,Wt),gt=te(Ut,Wt,!0);if(Ft in lt&&gt in Y&&lt[Ft]!==Y[gt]){const Xt=Rt(Ft,gt,Wt),Gt=xt(Ft,gt,nt[Xt].geometry);delete Y[Ft],delete lt[gt],lt[te(Ut,nt[Gt].geometry,!0)]=Gt,nt[Xt].geometry=null}else Ft in lt?xt(Ft,gt,Wt):gt in Y?Rt(Ft,gt,Wt):(pt(Bt),Y[Ft]=ct-1,lt[gt]=ct-1)}return nt.filter(Bt=>Bt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Z,Y)=>Z.sortKey-Y.sortKey)}update(e,o,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,o,this.layers,l),this.icon.programConfigurations.updatePaintArrays(e,o,this.layers,l))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,o){const l=this.lineVertexArray.length;if(e.segment!==void 0){let d=e.dist(o[e.segment+1]),f=e.dist(o[e.segment]);const g={};for(let y=e.segment+1;y<o.length;y++)g[y]={x:o[y].x,y:o[y].y,tileUnitDistanceFromAnchor:d},y<o.length-1&&(d+=o[y+1].dist(o[y]));for(let y=e.segment||0;y>=0;y--)g[y]={x:o[y].x,y:o[y].y,tileUnitDistanceFromAnchor:f},y>0&&(f+=o[y-1].dist(o[y]));for(let y=0;y<o.length;y++){const x=g[y];this.lineVertexArray.emplaceBack(x.x,x.y,x.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(e,o,l,d,f,g,y,x,I,E,A,P){const L=e.indexArray,V=e.layoutVertexArray,N=e.segments.prepareSegment(4*o.length,V,L,this.canOverlap?g.sortKey:void 0),Z=this.glyphOffsetArray.length,Y=N.vertexLength,lt=this.allowVerticalPlacement&&y===u.ah.vertical?Math.PI/2:0,nt=g.text&&g.text.sections;for(let ct=0;ct<o.length;ct++){const{tl:pt,tr:xt,bl:Rt,br:te,tex:Bt,pixelOffsetTL:zt,pixelOffsetBR:Wt,minFontScaleX:Ut,minFontScaleY:Ft,glyphOffset:gt,isSDF:Xt,sectionIndex:Gt}=o[ct],re=N.vertexLength,Oe=gt[1];nh(V,x.x,x.y,pt.x,Oe+pt.y,Bt.x,Bt.y,l,Xt,zt.x,zt.y,Ut,Ft),nh(V,x.x,x.y,xt.x,Oe+xt.y,Bt.x+Bt.w,Bt.y,l,Xt,Wt.x,zt.y,Ut,Ft),nh(V,x.x,x.y,Rt.x,Oe+Rt.y,Bt.x,Bt.y+Bt.h,l,Xt,zt.x,Wt.y,Ut,Ft),nh(V,x.x,x.y,te.x,Oe+te.y,Bt.x+Bt.w,Bt.y+Bt.h,l,Xt,Wt.x,Wt.y,Ut,Ft),Sp(e.dynamicLayoutVertexArray,x,lt),L.emplaceBack(re,re+1,re+2),L.emplaceBack(re+1,re+2,re+3),N.vertexLength+=4,N.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(gt[0]),ct!==o.length-1&&Gt===o[ct+1].sectionIndex||e.programConfigurations.populatePaintArrays(V.length,g,g.index,{},P,nt&&nt[Gt])}e.placedSymbolArray.emplaceBack(x.x,x.y,Z,this.glyphOffsetArray.length-Z,Y,I,E,x.segment,l?l[0]:0,l?l[1]:0,d[0],d[1],y,0,!1,0,A)}_addCollisionDebugVertex(e,o,l,d,f,g){return o.emplaceBack(0,0),e.emplaceBack(l.x,l.y,d,f,Math.round(g.x),Math.round(g.y))}addCollisionDebugVertices(e,o,l,d,f,g,y){const x=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),I=x.vertexLength,E=f.layoutVertexArray,A=f.collisionVertexArray,P=y.anchorX,L=y.anchorY;this._addCollisionDebugVertex(E,A,g,P,L,new X(e,o)),this._addCollisionDebugVertex(E,A,g,P,L,new X(l,o)),this._addCollisionDebugVertex(E,A,g,P,L,new X(l,d)),this._addCollisionDebugVertex(E,A,g,P,L,new X(e,d)),x.vertexLength+=4;const V=f.indexArray;V.emplaceBack(I,I+1),V.emplaceBack(I+1,I+2),V.emplaceBack(I+2,I+3),V.emplaceBack(I+3,I),x.primitiveLength+=4}addDebugCollisionBoxes(e,o,l,d){for(let f=e;f<o;f++){const g=this.collisionBoxArray.get(f);this.addCollisionDebugVertices(g.x1,g.y1,g.x2,g.y2,d?this.textCollisionBox:this.iconCollisionBox,g.anchorPoint,l)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Tp(Wm,B_.members,Jd),this.iconCollisionBox=new Tp(Wm,B_.members,Jd);for(let e=0;e<this.symbolInstances.length;e++){const o=this.symbolInstances.get(e);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(e,o,l,d,f,g,y,x,I){const E={};for(let A=o;A<l;A++){const P=e.get(A);E.textBox={x1:P.x1,y1:P.y1,x2:P.x2,y2:P.y2,anchorPointX:P.anchorPointX,anchorPointY:P.anchorPointY},E.textFeatureIndex=P.featureIndex;break}for(let A=d;A<f;A++){const P=e.get(A);E.verticalTextBox={x1:P.x1,y1:P.y1,x2:P.x2,y2:P.y2,anchorPointX:P.anchorPointX,anchorPointY:P.anchorPointY},E.verticalTextFeatureIndex=P.featureIndex;break}for(let A=g;A<y;A++){const P=e.get(A);E.iconBox={x1:P.x1,y1:P.y1,x2:P.x2,y2:P.y2,anchorPointX:P.anchorPointX,anchorPointY:P.anchorPointY},E.iconFeatureIndex=P.featureIndex;break}for(let A=x;A<I;A++){const P=e.get(A);E.verticalIconBox={x1:P.x1,y1:P.y1,x2:P.x2,y2:P.y2,anchorPointX:P.anchorPointX,anchorPointY:P.anchorPointY},E.verticalIconFeatureIndex=P.featureIndex;break}return E}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const l=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,o){const l=e.placedSymbolArray.get(o),d=l.vertexStartIndex+4*l.numGlyphs;for(let f=l.vertexStartIndex;f<d;f+=4)e.indexArray.emplaceBack(f,f+1,f+2),e.indexArray.emplaceBack(f+1,f+2,f+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(e),l=Math.cos(e),d=[],f=[],g=[];for(let y=0;y<this.symbolInstances.length;++y){g.push(y);const x=this.symbolInstances.get(y);d.push(0|Math.round(o*x.anchorX+l*x.anchorY)),f.push(x.featureIndex)}return g.sort((y,x)=>d[y]-d[x]||f[x]-f[y]),g}addToSortKeyRanges(e,o){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===o?l.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const l=this.symbolInstances.get(o);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach((d,f,g)=>{d>=0&&g.indexOf(d)===f&&this.addIndicesForPlacedSymbol(this.text,d)}),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let J_,Q_;$t("SymbolBucket",Js,{omit:["layers","collisionBoxArray","features","compareText"]}),Js.MAX_GLYPHS=65535,Js.addDynamicAttributes=Sp;var Cp={get paint(){return Q_=Q_||new _t({"icon-opacity":new H(dt.paint_symbol["icon-opacity"]),"icon-color":new H(dt.paint_symbol["icon-color"]),"icon-halo-color":new H(dt.paint_symbol["icon-halo-color"]),"icon-halo-width":new H(dt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new H(dt.paint_symbol["icon-halo-blur"]),"icon-translate":new q(dt.paint_symbol["icon-translate"]),"icon-translate-anchor":new q(dt.paint_symbol["icon-translate-anchor"]),"text-opacity":new H(dt.paint_symbol["text-opacity"]),"text-color":new H(dt.paint_symbol["text-color"],{runtimeType:Ni,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new H(dt.paint_symbol["text-halo-color"]),"text-halo-width":new H(dt.paint_symbol["text-halo-width"]),"text-halo-blur":new H(dt.paint_symbol["text-halo-blur"]),"text-translate":new q(dt.paint_symbol["text-translate"]),"text-translate-anchor":new q(dt.paint_symbol["text-translate-anchor"])})},get layout(){return J_=J_||new _t({"symbol-placement":new q(dt.layout_symbol["symbol-placement"]),"symbol-spacing":new q(dt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new q(dt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new H(dt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new q(dt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new q(dt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new q(dt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new q(dt.layout_symbol["icon-ignore-placement"]),"icon-optional":new q(dt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new q(dt.layout_symbol["icon-rotation-alignment"]),"icon-size":new H(dt.layout_symbol["icon-size"]),"icon-text-fit":new q(dt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new q(dt.layout_symbol["icon-text-fit-padding"]),"icon-image":new H(dt.layout_symbol["icon-image"]),"icon-rotate":new H(dt.layout_symbol["icon-rotate"]),"icon-padding":new H(dt.layout_symbol["icon-padding"]),"icon-keep-upright":new q(dt.layout_symbol["icon-keep-upright"]),"icon-offset":new H(dt.layout_symbol["icon-offset"]),"icon-anchor":new H(dt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new q(dt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new q(dt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new q(dt.layout_symbol["text-rotation-alignment"]),"text-field":new H(dt.layout_symbol["text-field"]),"text-font":new H(dt.layout_symbol["text-font"]),"text-size":new H(dt.layout_symbol["text-size"]),"text-max-width":new H(dt.layout_symbol["text-max-width"]),"text-line-height":new q(dt.layout_symbol["text-line-height"]),"text-letter-spacing":new H(dt.layout_symbol["text-letter-spacing"]),"text-justify":new H(dt.layout_symbol["text-justify"]),"text-radial-offset":new H(dt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new q(dt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new H(dt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new H(dt.layout_symbol["text-anchor"]),"text-max-angle":new q(dt.layout_symbol["text-max-angle"]),"text-writing-mode":new q(dt.layout_symbol["text-writing-mode"]),"text-rotate":new H(dt.layout_symbol["text-rotate"]),"text-padding":new q(dt.layout_symbol["text-padding"]),"text-keep-upright":new q(dt.layout_symbol["text-keep-upright"]),"text-transform":new H(dt.layout_symbol["text-transform"]),"text-offset":new H(dt.layout_symbol["text-offset"]),"text-allow-overlap":new q(dt.layout_symbol["text-allow-overlap"]),"text-overlap":new q(dt.layout_symbol["text-overlap"]),"text-ignore-placement":new q(dt.layout_symbol["text-ignore-placement"]),"text-optional":new q(dt.layout_symbol["text-optional"])})}};class tf{constructor(e){if(e.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:Bo,this.defaultValue=e}evaluate(e){if(e.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(e.formattedSection))return o.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}$t("FormatSectionOverride",tf,{omit:["defaultValue"]});class oh extends Ct{constructor(e){super(e,Cp)}recalculate(e,o){if(super.recalculate(e,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const l=this.layout.get("text-writing-mode");if(l){const d=[];for(const f of l)d.indexOf(f)<0&&d.push(f);this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,o,l,d){const f=this.layout.get(e).evaluate(o,{},l,d),g=this._unevaluatedLayout._values[e];return g.isDataDriven()||$a(g.value)||!f?f:function(y,x){return x.replace(/{([^{}]+)}/g,(I,E)=>y&&E in y?String(y[E]):"")}(o.properties,f)}createBucket(e){return new Js(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of Cp.paint.overridableProperties){if(!oh.hasPaintOverride(this.layout,e))continue;const o=this.paint.get(e),l=new tf(o),d=new As(l,o.property.specification);let f=null;f=o.value.kind==="constant"||o.value.kind==="source"?new Va("source",d):new Zr("composite",d,o.value.zoomStops),this.paint._values[e]=new K(o.property,f,o.parameters)}}_handleOverridablePaintPropertyUpdate(e,o,l){return!(!this.layout||o.isDataDriven()||l.isDataDriven())&&oh.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,o){const l=e.get("text-field"),d=Cp.paint.properties[o];let f=!1;const g=y=>{for(const x of y)if(d.overrides&&d.overrides.hasOverride(x))return void(f=!0)};if(l.value.kind==="constant"&&l.value.value instanceof un)g(l.value.value.sections);else if(l.value.kind==="source"){const y=I=>{f||(I instanceof Ln&&ci(I.value)===Q?g(I.value.sections):I instanceof xs?g(I.sections):I.eachChild(y))},x=l.value;x._styleExpression&&y(x._styleExpression.expression)}return f}}let ef;var B0={get paint(){return ef=ef||new _t({"background-color":new q(dt.paint_background["background-color"]),"background-pattern":new rt(dt.paint_background["background-pattern"]),"background-opacity":new q(dt.paint_background["background-opacity"])})}};class R0 extends Ct{constructor(e){super(e,B0)}}let nf;var $0={get paint(){return nf=nf||new _t({"raster-opacity":new q(dt.paint_raster["raster-opacity"]),"raster-hue-rotate":new q(dt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new q(dt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new q(dt.paint_raster["raster-brightness-max"]),"raster-saturation":new q(dt.paint_raster["raster-saturation"]),"raster-contrast":new q(dt.paint_raster["raster-contrast"]),"raster-resampling":new q(dt.paint_raster["raster-resampling"]),"raster-fade-duration":new q(dt.paint_raster["raster-fade-duration"])})}};class V0 extends Ct{constructor(e){super(e,$0)}}class F0 extends Ct{constructor(e){super(e,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class O0{constructor(e){this._methodToThrottle=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Ep=63710088e-1;class aa{constructor(e,o){if(isNaN(e)||isNaN(o))throw new Error(`Invalid LngLat object: (${e}, ${o})`);if(this.lng=+e,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new aa(Nt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const o=Math.PI/180,l=this.lat*o,d=e.lat*o,f=Math.sin(l)*Math.sin(d)+Math.cos(l)*Math.cos(d)*Math.cos((e.lng-this.lng)*o);return Ep*Math.acos(Math.min(f,1))}static convert(e){if(e instanceof aa)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new aa(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new aa(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const of=2*Math.PI*Ep;function rf(i){return of*Math.cos(i*Math.PI/180)}function af(i){return(180+i)/360}function sf(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function lf(i,e){return i/rf(e)}function Ap(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class hc{constructor(e,o,l=0){this.x=+e,this.y=+o,this.z=+l}static fromLngLat(e,o=0){const l=aa.convert(e);return new hc(af(l.lng),sf(l.lat),lf(o,l.lat))}toLngLat(){return new aa(360*this.x-180,Ap(this.y))}toAltitude(){return this.z*rf(Ap(this.y))}meterInMercatorCoordinateUnits(){return 1/of*(e=Ap(this.y),1/Math.cos(e*Math.PI/180));var e}}function cf(i,e,o){var l=2*Math.PI*6378137/256/Math.pow(2,o);return[i*l-2*Math.PI*6378137/2,e*l-2*Math.PI*6378137/2]}class Mp{constructor(e,o,l){if(!function(d,f,g){return!(d<0||d>25||g<0||g>=Math.pow(2,d)||f<0||f>=Math.pow(2,d))}(e,o,l))throw new Error(`x=${o}, y=${l}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=o,this.y=l,this.key=dc(0,e,e,o,l)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,o,l){const d=(g=this.y,y=this.z,x=cf(256*(f=this.x),256*(g=Math.pow(2,y)-g-1),y),I=cf(256*(f+1),256*(g+1),y),x[0]+","+x[1]+","+I[0]+","+I[1]);var f,g,y,x,I;const E=function(A,P,L){let V,N="";for(let Z=A;Z>0;Z--)V=1<<Z-1,N+=(P&V?1:0)+(L&V?2:0);return N}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,E).replace(/{bbox-epsg-3857}/g,d)}isChildOf(e){const o=this.z-e.z;return o>0&&e.x===this.x>>o&&e.y===this.y>>o}getTilePoint(e){const o=Math.pow(2,this.z);return new X((e.x*o-this.x)*ui,(e.y*o-this.y)*ui)}toString(){return`${this.z}/${this.x}/${this.y}`}}class uf{constructor(e,o){this.wrap=e,this.canonical=o,this.key=dc(e,o.z,o.z,o.x,o.y)}}class Nn{constructor(e,o,l,d,f){if(e<l)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${l}`);this.overscaledZ=e,this.wrap=o,this.canonical=new Mp(l,+d,+f),this.key=dc(o,e,l,d,f)}clone(){return new Nn(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-e;return e>this.canonical.z?new Nn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Nn(e,this.wrap,e,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(e,o){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-e;return e>this.canonical.z?dc(this.wrap*+o,e,this.canonical.z,this.canonical.x,this.canonical.y):dc(this.wrap*+o,e,e,this.canonical.x>>l,this.canonical.y>>l)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const o=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>o&&e.canonical.y===this.canonical.y>>o}children(e){if(this.overscaledZ>=e)return[new Nn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,l=2*this.canonical.x,d=2*this.canonical.y;return[new Nn(o,this.wrap,o,l,d),new Nn(o,this.wrap,o,l+1,d),new Nn(o,this.wrap,o,l,d+1),new Nn(o,this.wrap,o,l+1,d+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Nn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Nn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new uf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new hc(e.x-this.wrap,e.y))}}function dc(i,e,o,l,d){(i*=2)<0&&(i=-1*i-1);const f=1<<o;return(f*f*i+f*d+l).toString(36)+o.toString(36)+e.toString(36)}$t("CanonicalTileID",Mp),$t("OverscaledTileID",Nn,{omit:["posMatrix"]});class hf{constructor(e,o,l,d=1,f=1,g=1,y=0){if(this.uid=e,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(l&&!["mapbox","terrarium","custom"].includes(l))return void ae(`"${l}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const x=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),l){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=d,this.greenFactor=f,this.blueFactor=g,this.baseShift=y;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let I=0;I<x;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(x,I)]=this.data[this._idx(x-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,x)]=this.data[this._idx(I,x-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(x,-1)]=this.data[this._idx(x-1,0)],this.data[this._idx(-1,x)]=this.data[this._idx(0,x-1)],this.data[this._idx(x,x)]=this.data[this._idx(x-1,x-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let I=0;I<x;I++)for(let E=0;E<x;E++){const A=this.get(I,E);A>this.max&&(this.max=A),A<this.min&&(this.min=A)}}get(e,o){const l=new Uint8Array(this.data.buffer),d=4*this._idx(e,o);return this.unpack(l[d],l[d+1],l[d+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,o){if(e<-1||e>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(e+1)}unpack(e,o,l){return e*this.redFactor+o*this.greenFactor+l*this.blueFactor-this.baseShift}getPixels(){return new On({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,o,l){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let d=o*this.dim,f=o*this.dim+this.dim,g=l*this.dim,y=l*this.dim+this.dim;switch(o){case-1:d=f-1;break;case 1:f=d+1}switch(l){case-1:g=y-1;break;case 1:y=g+1}const x=-o*this.dim,I=-l*this.dim;for(let E=g;E<y;E++)for(let A=d;A<f;A++)this.data[this._idx(A,E)]=e.data[this._idx(A+x,E+I)]}}$t("DEMData",hf);class df{constructor(e){this._stringToNumber={},this._numberToString=[];for(let o=0;o<e.length;o++){const l=e[o];this._stringToNumber[l]=o,this._numberToString[o]=l}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class pf{constructor(e,o,l,d,f){this.type="Feature",this._vectorTileFeature=e,e._z=o,e._x=l,e._y=d,this.properties=e.properties,this.id=f}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(e[o]=this[o]);return e}}class mf{constructor(e,o){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Kr(ui,16,0),this.grid3D=new Kr(ui,16,0),this.featureIndexArray=new Bu,this.promoteId=o}insert(e,o,l,d,f,g){const y=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,d,f);const x=g?this.grid3D:this.grid;for(let I=0;I<o.length;I++){const E=o[I],A=[1/0,1/0,-1/0,-1/0];for(let P=0;P<E.length;P++){const L=E[P];A[0]=Math.min(A[0],L.x),A[1]=Math.min(A[1],L.y),A[2]=Math.max(A[2],L.x),A[3]=Math.max(A[3],L.y)}A[0]<ui&&A[1]<ui&&A[2]>=0&&A[3]>=0&&x.insert(y,A[0],A[1],A[2],A[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new na.VectorTile(new yp(this.rawTileData)).layers,this.sourceLayerCoder=new df(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,o,l,d){this.loadVTLayers();const f=e.params||{},g=ui/e.tileSize/e.scale,y=Xr(f.filter),x=e.queryGeometry,I=e.queryPadding*g,E=ff(x),A=this.grid.query(E.minX-I,E.minY-I,E.maxX+I,E.maxY+I),P=ff(e.cameraQueryGeometry),L=this.grid3D.query(P.minX-I,P.minY-I,P.maxX+I,P.maxY+I,(Z,Y,lt,nt)=>function(ct,pt,xt,Rt,te){for(const zt of ct)if(pt<=zt.x&&xt<=zt.y&&Rt>=zt.x&&te>=zt.y)return!0;const Bt=[new X(pt,xt),new X(pt,te),new X(Rt,te),new X(Rt,xt)];if(ct.length>2){for(const zt of Bt)if(qs(ct,zt))return!0}for(let zt=0;zt<ct.length-1;zt++)if(vg(ct[zt],ct[zt+1],Bt))return!0;return!1}(e.cameraQueryGeometry,Z-I,Y-I,lt+I,nt+I));for(const Z of L)A.push(Z);A.sort(N0);const V={};let N;for(let Z=0;Z<A.length;Z++){const Y=A[Z];if(Y===N)continue;N=Y;const lt=this.featureIndexArray.get(Y);let nt=null;this.loadMatchingFeature(V,lt.bucketIndex,lt.sourceLayerIndex,lt.featureIndex,y,f.layers,f.availableImages,o,l,d,(ct,pt,xt)=>(nt||(nt=Ya(ct)),pt.queryIntersectsFeature(x,ct,xt,nt,this.z,e.transform,g,e.pixelPosMatrix)))}return V}loadMatchingFeature(e,o,l,d,f,g,y,x,I,E,A){const P=this.bucketLayerIDs[o];if(g&&!function(Z,Y){for(let lt=0;lt<Z.length;lt++)if(Y.indexOf(Z[lt])>=0)return!0;return!1}(g,P))return;const L=this.sourceLayerCoder.decode(l),V=this.vtLayers[L].feature(d);if(f.needGeometry){const Z=Ja(V,!0);if(!f.filter(new C(this.tileID.overscaledZ),Z,this.tileID.canonical))return}else if(!f.filter(new C(this.tileID.overscaledZ),V))return;const N=this.getId(V,L);for(let Z=0;Z<P.length;Z++){const Y=P[Z];if(g&&g.indexOf(Y)<0)continue;const lt=x[Y];if(!lt)continue;let nt={};N&&E&&(nt=E.getState(lt.sourceLayer||"_geojsonTileLayer",N));const ct=Qt({},I[Y]);ct.paint=_f(ct.paint,lt.paint,V,nt,y),ct.layout=_f(ct.layout,lt.layout,V,nt,y);const pt=!A||A(V,lt,nt);if(!pt)continue;const xt=new pf(V,this.z,this.x,this.y,N);xt.layer=ct;let Rt=e[Y];Rt===void 0&&(Rt=e[Y]=[]),Rt.push({featureIndex:d,feature:xt,intersectionZ:pt})}}lookupSymbolFeatures(e,o,l,d,f,g,y,x){const I={};this.loadVTLayers();const E=Xr(f);for(const A of e)this.loadMatchingFeature(I,l,d,A,E,g,y,x,o);return I}hasLayer(e){for(const o of this.bucketLayerIDs)for(const l of o)if(e===l)return!0;return!1}getId(e,o){let l=e.id;return this.promoteId&&(l=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof l=="boolean"&&(l=Number(l))),l}}function _f(i,e,o,l,d){return ee(i,(f,g)=>{const y=e instanceof tt?e.get(g):null;return y&&y.evaluate?y.evaluate(o,l,d):y})}function ff(i){let e=1/0,o=1/0,l=-1/0,d=-1/0;for(const f of i)e=Math.min(e,f.x),o=Math.min(o,f.y),l=Math.max(l,f.x),d=Math.max(d,f.y);return{minX:e,minY:o,maxX:l,maxY:d}}function N0(i,e){return e-i}function gf(i,e,o,l,d){const f=[];for(let g=0;g<i.length;g++){const y=i[g];let x;for(let I=0;I<y.length-1;I++){let E=y[I],A=y[I+1];E.x<e&&A.x<e||(E.x<e?E=new X(e,E.y+(e-E.x)/(A.x-E.x)*(A.y-E.y))._round():A.x<e&&(A=new X(e,E.y+(e-E.x)/(A.x-E.x)*(A.y-E.y))._round()),E.y<o&&A.y<o||(E.y<o?E=new X(E.x+(o-E.y)/(A.y-E.y)*(A.x-E.x),o)._round():A.y<o&&(A=new X(E.x+(o-E.y)/(A.y-E.y)*(A.x-E.x),o)._round()),E.x>=l&&A.x>=l||(E.x>=l?E=new X(l,E.y+(l-E.x)/(A.x-E.x)*(A.y-E.y))._round():A.x>=l&&(A=new X(l,E.y+(l-E.x)/(A.x-E.x)*(A.y-E.y))._round()),E.y>=d&&A.y>=d||(E.y>=d?E=new X(E.x+(d-E.y)/(A.y-E.y)*(A.x-E.x),d)._round():A.y>=d&&(A=new X(E.x+(d-E.y)/(A.y-E.y)*(A.x-E.x),d)._round()),x&&E.equals(x[x.length-1])||(x=[E],f.push(x)),x.push(A)))))}}return f}$t("FeatureIndex",mf,{omit:["rawTileData","sourceLayerCoder"]});class sa extends X{constructor(e,o,l,d){super(e,o),this.angle=l,d!==void 0&&(this.segment=d)}clone(){return new sa(this.x,this.y,this.angle,this.segment)}}function bf(i,e,o,l,d){if(e.segment===void 0||o===0)return!0;let f=e,g=e.segment+1,y=0;for(;y>-o/2;){if(g--,g<0)return!1;y-=i[g].dist(f),f=i[g]}y+=i[g].dist(i[g+1]),g++;const x=[];let I=0;for(;y<o/2;){const E=i[g],A=i[g+1];if(!A)return!1;let P=i[g-1].angleTo(E)-E.angleTo(A);for(P=Math.abs((P+3*Math.PI)%(2*Math.PI)-Math.PI),x.push({distance:y,angleDelta:P}),I+=P;y-x[0].distance>l;)I-=x.shift().angleDelta;if(I>d)return!1;g++,y+=E.dist(A)}return!0}function yf(i){let e=0;for(let o=0;o<i.length-1;o++)e+=i[o].dist(i[o+1]);return e}function vf(i,e,o){return i?.6*e*o:0}function xf(i,e){return Math.max(i?i.right-i.left:0,e?e.right-e.left:0)}function U0(i,e,o,l,d,f){const g=vf(o,d,f),y=xf(o,l)*f;let x=0;const I=yf(i)/2;for(let E=0;E<i.length-1;E++){const A=i[E],P=i[E+1],L=A.dist(P);if(x+L>I){const V=(I-x)/L,N=Xi.number(A.x,P.x,V),Z=Xi.number(A.y,P.y,V),Y=new sa(N,Z,P.angleTo(A),E);return Y._round(),!g||bf(i,Y,y,g,e)?Y:void 0}x+=L}}function H0(i,e,o,l,d,f,g,y,x){const I=vf(l,f,g),E=xf(l,d),A=E*g,P=i[0].x===0||i[0].x===x||i[0].y===0||i[0].y===x;return e-A<e/4&&(e=A+e/4),wf(i,P?e/2*y%e:(E/2+2*f)*g*y%e,e,I,o,A,P,!1,x)}function wf(i,e,o,l,d,f,g,y,x){const I=f/2,E=yf(i);let A=0,P=e-o,L=[];for(let V=0;V<i.length-1;V++){const N=i[V],Z=i[V+1],Y=N.dist(Z),lt=Z.angleTo(N);for(;P+o<A+Y;){P+=o;const nt=(P-A)/Y,ct=Xi.number(N.x,Z.x,nt),pt=Xi.number(N.y,Z.y,nt);if(ct>=0&&ct<x&&pt>=0&&pt<x&&P-I>=0&&P+I<=E){const xt=new sa(ct,pt,lt,V);xt._round(),l&&!bf(i,xt,f,l,d)||L.push(xt)}}A+=Y}return y||L.length||g||(L=wf(i,A/2,o,l,d,f,g,!0,x)),L}$t("Anchor",sa);function kf(i,e,o,l){const d=[],f=i.image,g=f.pixelRatio,y=f.paddedRect.w-2,x=f.paddedRect.h-2;let I={x1:i.left,y1:i.top,x2:i.right,y2:i.bottom};const E=f.stretchX||[[0,y]],A=f.stretchY||[[0,x]],P=(gt,Xt)=>gt+Xt[1]-Xt[0],L=E.reduce(P,0),V=A.reduce(P,0),N=y-L,Z=x-V;let Y=0,lt=L,nt=0,ct=V,pt=0,xt=N,Rt=0,te=Z;if(f.content&&l){const gt=f.content,Xt=gt[2]-gt[0],Gt=gt[3]-gt[1];(f.textFitWidth||f.textFitHeight)&&(I=X_(i)),Y=rh(E,0,gt[0]),nt=rh(A,0,gt[1]),lt=rh(E,gt[0],gt[2]),ct=rh(A,gt[1],gt[3]),pt=gt[0]-Y,Rt=gt[1]-nt,xt=Xt-lt,te=Gt-ct}const Bt=I.x1,zt=I.y1,Wt=I.x2-Bt,Ut=I.y2-zt,Ft=(gt,Xt,Gt,re)=>{const Oe=ah(gt.stretch-Y,lt,Wt,Bt),$e=sh(gt.fixed-pt,xt,gt.stretch,L),xi=ah(Xt.stretch-nt,ct,Ut,zt),io=sh(Xt.fixed-Rt,te,Xt.stretch,V),Ri=ah(Gt.stretch-Y,lt,Wt,Bt),wi=sh(Gt.fixed-pt,xt,Gt.stretch,L),tn=ah(re.stretch-nt,ct,Ut,zt),en=sh(re.fixed-Rt,te,re.stretch,V),nn=new X(Oe,xi),ni=new X(Ri,xi),ki=new X(Ri,tn),qi=new X(Oe,tn),$i=new X($e/g,io/g),on=new X(wi/g,en/g),Vi=e*Math.PI/180;if(Vi){const ke=Math.sin(Vi),qe=Math.cos(Vi),Ze=[qe,-ke,ke,qe];nn._matMult(Ze),ni._matMult(Ze),qi._matMult(Ze),ki._matMult(Ze)}const Un=gt.stretch+gt.fixed,_n=Xt.stretch+Xt.fixed;return{tl:nn,tr:ni,bl:qi,br:ki,tex:{x:f.paddedRect.x+1+Un,y:f.paddedRect.y+1+_n,w:Gt.stretch+Gt.fixed-Un,h:re.stretch+re.fixed-_n},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$i,pixelOffsetBR:on,minFontScaleX:xt/g/Wt,minFontScaleY:te/g/Ut,isSDF:o}};if(l&&(f.stretchX||f.stretchY)){const gt=Sf(E,N,L),Xt=Sf(A,Z,V);for(let Gt=0;Gt<gt.length-1;Gt++){const re=gt[Gt],Oe=gt[Gt+1];for(let $e=0;$e<Xt.length-1;$e++)d.push(Ft(re,Xt[$e],Oe,Xt[$e+1]))}}else d.push(Ft({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:y+1},{fixed:0,stretch:x+1}));return d}function rh(i,e,o){let l=0;for(const d of i)l+=Math.max(e,Math.min(o,d[1]))-Math.max(e,Math.min(o,d[0]));return l}function Sf(i,e,o){const l=[{fixed:-1,stretch:0}];for(const[d,f]of i){const g=l[l.length-1];l.push({fixed:d-g.stretch,stretch:g.stretch}),l.push({fixed:d-g.stretch,stretch:g.stretch+(f-d)})}return l.push({fixed:e+1,stretch:o}),l}function ah(i,e,o,l){return i/e*o+l}function sh(i,e,o,l){return i-e*o/l}class lh{constructor(e,o,l,d,f,g,y,x,I,E){var A;if(this.boxStartIndex=e.length,I){let P=g.top,L=g.bottom;const V=g.collisionPadding;V&&(P-=V[1],L+=V[3]);let N=L-P;N>0&&(N=Math.max(10,N),this.circleDiameter=N)}else{const P=!((A=g.image)===null||A===void 0)&&A.content&&(g.image.textFitWidth||g.image.textFitHeight)?X_(g):{x1:g.left,y1:g.top,x2:g.right,y2:g.bottom};P.y1=P.y1*y-x[0],P.y2=P.y2*y+x[2],P.x1=P.x1*y-x[3],P.x2=P.x2*y+x[1];const L=g.collisionPadding;if(L&&(P.x1-=L[0]*y,P.y1-=L[1]*y,P.x2+=L[2]*y,P.y2+=L[3]*y),E){const V=new X(P.x1,P.y1),N=new X(P.x2,P.y1),Z=new X(P.x1,P.y2),Y=new X(P.x2,P.y2),lt=E*Math.PI/180;V._rotate(lt),N._rotate(lt),Z._rotate(lt),Y._rotate(lt),P.x1=Math.min(V.x,N.x,Z.x,Y.x),P.x2=Math.max(V.x,N.x,Z.x,Y.x),P.y1=Math.min(V.y,N.y,Z.y,Y.y),P.y2=Math.max(V.y,N.y,Z.y,Y.y)}e.emplaceBack(o.x,o.y,P.x1,P.y1,P.x2,P.y2,l,d,f)}this.boxEndIndex=e.length}}class j0{constructor(e=[],o=(l,d)=>l<d?-1:l>d?1:0){if(this.data=e,this.length=this.data.length,this.compare=o,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:o,compare:l}=this,d=o[e];for(;e>0;){const f=e-1>>1,g=o[f];if(l(d,g)>=0)break;o[e]=g,e=f}o[e]=d}_down(e){const{data:o,compare:l}=this,d=this.length>>1,f=o[e];for(;e<d;){let g=1+(e<<1);const y=g+1;if(y<this.length&&l(o[y],o[g])<0&&(g=y),l(o[g],f)>=0)break;o[e]=o[g],e=g}o[e]=f}}function q0(i,e=1,o=!1){let l=1/0,d=1/0,f=-1/0,g=-1/0;const y=i[0];for(let L=0;L<y.length;L++){const V=y[L];(!L||V.x<l)&&(l=V.x),(!L||V.y<d)&&(d=V.y),(!L||V.x>f)&&(f=V.x),(!L||V.y>g)&&(g=V.y)}const x=Math.min(f-l,g-d);let I=x/2;const E=new j0([],G0);if(x===0)return new X(l,d);for(let L=l;L<f;L+=x)for(let V=d;V<g;V+=x)E.push(new Qs(L+I,V+I,I,i));let A=function(L){let V=0,N=0,Z=0;const Y=L[0];for(let lt=0,nt=Y.length,ct=nt-1;lt<nt;ct=lt++){const pt=Y[lt],xt=Y[ct],Rt=pt.x*xt.y-xt.x*pt.y;N+=(pt.x+xt.x)*Rt,Z+=(pt.y+xt.y)*Rt,V+=3*Rt}return new Qs(N/V,Z/V,0,L)}(i),P=E.length;for(;E.length;){const L=E.pop();(L.d>A.d||!A.d)&&(A=L),L.max-A.d<=e||(I=L.h/2,E.push(new Qs(L.p.x-I,L.p.y-I,I,i)),E.push(new Qs(L.p.x+I,L.p.y-I,I,i)),E.push(new Qs(L.p.x-I,L.p.y+I,I,i)),E.push(new Qs(L.p.x+I,L.p.y+I,I,i)),P+=4)}return A.p}function G0(i,e){return e.max-i.max}function Qs(i,e,o,l){this.p=new X(i,e),this.h=o,this.d=function(d,f){let g=!1,y=1/0;for(let x=0;x<f.length;x++){const I=f[x];for(let E=0,A=I.length,P=A-1;E<A;P=E++){const L=I[E],V=I[P];L.y>d.y!=V.y>d.y&&d.x<(V.x-L.x)*(d.y-L.y)/(V.y-L.y)+L.x&&(g=!g),y=Math.min(y,s_(d,L,V))}}return(g?1:-1)*Math.sqrt(y)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}var Bi;u.aq=void 0,(Bi=u.aq||(u.aq={}))[Bi.center=1]="center",Bi[Bi.left=2]="left",Bi[Bi.right=3]="right",Bi[Bi.top=4]="top",Bi[Bi.bottom=5]="bottom",Bi[Bi["top-left"]=6]="top-left",Bi[Bi["top-right"]=7]="top-right",Bi[Bi["bottom-left"]=8]="bottom-left",Bi[Bi["bottom-right"]=9]="bottom-right";const Dp=Number.POSITIVE_INFINITY;function If(i,e){return e[1]!==Dp?function(o,l,d){let f=0,g=0;switch(l=Math.abs(l),d=Math.abs(d),o){case"top-right":case"top-left":case"top":g=d-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-d}switch(o){case"top-right":case"bottom-right":case"right":f=-l;break;case"top-left":case"bottom-left":case"left":f=l}return[f,g]}(i,e[0],e[1]):function(o,l){let d=0,f=0;l<0&&(l=0);const g=l/Math.SQRT2;switch(o){case"top-right":case"top-left":f=g-7;break;case"bottom-right":case"bottom-left":f=7-g;break;case"bottom":f=7-l;break;case"top":f=l-7}switch(o){case"top-right":case"bottom-right":d=-g;break;case"top-left":case"bottom-left":d=g;break;case"left":d=l;break;case"right":d=-l}return[d,f]}(i,e[0])}function Tf(i,e,o){var l;const d=i.layout,f=(l=d.get("text-variable-anchor-offset"))===null||l===void 0?void 0:l.evaluate(e,{},o);if(f){const y=f.values,x=[];for(let I=0;I<y.length;I+=2){const E=x[I]=y[I],A=y[I+1].map(P=>P*vi);E.startsWith("top")?A[1]-=7:E.startsWith("bottom")&&(A[1]+=7),x[I+1]=A}return new Sn(x)}const g=d.get("text-variable-anchor");if(g){let y;y=i._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[d.get("text-radial-offset").evaluate(e,{},o)*vi,Dp]:d.get("text-offset").evaluate(e,{},o).map(I=>I*vi);const x=[];for(const I of g)x.push(I,If(I,y));return new Sn(x)}return null}function Pp(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Z0(i,e,o,l,d,f,g,y,x,I,E){let A=f.textMaxSize.evaluate(e,{});A===void 0&&(A=g);const P=i.layers[0].layout,L=P.get("icon-offset").evaluate(e,{},E),V=Ef(o.horizontal),N=g/24,Z=i.tilePixelRatio*N,Y=i.tilePixelRatio*A/24,lt=i.tilePixelRatio*y,nt=i.tilePixelRatio*P.get("symbol-spacing"),ct=P.get("text-padding")*i.tilePixelRatio,pt=function(gt,Xt,Gt,re=1){const Oe=gt.get("icon-padding").evaluate(Xt,{},Gt),$e=Oe&&Oe.values;return[$e[0]*re,$e[1]*re,$e[2]*re,$e[3]*re]}(P,e,E,i.tilePixelRatio),xt=P.get("text-max-angle")/180*Math.PI,Rt=P.get("text-rotation-alignment")!=="viewport"&&P.get("symbol-placement")!=="point",te=P.get("icon-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point",Bt=P.get("symbol-placement"),zt=nt/2,Wt=P.get("icon-text-fit");let Ut;l&&Wt!=="none"&&(i.allowVerticalPlacement&&o.vertical&&(Ut=K_(l,o.vertical,Wt,P.get("icon-text-fit-padding"),L,N)),V&&(l=K_(l,V,Wt,P.get("icon-text-fit-padding"),L,N)));const Ft=(gt,Xt)=>{Xt.x<0||Xt.x>=ui||Xt.y<0||Xt.y>=ui||function(Gt,re,Oe,$e,xi,io,Ri,wi,tn,en,nn,ni,ki,qi,$i,on,Vi,Un,_n,ke,qe,Ze,Cn,Qe,tl){const jo=Gt.addToLineVertexArray(re,Oe);let qo,no,Hn,Mi,Sr=0,_c=0,Pf=0,zf=0,Op=-1,Np=-1;const Ir={};let Lf=Qd("");if(Gt.allowVerticalPlacement&&$e.vertical){const Gi=wi.layout.get("text-rotate").evaluate(qe,{},Qe)+90;Hn=new lh(tn,re,en,nn,ni,$e.vertical,ki,qi,$i,Gi),Ri&&(Mi=new lh(tn,re,en,nn,ni,Ri,Vi,Un,$i,Gi))}if(xi){const Gi=wi.layout.get("icon-rotate").evaluate(qe,{}),jn=wi.layout.get("icon-text-fit")!=="none",ts=kf(xi,Gi,Cn,jn),go=Ri?kf(Ri,Gi,Cn,jn):void 0;no=new lh(tn,re,en,nn,ni,xi,Vi,Un,!1,Gi),Sr=4*ts.length;const es=Gt.iconSizeData;let Go=null;es.kind==="source"?(Go=[kr*wi.layout.get("icon-size").evaluate(qe,{})],Go[0]>ra&&ae(`${Gt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):es.kind==="composite"&&(Go=[kr*Ze.compositeIconSizes[0].evaluate(qe,{},Qe),kr*Ze.compositeIconSizes[1].evaluate(qe,{},Qe)],(Go[0]>ra||Go[1]>ra)&&ae(`${Gt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Gt.addSymbols(Gt.icon,ts,Go,ke,_n,qe,u.ah.none,re,jo.lineStartIndex,jo.lineLength,-1,Qe),Op=Gt.icon.placedSymbolArray.length-1,go&&(_c=4*go.length,Gt.addSymbols(Gt.icon,go,Go,ke,_n,qe,u.ah.vertical,re,jo.lineStartIndex,jo.lineLength,-1,Qe),Np=Gt.icon.placedSymbolArray.length-1)}const Bf=Object.keys($e.horizontal);for(const Gi of Bf){const jn=$e.horizontal[Gi];if(!qo){Lf=Qd(jn.text);const go=wi.layout.get("text-rotate").evaluate(qe,{},Qe);qo=new lh(tn,re,en,nn,ni,jn,ki,qi,$i,go)}const ts=jn.positionedLines.length===1;if(Pf+=Cf(Gt,re,jn,io,wi,$i,qe,on,jo,$e.vertical?u.ah.horizontal:u.ah.horizontalOnly,ts?Bf:[Gi],Ir,Op,Ze,Qe),ts)break}$e.vertical&&(zf+=Cf(Gt,re,$e.vertical,io,wi,$i,qe,on,jo,u.ah.vertical,["vertical"],Ir,Np,Ze,Qe));const K0=qo?qo.boxStartIndex:Gt.collisionBoxArray.length,Y0=qo?qo.boxEndIndex:Gt.collisionBoxArray.length,J0=Hn?Hn.boxStartIndex:Gt.collisionBoxArray.length,Q0=Hn?Hn.boxEndIndex:Gt.collisionBoxArray.length,tb=no?no.boxStartIndex:Gt.collisionBoxArray.length,eb=no?no.boxEndIndex:Gt.collisionBoxArray.length,ib=Mi?Mi.boxStartIndex:Gt.collisionBoxArray.length,nb=Mi?Mi.boxEndIndex:Gt.collisionBoxArray.length;let fo=-1;const uh=(Gi,jn)=>Gi&&Gi.circleDiameter?Math.max(Gi.circleDiameter,jn):jn;fo=uh(qo,fo),fo=uh(Hn,fo),fo=uh(no,fo),fo=uh(Mi,fo);const Rf=fo>-1?1:0;Rf&&(fo*=tl/vi),Gt.glyphOffsetArray.length>=Js.MAX_GLYPHS&&ae("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),qe.sortKey!==void 0&&Gt.addToSortKeyRanges(Gt.symbolInstances.length,qe.sortKey);const ob=Tf(wi,qe,Qe),[rb,ab]=function(Gi,jn){const ts=Gi.length,go=jn==null?void 0:jn.values;if((go==null?void 0:go.length)>0)for(let es=0;es<go.length;es+=2){const Go=go[es+1];Gi.emplaceBack(u.aq[go[es]],Go[0],Go[1])}return[ts,Gi.length]}(Gt.textAnchorOffsets,ob);Gt.symbolInstances.emplaceBack(re.x,re.y,Ir.right>=0?Ir.right:-1,Ir.center>=0?Ir.center:-1,Ir.left>=0?Ir.left:-1,Ir.vertical||-1,Op,Np,Lf,K0,Y0,J0,Q0,tb,eb,ib,nb,en,Pf,zf,Sr,_c,Rf,0,ki,fo,rb,ab)}(i,Xt,gt,o,l,d,Ut,i.layers[0],i.collisionBoxArray,e.index,e.sourceLayerIndex,i.index,Z,[ct,ct,ct,ct],Rt,x,lt,pt,te,L,e,f,I,E,g)};if(Bt==="line")for(const gt of gf(e.geometry,0,0,ui,ui)){const Xt=H0(gt,nt,xt,o.vertical||V,l,24,Y,i.overscaling,ui);for(const Gt of Xt)V&&W0(i,V.text,zt,Gt)||Ft(gt,Gt)}else if(Bt==="line-center"){for(const gt of e.geometry)if(gt.length>1){const Xt=U0(gt,xt,o.vertical||V,l,24,Y);Xt&&Ft(gt,Xt)}}else if(e.type==="Polygon")for(const gt of ks(e.geometry,0)){const Xt=q0(gt,16);Ft(gt[0],new sa(Xt.x,Xt.y,0))}else if(e.type==="LineString")for(const gt of e.geometry)Ft(gt,new sa(gt[0].x,gt[0].y,0));else if(e.type==="Point")for(const gt of e.geometry)for(const Xt of gt)Ft([Xt],new sa(Xt.x,Xt.y,0))}function Cf(i,e,o,l,d,f,g,y,x,I,E,A,P,L,V){const N=function(lt,nt,ct,pt,xt,Rt,te,Bt){const zt=pt.layout.get("text-rotate").evaluate(Rt,{})*Math.PI/180,Wt=[];for(const Ut of nt.positionedLines)for(const Ft of Ut.positionedGlyphs){if(!Ft.rect)continue;const gt=Ft.rect||{};let Xt=4,Gt=!0,re=1,Oe=0;const $e=(xt||Bt)&&Ft.vertical,xi=Ft.metrics.advance*Ft.scale/2;if(Bt&&nt.verticalizable&&(Oe=Ut.lineOffset/2-(Ft.imageName?-(vi-Ft.metrics.width*Ft.scale)/2:(Ft.scale-1)*vi)),Ft.imageName){const ke=te[Ft.imageName];Gt=ke.sdf,re=ke.pixelRatio,Xt=1/re}const io=xt?[Ft.x+xi,Ft.y]:[0,0];let Ri=xt?[0,0]:[Ft.x+xi+ct[0],Ft.y+ct[1]-Oe],wi=[0,0];$e&&(wi=Ri,Ri=[0,0]);const tn=Ft.metrics.isDoubleResolution?2:1,en=(Ft.metrics.left-Xt)*Ft.scale-xi+Ri[0],nn=(-Ft.metrics.top-Xt)*Ft.scale+Ri[1],ni=en+gt.w/tn*Ft.scale/re,ki=nn+gt.h/tn*Ft.scale/re,qi=new X(en,nn),$i=new X(ni,nn),on=new X(en,ki),Vi=new X(ni,ki);if($e){const ke=new X(-xi,xi-th),qe=-Math.PI/2,Ze=12-xi,Cn=new X(22-Ze,-(Ft.imageName?Ze:0)),Qe=new X(...wi);qi._rotateAround(qe,ke)._add(Cn)._add(Qe),$i._rotateAround(qe,ke)._add(Cn)._add(Qe),on._rotateAround(qe,ke)._add(Cn)._add(Qe),Vi._rotateAround(qe,ke)._add(Cn)._add(Qe)}if(zt){const ke=Math.sin(zt),qe=Math.cos(zt),Ze=[qe,-ke,ke,qe];qi._matMult(Ze),$i._matMult(Ze),on._matMult(Ze),Vi._matMult(Ze)}const Un=new X(0,0),_n=new X(0,0);Wt.push({tl:qi,tr:$i,bl:on,br:Vi,tex:gt,writingMode:nt.writingMode,glyphOffset:io,sectionIndex:Ft.sectionIndex,isSDF:Gt,pixelOffsetTL:Un,pixelOffsetBR:_n,minFontScaleX:0,minFontScaleY:0})}return Wt}(0,o,y,d,f,g,l,i.allowVerticalPlacement),Z=i.textSizeData;let Y=null;Z.kind==="source"?(Y=[kr*d.layout.get("text-size").evaluate(g,{})],Y[0]>ra&&ae(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Z.kind==="composite"&&(Y=[kr*L.compositeTextSizes[0].evaluate(g,{},V),kr*L.compositeTextSizes[1].evaluate(g,{},V)],(Y[0]>ra||Y[1]>ra)&&ae(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),i.addSymbols(i.text,N,Y,y,f,g,I,e,x.lineStartIndex,x.lineLength,P,V);for(const lt of E)A[lt]=i.text.placedSymbolArray.length-1;return 4*N.length}function Ef(i){for(const e in i)return i[e];return null}function W0(i,e,o,l){const d=i.compareText;if(e in d){const f=d[e];for(let g=f.length-1;g>=0;g--)if(l.dist(f[g])<o)return!0}else d[e]=[];return d[e].push(l),!1}const Af=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class zp{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,l]=new Uint8Array(e,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const d=l>>4;if(d!==1)throw new Error(`Got v${d} data when expected v1.`);const f=Af[15&l];if(!f)throw new Error("Unrecognized array type.");const[g]=new Uint16Array(e,2,1),[y]=new Uint32Array(e,4,1);return new zp(y,g,f,e)}constructor(e,o=64,l=Float64Array,d){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=l,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const f=Af.indexOf(this.ArrayType),g=2*e*this.ArrayType.BYTES_PER_ELEMENT,y=e*this.IndexArrayType.BYTES_PER_ELEMENT,x=(8-y%8)%8;if(f<0)throw new Error(`Unexpected typed array class: ${l}.`);d&&d instanceof ArrayBuffer?(this.data=d,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+y+x,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+g+y+x),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+y+x,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+f]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=e)}add(e,o){const l=this._pos>>1;return this.ids[l]=l,this.coords[this._pos++]=e,this.coords[this._pos++]=o,l}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Lp(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,o,l,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:g,nodeSize:y}=this,x=[0,f.length-1,0],I=[];for(;x.length;){const E=x.pop()||0,A=x.pop()||0,P=x.pop()||0;if(A-P<=y){for(let Z=P;Z<=A;Z++){const Y=g[2*Z],lt=g[2*Z+1];Y>=e&&Y<=l&&lt>=o&&lt<=d&&I.push(f[Z])}continue}const L=P+A>>1,V=g[2*L],N=g[2*L+1];V>=e&&V<=l&&N>=o&&N<=d&&I.push(f[L]),(E===0?e<=V:o<=N)&&(x.push(P),x.push(L-1),x.push(1-E)),(E===0?l>=V:d>=N)&&(x.push(L+1),x.push(A),x.push(1-E))}return I}within(e,o,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:d,coords:f,nodeSize:g}=this,y=[0,d.length-1,0],x=[],I=l*l;for(;y.length;){const E=y.pop()||0,A=y.pop()||0,P=y.pop()||0;if(A-P<=g){for(let Z=P;Z<=A;Z++)Df(f[2*Z],f[2*Z+1],e,o)<=I&&x.push(d[Z]);continue}const L=P+A>>1,V=f[2*L],N=f[2*L+1];Df(V,N,e,o)<=I&&x.push(d[L]),(E===0?e-l<=V:o-l<=N)&&(y.push(P),y.push(L-1),y.push(1-E)),(E===0?e+l>=V:o+l>=N)&&(y.push(L+1),y.push(A),y.push(1-E))}return x}}function Lp(i,e,o,l,d,f){if(d-l<=o)return;const g=l+d>>1;Mf(i,e,g,l,d,f),Lp(i,e,o,l,g-1,1-f),Lp(i,e,o,g+1,d,1-f)}function Mf(i,e,o,l,d,f){for(;d>l;){if(d-l>600){const I=d-l+1,E=o-l+1,A=Math.log(I),P=.5*Math.exp(2*A/3),L=.5*Math.sqrt(A*P*(I-P)/I)*(E-I/2<0?-1:1);Mf(i,e,o,Math.max(l,Math.floor(o-E*P/I+L)),Math.min(d,Math.floor(o+(I-E)*P/I+L)),f)}const g=e[2*o+f];let y=l,x=d;for(pc(i,e,l,o),e[2*d+f]>g&&pc(i,e,l,d);y<x;){for(pc(i,e,y,x),y++,x--;e[2*y+f]<g;)y++;for(;e[2*x+f]>g;)x--}e[2*l+f]===g?pc(i,e,l,x):(x++,pc(i,e,x,d)),x<=o&&(l=x+1),o<=x&&(d=x-1)}}function pc(i,e,o,l){Bp(i,o,l),Bp(e,2*o,2*l),Bp(e,2*o+1,2*l+1)}function Bp(i,e,o){const l=i[e];i[e]=i[o],i[o]=l}function Df(i,e,o,l){const d=i-o,f=e-l;return d*d+f*f}var Rp;u.bg=void 0,(Rp=u.bg||(u.bg={})).create="create",Rp.load="load",Rp.fullLoad="fullLoad";let ch=null,mc=[];const $p=1e3/60,Vp="loadTime",Fp="fullLoadTime",X0={mark(i){performance.mark(i)},frame(i){const e=i;ch!=null&&mc.push(e-ch),ch=e},clearMetrics(){ch=null,mc=[],performance.clearMeasures(Vp),performance.clearMeasures(Fp);for(const i in u.bg)performance.clearMarks(u.bg[i])},getPerformanceMetrics(){performance.measure(Vp,u.bg.create,u.bg.load),performance.measure(Fp,u.bg.create,u.bg.fullLoad);const i=performance.getEntriesByName(Vp)[0].duration,e=performance.getEntriesByName(Fp)[0].duration,o=mc.length,l=1/(mc.reduce((f,g)=>f+g,0)/o/1e3),d=mc.filter(f=>f>$p).reduce((f,g)=>f+(g-$p)/$p,0);return{loadTime:i,fullLoadTime:e,fps:l,percentDroppedFrames:d/(o+d)*100,totalFrames:o}}};u.$=class extends oe{},u.A=Gs,u.B=Vd,u.C=function(i){if(de==null){const e=i.navigator?i.navigator.userAgent:null;de=!!i.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return de},u.D=q,u.E=Rr,u.F=class{constructor(i,e){this.target=i,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new O0(()=>this.process()),this.subscription=function(o,l,d){return o.addEventListener(l,d,!1),{unsubscribe:()=>{o.removeEventListener(l,d,!1)}}}(this.target,"message",o=>this.receive(o)),this.globalScope=Ve(self)?i:window}registerMessageHandler(i,e){this.messageHandlers[i]=e}sendAsync(i,e){return new Promise((o,l)=>{const d=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[d]={resolve:o,reject:l},e&&e.signal.addEventListener("abort",()=>{delete this.resolveRejects[d];const y={id:d,type:"<cancel>",origin:location.origin,targetMapId:i.targetMapId,sourceMapId:this.mapId};this.target.postMessage(y)},{once:!0});const f=[],g=Object.assign(Object.assign({},i),{id:d,sourceMapId:this.mapId,origin:location.origin,data:Za(i.data,f)});this.target.postMessage(g,{transfer:f})})}receive(i){const e=i.data,o=e.id;if(!(e.origin!=="file://"&&location.origin!=="file://"&&e.origin!=="resource://android"&&location.origin!=="resource://android"&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if(e.type==="<cancel>"){delete this.tasks[o];const l=this.abortControllers[o];return delete this.abortControllers[o],void(l&&l.abort())}if(Ve(self)||e.mustQueue)return this.tasks[o]=e,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,e)}}process(){if(this.taskQueue.length===0)return;const i=this.taskQueue.shift(),e=this.tasks[i];delete this.tasks[i],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(i,e)}processTask(i,e){return s(this,void 0,void 0,function*(){if(e.type==="<response>"){const d=this.resolveRejects[i];return delete this.resolveRejects[i],d?void(e.error?d.reject(Yr(e.error)):d.resolve(Yr(e.data))):void 0}if(!this.messageHandlers[e.type])return void this.completeTask(i,new Error(`Could not find a registered handler for ${e.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=Yr(e.data),l=new AbortController;this.abortControllers[i]=l;try{const d=yield this.messageHandlers[e.type](e.sourceMapId,o,l);this.completeTask(i,null,d)}catch(d){this.completeTask(i,d)}})}completeTask(i,e,o){const l=[];delete this.abortControllers[i];const d={id:i,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?Za(e):null,data:Za(o,l)};this.target.postMessage(d,{transfer:l})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},u.G=Sa,u.H=function(){var i=new Gs(16);return Gs!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},u.I=vp,u.J=function(i,e,o){var l,d,f,g,y,x,I,E,A,P,L,V,N=o[0],Z=o[1],Y=o[2];return e===i?(i[12]=e[0]*N+e[4]*Z+e[8]*Y+e[12],i[13]=e[1]*N+e[5]*Z+e[9]*Y+e[13],i[14]=e[2]*N+e[6]*Z+e[10]*Y+e[14],i[15]=e[3]*N+e[7]*Z+e[11]*Y+e[15]):(d=e[1],f=e[2],g=e[3],y=e[4],x=e[5],I=e[6],E=e[7],A=e[8],P=e[9],L=e[10],V=e[11],i[0]=l=e[0],i[1]=d,i[2]=f,i[3]=g,i[4]=y,i[5]=x,i[6]=I,i[7]=E,i[8]=A,i[9]=P,i[10]=L,i[11]=V,i[12]=l*N+y*Z+A*Y+e[12],i[13]=d*N+x*Z+P*Y+e[13],i[14]=f*N+I*Z+L*Y+e[14],i[15]=g*N+E*Z+V*Y+e[15]),i},u.K=function(i,e,o){var l=o[0],d=o[1],f=o[2];return i[0]=e[0]*l,i[1]=e[1]*l,i[2]=e[2]*l,i[3]=e[3]*l,i[4]=e[4]*d,i[5]=e[5]*d,i[6]=e[6]*d,i[7]=e[7]*d,i[8]=e[8]*f,i[9]=e[9]*f,i[10]=e[10]*f,i[11]=e[11]*f,i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i},u.L=h_,u.M=function(i,e){const o={};for(let l=0;l<e.length;l++){const d=e[l];d in i&&(o[d]=i[d])}return o},u.N=aa,u.O=af,u.P=X,u.Q=sf,u.R=On,u.S=Nn,u.T=R,u.U=Ye,u.V=gi,u.W=yi,u.X=ui,u.Y=Pt,u.Z=hc,u._=s,u.a=sn,u.a$=function(i,e){var o=i[0],l=i[1],d=i[2],f=i[3],g=i[4],y=i[5],x=i[6],I=i[7],E=i[8],A=i[9],P=i[10],L=i[11],V=i[12],N=i[13],Z=i[14],Y=i[15],lt=e[0],nt=e[1],ct=e[2],pt=e[3],xt=e[4],Rt=e[5],te=e[6],Bt=e[7],zt=e[8],Wt=e[9],Ut=e[10],Ft=e[11],gt=e[12],Xt=e[13],Gt=e[14],re=e[15];return Math.abs(o-lt)<=Qi*Math.max(1,Math.abs(o),Math.abs(lt))&&Math.abs(l-nt)<=Qi*Math.max(1,Math.abs(l),Math.abs(nt))&&Math.abs(d-ct)<=Qi*Math.max(1,Math.abs(d),Math.abs(ct))&&Math.abs(f-pt)<=Qi*Math.max(1,Math.abs(f),Math.abs(pt))&&Math.abs(g-xt)<=Qi*Math.max(1,Math.abs(g),Math.abs(xt))&&Math.abs(y-Rt)<=Qi*Math.max(1,Math.abs(y),Math.abs(Rt))&&Math.abs(x-te)<=Qi*Math.max(1,Math.abs(x),Math.abs(te))&&Math.abs(I-Bt)<=Qi*Math.max(1,Math.abs(I),Math.abs(Bt))&&Math.abs(E-zt)<=Qi*Math.max(1,Math.abs(E),Math.abs(zt))&&Math.abs(A-Wt)<=Qi*Math.max(1,Math.abs(A),Math.abs(Wt))&&Math.abs(P-Ut)<=Qi*Math.max(1,Math.abs(P),Math.abs(Ut))&&Math.abs(L-Ft)<=Qi*Math.max(1,Math.abs(L),Math.abs(Ft))&&Math.abs(V-gt)<=Qi*Math.max(1,Math.abs(V),Math.abs(gt))&&Math.abs(N-Xt)<=Qi*Math.max(1,Math.abs(N),Math.abs(Xt))&&Math.abs(Z-Gt)<=Qi*Math.max(1,Math.abs(Z),Math.abs(Gt))&&Math.abs(Y-re)<=Qi*Math.max(1,Math.abs(Y),Math.abs(re))},u.a0=ji,u.a1=Mp,u.a2=It,u.a3=i=>{const e=window.document.createElement("video");return e.muted=!0,new Promise(o=>{e.onloadstart=()=>{o(e)};for(const l of i){const d=window.document.createElement("source");Do(l)||(e.crossOrigin="Anonymous"),d.src=l,e.appendChild(d)}})},u.a4=function(){return Tt++},u.a5=yr,u.a6=Js,u.a7=Xr,u.a8=Ja,u.a9=pf,u.aA=function(i){if(i.type==="custom")return new F0(i);switch(i.type){case"background":return new R0(i);case"circle":return new kg(i);case"fill":return new Og(i);case"fill-extrusion":return new e0(i);case"heatmap":return new Ig(i);case"hillshade":return new Cg(i);case"line":return new c0(i);case"raster":return new V0(i);case"symbol":return new oh(i)}},u.aB=jt,u.aC=function(i,e){if(!i)return[{command:"setStyle",args:[e]}];let o=[];try{if(!Se(i.version,e.version))return[{command:"setStyle",args:[e]}];Se(i.center,e.center)||o.push({command:"setCenter",args:[e.center]}),Se(i.zoom,e.zoom)||o.push({command:"setZoom",args:[e.zoom]}),Se(i.bearing,e.bearing)||o.push({command:"setBearing",args:[e.bearing]}),Se(i.pitch,e.pitch)||o.push({command:"setPitch",args:[e.pitch]}),Se(i.sprite,e.sprite)||o.push({command:"setSprite",args:[e.sprite]}),Se(i.glyphs,e.glyphs)||o.push({command:"setGlyphs",args:[e.glyphs]}),Se(i.transition,e.transition)||o.push({command:"setTransition",args:[e.transition]}),Se(i.light,e.light)||o.push({command:"setLight",args:[e.light]}),Se(i.terrain,e.terrain)||o.push({command:"setTerrain",args:[e.terrain]}),Se(i.sky,e.sky)||o.push({command:"setSky",args:[e.sky]}),Se(i.projection,e.projection)||o.push({command:"setProjection",args:[e.projection]});const l={},d=[];(function(g,y,x,I){let E;for(E in y=y||{},g=g||{})Object.prototype.hasOwnProperty.call(g,E)&&(Object.prototype.hasOwnProperty.call(y,E)||kn(E,x,I));for(E in y)Object.prototype.hasOwnProperty.call(y,E)&&(Object.prototype.hasOwnProperty.call(g,E)?Se(g[E],y[E])||(g[E].type==="geojson"&&y[E].type==="geojson"&&ds(g,y,E)?Di(x,{command:"setGeoJSONSourceData",args:[E,y[E].data]}):Po(E,y,x,I)):er(E,y,x))})(i.sources,e.sources,d,l);const f=[];i.layers&&i.layers.forEach(g=>{"source"in g&&l[g.source]?o.push({command:"removeLayer",args:[g.id]}):f.push(g)}),o=o.concat(d),function(g,y,x){y=y||[];const I=(g=g||[]).map(ir),E=y.map(ir),A=g.reduce($r,{}),P=y.reduce($r,{}),L=I.slice(),V=Object.create(null);let N,Z,Y,lt,nt;for(let ct=0,pt=0;ct<I.length;ct++)N=I[ct],Object.prototype.hasOwnProperty.call(P,N)?pt++:(Di(x,{command:"removeLayer",args:[N]}),L.splice(L.indexOf(N,pt),1));for(let ct=0,pt=0;ct<E.length;ct++)N=E[E.length-1-ct],L[L.length-1-ct]!==N&&(Object.prototype.hasOwnProperty.call(A,N)?(Di(x,{command:"removeLayer",args:[N]}),L.splice(L.lastIndexOf(N,L.length-pt),1)):pt++,lt=L[L.length-ct],Di(x,{command:"addLayer",args:[P[N],lt]}),L.splice(L.length-ct,0,N),V[N]=!0);for(let ct=0;ct<E.length;ct++)if(N=E[ct],Z=A[N],Y=P[N],!V[N]&&!Se(Z,Y))if(Se(Z.source,Y.source)&&Se(Z["source-layer"],Y["source-layer"])&&Se(Z.type,Y.type)){for(nt in zo(Z.layout,Y.layout,x,N,null,"setLayoutProperty"),zo(Z.paint,Y.paint,x,N,null,"setPaintProperty"),Se(Z.filter,Y.filter)||Di(x,{command:"setFilter",args:[N,Y.filter]}),Se(Z.minzoom,Y.minzoom)&&Se(Z.maxzoom,Y.maxzoom)||Di(x,{command:"setLayerZoomRange",args:[N,Y.minzoom,Y.maxzoom]}),Z)Object.prototype.hasOwnProperty.call(Z,nt)&&nt!=="layout"&&nt!=="paint"&&nt!=="filter"&&nt!=="metadata"&&nt!=="minzoom"&&nt!=="maxzoom"&&(nt.indexOf("paint.")===0?zo(Z[nt],Y[nt],x,N,nt.slice(6),"setPaintProperty"):Se(Z[nt],Y[nt])||Di(x,{command:"setLayerProperty",args:[N,nt,Y[nt]]}));for(nt in Y)Object.prototype.hasOwnProperty.call(Y,nt)&&!Object.prototype.hasOwnProperty.call(Z,nt)&&nt!=="layout"&&nt!=="paint"&&nt!=="filter"&&nt!=="metadata"&&nt!=="minzoom"&&nt!=="maxzoom"&&(nt.indexOf("paint.")===0?zo(Z[nt],Y[nt],x,N,nt.slice(6),"setPaintProperty"):Se(Z[nt],Y[nt])||Di(x,{command:"setLayerProperty",args:[N,nt,Y[nt]]}))}else Di(x,{command:"removeLayer",args:[N]}),lt=L[L.lastIndexOf(N)+1],Di(x,{command:"addLayer",args:[Y,lt]})}(f,e.layers,o)}catch{o=[{command:"setStyle",args:[e]}]}return o},u.aD=function(i){const e=[],o=i.id;return o===void 0&&e.push({message:`layers.${o}: missing required property "id"`}),i.render===void 0&&e.push({message:`layers.${o}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&e.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),e},u.aE=function i(e,o){if(Array.isArray(e)){if(!Array.isArray(o)||e.length!==o.length)return!1;for(let l=0;l<e.length;l++)if(!i(e[l],o[l]))return!1;return!0}if(typeof e=="object"&&e!==null&&o!==null){if(typeof o!="object"||Object.keys(e).length!==Object.keys(o).length)return!1;for(const l in e)if(!i(e[l],o[l]))return!1;return!0}return e===o},u.aF=ee,u.aG=Ht,u.aH=class extends Xa{constructor(i,e){super(i,e),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},u.aI=ju,u.aJ=class extends Xa{constructor(i,e){super(i,e),this.current=_g}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let e=1;e<16;e++)if(i[e]!==this.current[e]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},u.aK=t_,u.aL=e_,u.aM=Le,u.aN=class extends Xa{constructor(i,e){super(i,e),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},u.aO=class extends Xa{constructor(i,e){super(i,e),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},u.aP=function(i,e,o,l,d,f,g){var y=1/(e-o),x=1/(l-d),I=1/(f-g);return i[0]=-2*y,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*x,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*I,i[11]=0,i[12]=(e+o)*y,i[13]=(d+l)*x,i[14]=(g+f)*I,i[15]=1,i},u.aQ=wg,u.aR=class extends Ci{},u.aS=p0,u.aT=class extends pn{},u.aU=cp,u.aV=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},u.aW=f_,u.aX=Uo,u.aY=Hs,u.aZ=class extends Yi{},u.a_=function(i,e){return i[0]===e[0]&&i[1]===e[1]&&i[2]===e[2]&&i[3]===e[3]&&i[4]===e[4]&&i[5]===e[5]&&i[6]===e[6]&&i[7]===e[7]&&i[8]===e[8]&&i[9]===e[9]&&i[10]===e[10]&&i[11]===e[11]&&i[12]===e[12]&&i[13]===e[13]&&i[14]===e[14]&&i[15]===e[15]},u.aa=function(i){const e={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,l,d,f)=>{const g=d||f;return e[l]=!g||g.toLowerCase(),""}),e["max-age"]){const o=parseInt(e["max-age"],10);isNaN(o)?delete e["max-age"]:e["max-age"]=o}return e},u.ab=function(i,e){const o=[];for(const l in i)l in e||o.push(l);return o},u.ac=wt,u.ad=function(i,e,o){var l=Math.sin(o),d=Math.cos(o),f=e[0],g=e[1],y=e[2],x=e[3],I=e[4],E=e[5],A=e[6],P=e[7];return e!==i&&(i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[0]=f*d+I*l,i[1]=g*d+E*l,i[2]=y*d+A*l,i[3]=x*d+P*l,i[4]=I*d-f*l,i[5]=E*d-g*l,i[6]=A*d-y*l,i[7]=P*d-x*l,i},u.ae=function(i){var e=new Gs(16);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e},u.af=Wu,u.ag=function(i,e){let o=0,l=0;if(i.kind==="constant")l=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:d,minZoom:f,maxZoom:g}=i,y=d?wt(Ki.interpolationFactor(d,e,f,g),0,1):0;i.kind==="camera"?l=Xi.number(i.minSize,i.maxSize,y):o=y}return{uSizeT:o,uSize:l}},u.ai=function(i,{uSize:e,uSizeT:o},{lowerSize:l,upperSize:d}){return i.kind==="source"?l/kr:i.kind==="composite"?Xi.number(l/kr,d/kr,o):e},u.aj=Sp,u.ak=function(i,e,o,l){const d=e.y-i.y,f=e.x-i.x,g=l.y-o.y,y=l.x-o.x,x=g*f-y*d;if(x===0)return null;const I=(y*(i.y-o.y)-g*(i.x-o.x))/x;return new X(i.x+I*f,i.y+I*d)},u.al=gf,u.am=r_,u.an=ap,u.ao=function(i){let e=1/0,o=1/0,l=-1/0,d=-1/0;for(const f of i)e=Math.min(e,f.x),o=Math.min(o,f.y),l=Math.max(l,f.x),d=Math.max(d,f.y);return[e,o,l,d]},u.ap=vi,u.ar=kp,u.as=function(i,e){var o=e[0],l=e[1],d=e[2],f=e[3],g=e[4],y=e[5],x=e[6],I=e[7],E=e[8],A=e[9],P=e[10],L=e[11],V=e[12],N=e[13],Z=e[14],Y=e[15],lt=o*y-l*g,nt=o*x-d*g,ct=o*I-f*g,pt=l*x-d*y,xt=l*I-f*y,Rt=d*I-f*x,te=E*N-A*V,Bt=E*Z-P*V,zt=E*Y-L*V,Wt=A*Z-P*N,Ut=A*Y-L*N,Ft=P*Y-L*Z,gt=lt*Ft-nt*Ut+ct*Wt+pt*zt-xt*Bt+Rt*te;return gt?(i[0]=(y*Ft-x*Ut+I*Wt)*(gt=1/gt),i[1]=(d*Ut-l*Ft-f*Wt)*gt,i[2]=(N*Rt-Z*xt+Y*pt)*gt,i[3]=(P*xt-A*Rt-L*pt)*gt,i[4]=(x*zt-g*Ft-I*Bt)*gt,i[5]=(o*Ft-d*zt+f*Bt)*gt,i[6]=(Z*ct-V*Rt-Y*nt)*gt,i[7]=(E*Rt-P*ct+L*nt)*gt,i[8]=(g*Ut-y*zt+I*te)*gt,i[9]=(l*zt-o*Ut-f*te)*gt,i[10]=(V*xt-N*ct+Y*lt)*gt,i[11]=(A*ct-E*xt-L*lt)*gt,i[12]=(y*Bt-g*Wt-x*te)*gt,i[13]=(o*Wt-l*Bt+d*te)*gt,i[14]=(N*nt-V*pt-Z*lt)*gt,i[15]=(E*pt-A*nt+P*lt)*gt,i):null},u.at=Pp,u.au=wp,u.av=zp,u.aw=function(){const i={},e=dt.$version;for(const o in dt.$root){const l=dt.$root[o];if(l.required){let d=null;d=o==="version"?e:l.type==="array"?[]:{},d!=null&&(i[o]=d)}}return i},u.ax=Zl,u.ay=Mo,u.az=function(i){i=i.slice();const e=Object.create(null);for(let o=0;o<i.length;o++)e[i[o].id]=i[o];for(let o=0;o<i.length;o++)"ref"in i[o]&&(i[o]=hs(i[o],e[i[o].ref]));return i},u.b=Ee,u.b0=function(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i},u.b1=function(i,e,o){return i[0]=e[0]*o[0],i[1]=e[1]*o[1],i[2]=e[2]*o[2],i[3]=e[3]*o[3],i},u.b2=function(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]+i[3]*e[3]},u.b3=Nt,u.b4=uf,u.b5=lf,u.b6=function(i,e,o,l,d){var f,g=1/Math.tan(e/2);return i[0]=g/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=g,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,d!=null&&d!==1/0?(i[10]=(d+l)*(f=1/(l-d)),i[14]=2*d*l*f):(i[10]=-1,i[14]=-2*l),i},u.b7=function(i,e,o){var l=Math.sin(o),d=Math.cos(o),f=e[4],g=e[5],y=e[6],x=e[7],I=e[8],E=e[9],A=e[10],P=e[11];return e!==i&&(i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[4]=f*d+I*l,i[5]=g*d+E*l,i[6]=y*d+A*l,i[7]=x*d+P*l,i[8]=I*d-f*l,i[9]=E*d-g*l,i[10]=A*d-y*l,i[11]=P*d-x*l,i},u.b8=oi,u.b9=ft,u.bA=R_,u.bB=function(i){return i.message===Yn},u.bC=Ms,u.bD=S,u.ba=function(i){return i*Math.PI/180},u.bb=function(i,e){const{x:o,y:l}=hc.fromLngLat(e);return!(i<0||i>25||l<0||l>=1||o<0||o>=1)},u.bc=function(i,e){return i[0]=e[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=e[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},u.bd=class extends Lt{},u.be=Ep,u.bf=X0,u.bh=wn,u.bi=function(i,e){sn.REGISTERED_PROTOCOLS[i]=e},u.bj=function(i){delete sn.REGISTERED_PROTOCOLS[i]},u.bk=function(i,e){const o={};for(let d=0;d<i.length;d++){const f=e&&e[i[d].id]||Ua(i[d]);e&&(e[i[d].id]=f);let g=o[f];g||(g=o[f]=[]),g.push(i[d])}const l=[];for(const d in o)l.push(o[d]);return l},u.bl=$t,u.bm=df,u.bn=mf,u.bo=j_,u.bp=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=ui/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const e=i.bucket.layers[0],o=e.layout,l=e._unevaluatedLayout._values,d={layoutIconSize:l["icon-size"].possiblyEvaluate(new C(i.bucket.zoom+1),i.canonical),layoutTextSize:l["text-size"].possiblyEvaluate(new C(i.bucket.zoom+1),i.canonical),textMaxSize:l["text-size"].possiblyEvaluate(new C(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:I,maxZoom:E}=i.bucket.textSizeData;d.compositeTextSizes=[l["text-size"].possiblyEvaluate(new C(I),i.canonical),l["text-size"].possiblyEvaluate(new C(E),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:I,maxZoom:E}=i.bucket.iconSizeData;d.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new C(I),i.canonical),l["icon-size"].possiblyEvaluate(new C(E),i.canonical)]}const f=o.get("text-line-height")*vi,g=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",y=o.get("text-keep-upright"),x=o.get("text-size");for(const I of i.bucket.features){const E=o.get("text-font").evaluate(I,{},i.canonical).join(","),A=x.evaluate(I,{},i.canonical),P=d.layoutTextSize.evaluate(I,{},i.canonical),L=d.layoutIconSize.evaluate(I,{},i.canonical),V={horizontal:{},vertical:void 0},N=I.text;let Z,Y=[0,0];if(N){const ct=N.toString(),pt=o.get("text-letter-spacing").evaluate(I,{},i.canonical)*vi,xt=Kd(ct)?pt:0,Rt=o.get("text-anchor").evaluate(I,{},i.canonical),te=Tf(e,I,i.canonical);if(!te){const Ut=o.get("text-radial-offset").evaluate(I,{},i.canonical);Y=Ut?If(Rt,[Ut*vi,Dp]):o.get("text-offset").evaluate(I,{},i.canonical).map(Ft=>Ft*vi)}let Bt=g?"center":o.get("text-justify").evaluate(I,{},i.canonical);const zt=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(I,{},i.canonical)*vi:1/0,Wt=()=>{i.bucket.allowVerticalPlacement&&Jl(ct)&&(V.vertical=eh(N,i.glyphMap,i.glyphPositions,i.imagePositions,E,zt,f,Rt,"left",xt,Y,u.ah.vertical,!0,P,A))};if(!g&&te){const Ut=new Set;if(Bt==="auto")for(let gt=0;gt<te.values.length;gt+=2)Ut.add(Pp(te.values[gt]));else Ut.add(Bt);let Ft=!1;for(const gt of Ut)if(!V.horizontal[gt])if(Ft)V.horizontal[gt]=V.horizontal[0];else{const Xt=eh(N,i.glyphMap,i.glyphPositions,i.imagePositions,E,zt,f,"center",gt,xt,Y,u.ah.horizontal,!1,P,A);Xt&&(V.horizontal[gt]=Xt,Ft=Xt.positionedLines.length===1)}Wt()}else{Bt==="auto"&&(Bt=Pp(Rt));const Ut=eh(N,i.glyphMap,i.glyphPositions,i.imagePositions,E,zt,f,Rt,Bt,xt,Y,u.ah.horizontal,!1,P,A);Ut&&(V.horizontal[Bt]=Ut),Wt(),Jl(ct)&&g&&y&&(V.vertical=eh(N,i.glyphMap,i.glyphPositions,i.imagePositions,E,zt,f,Rt,Bt,xt,Y,u.ah.vertical,!1,P,A))}}let lt=!1;if(I.icon&&I.icon.name){const ct=i.imageMap[I.icon.name];ct&&(Z=D0(i.imagePositions[I.icon.name],o.get("icon-offset").evaluate(I,{},i.canonical),o.get("icon-anchor").evaluate(I,{},i.canonical)),lt=!!ct.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=lt:i.bucket.sdfIcons!==lt&&ae("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ct.pixelRatio!==i.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const nt=Ef(V.horizontal)||V.vertical;i.bucket.iconsInText=!!nt&&nt.iconsInText,(nt||Z)&&Z0(i.bucket,I,V,Z,i.imageMap,d,P,L,Y,lt,i.canonical)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},u.bq=gp,u.br=mp,u.bs=fp,u.bt=na,u.bu=yp,u.bv=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},u.bw=function(i,e,o,l,d){return s(this,void 0,void 0,function*(){if(gi())try{return yield yi(i,e,o,l,d)}catch{}return function(f,g,y,x,I){const E=f.width,A=f.height;si&&Ge||(si=new OffscreenCanvas(E,A),Ge=si.getContext("2d",{willReadFrequently:!0})),si.width=E,si.height=A,Ge.drawImage(f,0,0,E,A);const P=Ge.getImageData(g,y,x,I);return Ge.clearRect(0,0,E,A),P.data}(i,e,o,l,d)})},u.bx=hf,u.by=T,u.bz=k,u.c=vn,u.d=i=>s(void 0,void 0,void 0,function*(){if(i.byteLength===0)return createImageBitmap(new ImageData(1,1));const e=new Blob([new Uint8Array(i)],{type:"image/png"});try{return createImageBitmap(e)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),u.e=Qt,u.f=i=>new Promise((e,o)=>{const l=new Image;l.onload=()=>{e(l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=bi})},l.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const d=new Blob([new Uint8Array(i)],{type:"image/png"});l.src=i.byteLength?URL.createObjectURL(d):bi}),u.g=xn,u.h=(i,e)=>Pn(Qt(i,{type:"json"}),e),u.i=Ve,u.j=tr,u.k=Qo,u.l=(i,e)=>Pn(Qt(i,{type:"arrayBuffer"}),e),u.m=Pn,u.n=function(i){return new yp(i).readFields(S0,[])},u.o=nc,u.p=H_,u.q=_t,u.r=Iu,u.s=Do,u.t=Gl,u.u=gr,u.v=dt,u.w=ae,u.x=function([i,e,o]){return e+=90,e*=Math.PI/180,o*=Math.PI/180,{x:i*Math.cos(e)*Math.sin(o),y:i*Math.sin(e)*Math.sin(o),z:i*Math.cos(o)}},u.y=Xi,u.z=C}),a("worker",0,function(u){class s{constructor(z){this.keyCache={},z&&this.replace(z)}replace(z){this._layerConfigs={},this._layers={},this.update(z,[])}update(z,B){for(const G of z){this._layerConfigs[G.id]=G;const et=this._layers[G.id]=u.aA(G);et._featureFilter=u.a7(et.filter),this.keyCache[G.id]&&delete this.keyCache[G.id]}for(const G of B)delete this.keyCache[G],delete this._layerConfigs[G],delete this._layers[G];this.familiesBySource={};const O=u.bk(Object.values(this._layerConfigs),this.keyCache);for(const G of O){const et=G.map(ht=>this._layers[ht.id]),at=et[0];if(at.visibility==="none")continue;const st=at.source||"";let it=this.familiesBySource[st];it||(it=this.familiesBySource[st]={});const mt=at.sourceLayer||"_geojsonTileLayer";let yt=it[mt];yt||(yt=it[mt]=[]),yt.push(et)}}}class T{constructor(z){const B={},O=[];for(const st in z){const it=z[st],mt=B[st]={};for(const yt in it){const ht=it[+yt];if(!ht||ht.bitmap.width===0||ht.bitmap.height===0)continue;const At={x:0,y:0,w:ht.bitmap.width+2,h:ht.bitmap.height+2};O.push(At),mt[yt]={rect:At,metrics:ht.metrics}}}const{w:G,h:et}=u.p(O),at=new u.o({width:G||1,height:et||1});for(const st in z){const it=z[st];for(const mt in it){const yt=it[+mt];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const ht=B[st][mt].rect;u.o.copy(yt.bitmap,at,{x:0,y:0},{x:ht.x+1,y:ht.y+1},yt.bitmap)}}this.image=at,this.positions=B}}u.bl("GlyphAtlas",T);class k{constructor(z){this.tileID=new u.S(z.tileID.overscaledZ,z.tileID.wrap,z.tileID.canonical.z,z.tileID.canonical.x,z.tileID.canonical.y),this.uid=z.uid,this.zoom=z.zoom,this.pixelRatio=z.pixelRatio,this.tileSize=z.tileSize,this.source=z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=z.showCollisionBoxes,this.collectResourceTiming=!!z.collectResourceTiming,this.returnDependencies=!!z.returnDependencies,this.promoteId=z.promoteId,this.inFlightDependencies=[]}parse(z,B,O,G){return u._(this,void 0,void 0,function*(){this.status="parsing",this.data=z,this.collisionBoxArray=new u.a5;const et=new u.bm(Object.keys(z.layers).sort()),at=new u.bn(this.tileID,this.promoteId);at.bucketLayerIDs=[];const st={},it={featureIndex:at,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:O},mt=B.familiesBySource[this.source];for(const ne in mt){const De=z.layers[ne];if(!De)continue;De.version===1&&u.w(`Vector tile source "${this.source}" layer "${ne}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ne=et.encode(ne),li=[];for(let cn=0;cn<De.length;cn++){const Ii=De.feature(cn),Vr=at.getId(Ii,ne);li.push({feature:Ii,id:Vr,index:cn,sourceLayerIndex:Ne})}for(const cn of mt[ne]){const Ii=cn[0];Ii.source!==this.source&&u.w(`layer.source = ${Ii.source} does not equal this.source = ${this.source}`),Ii.minzoom&&this.zoom<Math.floor(Ii.minzoom)||Ii.maxzoom&&this.zoom>=Ii.maxzoom||Ii.visibility!=="none"&&($(cn,this.zoom,O),(st[Ii.id]=Ii.createBucket({index:at.bucketLayerIDs.length,layers:cn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ne,sourceID:this.source})).populate(li,it,this.tileID.canonical),at.bucketLayerIDs.push(cn.map(Vr=>Vr.id)))}}const yt=u.aF(it.glyphDependencies,ne=>Object.keys(ne).map(Number));this.inFlightDependencies.forEach(ne=>ne==null?void 0:ne.abort()),this.inFlightDependencies=[];let ht=Promise.resolve({});if(Object.keys(yt).length){const ne=new AbortController;this.inFlightDependencies.push(ne),ht=G.sendAsync({type:"GG",data:{stacks:yt,source:this.source,tileID:this.tileID,type:"glyphs"}},ne)}const At=Object.keys(it.iconDependencies);let Yt=Promise.resolve({});if(At.length){const ne=new AbortController;this.inFlightDependencies.push(ne),Yt=G.sendAsync({type:"GI",data:{icons:At,source:this.source,tileID:this.tileID,type:"icons"}},ne)}const Jt=Object.keys(it.patternDependencies);let ve=Promise.resolve({});if(Jt.length){const ne=new AbortController;this.inFlightDependencies.push(ne),ve=G.sendAsync({type:"GI",data:{icons:Jt,source:this.source,tileID:this.tileID,type:"patterns"}},ne)}const[Ie,ye,Ke]=yield Promise.all([ht,Yt,ve]),Me=new T(Ie),di=new u.bo(ye,Ke);for(const ne in st){const De=st[ne];De instanceof u.a6?($(De.layers,this.zoom,O),u.bp({bucket:De,glyphMap:Ie,glyphPositions:Me.positions,imageMap:ye,imagePositions:di.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):De.hasPattern&&(De instanceof u.bq||De instanceof u.br||De instanceof u.bs)&&($(De.layers,this.zoom,O),De.addFeatures(it,this.tileID.canonical,di.patternPositions))}return this.status="done",{buckets:Object.values(st).filter(ne=>!ne.isEmpty()),featureIndex:at,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Me.image,imageAtlas:di,glyphMap:this.returnDependencies?Ie:null,iconMap:this.returnDependencies?ye:null,glyphPositions:this.returnDependencies?Me.positions:null}})}}function $(Q,z,B){const O=new u.z(z);for(const G of Q)G.recalculate(O,B)}class X{constructor(z,B,O){this.actor=z,this.layerIndex=B,this.availableImages=O,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(z,B){return u._(this,void 0,void 0,function*(){const O=yield u.l(z.request,B);try{return{vectorTile:new u.bt.VectorTile(new u.bu(O.data)),rawData:O.data,cacheControl:O.cacheControl,expires:O.expires}}catch(G){const et=new Uint8Array(O.data);let at=`Unable to parse the tile at ${z.request.url}, `;throw at+=et[0]===31&&et[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${G.message}`,new Error(at)}})}loadTile(z){return u._(this,void 0,void 0,function*(){const B=z.uid,O=!!(z&&z.request&&z.request.collectResourceTiming)&&new u.bv(z.request),G=new k(z);this.loading[B]=G;const et=new AbortController;G.abort=et;try{const at=yield this.loadVectorTile(z,et);if(delete this.loading[B],!at)return null;const st=at.rawData,it={};at.expires&&(it.expires=at.expires),at.cacheControl&&(it.cacheControl=at.cacheControl);const mt={};if(O){const ht=O.finish();ht&&(mt.resourceTiming=JSON.parse(JSON.stringify(ht)))}G.vectorTile=at.vectorTile;const yt=G.parse(at.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[B]=G,this.fetching[B]={rawTileData:st,cacheControl:it,resourceTiming:mt};try{const ht=yield yt;return u.e({rawTileData:st.slice(0)},ht,it,mt)}finally{delete this.fetching[B]}}catch(at){throw delete this.loading[B],G.status="done",this.loaded[B]=G,at}})}reloadTile(z){return u._(this,void 0,void 0,function*(){const B=z.uid;if(!this.loaded||!this.loaded[B])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const O=this.loaded[B];if(O.showCollisionBoxes=z.showCollisionBoxes,O.status==="parsing"){const G=yield O.parse(O.vectorTile,this.layerIndex,this.availableImages,this.actor);let et;if(this.fetching[B]){const{rawTileData:at,cacheControl:st,resourceTiming:it}=this.fetching[B];delete this.fetching[B],et=u.e({rawTileData:at.slice(0)},G,st,it)}else et=G;return et}if(O.status==="done"&&O.vectorTile)return O.parse(O.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(z){return u._(this,void 0,void 0,function*(){const B=this.loading,O=z.uid;B&&B[O]&&B[O].abort&&(B[O].abort.abort(),delete B[O])})}removeTile(z){return u._(this,void 0,void 0,function*(){this.loaded&&this.loaded[z.uid]&&delete this.loaded[z.uid]})}}class J{constructor(){this.loaded={}}loadTile(z){return u._(this,void 0,void 0,function*(){const{uid:B,encoding:O,rawImageData:G,redFactor:et,greenFactor:at,blueFactor:st,baseShift:it}=z,mt=G.width+2,yt=G.height+2,ht=u.b(G)?new u.R({width:mt,height:yt},yield u.bw(G,-1,-1,mt,yt)):G,At=new u.bx(B,ht,O,et,at,st,it);return this.loaded=this.loaded||{},this.loaded[B]=At,At})}removeTile(z){const B=this.loaded,O=z.uid;B&&B[O]&&delete B[O]}}function Zt(Q,z){if(Q.length!==0){St(Q[0],z);for(var B=1;B<Q.length;B++)St(Q[B],!z)}}function St(Q,z){for(var B=0,O=0,G=0,et=Q.length,at=et-1;G<et;at=G++){var st=(Q[G][0]-Q[at][0])*(Q[at][1]+Q[G][1]),it=B+st;O+=Math.abs(B)>=Math.abs(st)?B-it+st:st-it+B,B=it}B+O>=0!=!!z&&Q.reverse()}var ge=u.by(function Q(z,B){var O,G=z&&z.type;if(G==="FeatureCollection")for(O=0;O<z.features.length;O++)Q(z.features[O],B);else if(G==="GeometryCollection")for(O=0;O<z.geometries.length;O++)Q(z.geometries[O],B);else if(G==="Feature")Q(z.geometry,B);else if(G==="Polygon")Zt(z.coordinates,B);else if(G==="MultiPolygon")for(O=0;O<z.coordinates.length;O++)Zt(z.coordinates[O],B);return z});const Ae=u.bt.VectorTileFeature.prototype.toGeoJSON;var Ye={exports:{}},gi=u.bz,oi=u.bt.VectorTileFeature,ft=wt;function wt(Q,z){this.options=z||{},this.features=Q,this.length=Q.length}function Nt(Q,z){this.id=typeof Q.id=="number"?Q.id:void 0,this.type=Q.type,this.rawGeometry=Q.type===1?[Q.geometry]:Q.geometry,this.properties=Q.tags,this.extent=z||4096}wt.prototype.feature=function(Q){return new Nt(this.features[Q],this.options.extent)},Nt.prototype.loadGeometry=function(){var Q=this.rawGeometry;this.geometry=[];for(var z=0;z<Q.length;z++){for(var B=Q[z],O=[],G=0;G<B.length;G++)O.push(new gi(B[G][0],B[G][1]));this.geometry.push(O)}return this.geometry},Nt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Q=this.geometry,z=1/0,B=-1/0,O=1/0,G=-1/0,et=0;et<Q.length;et++)for(var at=Q[et],st=0;st<at.length;st++){var it=at[st];z=Math.min(z,it.x),B=Math.max(B,it.x),O=Math.min(O,it.y),G=Math.max(G,it.y)}return[z,O,B,G]},Nt.prototype.toGeoJSON=oi.prototype.toGeoJSON;var Qt=u.bA,Tt=ft;function ee(Q){var z=new Qt;return function(B,O){for(var G in B.layers)O.writeMessage(3,Ht,B.layers[G])}(Q,z),z.finish()}function Ht(Q,z){var B;z.writeVarintField(15,Q.version||1),z.writeStringField(1,Q.name||""),z.writeVarintField(5,Q.extent||4096);var O={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<Q.length;B++)O.feature=Q.feature(B),z.writeMessage(2,jt,O);var G=O.keys;for(B=0;B<G.length;B++)z.writeStringField(3,G[B]);var et=O.values;for(B=0;B<et.length;B++)z.writeMessage(4,de,et[B])}function jt(Q,z){var B=Q.feature;B.id!==void 0&&z.writeVarintField(1,B.id),z.writeMessage(2,Kt,Q),z.writeVarintField(3,B.type),z.writeMessage(4,Ve,B)}function Kt(Q,z){var B=Q.feature,O=Q.keys,G=Q.values,et=Q.keycache,at=Q.valuecache;for(var st in B.properties){var it=B.properties[st],mt=et[st];if(it!==null){mt===void 0&&(O.push(st),et[st]=mt=O.length-1),z.writeVarint(mt);var yt=typeof it;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(it=JSON.stringify(it));var ht=yt+":"+it,At=at[ht];At===void 0&&(G.push(it),at[ht]=At=G.length-1),z.writeVarint(At)}}}function ae(Q,z){return(z<<3)+(7&Q)}function be(Q){return Q<<1^Q>>31}function Ve(Q,z){for(var B=Q.loadGeometry(),O=Q.type,G=0,et=0,at=B.length,st=0;st<at;st++){var it=B[st],mt=1;O===1&&(mt=it.length),z.writeVarint(ae(1,mt));for(var yt=O===3?it.length-1:it.length,ht=0;ht<yt;ht++){ht===1&&O!==1&&z.writeVarint(ae(2,yt-1));var At=it[ht].x-G,Yt=it[ht].y-et;z.writeVarint(be(At)),z.writeVarint(be(Yt)),G+=At,et+=Yt}O===3&&z.writeVarint(ae(7,1))}}function de(Q,z){var B=typeof Q;B==="string"?z.writeStringField(1,Q):B==="boolean"?z.writeBooleanField(7,Q):B==="number"&&(Q%1!=0?z.writeDoubleField(3,Q):Q<0?z.writeSVarintField(6,Q):z.writeVarintField(5,Q))}Ye.exports=ee,Ye.exports.fromVectorTileJs=ee,Ye.exports.fromGeojsonVt=function(Q,z){z=z||{};var B={};for(var O in Q)B[O]=new Tt(Q[O].features,z),B[O].name=O,B[O].version=z.version,B[O].extent=z.extent;return ee({layers:B})},Ye.exports.GeoJSONWrapper=Tt;var Ee=u.by(Ye.exports);const bi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Q=>Q},yi=Math.fround||(si=new Float32Array(1),Q=>(si[0]=+Q,si[0]));var si;class Ge{constructor(z){this.options=Object.assign(Object.create(bi),z),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(z){const{log:B,minZoom:O,maxZoom:G}=this.options;z.length,this.points=z;const et=[];for(let st=0;st<z.length;st++){const it=z[st];if(!it.geometry)continue;const[mt,yt]=it.geometry.coordinates,ht=yi(sn(mt)),At=yi(xn(yt));et.push(ht,At,1/0,st,-1,1),this.options.reduce&&et.push(0)}let at=this.trees[G+1]=this._createTree(et);for(let st=G;st>=O;st--)Date.now(),at=this.trees[st]=this._createTree(this._cluster(at,st));return this}getClusters(z,B){let O=((z[0]+180)%360+360)%360-180;const G=Math.max(-90,Math.min(90,z[1]));let et=z[2]===180?180:((z[2]+180)%360+360)%360-180;const at=Math.max(-90,Math.min(90,z[3]));if(z[2]-z[0]>=360)O=-180,et=180;else if(O>et){const ht=this.getClusters([O,G,180,at],B),At=this.getClusters([-180,G,et,at],B);return ht.concat(At)}const st=this.trees[this._limitZoom(B)],it=st.range(sn(O),xn(at),sn(et),xn(G)),mt=st.data,yt=[];for(const ht of it){const At=this.stride*ht;yt.push(mt[At+5]>1?Yn(mt,At,this.clusterProps):this.points[mt[At+3]])}return yt}getChildren(z){const B=this._getOriginId(z),O=this._getOriginZoom(z),G="No cluster with the specified id.",et=this.trees[O];if(!et)throw new Error(G);const at=et.data;if(B*this.stride>=at.length)throw new Error(G);const st=this.options.radius/(this.options.extent*Math.pow(2,O-1)),it=et.within(at[B*this.stride],at[B*this.stride+1],st),mt=[];for(const yt of it){const ht=yt*this.stride;at[ht+4]===z&&mt.push(at[ht+5]>1?Yn(at,ht,this.clusterProps):this.points[at[ht+3]])}if(mt.length===0)throw new Error(G);return mt}getLeaves(z,B,O){const G=[];return this._appendLeaves(G,z,B=B||10,O=O||0,0),G}getTile(z,B,O){const G=this.trees[this._limitZoom(z)],et=Math.pow(2,z),{extent:at,radius:st}=this.options,it=st/at,mt=(O-it)/et,yt=(O+1+it)/et,ht={features:[]};return this._addTileFeatures(G.range((B-it)/et,mt,(B+1+it)/et,yt),G.data,B,O,et,ht),B===0&&this._addTileFeatures(G.range(1-it/et,mt,1,yt),G.data,et,O,et,ht),B===et-1&&this._addTileFeatures(G.range(0,mt,it/et,yt),G.data,-1,O,et,ht),ht.features.length?ht:null}getClusterExpansionZoom(z){let B=this._getOriginZoom(z)-1;for(;B<=this.options.maxZoom;){const O=this.getChildren(z);if(B++,O.length!==1)break;z=O[0].properties.cluster_id}return B}_appendLeaves(z,B,O,G,et){const at=this.getChildren(B);for(const st of at){const it=st.properties;if(it&&it.cluster?et+it.point_count<=G?et+=it.point_count:et=this._appendLeaves(z,it.cluster_id,O,G,et):et<G?et++:z.push(st),z.length===O)break}return et}_createTree(z){const B=new u.av(z.length/this.stride|0,this.options.nodeSize,Float32Array);for(let O=0;O<z.length;O+=this.stride)B.add(z[O],z[O+1]);return B.finish(),B.data=z,B}_addTileFeatures(z,B,O,G,et,at){for(const st of z){const it=st*this.stride,mt=B[it+5]>1;let yt,ht,At;if(mt)yt=vn(B,it,this.clusterProps),ht=B[it],At=B[it+1];else{const ve=this.points[B[it+3]];yt=ve.properties;const[Ie,ye]=ve.geometry.coordinates;ht=sn(Ie),At=xn(ye)}const Yt={type:1,geometry:[[Math.round(this.options.extent*(ht*et-O)),Math.round(this.options.extent*(At*et-G))]],tags:yt};let Jt;Jt=mt||this.options.generateId?B[it+3]:this.points[B[it+3]].id,Jt!==void 0&&(Yt.id=Jt),at.features.push(Yt)}}_limitZoom(z){return Math.max(this.options.minZoom,Math.min(Math.floor(+z),this.options.maxZoom+1))}_cluster(z,B){const{radius:O,extent:G,reduce:et,minPoints:at}=this.options,st=O/(G*Math.pow(2,B)),it=z.data,mt=[],yt=this.stride;for(let ht=0;ht<it.length;ht+=yt){if(it[ht+2]<=B)continue;it[ht+2]=B;const At=it[ht],Yt=it[ht+1],Jt=z.within(it[ht],it[ht+1],st),ve=it[ht+5];let Ie=ve;for(const ye of Jt){const Ke=ye*yt;it[Ke+2]>B&&(Ie+=it[Ke+5])}if(Ie>ve&&Ie>=at){let ye,Ke=At*ve,Me=Yt*ve,di=-1;const ne=(ht/yt<<5)+(B+1)+this.points.length;for(const De of Jt){const Ne=De*yt;if(it[Ne+2]<=B)continue;it[Ne+2]=B;const li=it[Ne+5];Ke+=it[Ne]*li,Me+=it[Ne+1]*li,it[Ne+4]=ne,et&&(ye||(ye=this._map(it,ht,!0),di=this.clusterProps.length,this.clusterProps.push(ye)),et(ye,this._map(it,Ne)))}it[ht+4]=ne,mt.push(Ke/Ie,Me/Ie,1/0,ne,-1,Ie),et&&mt.push(di)}else{for(let ye=0;ye<yt;ye++)mt.push(it[ht+ye]);if(Ie>1)for(const ye of Jt){const Ke=ye*yt;if(!(it[Ke+2]<=B)){it[Ke+2]=B;for(let Me=0;Me<yt;Me++)mt.push(it[Ke+Me])}}}}return mt}_getOriginId(z){return z-this.points.length>>5}_getOriginZoom(z){return(z-this.points.length)%32}_map(z,B,O){if(z[B+5]>1){const at=this.clusterProps[z[B+6]];return O?Object.assign({},at):at}const G=this.points[z[B+3]].properties,et=this.options.map(G);return O&&et===G?Object.assign({},et):et}}function Yn(Q,z,B){return{type:"Feature",id:Q[z+3],properties:vn(Q,z,B),geometry:{type:"Point",coordinates:[(O=Q[z],360*(O-.5)),Sa(Q[z+1])]}};var O}function vn(Q,z,B){const O=Q[z+5],G=O>=1e4?`${Math.round(O/1e3)}k`:O>=1e3?Math.round(O/100)/10+"k":O,et=Q[z+6],at=et===-1?{}:Object.assign({},B[et]);return Object.assign(at,{cluster:!0,cluster_id:Q[z+3],point_count:O,point_count_abbreviated:G})}function sn(Q){return Q/360+.5}function xn(Q){const z=Math.sin(Q*Math.PI/180),B=.5-.25*Math.log((1+z)/(1-z))/Math.PI;return B<0?0:B>1?1:B}function Sa(Q){const z=(180-360*Q)*Math.PI/180;return 360*Math.atan(Math.exp(z))/Math.PI-90}function wn(Q,z,B,O){let G=O;const et=z+(B-z>>1);let at,st=B-z;const it=Q[z],mt=Q[z+1],yt=Q[B],ht=Q[B+1];for(let At=z+3;At<B;At+=3){const Yt=Mo(Q[At],Q[At+1],it,mt,yt,ht);if(Yt>G)at=At,G=Yt;else if(Yt===G){const Jt=Math.abs(At-et);Jt<st&&(at=At,st=Jt)}}G>O&&(at-z>3&&wn(Q,z,at,O),Q[at+2]=G,B-at>3&&wn(Q,at,B,O))}function Mo(Q,z,B,O,G,et){let at=G-B,st=et-O;if(at!==0||st!==0){const it=((Q-B)*at+(z-O)*st)/(at*at+st*st);it>1?(B=G,O=et):it>0&&(B+=at*it,O+=st*it)}return at=Q-B,st=z-O,at*at+st*st}function Pn(Q,z,B,O){const G={id:Q??null,type:z,geometry:B,tags:O,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(z==="Point"||z==="MultiPoint"||z==="LineString")Do(G,B);else if(z==="Polygon")Do(G,B[0]);else if(z==="MultiLineString")for(const et of B)Do(G,et);else if(z==="MultiPolygon")for(const et of B)Do(G,et[0]);return G}function Do(Q,z){for(let B=0;B<z.length;B+=3)Q.minX=Math.min(Q.minX,z[B]),Q.minY=Math.min(Q.minY,z[B+1]),Q.maxX=Math.max(Q.maxX,z[B]),Q.maxY=Math.max(Q.maxY,z[B+1])}function Jo(Q,z,B,O){if(!z.geometry)return;const G=z.geometry.coordinates;if(G&&G.length===0)return;const et=z.geometry.type,at=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2);let st=[],it=z.id;if(B.promoteId?it=z.properties[B.promoteId]:B.generateId&&(it=O||0),et==="Point")Br(G,st);else if(et==="MultiPoint")for(const mt of G)Br(mt,st);else if(et==="LineString")Qo(G,st,at,!1);else if(et==="MultiLineString"){if(B.lineMetrics){for(const mt of G)st=[],Qo(mt,st,at,!1),Q.push(Pn(it,"LineString",st,z.properties));return}tr(G,st,at,!1)}else if(et==="Polygon")tr(G,st,at,!0);else{if(et!=="MultiPolygon"){if(et==="GeometryCollection"){for(const mt of z.geometry.geometries)Jo(Q,{id:it,geometry:mt,properties:z.properties},B,O);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const mt of G){const yt=[];tr(mt,yt,at,!0),st.push(yt)}}Q.push(Pn(it,et,st,z.properties))}function Br(Q,z){z.push(Rr(Q[0]),dt(Q[1]),0)}function Qo(Q,z,B,O){let G,et,at=0;for(let it=0;it<Q.length;it++){const mt=Rr(Q[it][0]),yt=dt(Q[it][1]);z.push(mt,yt,0),it>0&&(at+=O?(G*yt-mt*et)/2:Math.sqrt(Math.pow(mt-G,2)+Math.pow(yt-et,2))),G=mt,et=yt}const st=z.length-3;z[2]=1,wn(z,0,st,B),z[st+2]=1,z.size=Math.abs(at),z.start=0,z.end=z.size}function tr(Q,z,B,O){for(let G=0;G<Q.length;G++){const et=[];Qo(Q[G],et,B,O),z.push(et)}}function Rr(Q){return Q/360+.5}function dt(Q){const z=Math.sin(Q*Math.PI/180),B=.5-.25*Math.log((1+z)/(1-z))/Math.PI;return B<0?0:B>1?1:B}function ln(Q,z,B,O,G,et,at,st){if(O/=z,et>=(B/=z)&&at<O)return Q;if(at<B||et>=O)return null;const it=[];for(const mt of Q){const yt=mt.geometry;let ht=mt.type;const At=G===0?mt.minX:mt.minY,Yt=G===0?mt.maxX:mt.maxY;if(At>=B&&Yt<O){it.push(mt);continue}if(Yt<B||At>=O)continue;let Jt=[];if(ht==="Point"||ht==="MultiPoint")hs(yt,Jt,B,O,G);else if(ht==="LineString")Se(yt,Jt,B,O,G,!1,st.lineMetrics);else if(ht==="MultiLineString")er(yt,Jt,B,O,G,!1);else if(ht==="Polygon")er(yt,Jt,B,O,G,!0);else if(ht==="MultiPolygon")for(const ve of yt){const Ie=[];er(ve,Ie,B,O,G,!0),Ie.length&&Jt.push(Ie)}if(Jt.length){if(st.lineMetrics&&ht==="LineString"){for(const ve of Jt)it.push(Pn(mt.id,ht,ve,mt.tags));continue}ht!=="LineString"&&ht!=="MultiLineString"||(Jt.length===1?(ht="LineString",Jt=Jt[0]):ht="MultiLineString"),ht!=="Point"&&ht!=="MultiPoint"||(ht=Jt.length===3?"Point":"MultiPoint"),it.push(Pn(mt.id,ht,Jt,mt.tags))}}return it.length?it:null}function hs(Q,z,B,O,G){for(let et=0;et<Q.length;et+=3){const at=Q[et+G];at>=B&&at<=O&&kn(z,Q[et],Q[et+1],Q[et+2])}}function Se(Q,z,B,O,G,et,at){let st=Di(Q);const it=G===0?Po:ds;let mt,yt,ht=Q.start;for(let Ie=0;Ie<Q.length-3;Ie+=3){const ye=Q[Ie],Ke=Q[Ie+1],Me=Q[Ie+2],di=Q[Ie+3],ne=Q[Ie+4],De=G===0?ye:Ke,Ne=G===0?di:ne;let li=!1;at&&(mt=Math.sqrt(Math.pow(ye-di,2)+Math.pow(Ke-ne,2))),De<B?Ne>B&&(yt=it(st,ye,Ke,di,ne,B),at&&(st.start=ht+mt*yt)):De>O?Ne<O&&(yt=it(st,ye,Ke,di,ne,O),at&&(st.start=ht+mt*yt)):kn(st,ye,Ke,Me),Ne<B&&De>=B&&(yt=it(st,ye,Ke,di,ne,B),li=!0),Ne>O&&De<=O&&(yt=it(st,ye,Ke,di,ne,O),li=!0),!et&&li&&(at&&(st.end=ht+mt*yt),z.push(st),st=Di(Q)),at&&(ht+=mt)}let At=Q.length-3;const Yt=Q[At],Jt=Q[At+1],ve=G===0?Yt:Jt;ve>=B&&ve<=O&&kn(st,Yt,Jt,Q[At+2]),At=st.length-3,et&&At>=3&&(st[At]!==st[0]||st[At+1]!==st[1])&&kn(st,st[0],st[1],st[2]),st.length&&z.push(st)}function Di(Q){const z=[];return z.size=Q.size,z.start=Q.start,z.end=Q.end,z}function er(Q,z,B,O,G,et){for(const at of Q)Se(at,z,B,O,G,et,!1)}function kn(Q,z,B,O){Q.push(z,B,O)}function Po(Q,z,B,O,G,et){const at=(et-z)/(O-z);return kn(Q,et,B+(G-B)*at,1),at}function ds(Q,z,B,O,G,et){const at=(et-B)/(G-B);return kn(Q,z+(O-z)*at,et,1),at}function zo(Q,z){const B=[];for(let O=0;O<Q.length;O++){const G=Q[O],et=G.type;let at;if(et==="Point"||et==="MultiPoint"||et==="LineString")at=ir(G.geometry,z);else if(et==="MultiLineString"||et==="Polygon"){at=[];for(const st of G.geometry)at.push(ir(st,z))}else if(et==="MultiPolygon"){at=[];for(const st of G.geometry){const it=[];for(const mt of st)it.push(ir(mt,z));at.push(it)}}B.push(Pn(G.id,et,at,G.tags))}return B}function ir(Q,z){const B=[];B.size=Q.size,Q.start!==void 0&&(B.start=Q.start,B.end=Q.end);for(let O=0;O<Q.length;O+=3)B.push(Q[O]+z,Q[O+1],Q[O+2]);return B}function $r(Q,z){if(Q.transformed)return Q;const B=1<<Q.z,O=Q.x,G=Q.y;for(const et of Q.features){const at=et.geometry,st=et.type;if(et.geometry=[],st===1)for(let it=0;it<at.length;it+=2)et.geometry.push(It(at[it],at[it+1],z,B,O,G));else for(let it=0;it<at.length;it++){const mt=[];for(let yt=0;yt<at[it].length;yt+=2)mt.push(It(at[it][yt],at[it][yt+1],z,B,O,G));et.geometry.push(mt)}}return Q.transformed=!0,Q}function It(Q,z,B,O,G,et){return[Math.round(B*(Q*O-G)),Math.round(B*(z*O-et))]}function Lo(Q,z,B,O,G){const et=z===G.maxZoom?0:G.tolerance/((1<<z)*G.extent),at={features:[],numPoints:0,numSimplified:0,numFeatures:Q.length,source:null,x:B,y:O,z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const st of Q)Wi(at,st,et,G);return at}function Wi(Q,z,B,O){const G=z.geometry,et=z.type,at=[];if(Q.minX=Math.min(Q.minX,z.minX),Q.minY=Math.min(Q.minY,z.minY),Q.maxX=Math.max(Q.maxX,z.maxX),Q.maxY=Math.max(Q.maxY,z.maxY),et==="Point"||et==="MultiPoint")for(let st=0;st<G.length;st+=3)at.push(G[st],G[st+1]),Q.numPoints++,Q.numSimplified++;else if(et==="LineString")zn(at,G,Q,B,!1,!1);else if(et==="MultiLineString"||et==="Polygon")for(let st=0;st<G.length;st++)zn(at,G[st],Q,B,et==="Polygon",st===0);else if(et==="MultiPolygon")for(let st=0;st<G.length;st++){const it=G[st];for(let mt=0;mt<it.length;mt++)zn(at,it[mt],Q,B,!0,mt===0)}if(at.length){let st=z.tags||null;if(et==="LineString"&&O.lineMetrics){st={};for(const mt in z.tags)st[mt]=z.tags[mt];st.mapbox_clip_start=G.start/G.size,st.mapbox_clip_end=G.end/G.size}const it={geometry:at,type:et==="Polygon"||et==="MultiPolygon"?3:et==="LineString"||et==="MultiLineString"?2:1,tags:st};z.id!==null&&(it.id=z.id),Q.features.push(it)}}function zn(Q,z,B,O,G,et){const at=O*O;if(O>0&&z.size<(G?at:O))return void(B.numPoints+=z.length/3);const st=[];for(let it=0;it<z.length;it+=3)(O===0||z[it+2]>at)&&(B.numSimplified++,st.push(z[it],z[it+1])),B.numPoints++;G&&function(it,mt){let yt=0;for(let ht=0,At=it.length,Yt=At-2;ht<At;Yt=ht,ht+=2)yt+=(it[ht]-it[Yt])*(it[ht+1]+it[Yt+1]);if(yt>0===mt)for(let ht=0,At=it.length;ht<At/2;ht+=2){const Yt=it[ht],Jt=it[ht+1];it[ht]=it[At-2-ht],it[ht+1]=it[At-1-ht],it[At-2-ht]=Yt,it[At-1-ht]=Jt}}(st,et),Q.push(st)}const Bo={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Dt{constructor(z,B){const O=(B=this.options=function(et,at){for(const st in at)et[st]=at[st];return et}(Object.create(Bo),B)).debug;if(B.maxZoom<0||B.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(B.promoteId&&B.generateId)throw new Error("promoteId and generateId cannot be used together.");let G=function(et,at){const st=[];if(et.type==="FeatureCollection")for(let it=0;it<et.features.length;it++)Jo(st,et.features[it],at,it);else Jo(st,et.type==="Feature"?et:{geometry:et},at);return st}(z,B);this.tiles={},this.tileCoords=[],O&&(this.stats={},this.total=0),G=function(et,at){const st=at.buffer/at.extent;let it=et;const mt=ln(et,1,-1-st,st,0,-1,2,at),yt=ln(et,1,1-st,2+st,0,-1,2,at);return(mt||yt)&&(it=ln(et,1,-st,1+st,0,-1,2,at)||[],mt&&(it=zo(mt,1).concat(it)),yt&&(it=it.concat(zo(yt,-1)))),it}(G,B),G.length&&this.splitTile(G,0,0,0),O&&G.length}splitTile(z,B,O,G,et,at,st){const it=[z,B,O,G],mt=this.options,yt=mt.debug;for(;it.length;){G=it.pop(),O=it.pop(),B=it.pop(),z=it.pop();const ht=1<<B,At=me(B,O,G);let Yt=this.tiles[At];if(!Yt&&(Yt=this.tiles[At]=Lo(z,B,O,G,mt),this.tileCoords.push({z:B,x:O,y:G}),yt)){const li=`z${B}`;this.stats[li]=(this.stats[li]||0)+1,this.total++}if(Yt.source=z,et==null){if(B===mt.indexMaxZoom||Yt.numPoints<=mt.indexMaxPoints)continue}else{if(B===mt.maxZoom||B===et)continue;if(et!=null){const li=et-B;if(O!==at>>li||G!==st>>li)continue}}if(Yt.source=null,z.length===0)continue;const Jt=.5*mt.buffer/mt.extent,ve=.5-Jt,Ie=.5+Jt,ye=1+Jt;let Ke=null,Me=null,di=null,ne=null,De=ln(z,ht,O-Jt,O+Ie,0,Yt.minX,Yt.maxX,mt),Ne=ln(z,ht,O+ve,O+ye,0,Yt.minX,Yt.maxX,mt);z=null,De&&(Ke=ln(De,ht,G-Jt,G+Ie,1,Yt.minY,Yt.maxY,mt),Me=ln(De,ht,G+ve,G+ye,1,Yt.minY,Yt.maxY,mt),De=null),Ne&&(di=ln(Ne,ht,G-Jt,G+Ie,1,Yt.minY,Yt.maxY,mt),ne=ln(Ne,ht,G+ve,G+ye,1,Yt.minY,Yt.maxY,mt),Ne=null),it.push(Ke||[],B+1,2*O,2*G),it.push(Me||[],B+1,2*O,2*G+1),it.push(di||[],B+1,2*O+1,2*G),it.push(ne||[],B+1,2*O+1,2*G+1)}}getTile(z,B,O){z=+z,B=+B,O=+O;const G=this.options,{extent:et,debug:at}=G;if(z<0||z>24)return null;const st=1<<z,it=me(z,B=B+st&st-1,O);if(this.tiles[it])return $r(this.tiles[it],et);let mt,yt=z,ht=B,At=O;for(;!mt&&yt>0;)yt--,ht>>=1,At>>=1,mt=this.tiles[me(yt,ht,At)];return mt&&mt.source?(this.splitTile(mt.source,yt,ht,At,z,B,O),this.tiles[it]?$r(this.tiles[it],et):null):null}}function me(Q,z,B){return 32*((1<<Q)*B+z)+Q}function ie(Q,z){return z?Q.properties[z]:Q.id}function Ni(Q,z){if(Q==null)return!0;if(Q.type==="Feature")return ie(Q,z)!=null;if(Q.type==="FeatureCollection"){const B=new Set;for(const O of Q.features){const G=ie(O,z);if(G==null||B.has(G))return!1;B.add(G)}return!0}return!1}function Jn(Q,z){const B=new Map;if(Q!=null)if(Q.type==="Feature")B.set(ie(Q,z),Q);else for(const O of Q.features)B.set(ie(O,z),O);return B}class pe extends X{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(z,B){return u._(this,void 0,void 0,function*(){const O=z.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const G=this._geoJSONIndex.getTile(O.z,O.x,O.y);if(!G)return null;const et=new class{constructor(st){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.X,this.length=st.length,this._features=st}feature(st){return new class{constructor(it){this._feature=it,this.extent=u.X,this.type=it.type,this.properties=it.tags,"id"in it&&!isNaN(it.id)&&(this.id=parseInt(it.id,10))}loadGeometry(){if(this._feature.type===1){const it=[];for(const mt of this._feature.geometry)it.push([new u.P(mt[0],mt[1])]);return it}{const it=[];for(const mt of this._feature.geometry){const yt=[];for(const ht of mt)yt.push(new u.P(ht[0],ht[1]));it.push(yt)}return it}}toGeoJSON(it,mt,yt){return Ae.call(this,it,mt,yt)}}(this._features[st])}}(G.features);let at=Ee(et);return at.byteOffset===0&&at.byteLength===at.buffer.byteLength||(at=new Uint8Array(at)),{vectorTile:et,rawData:at.buffer}})}loadData(z){return u._(this,void 0,void 0,function*(){var B;(B=this._pendingRequest)===null||B===void 0||B.abort();const O=!!(z&&z.request&&z.request.collectResourceTiming)&&new u.bv(z.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(z,this._pendingRequest),this._geoJSONIndex=z.cluster?new Ge(function({superclusterOptions:at,clusterProperties:st}){if(!st||!at)return at;const it={},mt={},yt={accumulated:null,zoom:0},ht={properties:null},At=Object.keys(st);for(const Yt of At){const[Jt,ve]=st[Yt],Ie=u.bC(ve),ye=u.bC(typeof Jt=="string"?[Jt,["accumulated"],["get",Yt]]:Jt);it[Yt]=Ie.value,mt[Yt]=ye.value}return at.map=Yt=>{ht.properties=Yt;const Jt={};for(const ve of At)Jt[ve]=it[ve].evaluate(yt,ht);return Jt},at.reduce=(Yt,Jt)=>{ht.properties=Jt;for(const ve of At)yt.accumulated=Yt[ve],Yt[ve]=mt[ve].evaluate(yt,ht)},at}(z)).load((yield this._pendingData).features):(G=yield this._pendingData,new Dt(G,z.geojsonVtOptions)),this.loaded={};const et={};if(O){const at=O.finish();at&&(et.resourceTiming={},et.resourceTiming[z.source]=JSON.parse(JSON.stringify(at)))}return et}catch(et){if(delete this._pendingRequest,u.bB(et))return{abandoned:!0};throw et}var G})}getData(){return u._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(z){const B=this.loaded;return B&&B[z.uid]?super.reloadTile(z):this.loadTile(z)}loadAndProcessGeoJSON(z,B){return u._(this,void 0,void 0,function*(){let O=yield this.loadGeoJSON(z,B);if(delete this._pendingRequest,typeof O!="object")throw new Error(`Input data given to '${z.source}' is not a valid GeoJSON object.`);if(ge(O,!0),z.filter){const G=u.bC(z.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(G.result==="error")throw new Error(G.value.map(at=>`${at.key}: ${at.message}`).join(", "));O={type:"FeatureCollection",features:O.features.filter(at=>G.value.evaluate({zoom:0},at))}}return O})}loadGeoJSON(z,B){return u._(this,void 0,void 0,function*(){const{promoteId:O}=z;if(z.request){const G=yield u.h(z.request,B);return this._dataUpdateable=Ni(G.data,O)?Jn(G.data,O):void 0,G.data}if(typeof z.data=="string")try{const G=JSON.parse(z.data);return this._dataUpdateable=Ni(G,O)?Jn(G,O):void 0,G}catch{throw new Error(`Input data given to '${z.source}' is not a valid GeoJSON object.`)}if(!z.dataDiff)throw new Error(`Input data given to '${z.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${z.source}`);return function(G,et,at){var st,it,mt,yt;if(et.removeAll&&G.clear(),et.remove)for(const ht of et.remove)G.delete(ht);if(et.add)for(const ht of et.add){const At=ie(ht,at);At!=null&&G.set(At,ht)}if(et.update)for(const ht of et.update){let At=G.get(ht.id);if(At==null)continue;const Yt=!ht.removeAllProperties&&(((st=ht.removeProperties)===null||st===void 0?void 0:st.length)>0||((it=ht.addOrUpdateProperties)===null||it===void 0?void 0:it.length)>0);if((ht.newGeometry||ht.removeAllProperties||Yt)&&(At=Object.assign({},At),G.set(ht.id,At),Yt&&(At.properties=Object.assign({},At.properties))),ht.newGeometry&&(At.geometry=ht.newGeometry),ht.removeAllProperties)At.properties={};else if(((mt=ht.removeProperties)===null||mt===void 0?void 0:mt.length)>0)for(const Jt of ht.removeProperties)Object.prototype.hasOwnProperty.call(At.properties,Jt)&&delete At.properties[Jt];if(((yt=ht.addOrUpdateProperties)===null||yt===void 0?void 0:yt.length)>0)for(const{key:Jt,value:ve}of ht.addOrUpdateProperties)At.properties[Jt]=ve}}(this._dataUpdateable,z.dataDiff,O),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(z){return u._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(z){return this._geoJSONIndex.getClusterExpansionZoom(z.clusterId)}getClusterChildren(z){return this._geoJSONIndex.getChildren(z.clusterId)}getClusterLeaves(z){return this._geoJSONIndex.getLeaves(z.clusterId,z.limit,z.offset)}}class Qn{constructor(z){this.self=z,this.actor=new u.F(z),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(B,O)=>{if(this.externalWorkerSourceTypes[B])throw new Error(`Worker source with name "${B}" already registered.`);this.externalWorkerSourceTypes[B]=O},this.self.addProtocol=u.bi,this.self.removeProtocol=u.bj,this.self.registerRTLTextPlugin=B=>{if(u.bD.isParsed())throw new Error("RTL text plugin already registered.");u.bD.setMethods(B)},this.actor.registerMessageHandler("LDT",(B,O)=>this._getDEMWorkerSource(B,O.source).loadTile(O)),this.actor.registerMessageHandler("RDT",(B,O)=>u._(this,void 0,void 0,function*(){this._getDEMWorkerSource(B,O.source).removeTile(O)})),this.actor.registerMessageHandler("GCEZ",(B,O)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(B,O.type,O.source).getClusterExpansionZoom(O)})),this.actor.registerMessageHandler("GCC",(B,O)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(B,O.type,O.source).getClusterChildren(O)})),this.actor.registerMessageHandler("GCL",(B,O)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(B,O.type,O.source).getClusterLeaves(O)})),this.actor.registerMessageHandler("LD",(B,O)=>this._getWorkerSource(B,O.type,O.source).loadData(O)),this.actor.registerMessageHandler("GD",(B,O)=>this._getWorkerSource(B,O.type,O.source).getData()),this.actor.registerMessageHandler("LT",(B,O)=>this._getWorkerSource(B,O.type,O.source).loadTile(O)),this.actor.registerMessageHandler("RT",(B,O)=>this._getWorkerSource(B,O.type,O.source).reloadTile(O)),this.actor.registerMessageHandler("AT",(B,O)=>this._getWorkerSource(B,O.type,O.source).abortTile(O)),this.actor.registerMessageHandler("RMT",(B,O)=>this._getWorkerSource(B,O.type,O.source).removeTile(O)),this.actor.registerMessageHandler("RS",(B,O)=>u._(this,void 0,void 0,function*(){if(!this.workerSources[B]||!this.workerSources[B][O.type]||!this.workerSources[B][O.type][O.source])return;const G=this.workerSources[B][O.type][O.source];delete this.workerSources[B][O.type][O.source],G.removeSource!==void 0&&G.removeSource(O)})),this.actor.registerMessageHandler("RM",B=>u._(this,void 0,void 0,function*(){delete this.layerIndexes[B],delete this.availableImages[B],delete this.workerSources[B],delete this.demWorkerSources[B]})),this.actor.registerMessageHandler("SR",(B,O)=>u._(this,void 0,void 0,function*(){this.referrer=O})),this.actor.registerMessageHandler("SRPS",(B,O)=>this._syncRTLPluginState(B,O)),this.actor.registerMessageHandler("IS",(B,O)=>u._(this,void 0,void 0,function*(){this.self.importScripts(O)})),this.actor.registerMessageHandler("SI",(B,O)=>this._setImages(B,O)),this.actor.registerMessageHandler("UL",(B,O)=>u._(this,void 0,void 0,function*(){this._getLayerIndex(B).update(O.layers,O.removedIds)})),this.actor.registerMessageHandler("SL",(B,O)=>u._(this,void 0,void 0,function*(){this._getLayerIndex(B).replace(O)}))}_setImages(z,B){return u._(this,void 0,void 0,function*(){this.availableImages[z]=B;for(const O in this.workerSources[z]){const G=this.workerSources[z][O];for(const et in G)G[et].availableImages=B}})}_syncRTLPluginState(z,B){return u._(this,void 0,void 0,function*(){if(u.bD.isParsed())return u.bD.getState();if(B.pluginStatus!=="loading")return u.bD.setState(B),B;const O=B.pluginURL;if(this.self.importScripts(O),u.bD.isParsed()){const G={pluginStatus:"loaded",pluginURL:O};return u.bD.setState(G),G}throw u.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${O}`)})}_getAvailableImages(z){let B=this.availableImages[z];return B||(B=[]),B}_getLayerIndex(z){let B=this.layerIndexes[z];return B||(B=this.layerIndexes[z]=new s),B}_getWorkerSource(z,B,O){if(this.workerSources[z]||(this.workerSources[z]={}),this.workerSources[z][B]||(this.workerSources[z][B]={}),!this.workerSources[z][B][O]){const G={sendAsync:(et,at)=>(et.targetMapId=z,this.actor.sendAsync(et,at))};switch(B){case"vector":this.workerSources[z][B][O]=new X(G,this._getLayerIndex(z),this._getAvailableImages(z));break;case"geojson":this.workerSources[z][B][O]=new pe(G,this._getLayerIndex(z),this._getAvailableImages(z));break;default:this.workerSources[z][B][O]=new this.externalWorkerSourceTypes[B](G,this._getLayerIndex(z),this._getAvailableImages(z))}}return this.workerSources[z][B][O]}_getDEMWorkerSource(z,B){return this.demWorkerSources[z]||(this.demWorkerSources[z]={}),this.demWorkerSources[z][B]||(this.demWorkerSources[z][B]=new J),this.demWorkerSources[z][B]}}return u.i(self)&&(self.worker=new Qn(self)),Qn}),a("index",0,function(u,s){var T="4.7.1";let k,$;const X={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:_=>new Promise((t,r)=>{const c=requestAnimationFrame(t);_.signal.addEventListener("abort",()=>{cancelAnimationFrame(c),r(s.c())})}),getImageData(_,t=0){return this.getImageCanvasContext(_).getImageData(-t,-t,_.width+2*t,_.height+2*t)},getImageCanvasContext(_){const t=window.document.createElement("canvas"),r=t.getContext("2d",{willReadFrequently:!0});if(!r)throw new Error("failed to create canvas 2d context");return t.width=_.width,t.height=_.height,r.drawImage(_,0,0,_.width,_.height),r},resolveURL:_=>(k||(k=document.createElement("a")),k.href=_,k.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&($==null&&($=matchMedia("(prefers-reduced-motion: reduce)")),$.matches)}};class J{static testProp(t){if(!J.docStyle)return t[0];for(let r=0;r<t.length;r++)if(t[r]in J.docStyle)return t[r];return t[0]}static create(t,r,c){const h=window.document.createElement(t);return r!==void 0&&(h.className=r),c&&c.appendChild(h),h}static createNS(t,r){return window.document.createElementNS(t,r)}static disableDrag(){J.docStyle&&J.selectProp&&(J.userSelect=J.docStyle[J.selectProp],J.docStyle[J.selectProp]="none")}static enableDrag(){J.docStyle&&J.selectProp&&(J.docStyle[J.selectProp]=J.userSelect)}static setTransform(t,r){t.style[J.transformProp]=r}static addEventListener(t,r,c,h={}){t.addEventListener(r,c,"passive"in h?h:h.capture)}static removeEventListener(t,r,c,h={}){t.removeEventListener(r,c,"passive"in h?h:h.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",J.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",J.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",J.suppressClickInternal,!0)},0)}static getScale(t){const r=t.getBoundingClientRect();return{x:r.width/t.offsetWidth||1,y:r.height/t.offsetHeight||1,boundingClientRect:r}}static getPoint(t,r,c){const h=r.boundingClientRect;return new s.P((c.clientX-h.left)/r.x-t.clientLeft,(c.clientY-h.top)/r.y-t.clientTop)}static mousePos(t,r){const c=J.getScale(t);return J.getPoint(t,c,r)}static touchPos(t,r){const c=[],h=J.getScale(t);for(let m=0;m<r.length;m++)c.push(J.getPoint(t,h,r[m]));return c}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}J.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,J.selectProp=J.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),J.transformProp=J.testProp(["transform","WebkitTransform"]);const Zt={supported:!1,testSupport:function(_){!Ae&&ge&&(Ye?gi(_):St=_)}};let St,ge,Ae=!1,Ye=!1;function gi(_){const t=_.createTexture();_.bindTexture(_.TEXTURE_2D,t);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,ge),_.isContextLost())return;Zt.supported=!0}catch{}_.deleteTexture(t),Ae=!0}var oi;typeof document<"u"&&(ge=document.createElement("img"),ge.onload=()=>{St&&gi(St),St=null,Ye=!0},ge.onerror=()=>{Ae=!0,St=null},ge.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let t,r,c,h;_.resetRequestQueue=()=>{t=[],r=0,c=0,h={}},_.addThrottleControl=S=>{const C=c++;return h[C]=S,C},_.removeThrottleControl=S=>{delete h[S],v()},_.getImage=(S,C,M=!0)=>new Promise((D,R)=>{Zt.supported&&(S.headers||(S.headers={}),S.headers.accept="image/webp,*/*"),s.e(S,{type:"image"}),t.push({abortController:C,requestParameters:S,supportImageRefresh:M,state:"queued",onError:U=>{R(U)},onSuccess:U=>{D(U)}}),v()});const m=S=>s._(this,void 0,void 0,function*(){S.state="running";const{requestParameters:C,supportImageRefresh:M,onError:D,onSuccess:R,abortController:U}=S,j=M===!1&&!s.i(self)&&!s.g(C.url)&&(!C.headers||Object.keys(C.headers).reduce((tt,q)=>tt&&q==="accept",!0));r++;const W=j?w(C,U):s.m(C,U);try{const tt=yield W;delete S.abortController,S.state="completed",tt.data instanceof HTMLImageElement||s.b(tt.data)?R(tt):tt.data&&R({data:yield(K=tt.data,typeof createImageBitmap=="function"?s.d(K):s.f(K)),cacheControl:tt.cacheControl,expires:tt.expires})}catch(tt){delete S.abortController,D(tt)}finally{r--,v()}var K}),v=()=>{const S=(()=>{for(const C of Object.keys(h))if(h[C]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let C=r;C<S&&t.length>0;C++){const M=t.shift();M.abortController.signal.aborted?C--:m(M)}},w=(S,C)=>new Promise((M,D)=>{const R=new Image,U=S.url,j=S.credentials;j&&j==="include"?R.crossOrigin="use-credentials":(j&&j==="same-origin"||!s.s(U))&&(R.crossOrigin="anonymous"),C.signal.addEventListener("abort",()=>{R.src="",D(s.c())}),R.fetchPriority="high",R.onload=()=>{R.onerror=R.onload=null,M({data:R})},R.onerror=()=>{R.onerror=R.onload=null,C.signal.aborted||D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},R.src=U})}(oi||(oi={})),oi.resetRequestQueue();class ft{constructor(t){this._transformRequestFn=t}transformRequest(t,r){return this._transformRequestFn&&this._transformRequestFn(t,r)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function wt(_){var t=new s.A(3);return t[0]=_[0],t[1]=_[1],t[2]=_[2],t}var Nt,Qt=function(_,t,r){return _[0]=t[0]-r[0],_[1]=t[1]-r[1],_[2]=t[2]-r[2],_};Nt=new s.A(3),s.A!=Float32Array&&(Nt[0]=0,Nt[1]=0,Nt[2]=0);var Tt=function(_){var t=_[0],r=_[1];return t*t+r*r};function ee(_){const t=[];if(typeof _=="string")t.push({id:"default",url:_});else if(_&&_.length>0){const r=[];for(const{id:c,url:h}of _){const m=`${c}${h}`;r.indexOf(m)===-1&&(r.push(m),t.push({id:c,url:h}))}}return t}function Ht(_,t,r){const c=_.split("?");return c[0]+=`${t}${r}`,c.join("?")}(function(){var _=new s.A(2);s.A!=Float32Array&&(_[0]=0,_[1]=0)})();class jt{constructor(t,r,c,h){this.context=t,this.format=c,this.texture=t.gl.createTexture(),this.update(r,h)}update(t,r,c){const{width:h,height:m}=t,v=!(this.size&&this.size[0]===h&&this.size[1]===m||c),{context:w}=this,{gl:S}=w;if(this.useMipmap=!!(r&&r.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!r||r.premultiply!==!1)),v)this.size=[h,m],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||s.b(t)?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,t):S.texImage2D(S.TEXTURE_2D,0,this.format,h,m,0,this.format,S.UNSIGNED_BYTE,t.data);else{const{x:C,y:M}=c||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||s.b(t)?S.texSubImage2D(S.TEXTURE_2D,0,C,M,S.RGBA,S.UNSIGNED_BYTE,t):S.texSubImage2D(S.TEXTURE_2D,0,C,M,h,m,S.RGBA,S.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)}bind(t,r,c){const{context:h}=this,{gl:m}=h;m.bindTexture(m.TEXTURE_2D,this.texture),c!==m.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(c=m.LINEAR),t!==this.filter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,t),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,c||t),this.filter=t),r!==this.wrap&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,r),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function Kt(_){const{userImage:t}=_;return!!(t&&t.render&&t.render())&&(_.data.replace(new Uint8Array(t.data.buffer)),!0)}class ae extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:r,promiseResolve:c}of this.requestors)c(this._getImagesForIds(r));this.requestors=[]}}getImage(t){const r=this.images[t];if(r&&!r.data&&r.spriteData){const c=r.spriteData;r.data=new s.R({width:c.width,height:c.height},c.context.getImageData(c.x,c.y,c.width,c.height).data),r.spriteData=null}return r}addImage(t,r){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,r)&&(this.images[t]=r)}_validate(t,r){let c=!0;const h=r.data||r.spriteData;return this._validateStretch(r.stretchX,h&&h.width)||(this.fire(new s.j(new Error(`Image "${t}" has invalid "stretchX" value`))),c=!1),this._validateStretch(r.stretchY,h&&h.height)||(this.fire(new s.j(new Error(`Image "${t}" has invalid "stretchY" value`))),c=!1),this._validateContent(r.content,r)||(this.fire(new s.j(new Error(`Image "${t}" has invalid "content" value`))),c=!1),c}_validateStretch(t,r){if(!t)return!0;let c=0;for(const h of t){if(h[0]<c||h[1]<h[0]||r<h[1])return!1;c=h[1]}return!0}_validateContent(t,r){if(!t)return!0;if(t.length!==4)return!1;const c=r.spriteData,h=c&&c.width||r.data.width,m=c&&c.height||r.data.height;return!(t[0]<0||h<t[0]||t[1]<0||m<t[1]||t[2]<0||h<t[2]||t[3]<0||m<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,r,c=!0){const h=this.getImage(t);if(c&&(h.data.width!==r.data.width||h.data.height!==r.data.height))throw new Error(`size mismatch between old image (${h.data.width}x${h.data.height}) and new image (${r.data.width}x${r.data.height}).`);r.version=h.version+1,this.images[t]=r,this.updatedImages[t]=!0}removeImage(t){const r=this.images[t];delete this.images[t],delete this.patterns[t],r.userImage&&r.userImage.onRemove&&r.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise((r,c)=>{let h=!0;if(!this.isLoaded())for(const m of t)this.images[m]||(h=!1);this.isLoaded()||h?r(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:r})})}_getImagesForIds(t){const r={};for(const c of t){let h=this.getImage(c);h||(this.fire(new s.k("styleimagemissing",{id:c})),h=this.getImage(c)),h?r[c]={data:h.data.clone(),pixelRatio:h.pixelRatio,sdf:h.sdf,version:h.version,stretchX:h.stretchX,stretchY:h.stretchY,content:h.content,textFitWidth:h.textFitWidth,textFitHeight:h.textFitHeight,hasRenderCallback:!!(h.userImage&&h.userImage.render)}:s.w(`Image "${c}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return r}getPixelSize(){const{width:t,height:r}=this.atlasImage;return{width:t,height:r}}getPattern(t){const r=this.patterns[t],c=this.getImage(t);if(!c)return null;if(r&&r.position.version===c.version)return r.position;if(r)r.position.version=c.version;else{const h={w:c.data.width+2,h:c.data.height+2,x:0,y:0},m=new s.I(h,c);this.patterns[t]={bin:h,position:m}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const r=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new jt(t,this.atlasImage,r.RGBA),this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const m in this.patterns)t.push(this.patterns[m].bin);const{w:r,h:c}=s.p(t),h=this.atlasImage;h.resize({width:r||1,height:c||1});for(const m in this.patterns){const{bin:v}=this.patterns[m],w=v.x+1,S=v.y+1,C=this.getImage(m).data,M=C.width,D=C.height;s.R.copy(C,h,{x:0,y:0},{x:w,y:S},{width:M,height:D}),s.R.copy(C,h,{x:0,y:D-1},{x:w,y:S-1},{width:M,height:1}),s.R.copy(C,h,{x:0,y:0},{x:w,y:S+D},{width:M,height:1}),s.R.copy(C,h,{x:M-1,y:0},{x:w-1,y:S},{width:1,height:D}),s.R.copy(C,h,{x:0,y:0},{x:w+M,y:S},{width:1,height:D})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const r of t){if(this.callbackDispatchedThisFrame[r])continue;this.callbackDispatchedThisFrame[r]=!0;const c=this.getImage(r);c||s.w(`Image with ID: "${r}" was not found`),Kt(c)&&this.updateImage(r,c)}}}const be=1e20;function Ve(_,t,r,c,h,m,v,w,S){for(let C=t;C<t+c;C++)de(_,r*m+C,m,h,v,w,S);for(let C=r;C<r+h;C++)de(_,C*m+t,1,c,v,w,S)}function de(_,t,r,c,h,m,v){m[0]=0,v[0]=-be,v[1]=be,h[0]=_[t];for(let w=1,S=0,C=0;w<c;w++){h[w]=_[t+w*r];const M=w*w;do{const D=m[S];C=(h[w]-h[D]+M-D*D)/(w-D)/2}while(C<=v[S]&&--S>-1);S++,m[S]=w,v[S]=C,v[S+1]=be}for(let w=0,S=0;w<c;w++){for(;v[S+1]<w;)S++;const C=m[S],M=w-C;_[t+w*r]=h[C]+M*M}}class Ee{constructor(t,r){this.requestManager=t,this.localIdeographFontFamily=r,this.entries={}}setURL(t){this.url=t}getGlyphs(t){return s._(this,void 0,void 0,function*(){const r=[];for(const m in t)for(const v of t[m])r.push(this._getAndCacheGlyphsPromise(m,v));const c=yield Promise.all(r),h={};for(const{stack:m,id:v,glyph:w}of c)h[m]||(h[m]={}),h[m][v]=w&&{id:w.id,bitmap:w.bitmap.clone(),metrics:w.metrics};return h})}_getAndCacheGlyphsPromise(t,r){return s._(this,void 0,void 0,function*(){let c=this.entries[t];c||(c=this.entries[t]={glyphs:{},requests:{},ranges:{}});let h=c.glyphs[r];if(h!==void 0)return{stack:t,id:r,glyph:h};if(h=this._tinySDF(c,t,r),h)return c.glyphs[r]=h,{stack:t,id:r,glyph:h};const m=Math.floor(r/256);if(256*m>65535)throw new Error("glyphs > 65535 not supported");if(c.ranges[m])return{stack:t,id:r,glyph:h};if(!this.url)throw new Error("glyphsUrl is not set");if(!c.requests[m]){const w=Ee.loadGlyphRange(t,m,this.url,this.requestManager);c.requests[m]=w}const v=yield c.requests[m];for(const w in v)this._doesCharSupportLocalGlyph(+w)||(c.glyphs[+w]=v[+w]);return c.ranges[m]=!0,{stack:t,id:r,glyph:v[r]||null}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(t))}_tinySDF(t,r,c){const h=this.localIdeographFontFamily;if(!h||!this._doesCharSupportLocalGlyph(c))return;let m=t.tinySDF;if(!m){let w="400";/bold/i.test(r)?w="900":/medium/i.test(r)?w="500":/light/i.test(r)&&(w="200"),m=t.tinySDF=new Ee.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:h,fontWeight:w})}const v=m.draw(String.fromCharCode(c));return{id:c,bitmap:new s.o({width:v.width||60,height:v.height||60},v.data),metrics:{width:v.glyphWidth/2||24,height:v.glyphHeight/2||24,left:v.glyphLeft/2+.5||0,top:v.glyphTop/2-27.5||-8,advance:v.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ee.loadGlyphRange=function(_,t,r,c){return s._(this,void 0,void 0,function*(){const h=256*t,m=h+255,v=c.transformRequest(r.replace("{fontstack}",_).replace("{range}",`${h}-${m}`),"Glyphs"),w=yield s.l(v,new AbortController);if(!w||!w.data)throw new Error(`Could not load glyph range. range: ${t}, ${h}-${m}`);const S={};for(const C of s.n(w.data))S[C.id]=C;return S})},Ee.TinySDF=class{constructor({fontSize:_=24,buffer:t=3,radius:r=8,cutoff:c=.25,fontFamily:h="sans-serif",fontWeight:m="normal",fontStyle:v="normal"}={}){this.buffer=t,this.cutoff=c,this.radius=r;const w=this.size=_+4*t,S=this._createCanvas(w),C=this.ctx=S.getContext("2d",{willReadFrequently:!0});C.font=`${v} ${m} ${_}px ${h}`,C.textBaseline="alphabetic",C.textAlign="left",C.fillStyle="black",this.gridOuter=new Float64Array(w*w),this.gridInner=new Float64Array(w*w),this.f=new Float64Array(w),this.z=new Float64Array(w+1),this.v=new Uint16Array(w)}_createCanvas(_){const t=document.createElement("canvas");return t.width=t.height=_,t}draw(_){const{width:t,actualBoundingBoxAscent:r,actualBoundingBoxDescent:c,actualBoundingBoxLeft:h,actualBoundingBoxRight:m}=this.ctx.measureText(_),v=Math.ceil(r),w=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-h))),S=Math.min(this.size-this.buffer,v+Math.ceil(c)),C=w+2*this.buffer,M=S+2*this.buffer,D=Math.max(C*M,0),R=new Uint8ClampedArray(D),U={data:R,width:C,height:M,glyphWidth:w,glyphHeight:S,glyphTop:v,glyphLeft:0,glyphAdvance:t};if(w===0||S===0)return U;const{ctx:j,buffer:W,gridInner:K,gridOuter:tt}=this;j.clearRect(W,W,w,S),j.fillText(_,W,W+v);const q=j.getImageData(W,W,w,S);tt.fill(be,0,D),K.fill(0,0,D);for(let H=0;H<S;H++)for(let ot=0;ot<w;ot++){const rt=q.data[4*(H*w+ot)+3]/255;if(rt===0)continue;const ut=(H+W)*C+ot+W;if(rt===1)tt[ut]=0,K[ut]=be;else{const _t=.5-rt;tt[ut]=_t>0?_t*_t:0,K[ut]=_t<0?_t*_t:0}}Ve(tt,0,0,C,M,C,this.f,this.v,this.z),Ve(K,W,W,w,S,C,this.f,this.v,this.z);for(let H=0;H<D;H++){const ot=Math.sqrt(tt[H])-Math.sqrt(K[H]);R[H]=Math.round(255-255*(ot/this.radius+this.cutoff))}return U}};class bi{constructor(){this.specification=s.v.light.position}possiblyEvaluate(t,r){return s.x(t.expression.evaluate(r))}interpolate(t,r,c){return{x:s.y.number(t.x,r.x,c),y:s.y.number(t.y,r.y,c),z:s.y.number(t.z,r.z,c)}}}let yi;class si extends s.E{constructor(t){super(),yi=yi||new s.q({anchor:new s.D(s.v.light.anchor),position:new bi,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(yi),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,r={}){if(!this._validate(s.r,t,r))for(const c in t){const h=t[c];c.endsWith("-transition")?this._transitionable.setTransition(c.slice(0,-11),h):this._transitionable.setValue(c,h)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,r,c){return(!c||c.validate!==!1)&&s.t(this,t.call(s.u,{value:r,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const Ge=new s.q({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class Yn extends s.E{constructor(t){super(),this._transitionable=new s.T(Ge),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.z(0))}setSky(t,r={}){if(!this._validate(s.B,t,r)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const c in t){const h=t[c];c.endsWith("-transition")?this._transitionable.setTransition(c.slice(0,-11),h):this._transitionable.setValue(c,h)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,r,c={}){return(c==null?void 0:c.validate)!==!1&&s.t(this,t.call(s.u,s.e({value:r,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class vn{constructor(t,r){this.width=t,this.height=r,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,r){const c=t.join(",")+String(r);return this.dashEntry[c]||(this.dashEntry[c]=this.addDash(t,r)),this.dashEntry[c]}getDashRanges(t,r,c){const h=[];let m=t.length%2==1?-t[t.length-1]*c:0,v=t[0]*c,w=!0;h.push({left:m,right:v,isDash:w,zeroLength:t[0]===0});let S=t[0];for(let C=1;C<t.length;C++){w=!w;const M=t[C];m=S*c,S+=M,v=S*c,h.push({left:m,right:v,isDash:w,zeroLength:M===0})}return h}addRoundDash(t,r,c){const h=r/2;for(let m=-c;m<=c;m++){const v=this.width*(this.nextRow+c+m);let w=0,S=t[w];for(let C=0;C<this.width;C++){C/S.right>1&&(S=t[++w]);const M=Math.abs(C-S.left),D=Math.abs(C-S.right),R=Math.min(M,D);let U;const j=m/c*(h+1);if(S.isDash){const W=h-Math.abs(j);U=Math.sqrt(R*R+W*W)}else U=h-Math.sqrt(R*R+j*j);this.data[v+C]=Math.max(0,Math.min(255,U+128))}}}addRegularDash(t){for(let w=t.length-1;w>=0;--w){const S=t[w],C=t[w+1];S.zeroLength?t.splice(w,1):C&&C.isDash===S.isDash&&(C.left=S.left,t.splice(w,1))}const r=t[0],c=t[t.length-1];r.isDash===c.isDash&&(r.left=c.left-this.width,c.right=r.right+this.width);const h=this.width*this.nextRow;let m=0,v=t[m];for(let w=0;w<this.width;w++){w/v.right>1&&(v=t[++m]);const S=Math.abs(w-v.left),C=Math.abs(w-v.right),M=Math.min(S,C);this.data[h+w]=Math.max(0,Math.min(255,(v.isDash?M:-M)+128))}}addDash(t,r){const c=r?7:0,h=2*c+1;if(this.nextRow+h>this.height)return s.w("LineAtlas out of space"),null;let m=0;for(let w=0;w<t.length;w++)m+=t[w];if(m!==0){const w=this.width/m,S=this.getDashRanges(t,this.width,w);r?this.addRoundDash(S,w,c):this.addRegularDash(S)}const v={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:m};return this.nextRow+=h,this.dirty=!0,v}bind(t){const r=t.gl;this.texture?(r.bindTexture(r.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.width,this.height,r.ALPHA,r.UNSIGNED_BYTE,this.data))):(this.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texImage2D(r.TEXTURE_2D,0,r.ALPHA,this.width,this.height,0,r.ALPHA,r.UNSIGNED_BYTE,this.data))}}const sn="maplibre_preloaded_worker_pool";class xn{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<xn.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach(r=>{r.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[sn]}numActive(){return Object.keys(this.active).length}}const Sa=Math.floor(X.hardwareConcurrency/2);let wn,Mo;function Pn(){return wn||(wn=new xn),wn}xn.workerCount=s.C(globalThis)?Math.max(Math.min(Sa,3),1):1;class Do{constructor(t,r){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=r;const c=this.workerPool.acquire(r);for(let h=0;h<c.length;h++){const m=new s.F(c[h],r);m.name=`Worker ${h}`,this.actors.push(m)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,r){const c=[];for(const h of this.actors)c.push(h.sendAsync({type:t,data:r}));return Promise.all(c)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach(r=>{r.remove()}),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,r){for(const c of this.actors)c.registerMessageHandler(t,r)}}function Jo(){return Mo||(Mo=new Do(Pn(),s.G),Mo.registerMessageHandler("GR",(_,t,r)=>s.m(t,r))),Mo}function Br(_,t){const r=s.H();return s.J(r,r,[1,1,0]),s.K(r,r,[.5*_.width,.5*_.height,1]),s.L(r,r,_.calculatePosMatrix(t.toUnwrapped()))}function Qo(_,t,r,c,h,m){const v=function(D,R,U){if(D)for(const j of D){const W=R[j];if(W&&W.source===U&&W.type==="fill-extrusion")return!0}else for(const j in R){const W=R[j];if(W.source===U&&W.type==="fill-extrusion")return!0}return!1}(h&&h.layers,t,_.id),w=m.maxPitchScaleFactor(),S=_.tilesIn(c,w,v);S.sort(tr);const C=[];for(const D of S)C.push({wrappedTileID:D.tileID.wrapped().key,queryResults:D.tile.queryRenderedFeatures(t,r,_._state,D.queryGeometry,D.cameraQueryGeometry,D.scale,h,m,w,Br(_.transform,D.tileID))});const M=function(D){const R={},U={};for(const j of D){const W=j.queryResults,K=j.wrappedTileID,tt=U[K]=U[K]||{};for(const q in W){const H=W[q],ot=tt[q]=tt[q]||{},rt=R[q]=R[q]||[];for(const ut of H)ot[ut.featureIndex]||(ot[ut.featureIndex]=!0,rt.push(ut))}}return R}(C);for(const D in M)M[D].forEach(R=>{const U=R.feature,j=_.getFeatureState(U.layer["source-layer"],U.id);U.source=U.layer.source,U.layer["source-layer"]&&(U.sourceLayer=U.layer["source-layer"]),U.state=j});return M}function tr(_,t){const r=_.tileID,c=t.tileID;return r.overscaledZ-c.overscaledZ||r.canonical.y-c.canonical.y||r.wrap-c.wrap||r.canonical.x-c.canonical.x}function Rr(_,t,r){return s._(this,void 0,void 0,function*(){let c=_;if(_.url?c=(yield s.h(t.transformRequest(_.url,"Source"),r)).data:yield X.frameAsync(r),!c)return null;const h=s.M(s.e(c,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in c&&c.vector_layers&&(h.vectorLayerIds=c.vector_layers.map(m=>m.id)),h})}class dt{constructor(t,r){t&&(r?this.setSouthWest(t).setNorthEast(r):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof s.N?new s.N(t.lng,t.lat):s.N.convert(t),this}setSouthWest(t){return this._sw=t instanceof s.N?new s.N(t.lng,t.lat):s.N.convert(t),this}extend(t){const r=this._sw,c=this._ne;let h,m;if(t instanceof s.N)h=t,m=t;else{if(!(t instanceof dt))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(dt.convert(t)):this.extend(s.N.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(s.N.convert(t)):this;if(h=t._sw,m=t._ne,!h||!m)return this}return r||c?(r.lng=Math.min(h.lng,r.lng),r.lat=Math.min(h.lat,r.lat),c.lng=Math.max(m.lng,c.lng),c.lat=Math.max(m.lat,c.lat)):(this._sw=new s.N(h.lng,h.lat),this._ne=new s.N(m.lng,m.lat)),this}getCenter(){return new s.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.N(this.getWest(),this.getNorth())}getSouthEast(){return new s.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:r,lat:c}=s.N.convert(t);let h=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&h}static convert(t){return t instanceof dt?t:t&&new dt(t)}static fromLngLat(t,r=0){const c=360*r/40075017,h=c/Math.cos(Math.PI/180*t.lat);return new dt(new s.N(t.lng-h,t.lat-c),new s.N(t.lng+h,t.lat+c))}adjustAntiMeridian(){const t=new s.N(this._sw.lng,this._sw.lat),r=new s.N(this._ne.lng,this._ne.lat);return new dt(t,t.lng>r.lng?new s.N(r.lng+360,r.lat):r)}}class ln{constructor(t,r,c){this.bounds=dt.convert(this.validateBounds(t)),this.minzoom=r||0,this.maxzoom=c||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const r=Math.pow(2,t.z),c=Math.floor(s.O(this.bounds.getWest())*r),h=Math.floor(s.Q(this.bounds.getNorth())*r),m=Math.ceil(s.O(this.bounds.getEast())*r),v=Math.ceil(s.Q(this.bounds.getSouth())*r);return t.x>=c&&t.x<m&&t.y>=h&&t.y<v}}class hs extends s.E{constructor(t,r,c,h){if(super(),this.id=t,this.dispatcher=c,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.M(r,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(h)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield Rr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(s.e(this,t),t.bounds&&(this.tileBounds=new ln(t.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new s.j(t))}})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(t){return s._(this,void 0,void 0,function*(){const r=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),c={request:this.map._requestManager.transformRequest(r,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};c.request.collectResourceTiming=this._collectResourceTiming;let h="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise((m,v)=>{t.reloadPromise={resolve:m,reject:v}})}else t.actor=this.dispatcher.getActor(),h="LT";t.abortController=new AbortController;try{const m=yield t.actor.sendAsync({type:h,data:c},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,m)}catch(m){if(delete t.abortController,t.aborted)return;if(m&&m.status!==404)throw m;this._afterTileLoadWorkerResponse(t,null)}})}_afterTileLoadWorkerResponse(t,r){if(r&&r.resourceTiming&&(t.resourceTiming=r.resourceTiming),r&&this.map._refreshExpiredTiles&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),t.reloadPromise){const c=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(c.resolve).catch(c.reject)}}abortTile(t){return s._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))})}unloadTile(t){return s._(this,void 0,void 0,function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Se extends s.E{constructor(t,r,c,h){super(),this.id=t,this.dispatcher=c,this.setEventedParent(h),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},r),s.e(this,s.M(r,["url","scheme","tileSize"]))}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield Rr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,t&&(s.e(this,t),t.bounds&&(this.tileBounds=new ln(t.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new s.j(t))}})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}serialize(){return s.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return s._(this,void 0,void 0,function*(){const r=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const c=yield oi.getImage(this.map._requestManager.transformRequest(r,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(c&&c.data){this.map._refreshExpiredTiles&&c.cacheControl&&c.expires&&t.setExpiryData({cacheControl:c.cacheControl,expires:c.expires});const h=this.map.painter.context,m=h.gl,v=c.data;t.texture=this.map.painter.getTileTexture(v.width),t.texture?t.texture.update(v,{useMipmap:!0}):(t.texture=new jt(h,v,m.RGBA,{useMipmap:!0}),t.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE,m.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(c){if(delete t.abortController,t.aborted)t.state="unloaded";else if(c)throw t.state="errored",c}})}abortTile(t){return s._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)})}unloadTile(t){return s._(this,void 0,void 0,function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)})}hasTransition(){return!1}}class Di extends Se{constructor(t,r,c,h){super(t,r,c,h),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox",this.redFactor=r.redFactor,this.greenFactor=r.greenFactor,this.blueFactor=r.blueFactor,this.baseShift=r.baseShift}loadTile(t){return s._(this,void 0,void 0,function*(){const r=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),c=this.map._requestManager.transformRequest(r,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const h=yield oi.getImage(c,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(h&&h.data){const m=h.data;this.map._refreshExpiredTiles&&h.cacheControl&&h.expires&&t.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});const v=s.b(m)&&s.U()?m:yield this.readImageNow(m),w={type:this.type,uid:t.uid,source:this.id,rawImageData:v,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const S=yield t.actor.sendAsync({type:"LDT",data:w});t.dem=S,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(h){if(delete t.abortController,t.aborted)t.state="unloaded";else if(h)throw t.state="errored",h}})}readImageNow(t){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.V()){const r=t.width+2,c=t.height+2;try{return new s.R({width:r,height:c},yield s.W(t,-1,-1,r,c))}catch{}}return X.getImageData(t,1)})}_getNeighboringTiles(t){const r=t.canonical,c=Math.pow(2,r.z),h=(r.x-1+c)%c,m=r.x===0?t.wrap-1:t.wrap,v=(r.x+1+c)%c,w=r.x+1===c?t.wrap+1:t.wrap,S={};return S[new s.S(t.overscaledZ,m,r.z,h,r.y).key]={backfilled:!1},S[new s.S(t.overscaledZ,w,r.z,v,r.y).key]={backfilled:!1},r.y>0&&(S[new s.S(t.overscaledZ,m,r.z,h,r.y-1).key]={backfilled:!1},S[new s.S(t.overscaledZ,t.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},S[new s.S(t.overscaledZ,w,r.z,v,r.y-1).key]={backfilled:!1}),r.y+1<c&&(S[new s.S(t.overscaledZ,m,r.z,h,r.y+1).key]={backfilled:!1},S[new s.S(t.overscaledZ,t.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},S[new s.S(t.overscaledZ,w,r.z,v,r.y+1).key]={backfilled:!1}),S}unloadTile(t){return s._(this,void 0,void 0,function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))})}}class er extends s.E{constructor(t,r,c,h){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=c.getActor(),this.setEventedParent(h),this._data=r.data,this._options=s.e({},r),this._collectResourceTiming=r.collectResourceTiming,r.maxzoom!==void 0&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;const m=s.X/this.tileSize;r.clusterMaxZoom!==void 0&&this.maxzoom<=r.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${r.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(r.buffer!==void 0?r.buffer:128)*m,tolerance:(r.tolerance!==void 0?r.tolerance:.375)*m,extent:s.X,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:r.clusterMaxZoom!==void 0?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:s.X,radius:(r.clusterRadius||50)*m,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}getData(){return s._(this,void 0,void 0,function*(){const t=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})})}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=t.clusterRadius),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=t.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,r,c){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:r,offset:c}})}_updateWorkerData(t){return s._(this,void 0,void 0,function*(){const r=s.e({type:this.type},this.workerOptions);t?r.dataDiff=t:typeof this._data=="string"?(r.request=this.map._requestManager.transformRequest(X.resolveURL(this._data),"Source"),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.k("dataloading",{dataType:"source"}));try{const c=yield this.actor.sendAsync({type:"LD",data:r});if(this._pendingLoads--,this._removed||c.abandoned)return void this.fire(new s.k("dataabort",{dataType:"source"}));let h=null;c.resourceTiming&&c.resourceTiming[this.id]&&(h=c.resourceTiming[this.id].slice(0));const m={dataType:"source"};this._collectResourceTiming&&h&&h.length>0&&s.e(m,{resourceTiming:h}),this.fire(new s.k("data",Object.assign(Object.assign({},m),{sourceDataType:"metadata"}))),this.fire(new s.k("data",Object.assign(Object.assign({},m),{sourceDataType:"content"})))}catch(c){if(this._pendingLoads--,this._removed)return void this.fire(new s.k("dataabort",{dataType:"source"}));this.fire(new s.j(c))}})}loaded(){return this._pendingLoads===0}loadTile(t){return s._(this,void 0,void 0,function*(){const r=t.actor?"RT":"LT";t.actor=this.actor;const c={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.abortController=new AbortController;const h=yield this.actor.sendAsync({type:r,data:c},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(h,this.map.painter,r==="RT")})}abortTile(t){return s._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0})}unloadTile(t){return s._(this,void 0,void 0,function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var kn=s.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Po extends s.E{constructor(t,r,c,h){super(),this.id=t,this.dispatcher=c,this.coordinates=r.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(h),this.options=r}load(t){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const r=yield oi.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,r&&r.data&&(this.image=r.data,t&&(this.coordinates=t),this._finishLoading())}catch(r){this._request=null,this._loaded=!0,this.fire(new s.j(r))}})}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const r=t.map(s.Z.fromLngLat);this.tileID=function(h){let m=1/0,v=1/0,w=-1/0,S=-1/0;for(const R of h)m=Math.min(m,R.x),v=Math.min(v,R.y),w=Math.max(w,R.x),S=Math.max(S,R.y);const C=Math.max(w-m,S-v),M=Math.max(0,Math.floor(-Math.log(C)/Math.LN2)),D=Math.pow(2,M);return new s.a1(M,Math.floor((m+w)/2*D),Math.floor((v+S)/2*D))}(r),this.minzoom=this.maxzoom=this.tileID.z;const c=r.map(h=>this.tileID.getTilePoint(h)._round());return this._boundsArray=new s.$,this._boundsArray.emplaceBack(c[0].x,c[0].y,0,0),this._boundsArray.emplaceBack(c[1].x,c[1].y,s.X,0),this._boundsArray.emplaceBack(c[3].x,c[3].y,0,s.X),this._boundsArray.emplaceBack(c[2].x,c[2].y,s.X,s.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,r=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,kn.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new jt(t,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let c=!1;for(const h in this.tiles){const m=this.tiles[h];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture,c=!0)}c&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ds extends Po{constructor(t,r,c,h){super(t,r,c,h),this.roundZoom=!0,this.type="video",this.options=r}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const r of t.urls)this.urls.push(this.map._requestManager.transformRequest(r,"Source").url);try{const r=yield s.a3(this.urls);if(this._loaded=!0,!r)return;this.video=r,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(r){this.fire(new s.j(r))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const r=this.video.seekable;t<r.start(0)||t>r.end(0)?this.fire(new s.j(new s.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,r=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,kn.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new jt(t,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let c=!1;for(const h in this.tiles){const m=this.tiles[h];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture,c=!0)}c&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class zo extends Po{constructor(t,r,c,h){super(t,r,c,h),r.coordinates?Array.isArray(r.coordinates)&&r.coordinates.length===4&&!r.coordinates.some(m=>!Array.isArray(m)||m.length!==2||m.some(v=>typeof v!="number"))||this.fire(new s.j(new s.a2(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.j(new s.a2(`sources.${t}`,null,'missing required property "coordinates"'))),r.animate&&typeof r.animate!="boolean"&&this.fire(new s.j(new s.a2(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),r.canvas?typeof r.canvas=="string"||r.canvas instanceof HTMLCanvasElement||this.fire(new s.j(new s.a2(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.j(new s.a2(`sources.${t}`,null,'missing required property "canvas"'))),this.options=r,this.animate=r.animate===void 0||r.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const r=this.map.painter.context,c=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,kn.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new jt(r,this.canvas,c.RGBA,{premultiply:!0});let h=!1;for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,h=!0)}h&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const ir={},$r=_=>{switch(_){case"geojson":return er;case"image":return Po;case"raster":return Se;case"raster-dem":return Di;case"vector":return hs;case"video":return ds;case"canvas":return zo}return ir[_]},It="RTLPluginLoaded";class Lo extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Jo()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch(r=>{throw this.status="error",r})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return s._(this,arguments,void 0,function*(r,c=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=X.resolveURL(r),!this.url)throw new Error(`requested url ${r} is invalid`);if(this.status==="unavailable"){if(!c)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.k(It))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Wi=null;function zn(){return Wi||(Wi=new Lo),Wi}class Bo{constructor(t,r){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=s.a4(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const r=t+this.timeAdded;r<this.fadeEndTime||(this.fadeEndTime=r)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,r,c){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(h,m){const v={};if(!m)return v;for(const w of h){const S=w.layerIds.map(C=>m.getLayer(C)).filter(Boolean);if(S.length!==0){w.layers=S,w.stateDependentLayerIds&&(w.stateDependentLayers=w.stateDependentLayerIds.map(C=>S.filter(M=>M.id===C)[0]));for(const C of S)v[C.id]=w}}return v}(t.buckets,r.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const m=this.buckets[h];if(m instanceof s.a6){if(this.hasSymbolBuckets=!0,!c)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const m=this.buckets[h];if(m instanceof s.a6&&m.hasRTLText){this.hasRTLText=!0,zn().lazyLoad();break}}this.queryPadding=0;for(const h in this.buckets){const m=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(h).queryRadius(m))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const c in this.buckets){const h=this.buckets[c];h.uploadPending()&&h.upload(t)}const r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new jt(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new jt(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,r,c,h,m,v,w,S,C,M){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:h,cameraQueryGeometry:m,scale:v,tileSize:this.tileSize,pixelPosMatrix:M,transform:S,params:w,queryPadding:this.queryPadding*C},t,r,c):{}}querySourceFeatures(t,r){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const h=c.loadVTLayers(),m=r&&r.sourceLayer?r.sourceLayer:"",v=h._geojsonTileLayer||h[m];if(!v)return;const w=s.a7(r&&r.filter),{z:S,x:C,y:M}=this.tileID.canonical,D={z:S,x:C,y:M};for(let R=0;R<v.length;R++){const U=v.feature(R);if(w.needGeometry){const K=s.a8(U,!0);if(!w.filter(new s.z(this.tileID.overscaledZ),K,this.tileID.canonical))continue}else if(!w.filter(new s.z(this.tileID.overscaledZ),U))continue;const j=c.getId(U,m),W=new s.a9(U,S,C,M,j);W.tile=D,t.push(W)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const r=this.expirationTime;if(t.cacheControl){const c=s.aa(t.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const c=Date.now();let h=!1;if(this.expirationTime>c)h=!1;else if(r)if(this.expirationTime<r)h=!0;else{const m=this.expirationTime-r;m?this.expirationTime=c+Math.max(m,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,r){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const c=this.latestFeatureIndex.loadVTLayers();for(const h in this.buckets){if(!r.style.hasLayer(h))continue;const m=this.buckets[h],v=m.layers[0].sourceLayer||"_geojsonTileLayer",w=c[v],S=t[v];if(!w||!S||Object.keys(S).length===0)continue;m.update(S,w,this.imageAtlas&&this.imageAtlas.patternPositions||{});const C=r&&r.style&&r.style.getLayer(h);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(m)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<X.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=X.now()+t}setDependencies(t,r){const c={};for(const h of r)c[h]=!0;this.dependencies[t]=c}hasDependency(t,r){for(const c of t){const h=this.dependencies[c];if(h){for(const m of r)if(h[m])return!0}}return!1}}class Dt{constructor(t,r){this.max=t,this.onRemove=r,this.reset()}reset(){for(const t in this.data)for(const r of this.data[t])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(t,r,c){const h=t.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const m={value:r,timeout:void 0};if(c!==void 0&&(m.timeout=setTimeout(()=>{this.remove(t,m)},c)),this.data[h].push(m),this.order.push(h),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const r=this.data[t].shift();return r.timeout&&clearTimeout(r.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),r.value}getByKey(t){const r=this.data[t];return r?r[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,r){if(!this.has(t))return this;const c=t.wrapped().key,h=r===void 0?0:this.data[c].indexOf(r),m=this.data[c][h];return this.data[c].splice(h,1),m.timeout&&clearTimeout(m.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(m.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(t){const r=[];for(const c in this.data)for(const h of this.data[c])t(h.value)||r.push(h);for(const c of r)this.remove(c.value.tileID,c)}}class me{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,r,c){const h=String(r);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][h]=this.stateChanges[t][h]||{},s.e(this.stateChanges[t][h],c),this.deletedStates[t]===null){this.deletedStates[t]={};for(const m in this.state[t])m!==h&&(this.deletedStates[t][m]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][h]===null){this.deletedStates[t][h]={};for(const m in this.state[t][h])c[m]||(this.deletedStates[t][h][m]=null)}else for(const m in c)this.deletedStates[t]&&this.deletedStates[t][h]&&this.deletedStates[t][h][m]===null&&delete this.deletedStates[t][h][m]}removeFeatureState(t,r,c){if(this.deletedStates[t]===null)return;const h=String(r);if(this.deletedStates[t]=this.deletedStates[t]||{},c&&r!==void 0)this.deletedStates[t][h]!==null&&(this.deletedStates[t][h]=this.deletedStates[t][h]||{},this.deletedStates[t][h][c]=null);else if(r!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][h])for(c in this.deletedStates[t][h]={},this.stateChanges[t][h])this.deletedStates[t][h][c]=null;else this.deletedStates[t][h]=null;else this.deletedStates[t]=null}getState(t,r){const c=String(r),h=s.e({},(this.state[t]||{})[c],(this.stateChanges[t]||{})[c]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const m=this.deletedStates[t][r];if(m===null)return{};for(const v in m)delete h[v]}return h}initializeTileState(t,r){t.setFeatureState(this.state,r)}coalesceChanges(t,r){const c={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const m={};for(const v in this.stateChanges[h])this.state[h][v]||(this.state[h][v]={}),s.e(this.state[h][v],this.stateChanges[h][v]),m[v]=this.state[h][v];c[h]=m}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const m={};if(this.deletedStates[h]===null)for(const v in this.state[h])m[v]={},this.state[h][v]={};else for(const v in this.deletedStates[h]){if(this.deletedStates[h][v]===null)this.state[h][v]={};else for(const w of Object.keys(this.deletedStates[h][v]))delete this.state[h][v][w];m[v]=this.state[h][v]}c[h]=c[h]||{},s.e(c[h],m)}if(this.stateChanges={},this.deletedStates={},Object.keys(c).length!==0)for(const h in t)t[h].setFeatureState(c,r)}}class ie extends s.E{constructor(t,r,c){super(),this.id=t,this.dispatcher=c,this.on("data",h=>this._dataHandler(h)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((h,m,v,w)=>{const S=new($r(m.type))(h,m,v,w);if(S.id!==h)throw new Error(`Expected Source id to be ${h} instead of ${S.id}`);return S})(t,r,c,this),this._tiles={},this._cache=new Dt(0,h=>this._unloadTile(h)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new me,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t in this._tiles){const r=this._tiles[t];if(r.state!=="loaded"&&r.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,r,c){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,r,c)}catch(h){t.state="errored",h.status!==404?this._source.fire(new s.j(h,{tile:t})):this.update(this.transform,this.terrain)}})}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new s.k("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const r in this._tiles){const c=this._tiles[r];c.upload(t),c.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort(Ni).map(t=>t.key)}getRenderableIds(t){const r=[];for(const c in this._tiles)this._isIdRenderable(c,t)&&r.push(this._tiles[c]);return t?r.sort((c,h)=>{const m=c.tileID,v=h.tileID,w=new s.P(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),S=new s.P(v.canonical.x,v.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-v.overscaledZ||S.y-w.y||S.x-w.x}).map(c=>c.tileID.key):r.map(c=>c.tileID).sort(Ni).map(c=>c.key)}hasRenderableParent(t){const r=this.findLoadedParent(t,0);return!!r&&this._isIdRenderable(r.tileID.key)}_isIdRenderable(t,r){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(r||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)this._tiles[t].state!=="errored"&&this._reloadTile(t,"reloading")}}_reloadTile(t,r){return s._(this,void 0,void 0,function*(){const c=this._tiles[t];c&&(c.state!=="loading"&&(c.state=r),yield this._loadTile(c,t,r))})}_tileLoaded(t,r,c){t.timeAdded=X.now(),c==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(r,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new s.k("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const r=this.getRenderableIds();for(let h=0;h<r.length;h++){const m=r[h];if(t.neighboringTiles&&t.neighboringTiles[m]){const v=this.getTileByID(m);c(t,v),c(v,t)}}function c(h,m){h.needsHillshadePrepare=!0,h.needsTerrainPrepare=!0;let v=m.tileID.canonical.x-h.tileID.canonical.x;const w=m.tileID.canonical.y-h.tileID.canonical.y,S=Math.pow(2,h.tileID.canonical.z),C=m.tileID.key;v===0&&w===0||Math.abs(w)>1||(Math.abs(v)>1&&(Math.abs(v+S)===1?v+=S:Math.abs(v-S)===1&&(v-=S)),m.dem&&h.dem&&(h.dem.backfillBorder(m.dem,v,w),h.neighboringTiles&&h.neighboringTiles[C]&&(h.neighboringTiles[C].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,r,c,h){for(const m in this._tiles){let v=this._tiles[m];if(h[m]||!v.hasData()||v.tileID.overscaledZ<=r||v.tileID.overscaledZ>c)continue;let w=v.tileID;for(;v&&v.tileID.overscaledZ>r+1;){const C=v.tileID.scaledTo(v.tileID.overscaledZ-1);v=this._tiles[C.key],v&&v.hasData()&&(w=C)}let S=w;for(;S.overscaledZ>r;)if(S=S.scaledTo(S.overscaledZ-1),t[S.key]){h[w.key]=w;break}}}findLoadedParent(t,r){if(t.key in this._loadedParentTiles){const c=this._loadedParentTiles[t.key];return c&&c.tileID.overscaledZ>=r?c:null}for(let c=t.overscaledZ-1;c>=r;c--){const h=t.scaledTo(c),m=this._getLoadedTile(h);if(m)return m}}findLoadedSibling(t){return this._getLoadedTile(t)}_getLoadedTile(t){const r=this._tiles[t.key];return r&&r.hasData()?r:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const r=Math.ceil(t.width/this._source.tileSize)+1,c=Math.ceil(t.height/this._source.tileSize)+1,h=Math.floor(r*c*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),m=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,h):h;this._cache.setMaxSize(m)}handleWrapJump(t){const r=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,r){const c={};for(const h in this._tiles){const m=this._tiles[h];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+r),c[m.tileID.key]=m}this._tiles=c;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(h,this._tiles[h])}}_updateCoveredAndRetainedTiles(t,r,c,h,m,v){const w={},S={},C=Object.keys(t),M=X.now();for(const D of C){const R=t[D],U=this._tiles[D];if(!U||U.fadeEndTime!==0&&U.fadeEndTime<=M)continue;const j=this.findLoadedParent(R,r),W=this.findLoadedSibling(R),K=j||W||null;K&&(this._addTile(K.tileID),w[K.tileID.key]=K.tileID),S[D]=R}this._retainLoadedChildren(S,h,c,t);for(const D in w)t[D]||(this._coveredTiles[D]=!0,t[D]=w[D]);if(v){const D={},R={};for(const U of m)this._tiles[U.key].hasData()?D[U.key]=U:R[U.key]=U;for(const U in R){const j=R[U].children(this._source.maxzoom);this._tiles[j[0].key]&&this._tiles[j[1].key]&&this._tiles[j[2].key]&&this._tiles[j[3].key]&&(D[j[0].key]=t[j[0].key]=j[0],D[j[1].key]=t[j[1].key]=j[1],D[j[2].key]=t[j[2].key]=j[2],D[j[3].key]=t[j[3].key]=j[3],delete R[U])}for(const U in R){const j=R[U],W=this.findLoadedParent(j,this._source.minzoom),K=this.findLoadedSibling(j),tt=W||K||null;if(tt){D[tt.tileID.key]=t[tt.tileID.key]=tt.tileID;for(const q in D)D[q].isChildOf(tt.tileID)&&delete D[q]}}for(const U in this._tiles)D[U]||(this._coveredTiles[U]=!0)}}update(t,r){if(!this._sourceLoaded||this._paused)return;let c;this.transform=t,this.terrain=r,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?c=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(M=>new s.S(M.canonical.z,M.wrap,M.canonical.z,M.canonical.x,M.canonical.y)):(c=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:r}),this._source.hasTile&&(c=c.filter(M=>this._source.hasTile(M)))):c=[];const h=t.coveringZoomLevel(this._source),m=Math.max(h-ie.maxOverzooming,this._source.minzoom),v=Math.max(h+ie.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const M={};for(const D of c)if(D.canonical.z>this._source.minzoom){const R=D.scaledTo(D.canonical.z-1);M[R.key]=R;const U=D.scaledTo(Math.max(this._source.minzoom,Math.min(D.canonical.z,5)));M[U.key]=U}c=c.concat(Object.values(M))}const w=c.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,w&&this.fire(new s.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const S=this._updateRetainedTiles(c,h);Jn(this._source.type)&&this._updateCoveredAndRetainedTiles(S,m,v,h,c,r);for(const M in S)this._tiles[M].clearFadeHold();const C=s.ab(this._tiles,S);for(const M of C){const D=this._tiles[M];D.hasSymbolBuckets&&!D.holdingForFade()?D.setHoldDuration(this.map._fadeDuration):D.hasSymbolBuckets&&!D.symbolFadeFinished()||this._removeTile(M)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,r){var c;const h={},m={},v=Math.max(r-ie.maxOverzooming,this._source.minzoom),w=Math.max(r+ie.maxUnderzooming,this._source.minzoom),S={};for(const C of t){const M=this._addTile(C);h[C.key]=C,M.hasData()||r<this._source.maxzoom&&(S[C.key]=C)}this._retainLoadedChildren(S,r,w,h);for(const C of t){let M=this._tiles[C.key];if(M.hasData())continue;if(r+1>this._source.maxzoom){const R=C.children(this._source.maxzoom)[0],U=this.getTile(R);if(U&&U.hasData()){h[R.key]=R;continue}}else{const R=C.children(this._source.maxzoom);if(h[R[0].key]&&h[R[1].key]&&h[R[2].key]&&h[R[3].key])continue}let D=M.wasRequested();for(let R=C.overscaledZ-1;R>=v;--R){const U=C.scaledTo(R);if(m[U.key])break;if(m[U.key]=!0,M=this.getTile(U),!M&&D&&(M=this._addTile(U)),M){const j=M.hasData();if((j||!(!((c=this.map)===null||c===void 0)&&c.cancelPendingTileRequestsWhileZooming)||D)&&(h[U.key]=U),D=M.wasRequested(),j)break}}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const r=[];let c,h=this._tiles[t].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){c=this._loadedParentTiles[h.key];break}r.push(h.key);const m=h.scaledTo(h.overscaledZ-1);if(c=this._getLoadedTile(m),c)break;h=m}for(const m of r)this._loadedParentTiles[m]=c}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const t in this._tiles){const r=this._tiles[t].tileID,c=this._getLoadedTile(r);this._loadedSiblingTiles[r.key]=c}}_addTile(t){let r=this._tiles[t.key];if(r)return r;r=this._cache.getAndRemove(t),r&&(this._setTileReloadTimer(t.key,r),r.tileID=t,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,r)));const c=r;return r||(r=new Bo(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(r,t.key,r.state)),r.uses++,this._tiles[t.key]=r,c||this._source.fire(new s.k("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r}_setTileReloadTimer(t,r){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const c=r.getExpiryTimeout();c&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},c))}_removeTile(t){const r=this._tiles[t];r&&(r.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),r.uses>0||(r.hasData()&&r.state!=="reloading"?this._cache.add(r.tileID,r,r.getExpiryTimeout()):(r.aborted=!0,this._abortTile(r),this._unloadTile(r))))}_dataHandler(t){const r=t.sourceDataType;t.dataType==="source"&&r==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&t.dataType==="source"&&r==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,r,c){const h=[],m=this.transform;if(!m)return h;const v=c?m.getCameraQueryGeometry(t):t,w=t.map(j=>m.pointCoordinate(j,this.terrain)),S=v.map(j=>m.pointCoordinate(j,this.terrain)),C=this.getIds();let M=1/0,D=1/0,R=-1/0,U=-1/0;for(const j of S)M=Math.min(M,j.x),D=Math.min(D,j.y),R=Math.max(R,j.x),U=Math.max(U,j.y);for(let j=0;j<C.length;j++){const W=this._tiles[C[j]];if(W.holdingForFade())continue;const K=W.tileID,tt=Math.pow(2,m.zoom-W.tileID.overscaledZ),q=r*W.queryPadding*s.X/W.tileSize/tt,H=[K.getTilePoint(new s.Z(M,D)),K.getTilePoint(new s.Z(R,U))];if(H[0].x-q<s.X&&H[0].y-q<s.X&&H[1].x+q>=0&&H[1].y+q>=0){const ot=w.map(ut=>K.getTilePoint(ut)),rt=S.map(ut=>K.getTilePoint(ut));h.push({tile:W,tileID:K,queryGeometry:ot,cameraQueryGeometry:rt,scale:tt})}}return h}getVisibleCoordinates(t){const r=this.getRenderableIds(t).map(c=>this._tiles[c].tileID);for(const c of r)c.posMatrix=this.transform.calculatePosMatrix(c.toUnwrapped());return r}hasTransition(){if(this._source.hasTransition())return!0;if(Jn(this._source.type)){const t=X.now();for(const r in this._tiles)if(this._tiles[r].fadeEndTime>=t)return!0}return!1}setFeatureState(t,r,c){this._state.updateState(t=t||"_geojsonTileLayer",r,c)}removeFeatureState(t,r,c){this._state.removeFeatureState(t=t||"_geojsonTileLayer",r,c)}getFeatureState(t,r){return this._state.getState(t=t||"_geojsonTileLayer",r)}setDependencies(t,r,c){const h=this._tiles[t];h&&h.setDependencies(r,c)}reloadTilesForDependencies(t,r){for(const c in this._tiles)this._tiles[c].hasDependency(t,r)&&this._reloadTile(c,"reloading");this._cache.filter(c=>!c.hasDependency(t,r))}}function Ni(_,t){const r=Math.abs(2*_.wrap)-+(_.wrap<0),c=Math.abs(2*t.wrap)-+(t.wrap<0);return _.overscaledZ-t.overscaledZ||c-r||t.canonical.y-_.canonical.y||t.canonical.x-_.canonical.x}function Jn(_){return _==="raster"||_==="image"||_==="video"}ie.maxOverzooming=10,ie.maxUnderzooming=3;class pe{constructor(t,r){this.reset(t,r)}reset(t,r){this.points=t||[],this._distances=[0];for(let c=1;c<this.points.length;c++)this._distances[c]=this._distances[c-1]+this.points[c].dist(this.points[c-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(r||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=s.ac(t,0,1);let r=1,c=this._distances[r];const h=t*this.paddedLength+this.padding;for(;c<h&&r<this._distances.length;)c=this._distances[++r];const m=r-1,v=this._distances[m],w=c-v,S=w>0?(h-v)/w:0;return this.points[m].mult(1-S).add(this.points[r].mult(S))}}function Qn(_,t){let r=!0;return _==="always"||_!=="never"&&t!=="never"||(r=!1),r}class Q{constructor(t,r,c){const h=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(t/c),this.yCellCount=Math.ceil(r/c);for(let v=0;v<this.xCellCount*this.yCellCount;v++)h.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=r,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/r,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,r,c,h,m){this._forEachCell(r,c,h,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(r),this.bboxes.push(c),this.bboxes.push(h),this.bboxes.push(m)}insertCircle(t,r,c,h){this._forEachCell(r-h,c-h,r+h,c+h,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(r),this.circles.push(c),this.circles.push(h)}_insertBoxCell(t,r,c,h,m,v){this.boxCells[m].push(v)}_insertCircleCell(t,r,c,h,m,v){this.circleCells[m].push(v)}_query(t,r,c,h,m,v,w){if(c<0||t>this.width||h<0||r>this.height)return[];const S=[];if(t<=0&&r<=0&&this.width<=c&&this.height<=h){if(m)return[{key:null,x1:t,y1:r,x2:c,y2:h}];for(let C=0;C<this.boxKeys.length;C++)S.push({key:this.boxKeys[C],x1:this.bboxes[4*C],y1:this.bboxes[4*C+1],x2:this.bboxes[4*C+2],y2:this.bboxes[4*C+3]});for(let C=0;C<this.circleKeys.length;C++){const M=this.circles[3*C],D=this.circles[3*C+1],R=this.circles[3*C+2];S.push({key:this.circleKeys[C],x1:M-R,y1:D-R,x2:M+R,y2:D+R})}}else this._forEachCell(t,r,c,h,this._queryCell,S,{hitTest:m,overlapMode:v,seenUids:{box:{},circle:{}}},w);return S}query(t,r,c,h){return this._query(t,r,c,h,!1,null)}hitTest(t,r,c,h,m,v){return this._query(t,r,c,h,!0,m,v).length>0}hitTestCircle(t,r,c,h,m){const v=t-c,w=t+c,S=r-c,C=r+c;if(w<0||v>this.width||C<0||S>this.height)return!1;const M=[];return this._forEachCell(v,S,w,C,this._queryCellCircle,M,{hitTest:!0,overlapMode:h,circle:{x:t,y:r,radius:c},seenUids:{box:{},circle:{}}},m),M.length>0}_queryCell(t,r,c,h,m,v,w,S){const{seenUids:C,hitTest:M,overlapMode:D}=w,R=this.boxCells[m];if(R!==null){const j=this.bboxes;for(const W of R)if(!C.box[W]){C.box[W]=!0;const K=4*W,tt=this.boxKeys[W];if(t<=j[K+2]&&r<=j[K+3]&&c>=j[K+0]&&h>=j[K+1]&&(!S||S(tt))&&(!M||!Qn(D,tt.overlapMode))&&(v.push({key:tt,x1:j[K],y1:j[K+1],x2:j[K+2],y2:j[K+3]}),M))return!0}}const U=this.circleCells[m];if(U!==null){const j=this.circles;for(const W of U)if(!C.circle[W]){C.circle[W]=!0;const K=3*W,tt=this.circleKeys[W];if(this._circleAndRectCollide(j[K],j[K+1],j[K+2],t,r,c,h)&&(!S||S(tt))&&(!M||!Qn(D,tt.overlapMode))){const q=j[K],H=j[K+1],ot=j[K+2];if(v.push({key:tt,x1:q-ot,y1:H-ot,x2:q+ot,y2:H+ot}),M)return!0}}}return!1}_queryCellCircle(t,r,c,h,m,v,w,S){const{circle:C,seenUids:M,overlapMode:D}=w,R=this.boxCells[m];if(R!==null){const j=this.bboxes;for(const W of R)if(!M.box[W]){M.box[W]=!0;const K=4*W,tt=this.boxKeys[W];if(this._circleAndRectCollide(C.x,C.y,C.radius,j[K+0],j[K+1],j[K+2],j[K+3])&&(!S||S(tt))&&!Qn(D,tt.overlapMode))return v.push(!0),!0}}const U=this.circleCells[m];if(U!==null){const j=this.circles;for(const W of U)if(!M.circle[W]){M.circle[W]=!0;const K=3*W,tt=this.circleKeys[W];if(this._circlesCollide(j[K],j[K+1],j[K+2],C.x,C.y,C.radius)&&(!S||S(tt))&&!Qn(D,tt.overlapMode))return v.push(!0),!0}}}_forEachCell(t,r,c,h,m,v,w,S){const C=this._convertToXCellCoord(t),M=this._convertToYCellCoord(r),D=this._convertToXCellCoord(c),R=this._convertToYCellCoord(h);for(let U=C;U<=D;U++)for(let j=M;j<=R;j++)if(m.call(this,t,r,c,h,this.xCellCount*j+U,v,w,S))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,r,c,h,m,v){const w=h-t,S=m-r,C=c+v;return C*C>w*w+S*S}_circleAndRectCollide(t,r,c,h,m,v,w){const S=(v-h)/2,C=Math.abs(t-(h+S));if(C>S+c)return!1;const M=(w-m)/2,D=Math.abs(r-(m+M));if(D>M+c)return!1;if(C<=S||D<=M)return!0;const R=C-S,U=D-M;return R*R+U*U<=c*c}}function z(_,t,r,c,h){const m=s.H();return t?(s.K(m,m,[1/h,1/h,1]),r||s.ad(m,m,c.angle)):s.L(m,c.labelPlaneMatrix,_),m}function B(_,t,r,c,h){if(t){const m=s.ae(_);return s.K(m,m,[h,h,1]),r||s.ad(m,m,-c.angle),m}return c.glCoordMatrix}function O(_,t,r,c){let h;c?(h=[_,t,c(_,t),1],s.af(h,h,r)):(h=[_,t,0,1],Ke(h,h,r));const m=h[3];return{point:new s.P(h[0]/m,h[1]/m),signedDistanceFromCamera:m,isOccluded:!1}}function G(_,t){return .5+_/t*.5}function et(_,t){return _.x>=-t[0]&&_.x<=t[0]&&_.y>=-t[1]&&_.y<=t[1]}function at(_,t,r,c,h,m,v,w,S,C,M,D,R,U,j){const W=c?_.textSizeData:_.iconSizeData,K=s.ag(W,r.transform.zoom),tt=[256/r.width*2+1,256/r.height*2+1],q=c?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;q.clear();const H=_.lineVertexArray,ot=c?_.text.placedSymbolArray:_.icon.placedSymbolArray,rt=r.transform.width/r.transform.height;let ut=!1;for(let _t=0;_t<ot.length;_t++){const kt=ot.get(_t);if(kt.hidden||kt.writingMode===s.ah.vertical&&!ut){ye(kt.numGlyphs,q);continue}ut=!1;const Ct=O(kt.anchorX,kt.anchorY,t,j);if(!et(Ct.point,tt)){ye(kt.numGlyphs,q);continue}const Vt=G(r.transform.cameraToCenterDistance,Ct.signedDistanceFromCamera),Et=s.ai(W,K,kt),vt=v?Et/Vt:Et*Vt,Pt={getElevation:j,labelPlaneMatrix:h,lineVertexArray:H,pitchWithMap:v,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:C,tileAnchorPoint:new s.P(kt.anchorX,kt.anchorY),unwrappedTileID:M,width:D,height:R,translation:U},le=mt(Pt,kt,vt,!1,w,t,m,_.glyphOffsetArray,q,rt,S);ut=le.useVertical,(le.notEnoughRoom||ut||le.needsFlipping&&mt(Pt,kt,vt,!0,w,t,m,_.glyphOffsetArray,q,rt,S).notEnoughRoom)&&ye(kt.numGlyphs,q)}c?_.text.dynamicLayoutVertexBuffer.updateData(q):_.icon.dynamicLayoutVertexBuffer.updateData(q)}function st(_,t,r,c,h,m,v,w){const S=m.glyphStartIndex+m.numGlyphs,C=m.lineStartIndex,M=m.lineStartIndex+m.lineLength,D=t.getoffsetX(m.glyphStartIndex),R=t.getoffsetX(S-1),U=ve(_*D,r,c,h,m.segment,C,M,w,v);if(!U)return null;const j=ve(_*R,r,c,h,m.segment,C,M,w,v);return j?w.projectionCache.anyProjectionOccluded?null:{first:U,last:j}:null}function it(_,t,r,c){return _===s.ah.horizontal&&Math.abs(r.y-t.y)>Math.abs(r.x-t.x)*c?{useVertical:!0}:(_===s.ah.vertical?t.y<r.y:t.x>r.x)?{needsFlipping:!0}:null}function mt(_,t,r,c,h,m,v,w,S,C,M){const D=r/24,R=t.lineOffsetX*D,U=t.lineOffsetY*D;let j;if(t.numGlyphs>1){const W=t.glyphStartIndex+t.numGlyphs,K=t.lineStartIndex,tt=t.lineStartIndex+t.lineLength,q=st(D,w,R,U,c,t,M,_);if(!q)return{notEnoughRoom:!0};const H=O(q.first.point.x,q.first.point.y,v,_.getElevation).point,ot=O(q.last.point.x,q.last.point.y,v,_.getElevation).point;if(h&&!c){const rt=it(t.writingMode,H,ot,C);if(rt)return rt}j=[q.first];for(let rt=t.glyphStartIndex+1;rt<W-1;rt++)j.push(ve(D*w.getoffsetX(rt),R,U,c,t.segment,K,tt,_,M));j.push(q.last)}else{if(h&&!c){const K=O(_.tileAnchorPoint.x,_.tileAnchorPoint.y,m,_.getElevation).point,tt=t.lineStartIndex+t.segment+1,q=new s.P(_.lineVertexArray.getx(tt),_.lineVertexArray.gety(tt)),H=O(q.x,q.y,m,_.getElevation),ot=H.signedDistanceFromCamera>0?H.point:function(ut,_t,kt,Ct,Vt,Et){return yt(ut,_t,kt,1,Vt,Et)}(_.tileAnchorPoint,q,K,0,m,_),rt=it(t.writingMode,K,ot,C);if(rt)return rt}const W=ve(D*w.getoffsetX(t.glyphStartIndex),R,U,c,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,_,M);if(!W||_.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};j=[W]}for(const W of j)s.aj(S,W.point,W.angle);return{}}function yt(_,t,r,c,h,m){const v=_.add(_.sub(t)._unit()),w=h!==void 0?O(v.x,v.y,h,m.getElevation).point:At(v.x,v.y,m).point,S=r.sub(w);return r.add(S._mult(c/S.mag()))}function ht(_,t,r){const c=t.projectionCache;if(c.projections[_])return c.projections[_];const h=new s.P(t.lineVertexArray.getx(_),t.lineVertexArray.gety(_)),m=At(h.x,h.y,t);if(m.signedDistanceFromCamera>0)return c.projections[_]=m.point,c.anyProjectionOccluded=c.anyProjectionOccluded||m.isOccluded,m.point;const v=_-r.direction;return function(w,S,C,M,D){return yt(w,S,C,M,void 0,D)}(r.distanceFromAnchor===0?t.tileAnchorPoint:new s.P(t.lineVertexArray.getx(v),t.lineVertexArray.gety(v)),h,r.previousVertex,r.absOffsetX-r.distanceFromAnchor+1,t)}function At(_,t,r){const c=_+r.translation[0],h=t+r.translation[1];let m;return!r.pitchWithMap&&r.projection.useSpecialProjectionForSymbols?(m=r.projection.projectTileCoordinates(c,h,r.unwrappedTileID,r.getElevation),m.point.x=(.5*m.point.x+.5)*r.width,m.point.y=(.5*-m.point.y+.5)*r.height):(m=O(c,h,r.labelPlaneMatrix,r.getElevation),m.isOccluded=!1),m}function Yt(_,t,r){return _._unit()._perp()._mult(t*r)}function Jt(_,t,r,c,h,m,v,w,S){if(w.projectionCache.offsets[_])return w.projectionCache.offsets[_];const C=r.add(t);if(_+S.direction<c||_+S.direction>=h)return w.projectionCache.offsets[_]=C,C;const M=ht(_+S.direction,w,S),D=Yt(M.sub(r),v,S.direction),R=r.add(D),U=M.add(D);return w.projectionCache.offsets[_]=s.ak(m,C,R,U)||C,w.projectionCache.offsets[_]}function ve(_,t,r,c,h,m,v,w,S){const C=c?_-t:_+t;let M=C>0?1:-1,D=0;c&&(M*=-1,D=Math.PI),M<0&&(D+=Math.PI);let R,U=M>0?m+h:m+h+1;w.projectionCache.cachedAnchorPoint?R=w.projectionCache.cachedAnchorPoint:(R=At(w.tileAnchorPoint.x,w.tileAnchorPoint.y,w).point,w.projectionCache.cachedAnchorPoint=R);let j,W,K=R,tt=R,q=0,H=0;const ot=Math.abs(C),rt=[];let ut;for(;q+H<=ot;){if(U+=M,U<m||U>=v)return null;q+=H,tt=K,W=j;const Ct={absOffsetX:ot,direction:M,distanceFromAnchor:q,previousVertex:tt};if(K=ht(U,w,Ct),r===0)rt.push(tt),ut=K.sub(tt);else{let Vt;const Et=K.sub(tt);Vt=Et.mag()===0?Yt(ht(U+M,w,Ct).sub(K),r,M):Yt(Et,r,M),W||(W=tt.add(Vt)),j=Jt(U,Vt,K,m,v,W,r,w,Ct),rt.push(W),ut=j.sub(W)}H=ut.mag()}const _t=ut._mult((ot-q)/H)._add(W||tt),kt=D+Math.atan2(K.y-tt.y,K.x-tt.x);return rt.push(_t),{point:_t,angle:S?kt:0,path:rt}}const Ie=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ye(_,t){for(let r=0;r<_;r++){const c=t.length;t.resize(c+4),t.float32.set(Ie,3*c)}}function Ke(_,t,r){const c=t[0],h=t[1];return _[0]=r[0]*c+r[4]*h+r[12],_[1]=r[1]*c+r[5]*h+r[13],_[3]=r[3]*c+r[7]*h+r[15],_}const Me=100;class di{constructor(t,r,c=new Q(t.width+200,t.height+200,25),h=new Q(t.width+200,t.height+200,25)){this.transform=t,this.mapProjection=r,this.grid=c,this.ignoredGrid=h,this.pitchFactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Me,this.screenBottomBoundary=t.height+Me,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,r,c,h,m,v,w,S,C,M,D){const R=t.anchorPointX+S[0],U=t.anchorPointY+S[1],j=this.projectAndGetPerspectiveRatio(h,R,U,m,M),W=c*j.perspectiveRatio;let K;if(v||w)K=this._projectCollisionBox(t,W,h,m,v,w,S,j,M,D);else{const rt=j.point.x+(D?D.x*W:0),ut=j.point.y+(D?D.y*W:0);K={allPointsOccluded:!1,box:[rt+t.x1*W,ut+t.y1*W,rt+t.x2*W,ut+t.y2*W]}}const[tt,q,H,ot]=K.box;return this.mapProjection.useSpecialProjectionForSymbols&&(v?K.allPointsOccluded:this.mapProjection.isOccluded(R,U,m))||j.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(tt,q,H,ot)||r!=="always"&&this.grid.hitTest(tt,q,H,ot,r,C)?{box:[tt,q,H,ot],placeable:!1,offscreen:!1}:{box:[tt,q,H,ot],placeable:!0,offscreen:this.isOffscreen(tt,q,H,ot)}}placeCollisionCircles(t,r,c,h,m,v,w,S,C,M,D,R,U,j,W,K){const tt=[],q=new s.P(r.anchorX,r.anchorY),H=this.getPerspectiveRatio(v,q.x,q.y,w,K),ot=(D?m/H:m*H)/s.ap,rt={getElevation:K,labelPlaneMatrix:S,lineVertexArray:c,pitchWithMap:D,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:q,unwrappedTileID:w,width:this.transform.width,height:this.transform.height,translation:W},ut=st(ot,h,r.lineOffsetX*ot,r.lineOffsetY*ot,!1,r,!1,rt);let _t=!1,kt=!1,Ct=!0;if(ut){const Vt=.5*U*H+j,Et=new s.P(-100,-100),vt=new s.P(this.screenRightBoundary,this.screenBottomBoundary),Pt=new pe,le=ut.first,Mt=ut.last;let Lt=[];for(let he=le.path.length-1;he>=1;he--)Lt.push(le.path[he]);for(let he=1;he<Mt.path.length;he++)Lt.push(Mt.path[he]);const oe=2.5*Vt;if(C){const he=this.projectPathToScreenSpace(Lt,rt,C);Lt=he.some(fe=>fe.signedDistanceFromCamera<=0)?[]:he.map(fe=>fe.point)}let Ue=[];if(Lt.length>0){const he=Lt[0].clone(),fe=Lt[0].clone();for(let He=1;He<Lt.length;He++)he.x=Math.min(he.x,Lt[He].x),he.y=Math.min(he.y,Lt[He].y),fe.x=Math.max(fe.x,Lt[He].x),fe.y=Math.max(fe.y,Lt[He].y);Ue=he.x>=Et.x&&fe.x<=vt.x&&he.y>=Et.y&&fe.y<=vt.y?[Lt]:fe.x<Et.x||he.x>vt.x||fe.y<Et.y||he.y>vt.y?[]:s.al([Lt],Et.x,Et.y,vt.x,vt.y)}for(const he of Ue){Pt.reset(he,.25*Vt);let fe=0;fe=Pt.length<=.5*Vt?1:Math.ceil(Pt.paddedLength/oe)+1;for(let He=0;He<fe;He++){const Ti=He/Math.max(fe-1,1),Tn=Pt.lerp(Ti),je=Tn.x+Me,Hi=Tn.y+Me;tt.push(je,Hi,Vt,0);const zi=je-Vt,Ci=Hi-Vt,Ei=je+Vt,pn=Hi+Vt;if(Ct=Ct&&this.isOffscreen(zi,Ci,Ei,pn),kt=kt||this.isInsideGrid(zi,Ci,Ei,pn),t!=="always"&&this.grid.hitTestCircle(je,Hi,Vt,t,R)&&(_t=!0,!M))return{circles:[],offscreen:!1,collisionDetected:_t}}}}return{circles:!M&&_t||!kt||H<this.perspectiveRatioCutoff?[]:tt,offscreen:Ct,collisionDetected:_t}}projectPathToScreenSpace(t,r,c){return t.map(h=>O(h.x,h.y,c,r.getElevation))}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const r=[];let c=1/0,h=1/0,m=-1/0,v=-1/0;for(const M of t){const D=new s.P(M.x+Me,M.y+Me);c=Math.min(c,D.x),h=Math.min(h,D.y),m=Math.max(m,D.x),v=Math.max(v,D.y),r.push(D)}const w=this.grid.query(c,h,m,v).concat(this.ignoredGrid.query(c,h,m,v)),S={},C={};for(const M of w){const D=M.key;if(S[D.bucketInstanceId]===void 0&&(S[D.bucketInstanceId]={}),S[D.bucketInstanceId][D.featureIndex])continue;const R=[new s.P(M.x1,M.y1),new s.P(M.x2,M.y1),new s.P(M.x2,M.y2),new s.P(M.x1,M.y2)];s.am(r,R)&&(S[D.bucketInstanceId][D.featureIndex]=!0,C[D.bucketInstanceId]===void 0&&(C[D.bucketInstanceId]=[]),C[D.bucketInstanceId].push(D.featureIndex))}return C}insertCollisionBox(t,r,c,h,m,v){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:h,featureIndex:m,collisionGroupID:v,overlapMode:r},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,r,c,h,m,v){const w=c?this.ignoredGrid:this.grid,S={bucketInstanceId:h,featureIndex:m,collisionGroupID:v,overlapMode:r};for(let C=0;C<t.length;C+=4)w.insertCircle(S,t[C],t[C+1],t[C+2])}projectAndGetPerspectiveRatio(t,r,c,h,m){let v;m?(v=[r,c,m(r,c),1],s.af(v,v,t)):(v=[r,c,0,1],Ke(v,v,t));const w=v[3];return{point:new s.P((v[0]/w+1)/2*this.transform.width+Me,(-v[1]/w+1)/2*this.transform.height+Me),perspectiveRatio:.5+this.transform.cameraToCenterDistance/w*.5,isOccluded:!1,signedDistanceFromCamera:w}}getPerspectiveRatio(t,r,c,h,m){const v=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(r,c,h,m):O(r,c,t,m);return .5+this.transform.cameraToCenterDistance/v.signedDistanceFromCamera*.5}isOffscreen(t,r,c,h){return c<Me||t>=this.screenRightBoundary||h<Me||r>this.screenBottomBoundary}isInsideGrid(t,r,c,h){return c>=0&&t<this.gridRightBoundary&&h>=0&&r<this.gridBottomBoundary}getViewportMatrix(){const t=s.an([]);return s.J(t,t,[-100,-100,0]),t}_projectCollisionBox(t,r,c,h,m,v,w,S,C,M){let D=new s.P(1,0),R=new s.P(0,1);const U=new s.P(t.anchorPointX+w[0],t.anchorPointY+w[1]);if(v&&!m){const Ct=this.projectAndGetPerspectiveRatio(c,U.x+1,U.y,h,C).point.sub(S.point).unit(),Vt=Math.atan(Ct.y/Ct.x)+(Ct.x<0?Math.PI:0),Et=Math.sin(Vt),vt=Math.cos(Vt);D=new s.P(vt,Et),R=new s.P(-Et,vt)}else if(!v&&m){const Ct=-this.transform.angle,Vt=Math.sin(Ct),Et=Math.cos(Ct);D=new s.P(Et,Vt),R=new s.P(-Vt,Et)}let j=S.point,W=r;if(m){j=U;const Ct=this.transform.zoom-Math.floor(this.transform.zoom);W=Math.pow(2,-Ct),W*=this.mapProjection.getPitchedTextCorrection(this.transform,U,h),M||(W*=s.ac(.5+S.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}M&&(j=j.add(D.mult(M.x*W)).add(R.mult(M.y*W)));const K=t.x1*W,tt=t.x2*W,q=(K+tt)/2,H=t.y1*W,ot=t.y2*W,rt=(H+ot)/2,ut=[{offsetX:K,offsetY:H},{offsetX:q,offsetY:H},{offsetX:tt,offsetY:H},{offsetX:tt,offsetY:rt},{offsetX:tt,offsetY:ot},{offsetX:q,offsetY:ot},{offsetX:K,offsetY:ot},{offsetX:K,offsetY:rt}];let _t=[];for(const{offsetX:Ct,offsetY:Vt}of ut)_t.push(new s.P(j.x+D.x*Ct+R.x*Vt,j.y+D.y*Ct+R.y*Vt));let kt=!1;if(m){const Ct=_t.map(Vt=>this.projectAndGetPerspectiveRatio(c,Vt.x,Vt.y,h,C));kt=Ct.some(Vt=>!Vt.isOccluded),_t=Ct.map(Vt=>Vt.point)}else kt=!0;return{box:s.ao(_t),allPointsOccluded:!kt}}}function ne(_,t,r){return t*(s.X/(_.tileSize*Math.pow(2,r-_.tileID.overscaledZ)))}class De{constructor(t,r,c,h){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?r:-r))):h&&c?1:0,this.placed=c}isHidden(){return this.opacity===0&&!this.placed}}class Ne{constructor(t,r,c,h,m){this.text=new De(t?t.text:null,r,c,m),this.icon=new De(t?t.icon:null,r,h,m)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class li{constructor(t,r,c){this.text=t,this.icon=r,this.skipFade=c}}class cn{constructor(){this.invProjMatrix=s.H(),this.viewportMatrix=s.H(),this.circles=[]}}class Ii{constructor(t,r,c,h,m){this.bucketInstanceId=t,this.featureIndex=r,this.sourceLayerIndex=c,this.bucketIndex=h,this.tileID=m}}class Vr{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const r=++this.maxGroupID;this.collisionGroups[t]={ID:r,predicate:c=>c.collisionGroupID===r}}return this.collisionGroups[t]}}function nr(_,t,r,c,h){const{horizontalAlign:m,verticalAlign:v}=s.au(_);return new s.P(-(m-.5)*t+c[0]*h,-(v-.5)*r+c[1]*h)}class Zc{constructor(t,r,c,h,m,v){this.transform=t.clone(),this.terrain=c,this.collisionIndex=new di(this.transform,r),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Vr(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const r=this.terrain;return r?(c,h)=>r.getElevation(t,c,h):null}getBucketParts(t,r,c,h){const m=c.getBucket(r),v=c.latestFeatureIndex;if(!m||!v||r.id!==m.layerIds[0])return;const w=c.collisionBoxArray,S=m.layers[0].layout,C=m.layers[0].paint,M=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),D=c.tileSize/s.X,R=c.tileID.toUnwrapped(),U=this.transform.calculatePosMatrix(R),j=S.get("text-pitch-alignment")==="map",W=S.get("text-rotation-alignment")==="map",K=ne(c,1,this.transform.zoom),tt=this.collisionIndex.mapProjection.translatePosition(this.transform,c,C.get("text-translate"),C.get("text-translate-anchor")),q=this.collisionIndex.mapProjection.translatePosition(this.transform,c,C.get("icon-translate"),C.get("icon-translate-anchor")),H=z(U,j,W,this.transform,K);let ot=null;if(j){const ut=B(U,j,W,this.transform,K);ot=s.L([],this.transform.labelPlaneMatrix,ut)}this.retainedQueryData[m.bucketInstanceId]=new Ii(m.bucketInstanceId,v,m.sourceLayerIndex,m.index,c.tileID);const rt={bucket:m,layout:S,translationText:tt,translationIcon:q,posMatrix:U,unwrappedTileID:R,textLabelPlaneMatrix:H,labelToScreenMatrix:ot,scale:M,textPixelRatio:D,holdingForFade:c.holdingForFade(),collisionBoxArray:w,partiallyEvaluatedTextSize:s.ag(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(h)for(const ut of m.sortKeyRanges){const{sortKey:_t,symbolInstanceStart:kt,symbolInstanceEnd:Ct}=ut;t.push({sortKey:_t,symbolInstanceStart:kt,symbolInstanceEnd:Ct,parameters:rt})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:rt})}attemptAnchorPlacement(t,r,c,h,m,v,w,S,C,M,D,R,U,j,W,K,tt,q,H){const ot=s.aq[t.textAnchor],rt=[t.textOffset0,t.textOffset1],ut=nr(ot,c,h,rt,m),_t=this.collisionIndex.placeCollisionBox(r,R,S,C,M,w,v,K,D.predicate,H,ut);if((!q||this.collisionIndex.placeCollisionBox(q,R,S,C,M,w,v,tt,D.predicate,H,ut).placeable)&&_t.placeable){let kt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID].text&&(kt=this.prevPlacement.variableOffsets[U.crossTileID].anchor),U.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[U.crossTileID]={textOffset:rt,width:c,height:h,anchor:ot,textBoxScale:m,prevAnchor:kt},this.markUsedJustification(j,ot,U,W),j.allowVerticalPlacement&&(this.markUsedOrientation(j,W,U),this.placedOrientations[U.crossTileID]=W),{shift:ut,placedGlyphBoxes:_t}}}placeLayerBucketPart(t,r,c){const{bucket:h,layout:m,translationText:v,translationIcon:w,posMatrix:S,unwrappedTileID:C,textLabelPlaneMatrix:M,labelToScreenMatrix:D,textPixelRatio:R,holdingForFade:U,collisionBoxArray:j,partiallyEvaluatedTextSize:W,collisionGroup:K}=t.parameters,tt=m.get("text-optional"),q=m.get("icon-optional"),H=s.ar(m,"text-overlap","text-allow-overlap"),ot=H==="always",rt=s.ar(m,"icon-overlap","icon-allow-overlap"),ut=rt==="always",_t=m.get("text-rotation-alignment")==="map",kt=m.get("text-pitch-alignment")==="map",Ct=m.get("icon-text-fit")!=="none",Vt=m.get("symbol-z-order")==="viewport-y",Et=ot&&(ut||!h.hasIconData()||q),vt=ut&&(ot||!h.hasTextData()||tt);!h.collisionArrays&&j&&h.deserializeCollisionBoxes(j);const Pt=this._getTerrainElevationFunc(this.retainedQueryData[h.bucketInstanceId].tileID),le=(Mt,Lt,oe)=>{var Ue,he;if(r[Mt.crossTileID])return;if(U)return void(this.placements[Mt.crossTileID]=new li(!1,!1,!1));let fe=!1,He=!1,Ti=!0,Tn=null,je={box:null,placeable:!1,offscreen:null},Hi={box:null,placeable:!1,offscreen:null},zi=null,Ci=null,Ei=null,pn=0,No=0,ta=0;Lt.textFeatureIndex?pn=Lt.textFeatureIndex:Mt.useRuntimeCollisionCircles&&(pn=Mt.featureIndex),Lt.verticalTextFeatureIndex&&(No=Lt.verticalTextFeatureIndex);const ho=Lt.textBox;if(ho){const Yi=Li=>{let Ai=s.ah.horizontal;if(h.allowVerticalPlacement&&!Li&&this.prevPlacement){const Ji=this.prevPlacement.placedOrientations[Mt.crossTileID];Ji&&(this.placedOrientations[Mt.crossTileID]=Ji,Ai=Ji,this.markUsedOrientation(h,Ai,Mt))}return Ai},mn=(Li,Ai)=>{if(h.allowVerticalPlacement&&Mt.numVerticalGlyphVertices>0&&Lt.verticalTextBox){for(const Ji of h.writingModes)if(Ji===s.ah.vertical?(je=Ai(),Hi=je):je=Li(),je&&je.placeable)break}else je=Li()},mo=Mt.textAnchorOffsetStartIndex,yr=Mt.textAnchorOffsetEndIndex;if(yr===mo){const Li=(Ai,Ji)=>{const Je=this.collisionIndex.placeCollisionBox(Ai,H,R,S,C,kt,_t,v,K.predicate,Pt);return Je&&Je.placeable&&(this.markUsedOrientation(h,Ji,Mt),this.placedOrientations[Mt.crossTileID]=Ji),Je};mn(()=>Li(ho,s.ah.horizontal),()=>{const Ai=Lt.verticalTextBox;return h.allowVerticalPlacement&&Mt.numVerticalGlyphVertices>0&&Ai?Li(Ai,s.ah.vertical):{box:null,offscreen:null}}),Yi(je&&je.placeable)}else{let Li=s.aq[(he=(Ue=this.prevPlacement)===null||Ue===void 0?void 0:Ue.variableOffsets[Mt.crossTileID])===null||he===void 0?void 0:he.anchor];const Ai=(Je,vr,Ns)=>{const Us=Je.x2-Je.x1,zu=Je.y2-Je.y1,Lu=Mt.textBoxScale,Bu=Ct&&rt==="never"?vr:null;let Uo=null,Ru=H==="never"?1:2,$u="never";Li&&Ru++;for(let Vu=0;Vu<Ru;Vu++){for(let Ql=mo;Ql<yr;Ql++){const Fu=h.textAnchorOffsets.get(Ql);if(Li&&Fu.textAnchor!==Li)continue;const Ho=this.attemptAnchorPlacement(Fu,Je,Us,zu,Lu,_t,kt,R,S,C,K,$u,Mt,h,Ns,v,w,Bu,Pt);if(Ho&&(Uo=Ho.placedGlyphBoxes,Uo&&Uo.placeable))return fe=!0,Tn=Ho.shift,Uo}Li?Li=null:$u=H}return c&&!Uo&&(Uo={box:this.collisionIndex.placeCollisionBox(ho,"always",R,S,C,kt,_t,v,K.predicate,Pt,new s.P(0,0)).box,offscreen:!1,placeable:!1}),Uo};mn(()=>Ai(ho,Lt.iconBox,s.ah.horizontal),()=>{const Je=Lt.verticalTextBox;return h.allowVerticalPlacement&&(!je||!je.placeable)&&Mt.numVerticalGlyphVertices>0&&Je?Ai(Je,Lt.verticalIconBox,s.ah.vertical):{box:null,occluded:!0,offscreen:null}}),je&&(fe=je.placeable,Ti=je.offscreen);const Ji=Yi(je&&je.placeable);if(!fe&&this.prevPlacement){const Je=this.prevPlacement.variableOffsets[Mt.crossTileID];Je&&(this.variableOffsets[Mt.crossTileID]=Je,this.markUsedJustification(h,Je.anchor,Mt,Ji))}}}if(zi=je,fe=zi&&zi.placeable,Ti=zi&&zi.offscreen,Mt.useRuntimeCollisionCircles){const Yi=h.text.placedSymbolArray.get(Mt.centerJustifiedTextSymbolIndex),mn=s.ai(h.textSizeData,W,Yi),mo=m.get("text-padding");Ci=this.collisionIndex.placeCollisionCircles(H,Yi,h.lineVertexArray,h.glyphOffsetArray,mn,S,C,M,D,c,kt,K.predicate,Mt.collisionCircleDiameter,mo,v,Pt),Ci.circles.length&&Ci.collisionDetected&&!c&&s.w("Collisions detected, but collision boxes are not shown"),fe=ot||Ci.circles.length>0&&!Ci.collisionDetected,Ti=Ti&&Ci.offscreen}if(Lt.iconFeatureIndex&&(ta=Lt.iconFeatureIndex),Lt.iconBox){const Yi=mn=>this.collisionIndex.placeCollisionBox(mn,rt,R,S,C,kt,_t,w,K.predicate,Pt,Ct&&Tn?Tn:void 0);Hi&&Hi.placeable&&Lt.verticalIconBox?(Ei=Yi(Lt.verticalIconBox),He=Ei.placeable):(Ei=Yi(Lt.iconBox),He=Ei.placeable),Ti=Ti&&Ei.offscreen}const po=tt||Mt.numHorizontalGlyphVertices===0&&Mt.numVerticalGlyphVertices===0,ea=q||Mt.numIconVertices===0;po||ea?ea?po||(He=He&&fe):fe=He&&fe:He=fe=He&&fe;const Wa=He&&Ei.placeable;if(fe&&zi.placeable&&this.collisionIndex.insertCollisionBox(zi.box,H,m.get("text-ignore-placement"),h.bucketInstanceId,Hi&&Hi.placeable&&No?No:pn,K.ID),Wa&&this.collisionIndex.insertCollisionBox(Ei.box,rt,m.get("icon-ignore-placement"),h.bucketInstanceId,ta,K.ID),Ci&&fe&&this.collisionIndex.insertCollisionCircles(Ci.circles,H,m.get("text-ignore-placement"),h.bucketInstanceId,pn,K.ID),c&&this.storeCollisionData(h.bucketInstanceId,oe,Lt,zi,Ei,Ci),Mt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(h.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Mt.crossTileID]=new li(fe||Et,He||vt,Ti||h.justReloaded),r[Mt.crossTileID]=!0};if(Vt){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Mt=h.getSortedSymbolIndexes(this.transform.angle);for(let Lt=Mt.length-1;Lt>=0;--Lt){const oe=Mt[Lt];le(h.symbolInstances.get(oe),h.collisionArrays[oe],oe)}}else for(let Mt=t.symbolInstanceStart;Mt<t.symbolInstanceEnd;Mt++)le(h.symbolInstances.get(Mt),h.collisionArrays[Mt],Mt);if(c&&h.bucketInstanceId in this.collisionCircleArrays){const Mt=this.collisionCircleArrays[h.bucketInstanceId];s.as(Mt.invProjMatrix,S),Mt.viewportMatrix=this.collisionIndex.getViewportMatrix()}h.justReloaded=!1}storeCollisionData(t,r,c,h,m,v){if(c.textBox||c.iconBox){let w,S;this.collisionBoxArrays.has(t)?w=this.collisionBoxArrays.get(t):(w=new Map,this.collisionBoxArrays.set(t,w)),w.has(r)?S=w.get(r):(S={text:null,icon:null},w.set(r,S)),c.textBox&&(S.text=h.box),c.iconBox&&(S.icon=m.box)}if(v){let w=this.collisionCircleArrays[t];w===void 0&&(w=this.collisionCircleArrays[t]=new cn);for(let S=0;S<v.circles.length;S+=4)w.circles.push(v.circles[S+0]),w.circles.push(v.circles[S+1]),w.circles.push(v.circles[S+2]),w.circles.push(v.collisionDetected?1:0)}}markUsedJustification(t,r,c,h){let m;m=h===s.ah.vertical?c.verticalPlacedTextSymbolIndex:{left:c.leftJustifiedTextSymbolIndex,center:c.centerJustifiedTextSymbolIndex,right:c.rightJustifiedTextSymbolIndex}[s.at(r)];const v=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex,c.verticalPlacedTextSymbolIndex];for(const w of v)w>=0&&(t.text.placedSymbolArray.get(w).crossTileID=m>=0&&w!==m?0:c.crossTileID)}markUsedOrientation(t,r,c){const h=r===s.ah.horizontal||r===s.ah.horizontalOnly?r:0,m=r===s.ah.vertical?r:0,v=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex];for(const w of v)t.text.placedSymbolArray.get(w).placedOrientation=h;c.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).placedOrientation=m)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const r=this.prevPlacement;let c=!1;this.prevZoomAdjustment=r?r.zoomAdjustment(this.transform.zoom):0;const h=r?r.symbolFadeChange(t):1,m=r?r.opacities:{},v=r?r.variableOffsets:{},w=r?r.placedOrientations:{};for(const S in this.placements){const C=this.placements[S],M=m[S];M?(this.opacities[S]=new Ne(M,h,C.text,C.icon),c=c||C.text!==M.text.placed||C.icon!==M.icon.placed):(this.opacities[S]=new Ne(null,h,C.text,C.icon,C.skipFade),c=c||C.text||C.icon)}for(const S in m){const C=m[S];if(!this.opacities[S]){const M=new Ne(C,h,!1,!1);M.isHidden()||(this.opacities[S]=M,c=c||C.text.placed||C.icon.placed)}}for(const S in v)this.variableOffsets[S]||!this.opacities[S]||this.opacities[S].isHidden()||(this.variableOffsets[S]=v[S]);for(const S in w)this.placedOrientations[S]||!this.opacities[S]||this.opacities[S].isHidden()||(this.placedOrientations[S]=w[S]);if(r&&r.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");c?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=r?r.lastPlacementChangeTime:t)}updateLayerOpacities(t,r){const c={};for(const h of r){const m=h.getBucket(t);m&&h.latestFeatureIndex&&t.id===m.layerIds[0]&&this.updateBucketOpacities(m,h.tileID,c,h.collisionBoxArray)}}updateBucketOpacities(t,r,c,h){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const m=t.layers[0],v=m.layout,w=new Ne(null,0,!1,!1,!0),S=v.get("text-allow-overlap"),C=v.get("icon-allow-overlap"),M=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),D=v.get("text-rotation-alignment")==="map",R=v.get("text-pitch-alignment")==="map",U=v.get("icon-text-fit")!=="none",j=new Ne(null,0,S&&(C||!t.hasIconData()||v.get("icon-optional")),C&&(S||!t.hasTextData()||v.get("text-optional")),!0);!t.collisionArrays&&h&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(h);const W=(tt,q,H)=>{for(let ot=0;ot<q/4;ot++)tt.opacityVertexArray.emplaceBack(H);tt.hasVisibleVertices=tt.hasVisibleVertices||H!==Fr},K=this.collisionBoxArrays.get(t.bucketInstanceId);for(let tt=0;tt<t.symbolInstances.length;tt++){const q=t.symbolInstances.get(tt),{numHorizontalGlyphVertices:H,numVerticalGlyphVertices:ot,crossTileID:rt}=q;let ut=this.opacities[rt];c[rt]?ut=w:ut||(ut=j,this.opacities[rt]=ut),c[rt]=!0;const _t=q.numIconVertices>0,kt=this.placedOrientations[q.crossTileID],Ct=kt===s.ah.vertical,Vt=kt===s.ah.horizontal||kt===s.ah.horizontalOnly;if(H>0||ot>0){const vt=dn(ut.text);W(t.text,H,Ct?Fr:vt),W(t.text,ot,Vt?Fr:vt);const Pt=ut.text.isHidden();[q.rightJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.leftJustifiedTextSymbolIndex].forEach(Lt=>{Lt>=0&&(t.text.placedSymbolArray.get(Lt).hidden=Pt||Ct?1:0)}),q.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).hidden=Pt||Vt?1:0);const le=this.variableOffsets[q.crossTileID];le&&this.markUsedJustification(t,le.anchor,q,kt);const Mt=this.placedOrientations[q.crossTileID];Mt&&(this.markUsedJustification(t,"left",q,Mt),this.markUsedOrientation(t,Mt,q))}if(_t){const vt=dn(ut.icon),Pt=!(U&&q.verticalPlacedIconSymbolIndex&&Ct);q.placedIconSymbolIndex>=0&&(W(t.icon,q.numIconVertices,Pt?vt:Fr),t.icon.placedSymbolArray.get(q.placedIconSymbolIndex).hidden=ut.icon.isHidden()),q.verticalPlacedIconSymbolIndex>=0&&(W(t.icon,q.numVerticalIconVertices,Pt?Fr:vt),t.icon.placedSymbolArray.get(q.verticalPlacedIconSymbolIndex).hidden=ut.icon.isHidden())}const Et=K&&K.has(tt)?K.get(tt):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const vt=t.collisionArrays[tt];if(vt){let Pt=new s.P(0,0);if(vt.textBox||vt.verticalTextBox){let le=!0;if(M){const Mt=this.variableOffsets[rt];Mt?(Pt=nr(Mt.anchor,Mt.width,Mt.height,Mt.textOffset,Mt.textBoxScale),D&&Pt._rotate(R?this.transform.angle:-this.transform.angle)):le=!1}if(vt.textBox||vt.verticalTextBox){let Mt;vt.textBox&&(Mt=Ct),vt.verticalTextBox&&(Mt=Vt),Wc(t.textCollisionBox.collisionVertexArray,ut.text.placed,!le||Mt,Et.text,Pt.x,Pt.y)}}if(vt.iconBox||vt.verticalIconBox){const le=!!(!Vt&&vt.verticalIconBox);let Mt;vt.iconBox&&(Mt=le),vt.verticalIconBox&&(Mt=!le),Wc(t.iconCollisionBox.collisionVertexArray,ut.icon.placed,Mt,Et.icon,U?Pt.x:0,U?Pt.y:0)}}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);if(t.bucketInstanceId in this.collisionCircleArrays){const tt=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=tt.invProjMatrix,t.placementViewportMatrix=tt.viewportMatrix,t.collisionCircleArray=tt.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,r){const c=this.zoomAtLastRecencyCheck===r?1-this.zoomAdjustment(r):1;return this.zoomAtLastRecencyCheck=r,this.commitTime+this.fadeDuration*c>t}setStale(){this.stale=!0}}function Wc(_,t,r,c,h,m){c&&c.length!==0||(c=[0,0,0,0]);const v=c[0]-Me,w=c[1]-Me,S=c[2]-Me,C=c[3]-Me;_.emplaceBack(t?1:0,r?1:0,h||0,m||0,v,w),_.emplaceBack(t?1:0,r?1:0,h||0,m||0,S,w),_.emplaceBack(t?1:0,r?1:0,h||0,m||0,S,C),_.emplaceBack(t?1:0,r?1:0,h||0,m||0,v,C)}const Le=Math.pow(2,25),bl=Math.pow(2,24),yl=Math.pow(2,17),un=Math.pow(2,16),hn=Math.pow(2,9),gd=Math.pow(2,8),Sn=Math.pow(2,1);function dn(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const t=_.placed?1:0,r=Math.floor(127*_.opacity);return r*Le+t*bl+r*yl+t*un+r*hn+t*gd+r*Sn+t}const Fr=0;function or(){return{isOccluded:(_,t,r)=>!1,getPitchedTextCorrection:(_,t,r)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(_,t,r,c){throw new Error("Not implemented.")},translatePosition:(_,t,r,c)=>function(h,m,v,w,S=!1){if(!v[0]&&!v[1])return[0,0];const C=S?w==="map"?h.angle:0:w==="viewport"?-h.angle:0;if(C){const M=Math.sin(C),D=Math.cos(C);v=[v[0]*D-v[1]*M,v[0]*M+v[1]*D]}return[S?v[0]:ne(m,v[0],h.zoom),S?v[1]:ne(m,v[1],h.zoom)]}(_,t,r,c),getCircleRadiusCorrection:_=>1}}class ci{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,r,c,h,m){const v=this._bucketParts;for(;this._currentTileIndex<t.length;)if(r.getBucketParts(v,h,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,v.sort((w,S)=>w.sortKey-S.sortKey));this._currentPartIndex<v.length;)if(r.placeLayerBucketPart(v[this._currentPartIndex],this._seenCrossTileIDs,c),this._currentPartIndex++,m())return!0;return!1}}class Ia{constructor(t,r,c,h,m,v,w,S){this.placement=new Zc(t,or(),r,v,w,S),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=h,this._showCollisionBoxes=m,this._done=!1}isDone(){return this._done}continuePlacement(t,r,c){const h=X.now(),m=()=>!this._forceFullPlacement&&X.now()-h>2;for(;this._currentPlacementIndex>=0;){const v=r[t[this._currentPlacementIndex]],w=this.placement.collisionIndex.transform.zoom;if(v.type==="symbol"&&(!v.minzoom||v.minzoom<=w)&&(!v.maxzoom||v.maxzoom>w)){if(this._inProgressLayer||(this._inProgressLayer=new ci(v)),this._inProgressLayer.continuePlacement(c[v.source],this.placement,this._showCollisionBoxes,v,m))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Ln=512/s.X/2;class ri{constructor(t,r,c){this.tileID=t,this.bucketInstanceId=c,this._symbolsByKey={};const h=new Map;for(let m=0;m<r.length;m++){const v=r.get(m),w=v.key,S=h.get(w);S?S.push(v):h.set(w,[v])}for(const[m,v]of h){const w={positions:v.map(S=>({x:Math.floor(S.anchorX*Ln),y:Math.floor(S.anchorY*Ln)})),crossTileIDs:v.map(S=>S.crossTileID)};if(w.positions.length>128){const S=new s.av(w.positions.length,16,Uint16Array);for(const{x:C,y:M}of w.positions)S.add(C,M);S.finish(),delete w.positions,w.index=S}this._symbolsByKey[m]=w}}getScaledCoordinates(t,r){const{x:c,y:h,z:m}=this.tileID.canonical,{x:v,y:w,z:S}=r.canonical,C=Ln/Math.pow(2,S-m),M=(w*s.X+t.anchorY)*C,D=h*s.X*Ln;return{x:Math.floor((v*s.X+t.anchorX)*C-c*s.X*Ln),y:Math.floor(M-D)}}findMatches(t,r,c){const h=this.tileID.canonical.z<r.canonical.z?1:Math.pow(2,this.tileID.canonical.z-r.canonical.z);for(let m=0;m<t.length;m++){const v=t.get(m);if(v.crossTileID)continue;const w=this._symbolsByKey[v.key];if(!w)continue;const S=this.getScaledCoordinates(v,r);if(w.index){const C=w.index.range(S.x-h,S.y-h,S.x+h,S.y+h).sort();for(const M of C){const D=w.crossTileIDs[M];if(!c[D]){c[D]=!0,v.crossTileID=D;break}}}else if(w.positions)for(let C=0;C<w.positions.length;C++){const M=w.positions[C],D=w.crossTileIDs[C];if(Math.abs(M.x-S.x)<=h&&Math.abs(M.y-S.y)<=h&&!c[D]){c[D]=!0,v.crossTileID=D;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:t})=>t)}}class ps{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Bn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const r=Math.round((t-this.lng)/360);if(r!==0)for(const c in this.indexes){const h=this.indexes[c],m={};for(const v in h){const w=h[v];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+r),m[w.tileID.key]=w}this.indexes[c]=m}this.lng=t}addBucket(t,r,c){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===r.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let m=0;m<r.symbolInstances.length;m++)r.symbolInstances.get(m).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const h=this.usedCrossTileIDs[t.overscaledZ];for(const m in this.indexes){const v=this.indexes[m];if(Number(m)>t.overscaledZ)for(const w in v){const S=v[w];S.tileID.isChildOf(t)&&S.findMatches(r.symbolInstances,t,h)}else{const w=v[t.scaledTo(Number(m)).key];w&&w.findMatches(r.symbolInstances,t,h)}}for(let m=0;m<r.symbolInstances.length;m++){const v=r.symbolInstances.get(m);v.crossTileID||(v.crossTileID=c.generate(),h[v.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new ri(t,r.symbolInstances,r.bucketInstanceId),!0}removeBucketCrossTileIDs(t,r){for(const c of r.getCrossTileIDsLists())for(const h of c)delete this.usedCrossTileIDs[t][h]}removeStaleBuckets(t){let r=!1;for(const c in this.indexes){const h=this.indexes[c];for(const m in h)t[h[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,h[m]),delete h[m],r=!0)}return r}}class vl{constructor(){this.layerIndexes={},this.crossTileIDs=new ps,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,r,c){let h=this.layerIndexes[t.id];h===void 0&&(h=this.layerIndexes[t.id]=new Bn);let m=!1;const v={};h.handleWrapJump(c);for(const w of r){const S=w.getBucket(t);S&&t.id===S.layerIds[0]&&(S.bucketInstanceId||(S.bucketInstanceId=++this.maxBucketInstanceId),h.addBucket(w.tileID,S,this.crossTileIDs)&&(m=!0),v[S.bucketInstanceId]=!0)}return h.removeStaleBuckets(v)&&(m=!0),m}pruneUnusedLayers(t){const r={};t.forEach(c=>{r[c]=!0});for(const c in this.layerIndexes)r[c]||delete this.layerIndexes[c]}}const Rn=(_,t)=>s.t(_,t&&t.filter(r=>r.identifier!=="source.canvas")),bd=s.aw();class ms extends s.E{constructor(t,r={}){super(),this._rtlPluginLoaded=()=>{for(const c in this.sourceCaches){const h=this.sourceCaches[c].getSource().type;h!=="vector"&&h!=="geojson"||this.sourceCaches[c].reload()}},this.map=t,this.dispatcher=new Do(Pn(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",(c,h)=>this.getGlyphs(c,h)),this.dispatcher.registerMessageHandler("GI",(c,h)=>this.getImages(c,h)),this.imageManager=new ae,this.imageManager.setEventedParent(this),this.glyphManager=new Ee(t._requestManager,r.localIdeographFontFamily),this.lineAtlas=new vn(256,512),this.crossTileSymbolIndex=new vl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.ay()),zn().on(It,this._rtlPluginLoaded),this.on("data",c=>{if(c.dataType!=="source"||c.sourceDataType!=="metadata")return;const h=this.sourceCaches[c.sourceId];if(!h)return;const m=h.getSource();if(m&&m.vectorLayerIds)for(const v in this._layers){const w=this._layers[v];w.source===m.id&&this._validateLayer(w)}})}loadURL(t,r={},c){this.fire(new s.k("dataloading",{dataType:"style"})),r.validate=typeof r.validate!="boolean"||r.validate;const h=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const m=this._loadStyleRequest;s.h(h,this._loadStyleRequest).then(v=>{this._loadStyleRequest=null,this._load(v.data,r,c)}).catch(v=>{this._loadStyleRequest=null,v&&!m.signal.aborted&&this.fire(new s.j(v))})}loadJSON(t,r={},c){this.fire(new s.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,X.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,r.validate=r.validate!==!1,this._load(t,r,c)}).catch(()=>{})}loadEmpty(){this.fire(new s.k("dataloading",{dataType:"style"})),this._load(bd,{validate:!1})}_load(t,r,c){var h;const m=r.transformStyle?r.transformStyle(c,t):t;if(!r.validate||!Rn(this,s.u(m))){this._loaded=!0,this.stylesheet=m;for(const v in m.sources)this.addSource(v,m.sources[v],{validate:!1});m.sprite?this._loadSprite(m.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(m.glyphs),this._createLayers(),this.light=new si(this.stylesheet.light),this.sky=new Yn(this.stylesheet.sky),this.map.setTerrain((h=this.stylesheet.terrain)!==null&&h!==void 0?h:null),this.fire(new s.k("data",{dataType:"style"})),this.fire(new s.k("style.load"))}}_createLayers(){const t=s.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",t),this._order=t.map(r=>r.id),this._layers={},this._serializedLayers=null;for(const r of t){const c=s.aA(r);c.setEventedParent(this,{layer:{id:r.id}}),this._layers[r.id]=c}}_loadSprite(t,r=!1,c=void 0){let h;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(m,v,w,S){return s._(this,void 0,void 0,function*(){const C=ee(m),M=w>1?"@2x":"",D={},R={};for(const{id:U,url:j}of C){const W=v.transformRequest(Ht(j,M,".json"),"SpriteJSON");D[U]=s.h(W,S);const K=v.transformRequest(Ht(j,M,".png"),"SpriteImage");R[U]=oi.getImage(K,S)}return yield Promise.all([...Object.values(D),...Object.values(R)]),function(U,j){return s._(this,void 0,void 0,function*(){const W={};for(const K in U){W[K]={};const tt=X.getImageCanvasContext((yield j[K]).data),q=(yield U[K]).data;for(const H in q){const{width:ot,height:rt,x:ut,y:_t,sdf:kt,pixelRatio:Ct,stretchX:Vt,stretchY:Et,content:vt,textFitWidth:Pt,textFitHeight:le}=q[H];W[K][H]={data:null,pixelRatio:Ct,sdf:kt,stretchX:Vt,stretchY:Et,content:vt,textFitWidth:Pt,textFitHeight:le,spriteData:{width:ot,height:rt,x:ut,y:_t,context:tt}}}}return W})}(D,R)})}(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(m=>{if(this._spriteRequest=null,m)for(const v in m){this._spritesImagesIds[v]=[];const w=this._spritesImagesIds[v]?this._spritesImagesIds[v].filter(S=>!(S in m)):[];for(const S of w)this.imageManager.removeImage(S),this._changedImages[S]=!0;for(const S in m[v]){const C=v==="default"?S:`${v}:${S}`;this._spritesImagesIds[v].push(C),C in this.imageManager.images?this.imageManager.updateImage(C,m[v][S],!1):this.imageManager.addImage(C,m[v][S]),r&&(this._changedImages[C]=!0)}}}).catch(m=>{this._spriteRequest=null,h=m,this.fire(new s.j(h))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),r&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"})),c&&c(h)})}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}_validateLayer(t){const r=this.sourceCaches[t.source];if(!r)return;const c=t.sourceLayer;if(!c)return;const h=r.getSource();(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(c)===-1)&&this.fire(new s.j(new Error(`Source layer "${c}" does not exist on source "${h.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,r=!1){const c=this._serializedAllLayers();if(!t||t.length===0)return Object.values(r?s.aB(c):c);const h=[];for(const m of t)if(c[m]){const v=r?s.aB(c[m]):c[m];h.push(v)}return h}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const r=Object.keys(this._layers);for(const c of r){const h=this._layers[c];h.type!=="custom"&&(t[c]=h.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const r=this._changed;if(r){const h=Object.keys(this._updatedLayers),m=Object.keys(this._removedLayers);(h.length||m.length)&&this._updateWorkerLayers(h,m);for(const v in this._updatedSources){const w=this._updatedSources[v];if(w==="reload")this._reloadSource(v);else{if(w!=="clear")throw new Error(`Invalid action ${w}`);this._clearSource(v)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const v in this._updatedPaintProps)this._layers[v].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const c={};for(const h in this.sourceCaches){const m=this.sourceCaches[h];c[h]=m.used,m.used=!1}for(const h of this._order){const m=this._layers[h];m.recalculate(t,this._availableImages),!m.isHidden(t.zoom)&&m.source&&(this.sourceCaches[m.source].used=!0)}for(const h in c){const m=this.sourceCaches[h];!!c[h]!=!!m.used&&m.fire(new s.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:h}))}this.light.recalculate(t),this.sky.recalculate(t),this.z=t.zoom,r&&this.fire(new s.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,r){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:r})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,r={}){var c;this._checkLoaded();const h=this.serialize();if(t=r.transformStyle?r.transformStyle(h,t):t,((c=r.validate)===null||c===void 0||c)&&Rn(this,s.u(t)))return!1;(t=s.aB(t)).layers=s.az(t.layers);const m=s.aC(h,t),v=this._getOperationsToPerform(m);if(v.unimplemented.length>0)throw new Error(`Unimplemented: ${v.unimplemented.join(", ")}.`);if(v.operations.length===0)return!1;for(const w of v.operations)w();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const r=[],c=[];for(const h of t)switch(h.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":r.push(()=>this.addLayer.apply(this,h.args));break;case"removeLayer":r.push(()=>this.removeLayer.apply(this,h.args));break;case"setPaintProperty":r.push(()=>this.setPaintProperty.apply(this,h.args));break;case"setLayoutProperty":r.push(()=>this.setLayoutProperty.apply(this,h.args));break;case"setFilter":r.push(()=>this.setFilter.apply(this,h.args));break;case"addSource":r.push(()=>this.addSource.apply(this,h.args));break;case"removeSource":r.push(()=>this.removeSource.apply(this,h.args));break;case"setLayerZoomRange":r.push(()=>this.setLayerZoomRange.apply(this,h.args));break;case"setLight":r.push(()=>this.setLight.apply(this,h.args));break;case"setGeoJSONSourceData":r.push(()=>this.setGeoJSONSourceData.apply(this,h.args));break;case"setGlyphs":r.push(()=>this.setGlyphs.apply(this,h.args));break;case"setSprite":r.push(()=>this.setSprite.apply(this,h.args));break;case"setSky":r.push(()=>this.setSky.apply(this,h.args));break;case"setTerrain":r.push(()=>this.map.setTerrain.apply(this,h.args));break;case"setTransition":r.push(()=>{});break;default:c.push(h.command)}return{operations:r,unimplemented:c}}addImage(t,r){if(this.getImage(t))return this.fire(new s.j(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,r),this._afterImageUpdated(t)}updateImage(t,r){this.imageManager.updateImage(t,r)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new s.j(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,r,c={}){if(this._checkLoaded(),this.sourceCaches[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!r.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(r).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(s.u.source,`sources.${t}`,r,null,c))return;this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);const h=this.sourceCaches[t]=new ie(t,r,this.dispatcher);h.style=this,h.setEventedParent(this,()=>({isSourceLoaded:h.loaded(),source:h.serialize(),sourceId:t})),h.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error("There is no source with this ID");for(const c in this._layers)if(this._layers[c].source===t)return this.fire(new s.j(new Error(`Source "${t}" cannot be removed while layer "${c}" is using it.`)));const r=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],r.fire(new s.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),r.setEventedParent(null),r.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,r){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const c=this.sourceCaches[t].getSource();if(c.type!=="geojson")throw new Error(`geojsonSource.type is ${c.type}, which is !== 'geojson`);c.setData(r),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,r,c={}){this._checkLoaded();const h=t.id;if(this.getLayer(h))return void this.fire(new s.j(new Error(`Layer "${h}" already exists on this map.`)));let m;if(t.type==="custom"){if(Rn(this,s.aD(t)))return;m=s.aA(t)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(h,t.source),t=s.aB(t),t=s.e(t,{source:h})),this._validate(s.u.layer,`layers.${h}`,t,{arrayIndex:-1},c))return;m=s.aA(t),this._validateLayer(m),m.setEventedParent(this,{layer:{id:h}})}const v=r?this._order.indexOf(r):this._order.length;if(r&&v===-1)this.fire(new s.j(new Error(`Cannot add layer "${h}" before non-existing layer "${r}".`)));else{if(this._order.splice(v,0,h),this._layerOrderChanged=!0,this._layers[h]=m,this._removedLayers[h]&&m.source&&m.type!=="custom"){const w=this._removedLayers[h];delete this._removedLayers[h],w.type!==m.type?this._updatedSources[m.source]="clear":(this._updatedSources[m.source]="reload",this.sourceCaches[m.source].pause())}this._updateLayer(m),m.onAdd&&m.onAdd(this.map)}}moveLayer(t,r){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new s.j(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===r)return;const c=this._order.indexOf(t);this._order.splice(c,1);const h=r?this._order.indexOf(r):this._order.length;r&&h===-1?this.fire(new s.j(new Error(`Cannot move layer "${t}" before non-existing layer "${r}".`))):(this._order.splice(h,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const r=this._layers[t];if(!r)return void this.fire(new s.j(new Error(`Cannot remove non-existing layer "${t}".`)));r.setEventedParent(null);const c=this._order.indexOf(t);this._order.splice(c,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=r,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],r.onRemove&&r.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,r,c){this._checkLoaded();const h=this.getLayer(t);h?h.minzoom===r&&h.maxzoom===c||(r!=null&&(h.minzoom=r),c!=null&&(h.maxzoom=c),this._updateLayer(h)):this.fire(new s.j(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,r,c={}){this._checkLoaded();const h=this.getLayer(t);if(h){if(!s.aE(h.filter,r))return r==null?(h.filter=void 0,void this._updateLayer(h)):void(this._validate(s.u.filter,`layers.${h.id}.filter`,r,null,c)||(h.filter=s.aB(r),this._updateLayer(h)))}else this.fire(new s.j(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return s.aB(this.getLayer(t).filter)}setLayoutProperty(t,r,c,h={}){this._checkLoaded();const m=this.getLayer(t);m?s.aE(m.getLayoutProperty(r),c)||(m.setLayoutProperty(r,c,h),this._updateLayer(m)):this.fire(new s.j(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,r){const c=this.getLayer(t);if(c)return c.getLayoutProperty(r);this.fire(new s.j(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,r,c,h={}){this._checkLoaded();const m=this.getLayer(t);m?s.aE(m.getPaintProperty(r),c)||(m.setPaintProperty(r,c,h)&&this._updateLayer(m),this._changed=!0,this._updatedPaintProps[t]=!0,this._serializedLayers=null):this.fire(new s.j(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,r){return this.getLayer(t).getPaintProperty(r)}setFeatureState(t,r){this._checkLoaded();const c=t.source,h=t.sourceLayer,m=this.sourceCaches[c];if(m===void 0)return void this.fire(new s.j(new Error(`The source '${c}' does not exist in the map's style.`)));const v=m.getSource().type;v==="geojson"&&h?this.fire(new s.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):v!=="vector"||h?(t.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),m.setFeatureState(h,t.id,r)):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,r){this._checkLoaded();const c=t.source,h=this.sourceCaches[c];if(h===void 0)return void this.fire(new s.j(new Error(`The source '${c}' does not exist in the map's style.`)));const m=h.getSource().type,v=m==="vector"?t.sourceLayer:void 0;m!=="vector"||v?r&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new s.j(new Error("A feature id is required to remove its specific state property."))):h.removeFeatureState(v,t.id,r):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const r=t.source,c=t.sourceLayer,h=this.sourceCaches[r];if(h!==void 0)return h.getSource().type!=="vector"||c?(t.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),h.getFeatureState(c,t.id)):void this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.j(new Error(`The source '${r}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=s.aF(this.sourceCaches,m=>m.serialize()),r=this._serializeByIds(this._order,!0),c=this.map.getTerrain()||void 0,h=this.stylesheet;return s.aG({version:h.version,name:h.name,metadata:h.metadata,light:h.light,sky:h.sky,center:h.center,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch,sprite:h.sprite,glyphs:h.glyphs,transition:h.transition,sources:t,layers:r,terrain:c},m=>m!==void 0)}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const r=v=>this._layers[v].type==="fill-extrusion",c={},h=[];for(let v=this._order.length-1;v>=0;v--){const w=this._order[v];if(r(w)){c[w]=v;for(const S of t){const C=S[w];if(C)for(const M of C)h.push(M)}}}h.sort((v,w)=>w.intersectionZ-v.intersectionZ);const m=[];for(let v=this._order.length-1;v>=0;v--){const w=this._order[v];if(r(w))for(let S=h.length-1;S>=0;S--){const C=h[S].feature;if(c[C.layer.id]<v)break;m.push(C),h.pop()}else for(const S of t){const C=S[w];if(C)for(const M of C)m.push(M.feature)}}return m}queryRenderedFeatures(t,r,c){r&&r.filter&&this._validate(s.u.filter,"queryRenderedFeatures.filter",r.filter,null,r);const h={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new s.j(new Error("parameters.layers must be an Array."))),[];for(const w of r.layers){const S=this._layers[w];if(!S)return this.fire(new s.j(new Error(`The layer '${w}' does not exist in the map's style and cannot be queried for features.`))),[];h[S.source]=!0}}const m=[];r.availableImages=this._availableImages;const v=this._serializedAllLayers();for(const w in this.sourceCaches)r.layers&&!h[w]||m.push(Qo(this.sourceCaches[w],this._layers,v,t,r,c));return this.placement&&m.push(function(w,S,C,M,D,R,U){const j={},W=R.queryRenderedSymbols(M),K=[];for(const tt of Object.keys(W).map(Number))K.push(U[tt]);K.sort(tr);for(const tt of K){const q=tt.featureIndex.lookupSymbolFeatures(W[tt.bucketInstanceId],S,tt.bucketIndex,tt.sourceLayerIndex,D.filter,D.layers,D.availableImages,w);for(const H in q){const ot=j[H]=j[H]||[],rt=q[H];rt.sort((ut,_t)=>{const kt=tt.featureSortOrder;if(kt){const Ct=kt.indexOf(ut.featureIndex);return kt.indexOf(_t.featureIndex)-Ct}return _t.featureIndex-ut.featureIndex});for(const ut of rt)ot.push(ut)}}for(const tt in j)j[tt].forEach(q=>{const H=q.feature,ot=C[w[tt].source].getFeatureState(H.layer["source-layer"],H.id);H.source=H.layer.source,H.layer["source-layer"]&&(H.sourceLayer=H.layer["source-layer"]),H.state=ot});return j}(this._layers,v,this.sourceCaches,t,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(m)}querySourceFeatures(t,r){r&&r.filter&&this._validate(s.u.filter,"querySourceFeatures.filter",r.filter,null,r);const c=this.sourceCaches[t];return c?function(h,m){const v=h.getRenderableIds().map(C=>h.getTileByID(C)),w=[],S={};for(let C=0;C<v.length;C++){const M=v[C],D=M.tileID.canonical.key;S[D]||(S[D]=!0,M.querySourceFeatures(w,m))}return w}(c,r):[]}getLight(){return this.light.getLight()}setLight(t,r={}){this._checkLoaded();const c=this.light.getLight();let h=!1;for(const v in t)if(!s.aE(t[v],c[v])){h=!0;break}if(!h)return;const m={now:X.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,r),this.light.updateTransitions(m)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,r={}){const c=this.getSky();let h=!1;if(!t&&!c)return;if(t&&!c)h=!0;else if(!t&&c)h=!0;else for(const v in t)if(!s.aE(t[v],c[v])){h=!0;break}if(!h)return;const m={now:X.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,r),this.sky.updateTransitions(m)}_validate(t,r,c,h,m={}){return(!m||m.validate!==!1)&&Rn(this,t.call(s.u,s.e({key:r,style:this.serialize(),value:c,styleSpec:s.v},h)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),zn().off(It,this._rtlPluginLoaded);for(const r in this._layers)this._layers[r].setEventedParent(null);for(const r in this.sourceCaches){const c=this.sourceCaches[r];c.setEventedParent(null),c.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const r in this.sourceCaches)this.sourceCaches[r].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,r,c,h,m=!1){let v=!1,w=!1;const S={};for(const C of this._order){const M=this._layers[C];if(M.type!=="symbol")continue;if(!S[M.source]){const R=this.sourceCaches[M.source];S[M.source]=R.getRenderableIds(!0).map(U=>R.getTileByID(U)).sort((U,j)=>j.tileID.overscaledZ-U.tileID.overscaledZ||(U.tileID.isLessThan(j.tileID)?-1:1))}const D=this.crossTileSymbolIndex.addLayer(M,S[M.source],t.center.lng);v=v||D}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((m=m||this._layerOrderChanged||c===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(X.now(),t.zoom))&&(this.pauseablePlacement=new Ia(t,this.map.terrain,this._order,m,r,c,h,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,S),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(X.now()),w=!0),v&&this.pauseablePlacement.placement.setStale()),w||v)for(const C of this._order){const M=this._layers[C];M.type==="symbol"&&this.placement.updateLayerOpacities(M,S[M.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(X.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,r){return s._(this,void 0,void 0,function*(){const c=yield this.imageManager.getImages(r.icons);this._updateTilesForChangedImages();const h=this.sourceCaches[r.source];return h&&h.setDependencies(r.tileID.key,r.type,r.icons),c})}getGlyphs(t,r){return s._(this,void 0,void 0,function*(){const c=yield this.glyphManager.getGlyphs(r.stacks),h=this.sourceCaches[r.source];return h&&h.setDependencies(r.tileID.key,r.type,[""]),c})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,r={}){this._checkLoaded(),t&&this._validate(s.u.glyphs,"glyphs",t,null,r)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,r,c={},h){this._checkLoaded();const m=[{id:t,url:r}],v=[...ee(this.stylesheet.sprite),...m];this._validate(s.u.sprite,"sprite",v,null,c)||(this.stylesheet.sprite=v,this._loadSprite(m,!0,h))}removeSprite(t){this._checkLoaded();const r=ee(this.stylesheet.sprite);if(r.find(c=>c.id===t)){if(this._spritesImagesIds[t])for(const c of this._spritesImagesIds[t])this.imageManager.removeImage(c),this._changedImages[c]=!0;r.splice(r.findIndex(c=>c.id===t),1),this.stylesheet.sprite=r.length>0?r:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}else this.fire(new s.j(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return ee(this.stylesheet.sprite)}setSprite(t,r={},c){this._checkLoaded(),t&&this._validate(s.u.sprite,"sprite",t,null,r)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,c):(this._unloadSprite(),c&&c(null)))}}var rr=s.Y([{name:"a_pos",type:"Int16",components:2}]);const Ro={prelude:Te(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Te(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Te(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Te(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Te("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Te(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Te(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Te("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Te("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Te("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Te(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Te(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Te(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Te(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Te(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Te(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Te(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Te(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Te(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Te(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Te(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Te(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Te(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Te(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Te(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Te(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Te("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Te("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Te("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Te("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Te(_,t){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=t.match(/attribute ([\w]+) ([\w]+)/g),h=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),m=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=m?m.concat(h):h,w={};return{fragmentSource:_=_.replace(r,(S,C,M,D,R)=>(w[R]=!0,C==="define"?`
#ifndef HAS_UNIFORM_u_${R}
varying ${M} ${D} ${R};
#else
uniform ${M} ${D} u_${R};
#endif
`:`
#ifdef HAS_UNIFORM_u_${R}
    ${M} ${D} ${R} = u_${R};
#endif
`)),vertexSource:t=t.replace(r,(S,C,M,D,R)=>{const U=D==="float"?"vec2":"vec4",j=R.match(/color/)?"color":U;return w[R]?C==="define"?`
#ifndef HAS_UNIFORM_u_${R}
uniform lowp float u_${R}_t;
attribute ${M} ${U} a_${R};
varying ${M} ${D} ${R};
#else
uniform ${M} ${D} u_${R};
#endif
`:j==="vec4"?`
#ifndef HAS_UNIFORM_u_${R}
    ${R} = a_${R};
#else
    ${M} ${D} ${R} = u_${R};
#endif
`:`
#ifndef HAS_UNIFORM_u_${R}
    ${R} = unpack_mix_${j}(a_${R}, u_${R}_t);
#else
    ${M} ${D} ${R} = u_${R};
#endif
`:C==="define"?`
#ifndef HAS_UNIFORM_u_${R}
uniform lowp float u_${R}_t;
attribute ${M} ${U} a_${R};
#else
uniform ${M} ${D} u_${R};
#endif
`:j==="vec4"?`
#ifndef HAS_UNIFORM_u_${R}
    ${M} ${D} ${R} = a_${R};
#else
    ${M} ${D} ${R} = u_${R};
#endif
`:`
#ifndef HAS_UNIFORM_u_${R}
    ${M} ${D} ${R} = unpack_mix_${j}(a_${R}, u_${R}_t);
#else
    ${M} ${D} ${R} = u_${R};
#endif
`}),staticAttributes:c,staticUniforms:v}}class xl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,r,c,h,m,v,w,S,C){this.context=t;let M=this.boundPaintVertexBuffers.length!==h.length;for(let D=0;!M&&D<h.length;D++)this.boundPaintVertexBuffers[D]!==h[D]&&(M=!0);!this.vao||this.boundProgram!==r||this.boundLayoutVertexBuffer!==c||M||this.boundIndexBuffer!==m||this.boundVertexOffset!==v||this.boundDynamicVertexBuffer!==w||this.boundDynamicVertexBuffer2!==S||this.boundDynamicVertexBuffer3!==C?this.freshBind(r,c,h,m,v,w,S,C):(t.bindVertexArray.set(this.vao),w&&w.bind(),m&&m.dynamicDraw&&m.bind(),S&&S.bind(),C&&C.bind())}freshBind(t,r,c,h,m,v,w,S){const C=t.numAttributes,M=this.context,D=M.gl;this.vao&&this.destroy(),this.vao=M.createVertexArray(),M.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=r,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=h,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=v,this.boundDynamicVertexBuffer2=w,this.boundDynamicVertexBuffer3=S,r.enableAttributes(D,t);for(const R of c)R.enableAttributes(D,t);v&&v.enableAttributes(D,t),w&&w.enableAttributes(D,t),S&&S.enableAttributes(D,t),r.bind(),r.setVertexAttribPointers(D,t,m);for(const R of c)R.bind(),R.setVertexAttribPointers(D,t,m);v&&(v.bind(),v.setVertexAttribPointers(D,t,m)),h&&h.bind(),w&&(w.bind(),w.setVertexAttribPointers(D,t,m)),S&&(S.bind(),S.setVertexAttribPointers(D,t,m)),M.currentNumAttributes=C}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const wl=(_,t,r,c,h)=>({u_matrix:_,u_texture:0,u_ele_delta:t,u_fog_matrix:r,u_fog_color:c?c.properties.get("fog-color"):s.aM.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:c?c.calculateFogBlendOpacity(h):0,u_horizon_color:c?c.properties.get("horizon-color"):s.aM.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1});function Or(_){const t=[];for(let r=0;r<_.length;r++){if(_[r]===null)continue;const c=_[r].split(" ");t.push(c.pop())}return t}class kl{constructor(t,r,c,h,m,v){const w=t.gl;this.program=w.createProgram();const S=Or(r.staticAttributes),C=c?c.getBinderAttributes():[],M=S.concat(C),D=Ro.prelude.staticUniforms?Or(Ro.prelude.staticUniforms):[],R=r.staticUniforms?Or(r.staticUniforms):[],U=c?c.getBinderUniforms():[],j=D.concat(R).concat(U),W=[];for(const ut of j)W.indexOf(ut)<0&&W.push(ut);const K=c?c.defines():[];m&&K.push("#define OVERDRAW_INSPECTOR;"),v&&K.push("#define TERRAIN3D;");const tt=K.concat(Ro.prelude.fragmentSource,r.fragmentSource).join(`
`),q=K.concat(Ro.prelude.vertexSource,r.vertexSource).join(`
`),H=w.createShader(w.FRAGMENT_SHADER);if(w.isContextLost())return void(this.failedToCreate=!0);if(w.shaderSource(H,tt),w.compileShader(H),!w.getShaderParameter(H,w.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${w.getShaderInfoLog(H)}`);w.attachShader(this.program,H);const ot=w.createShader(w.VERTEX_SHADER);if(w.isContextLost())return void(this.failedToCreate=!0);if(w.shaderSource(ot,q),w.compileShader(ot),!w.getShaderParameter(ot,w.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${w.getShaderInfoLog(ot)}`);w.attachShader(this.program,ot),this.attributes={};const rt={};this.numAttributes=M.length;for(let ut=0;ut<this.numAttributes;ut++)M[ut]&&(w.bindAttribLocation(this.program,ut,M[ut]),this.attributes[M[ut]]=ut);if(w.linkProgram(this.program),!w.getProgramParameter(this.program,w.LINK_STATUS))throw new Error(`Program failed to link: ${w.getProgramInfoLog(this.program)}`);w.deleteShader(ot),w.deleteShader(H);for(let ut=0;ut<W.length;ut++){const _t=W[ut];if(_t&&!rt[_t]){const kt=w.getUniformLocation(this.program,_t);kt&&(rt[_t]=kt)}}this.fixedUniforms=h(t,rt),this.terrainUniforms=((ut,_t)=>({u_depth:new s.aH(ut,_t.u_depth),u_terrain:new s.aH(ut,_t.u_terrain),u_terrain_dim:new s.aI(ut,_t.u_terrain_dim),u_terrain_matrix:new s.aJ(ut,_t.u_terrain_matrix),u_terrain_unpack:new s.aK(ut,_t.u_terrain_unpack),u_terrain_exaggeration:new s.aI(ut,_t.u_terrain_exaggeration)}))(t,rt),this.binderUniforms=c?c.getUniforms(t,rt):[]}draw(t,r,c,h,m,v,w,S,C,M,D,R,U,j,W,K,tt,q){const H=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(c),t.setStencilMode(h),t.setColorMode(m),t.setCullFace(v),S){t.activeTexture.set(H.TEXTURE2),H.bindTexture(H.TEXTURE_2D,S.depthTexture),t.activeTexture.set(H.TEXTURE3),H.bindTexture(H.TEXTURE_2D,S.texture);for(const rt in this.terrainUniforms)this.terrainUniforms[rt].set(S[rt])}for(const rt in this.fixedUniforms)this.fixedUniforms[rt].set(w[rt]);W&&W.setUniforms(t,this.binderUniforms,U,{zoom:j});let ot=0;switch(r){case H.LINES:ot=2;break;case H.TRIANGLES:ot=3;break;case H.LINE_STRIP:ot=1}for(const rt of R.get()){const ut=rt.vaos||(rt.vaos={});(ut[C]||(ut[C]=new xl)).bind(t,this,M,W?W.getPaintVertexBuffers():[],D,rt.vertexOffset,K,tt,q),H.drawElements(r,rt.primitiveLength*ot,H.UNSIGNED_SHORT,rt.primitiveOffset*ot*2)}}}function _s(_,t,r){const c=1/ne(r,1,t.transform.tileZoom),h=Math.pow(2,r.tileID.overscaledZ),m=r.tileSize*Math.pow(2,t.transform.tileZoom)/h,v=m*(r.tileID.canonical.x+r.tileID.wrap*h),w=m*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[c,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[v>>16,w>>16],u_pixel_coord_lower:[65535&v,65535&w]}}const Ta=(_,t,r,c)=>{const h=t.style.light,m=h.properties.get("position"),v=[m.x,m.y,m.z],w=function(){var C=new s.A(9);return s.A!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[5]=0,C[6]=0,C[7]=0),C[0]=1,C[4]=1,C[8]=1,C}();h.properties.get("anchor")==="viewport"&&function(C,M){var D=Math.sin(M),R=Math.cos(M);C[0]=R,C[1]=D,C[2]=0,C[3]=-D,C[4]=R,C[5]=0,C[6]=0,C[7]=0,C[8]=1}(w,-t.transform.angle),function(C,M,D){var R=M[0],U=M[1],j=M[2];C[0]=R*D[0]+U*D[3]+j*D[6],C[1]=R*D[1]+U*D[4]+j*D[7],C[2]=R*D[2]+U*D[5]+j*D[8]}(v,v,w);const S=h.properties.get("color");return{u_matrix:_,u_lightpos:v,u_lightintensity:h.properties.get("intensity"),u_lightcolor:[S.r,S.g,S.b],u_vertical_gradient:+r,u_opacity:c}},fs=(_,t,r,c,h,m,v)=>s.e(Ta(_,t,r,c),_s(m,t,v),{u_height_factor:-Math.pow(2,h.overscaledZ)/v.tileSize/8}),Nr=_=>({u_matrix:_}),Xc=(_,t,r,c)=>s.e(Nr(_),_s(r,t,c)),Kc=(_,t)=>({u_matrix:_,u_world:t}),yd=(_,t,r,c,h)=>s.e(Xc(_,t,r,c),{u_world:h}),ar=(_,t,r,c)=>{const h=_.transform;let m,v;if(c.paint.get("circle-pitch-alignment")==="map"){const w=ne(r,1,h.zoom);m=!0,v=[w,w]}else m=!1,v=h.pixelsToGLUnits;return{u_camera_to_center_distance:h.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(t.posMatrix,r,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:v}},gs=(_,t,r)=>({u_matrix:_,u_inv_matrix:t,u_camera_to_center_distance:r.cameraToCenterDistance,u_viewport_size:[r.width,r.height]}),Xi=(_,t,r=1)=>({u_matrix:_,u_color:t,u_overlay:0,u_overlay_scale:r}),Ki=_=>({u_matrix:_}),bs=(_,t,r,c)=>({u_matrix:_,u_extrude_scale:ne(t,1,r),u_intensity:c}),Ca=(_,t,r,c)=>{const h=s.H();s.aP(h,0,_.width,_.height,0,0,1);const m=_.context.gl;return{u_matrix:h,u_world:[m.drawingBufferWidth,m.drawingBufferHeight],u_image:r,u_color_ramp:c,u_opacity:t.paint.get("heatmap-opacity")}};function Yc(_,t){const r=Math.pow(2,t.canonical.z),c=t.canonical.y;return[new s.Z(0,c/r).toLngLat().lat,new s.Z(0,(c+1)/r).toLngLat().lat]}const ys=(_,t,r,c)=>{const h=_.transform;return{u_matrix:Qc(_,t,r,c),u_ratio:1/ne(t,1,h.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/h.pixelsToGLUnits[0],1/h.pixelsToGLUnits[1]]}},Ur=(_,t,r,c,h)=>s.e(ys(_,t,r,h),{u_image:0,u_image_height:c}),vd=(_,t,r,c,h)=>{const m=_.transform,v=Jc(t,m);return{u_matrix:Qc(_,t,r,h),u_texsize:t.imageAtlasTexture.size,u_ratio:1/ne(t,1,m.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[v,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},xd=(_,t,r,c,h,m)=>{const v=_.lineAtlas,w=Jc(t,_.transform),S=r.layout.get("line-cap")==="round",C=v.getDash(c.from,S),M=v.getDash(c.to,S),D=C.width*h.fromScale,R=M.width*h.toScale;return s.e(ys(_,t,r,m),{u_patternscale_a:[w/D,-C.height/2],u_patternscale_b:[w/R,-M.height/2],u_sdfgamma:v.width/(256*Math.min(D,R)*_.pixelRatio)/2,u_image:0,u_tex_y_a:C.y,u_tex_y_b:M.y,u_mix:h.t})};function Jc(_,t){return 1/ne(_,1,t.tileZoom)}function Qc(_,t,r,c){return _.translatePosMatrix(c?c.posMatrix:t.tileID.posMatrix,t,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}const wd=(_,t,r,c,h)=>{return{u_matrix:_,u_tl_parent:t,u_scale_parent:r,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*h.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:h.paint.get("raster-brightness-min"),u_brightness_high:h.paint.get("raster-brightness-max"),u_saturation_factor:(v=h.paint.get("raster-saturation"),v>0?1-1/(1.001-v):-v),u_contrast_factor:(m=h.paint.get("raster-contrast"),m>0?1/(1-m):1+m),u_spin_weights:kd(h.paint.get("raster-hue-rotate"))};var m,v};function kd(_){_*=Math.PI/180;const t=Math.sin(_),r=Math.cos(_);return[(2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3]}const Ea=(_,t,r,c,h,m,v,w,S,C,M,D,R,U)=>{const j=v.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:j.cameraToCenterDistance,u_pitch:j.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:j.width/j.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:S,u_coord_matrix:C,u_is_text:+D,u_pitch_with_map:+c,u_is_along_line:h,u_is_variable_anchor:m,u_texsize:R,u_texture:0,u_translation:M,u_pitched_scale:U}},vs=(_,t,r,c,h,m,v,w,S,C,M,D,R,U,j)=>{const W=v.transform;return s.e(Ea(_,t,r,c,h,m,v,w,S,C,M,D,R,j),{u_gamma_scale:c?Math.cos(W._pitch)*W.cameraToCenterDistance:1,u_device_pixel_ratio:v.pixelRatio,u_is_halo:+U})},xs=(_,t,r,c,h,m,v,w,S,C,M,D,R,U)=>s.e(vs(_,t,r,c,h,m,v,w,S,C,M,!0,D,!0,U),{u_texsize_icon:R,u_texture_icon:1}),Sl=(_,t,r)=>({u_matrix:_,u_opacity:t,u_color:r}),Il=(_,t,r,c,h,m)=>s.e(function(v,w,S,C){const M=S.imageManager.getPattern(v.from.toString()),D=S.imageManager.getPattern(v.to.toString()),{width:R,height:U}=S.imageManager.getPixelSize(),j=Math.pow(2,C.tileID.overscaledZ),W=C.tileSize*Math.pow(2,S.transform.tileZoom)/j,K=W*(C.tileID.canonical.x+C.tileID.wrap*j),tt=W*C.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:M.tl,u_pattern_br_a:M.br,u_pattern_tl_b:D.tl,u_pattern_br_b:D.br,u_texsize:[R,U],u_mix:w.t,u_pattern_size_a:M.displaySize,u_pattern_size_b:D.displaySize,u_scale_a:w.fromScale,u_scale_b:w.toScale,u_tile_units_to_pixels:1/ne(C,1,S.transform.tileZoom),u_pixel_coord_upper:[K>>16,tt>>16],u_pixel_coord_lower:[65535&K,65535&tt]}}(c,m,r,h),{u_matrix:_,u_opacity:t}),to={fillExtrusion:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_lightpos:new s.aN(_,t.u_lightpos),u_lightintensity:new s.aI(_,t.u_lightintensity),u_lightcolor:new s.aN(_,t.u_lightcolor),u_vertical_gradient:new s.aI(_,t.u_vertical_gradient),u_opacity:new s.aI(_,t.u_opacity)}),fillExtrusionPattern:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_lightpos:new s.aN(_,t.u_lightpos),u_lightintensity:new s.aI(_,t.u_lightintensity),u_lightcolor:new s.aN(_,t.u_lightcolor),u_vertical_gradient:new s.aI(_,t.u_vertical_gradient),u_height_factor:new s.aI(_,t.u_height_factor),u_image:new s.aH(_,t.u_image),u_texsize:new s.aO(_,t.u_texsize),u_pixel_coord_upper:new s.aO(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(_,t.u_pixel_coord_lower),u_scale:new s.aN(_,t.u_scale),u_fade:new s.aI(_,t.u_fade),u_opacity:new s.aI(_,t.u_opacity)}),fill:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix)}),fillPattern:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_image:new s.aH(_,t.u_image),u_texsize:new s.aO(_,t.u_texsize),u_pixel_coord_upper:new s.aO(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(_,t.u_pixel_coord_lower),u_scale:new s.aN(_,t.u_scale),u_fade:new s.aI(_,t.u_fade)}),fillOutline:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_world:new s.aO(_,t.u_world)}),fillOutlinePattern:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_world:new s.aO(_,t.u_world),u_image:new s.aH(_,t.u_image),u_texsize:new s.aO(_,t.u_texsize),u_pixel_coord_upper:new s.aO(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(_,t.u_pixel_coord_lower),u_scale:new s.aN(_,t.u_scale),u_fade:new s.aI(_,t.u_fade)}),circle:(_,t)=>({u_camera_to_center_distance:new s.aI(_,t.u_camera_to_center_distance),u_scale_with_map:new s.aH(_,t.u_scale_with_map),u_pitch_with_map:new s.aH(_,t.u_pitch_with_map),u_extrude_scale:new s.aO(_,t.u_extrude_scale),u_device_pixel_ratio:new s.aI(_,t.u_device_pixel_ratio),u_matrix:new s.aJ(_,t.u_matrix)}),collisionBox:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_pixel_extrude_scale:new s.aO(_,t.u_pixel_extrude_scale)}),collisionCircle:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_inv_matrix:new s.aJ(_,t.u_inv_matrix),u_camera_to_center_distance:new s.aI(_,t.u_camera_to_center_distance),u_viewport_size:new s.aO(_,t.u_viewport_size)}),debug:(_,t)=>({u_color:new s.aL(_,t.u_color),u_matrix:new s.aJ(_,t.u_matrix),u_overlay:new s.aH(_,t.u_overlay),u_overlay_scale:new s.aI(_,t.u_overlay_scale)}),clippingMask:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix)}),heatmap:(_,t)=>({u_extrude_scale:new s.aI(_,t.u_extrude_scale),u_intensity:new s.aI(_,t.u_intensity),u_matrix:new s.aJ(_,t.u_matrix)}),heatmapTexture:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_world:new s.aO(_,t.u_world),u_image:new s.aH(_,t.u_image),u_color_ramp:new s.aH(_,t.u_color_ramp),u_opacity:new s.aI(_,t.u_opacity)}),hillshade:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_image:new s.aH(_,t.u_image),u_latrange:new s.aO(_,t.u_latrange),u_light:new s.aO(_,t.u_light),u_shadow:new s.aL(_,t.u_shadow),u_highlight:new s.aL(_,t.u_highlight),u_accent:new s.aL(_,t.u_accent)}),hillshadePrepare:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_image:new s.aH(_,t.u_image),u_dimension:new s.aO(_,t.u_dimension),u_zoom:new s.aI(_,t.u_zoom),u_unpack:new s.aK(_,t.u_unpack)}),line:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_ratio:new s.aI(_,t.u_ratio),u_device_pixel_ratio:new s.aI(_,t.u_device_pixel_ratio),u_units_to_pixels:new s.aO(_,t.u_units_to_pixels)}),lineGradient:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_ratio:new s.aI(_,t.u_ratio),u_device_pixel_ratio:new s.aI(_,t.u_device_pixel_ratio),u_units_to_pixels:new s.aO(_,t.u_units_to_pixels),u_image:new s.aH(_,t.u_image),u_image_height:new s.aI(_,t.u_image_height)}),linePattern:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_texsize:new s.aO(_,t.u_texsize),u_ratio:new s.aI(_,t.u_ratio),u_device_pixel_ratio:new s.aI(_,t.u_device_pixel_ratio),u_image:new s.aH(_,t.u_image),u_units_to_pixels:new s.aO(_,t.u_units_to_pixels),u_scale:new s.aN(_,t.u_scale),u_fade:new s.aI(_,t.u_fade)}),lineSDF:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_ratio:new s.aI(_,t.u_ratio),u_device_pixel_ratio:new s.aI(_,t.u_device_pixel_ratio),u_units_to_pixels:new s.aO(_,t.u_units_to_pixels),u_patternscale_a:new s.aO(_,t.u_patternscale_a),u_patternscale_b:new s.aO(_,t.u_patternscale_b),u_sdfgamma:new s.aI(_,t.u_sdfgamma),u_image:new s.aH(_,t.u_image),u_tex_y_a:new s.aI(_,t.u_tex_y_a),u_tex_y_b:new s.aI(_,t.u_tex_y_b),u_mix:new s.aI(_,t.u_mix)}),raster:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_tl_parent:new s.aO(_,t.u_tl_parent),u_scale_parent:new s.aI(_,t.u_scale_parent),u_buffer_scale:new s.aI(_,t.u_buffer_scale),u_fade_t:new s.aI(_,t.u_fade_t),u_opacity:new s.aI(_,t.u_opacity),u_image0:new s.aH(_,t.u_image0),u_image1:new s.aH(_,t.u_image1),u_brightness_low:new s.aI(_,t.u_brightness_low),u_brightness_high:new s.aI(_,t.u_brightness_high),u_saturation_factor:new s.aI(_,t.u_saturation_factor),u_contrast_factor:new s.aI(_,t.u_contrast_factor),u_spin_weights:new s.aN(_,t.u_spin_weights)}),symbolIcon:(_,t)=>({u_is_size_zoom_constant:new s.aH(_,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(_,t.u_is_size_feature_constant),u_size_t:new s.aI(_,t.u_size_t),u_size:new s.aI(_,t.u_size),u_camera_to_center_distance:new s.aI(_,t.u_camera_to_center_distance),u_pitch:new s.aI(_,t.u_pitch),u_rotate_symbol:new s.aH(_,t.u_rotate_symbol),u_aspect_ratio:new s.aI(_,t.u_aspect_ratio),u_fade_change:new s.aI(_,t.u_fade_change),u_matrix:new s.aJ(_,t.u_matrix),u_label_plane_matrix:new s.aJ(_,t.u_label_plane_matrix),u_coord_matrix:new s.aJ(_,t.u_coord_matrix),u_is_text:new s.aH(_,t.u_is_text),u_pitch_with_map:new s.aH(_,t.u_pitch_with_map),u_is_along_line:new s.aH(_,t.u_is_along_line),u_is_variable_anchor:new s.aH(_,t.u_is_variable_anchor),u_texsize:new s.aO(_,t.u_texsize),u_texture:new s.aH(_,t.u_texture),u_translation:new s.aO(_,t.u_translation),u_pitched_scale:new s.aI(_,t.u_pitched_scale)}),symbolSDF:(_,t)=>({u_is_size_zoom_constant:new s.aH(_,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(_,t.u_is_size_feature_constant),u_size_t:new s.aI(_,t.u_size_t),u_size:new s.aI(_,t.u_size),u_camera_to_center_distance:new s.aI(_,t.u_camera_to_center_distance),u_pitch:new s.aI(_,t.u_pitch),u_rotate_symbol:new s.aH(_,t.u_rotate_symbol),u_aspect_ratio:new s.aI(_,t.u_aspect_ratio),u_fade_change:new s.aI(_,t.u_fade_change),u_matrix:new s.aJ(_,t.u_matrix),u_label_plane_matrix:new s.aJ(_,t.u_label_plane_matrix),u_coord_matrix:new s.aJ(_,t.u_coord_matrix),u_is_text:new s.aH(_,t.u_is_text),u_pitch_with_map:new s.aH(_,t.u_pitch_with_map),u_is_along_line:new s.aH(_,t.u_is_along_line),u_is_variable_anchor:new s.aH(_,t.u_is_variable_anchor),u_texsize:new s.aO(_,t.u_texsize),u_texture:new s.aH(_,t.u_texture),u_gamma_scale:new s.aI(_,t.u_gamma_scale),u_device_pixel_ratio:new s.aI(_,t.u_device_pixel_ratio),u_is_halo:new s.aH(_,t.u_is_halo),u_translation:new s.aO(_,t.u_translation),u_pitched_scale:new s.aI(_,t.u_pitched_scale)}),symbolTextAndIcon:(_,t)=>({u_is_size_zoom_constant:new s.aH(_,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(_,t.u_is_size_feature_constant),u_size_t:new s.aI(_,t.u_size_t),u_size:new s.aI(_,t.u_size),u_camera_to_center_distance:new s.aI(_,t.u_camera_to_center_distance),u_pitch:new s.aI(_,t.u_pitch),u_rotate_symbol:new s.aH(_,t.u_rotate_symbol),u_aspect_ratio:new s.aI(_,t.u_aspect_ratio),u_fade_change:new s.aI(_,t.u_fade_change),u_matrix:new s.aJ(_,t.u_matrix),u_label_plane_matrix:new s.aJ(_,t.u_label_plane_matrix),u_coord_matrix:new s.aJ(_,t.u_coord_matrix),u_is_text:new s.aH(_,t.u_is_text),u_pitch_with_map:new s.aH(_,t.u_pitch_with_map),u_is_along_line:new s.aH(_,t.u_is_along_line),u_is_variable_anchor:new s.aH(_,t.u_is_variable_anchor),u_texsize:new s.aO(_,t.u_texsize),u_texsize_icon:new s.aO(_,t.u_texsize_icon),u_texture:new s.aH(_,t.u_texture),u_texture_icon:new s.aH(_,t.u_texture_icon),u_gamma_scale:new s.aI(_,t.u_gamma_scale),u_device_pixel_ratio:new s.aI(_,t.u_device_pixel_ratio),u_is_halo:new s.aH(_,t.u_is_halo),u_translation:new s.aO(_,t.u_translation),u_pitched_scale:new s.aI(_,t.u_pitched_scale)}),background:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_opacity:new s.aI(_,t.u_opacity),u_color:new s.aL(_,t.u_color)}),backgroundPattern:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_opacity:new s.aI(_,t.u_opacity),u_image:new s.aH(_,t.u_image),u_pattern_tl_a:new s.aO(_,t.u_pattern_tl_a),u_pattern_br_a:new s.aO(_,t.u_pattern_br_a),u_pattern_tl_b:new s.aO(_,t.u_pattern_tl_b),u_pattern_br_b:new s.aO(_,t.u_pattern_br_b),u_texsize:new s.aO(_,t.u_texsize),u_mix:new s.aI(_,t.u_mix),u_pattern_size_a:new s.aO(_,t.u_pattern_size_a),u_pattern_size_b:new s.aO(_,t.u_pattern_size_b),u_scale_a:new s.aI(_,t.u_scale_a),u_scale_b:new s.aI(_,t.u_scale_b),u_pixel_coord_upper:new s.aO(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(_,t.u_pixel_coord_lower),u_tile_units_to_pixels:new s.aI(_,t.u_tile_units_to_pixels)}),terrain:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_texture:new s.aH(_,t.u_texture),u_ele_delta:new s.aI(_,t.u_ele_delta),u_fog_matrix:new s.aJ(_,t.u_fog_matrix),u_fog_color:new s.aL(_,t.u_fog_color),u_fog_ground_blend:new s.aI(_,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.aI(_,t.u_fog_ground_blend_opacity),u_horizon_color:new s.aL(_,t.u_horizon_color),u_horizon_fog_blend:new s.aI(_,t.u_horizon_fog_blend)}),terrainDepth:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_ele_delta:new s.aI(_,t.u_ele_delta)}),terrainCoords:(_,t)=>({u_matrix:new s.aJ(_,t.u_matrix),u_texture:new s.aH(_,t.u_texture),u_terrain_coords_id:new s.aI(_,t.u_terrain_coords_id),u_ele_delta:new s.aI(_,t.u_ele_delta)}),sky:(_,t)=>({u_sky_color:new s.aL(_,t.u_sky_color),u_horizon_color:new s.aL(_,t.u_horizon_color),u_horizon:new s.aI(_,t.u_horizon),u_sky_horizon_blend:new s.aI(_,t.u_sky_horizon_blend)})};class Sd{constructor(t,r,c){this.context=t;const h=t.gl;this.buffer=h.createBuffer(),this.dynamicDraw=!!c,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),h.bufferData(h.ELEMENT_ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?h.DYNAMIC_DRAW:h.STATIC_DRAW),this.dynamicDraw||delete r.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const r=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Tl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Aa{constructor(t,r,c,h){this.length=r.length,this.attributes=c,this.itemSize=r.bytesPerElement,this.dynamicDraw=h,this.context=t;const m=t.gl;this.buffer=m.createBuffer(),t.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete r.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const r=this.context.gl;this.bind(),r.bufferSubData(r.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,r){for(let c=0;c<this.attributes.length;c++){const h=r.attributes[this.attributes[c].name];h!==void 0&&t.enableVertexAttribArray(h)}}setVertexAttribPointers(t,r,c){for(let h=0;h<this.attributes.length;h++){const m=this.attributes[h],v=r.attributes[m.name];v!==void 0&&t.vertexAttribPointer(v,m.components,t[Tl[m.type]],!1,this.itemSize,m.offset+this.itemSize*(c||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const sr=new WeakMap;function ws(_){var t;if(sr.has(_))return sr.get(_);{const r=(t=_.getParameter(_.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return sr.set(_,r),r}}class xe{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Id extends xe{getDefault(){return s.aM.transparent}set(t){const r=this.current;(t.r!==r.r||t.g!==r.g||t.b!==r.b||t.a!==r.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Hr extends xe{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Td extends xe{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class tu extends xe{getDefault(){return[!0,!0,!0,!0]}set(t){const r=this.current;(t[0]!==r[0]||t[1]!==r[1]||t[2]!==r[2]||t[3]!==r[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Cd extends xe{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class eu extends xe{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Cl extends xe{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const r=this.current;(t.func!==r.func||t.ref!==r.ref||t.mask!==r.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class iu extends xe{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const r=this.current;(t[0]!==r[0]||t[1]!==r[1]||t[2]!==r[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class nu extends xe{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const r=this.gl;t?r.enable(r.STENCIL_TEST):r.disable(r.STENCIL_TEST),this.current=t,this.dirty=!1}}class ou extends xe{getDefault(){return[0,1]}set(t){const r=this.current;(t[0]!==r[0]||t[1]!==r[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class ru extends xe{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const r=this.gl;t?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST),this.current=t,this.dirty=!1}}class lr extends xe{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class au extends xe{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const r=this.gl;t?r.enable(r.BLEND):r.disable(r.BLEND),this.current=t,this.dirty=!1}}class Ed extends xe{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const r=this.current;(t[0]!==r[0]||t[1]!==r[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class su extends xe{getDefault(){return s.aM.transparent}set(t){const r=this.current;(t.r!==r.r||t.g!==r.g||t.b!==r.b||t.a!==r.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Ma extends xe{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Ad extends xe{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const r=this.gl;t?r.enable(r.CULL_FACE):r.disable(r.CULL_FACE),this.current=t,this.dirty=!1}}class ks extends xe{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class Md extends xe{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class Dd extends xe{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class lu extends xe{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class cu extends xe{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const r=this.current;(t[0]!==r[0]||t[1]!==r[1]||t[2]!==r[2]||t[3]!==r[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class uu extends xe{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class El extends xe{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const r=this.gl;r.bindRenderbuffer(r.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class hu extends xe{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const r=this.gl;r.bindTexture(r.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Ss extends xe{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const r=this.gl;r.bindBuffer(r.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class uo extends xe{getDefault(){return null}set(t){const r=this.gl;r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Al extends xe{getDefault(){return null}set(t){var r;if(t===this.current&&!this.dirty)return;const c=this.gl;ws(c)?c.bindVertexArray(t):(r=c.getExtension("OES_vertex_array_object"))===null||r===void 0||r.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class Ml extends xe{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const r=this.gl;r.pixelStorei(r.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Dl extends xe{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const r=this.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class du extends xe{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const r=this.gl;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Da extends xe{constructor(t,r){super(t),this.context=t,this.parent=r}getDefault(){return null}}class cr extends Da{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const r=this.gl;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Pl extends Da{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const r=this.gl;r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Pd extends Da{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const r=this.gl;r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class zd{constructor(t,r,c,h,m){this.context=t,this.width=r,this.height=c;const v=t.gl,w=this.framebuffer=v.createFramebuffer();if(this.colorAttachment=new cr(t,w),h)this.depthAttachment=m?new Pd(t,w):new Pl(t,w);else if(m)throw new Error("Stencil cannot be set without depth");if(v.checkFramebufferStatus(v.FRAMEBUFFER)!==v.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const t=this.context.gl,r=this.colorAttachment.get();if(r&&t.deleteTexture(r),this.depthAttachment){const c=this.depthAttachment.get();c&&t.deleteRenderbuffer(c)}t.deleteFramebuffer(this.framebuffer)}}class ei{constructor(t,r,c){this.blendFunction=t,this.blendColor=r,this.mask=c}}ei.Replace=[1,0],ei.disabled=new ei(ei.Replace,s.aM.transparent,[!1,!1,!1,!1]),ei.unblended=new ei(ei.Replace,s.aM.transparent,[!0,!0,!0,!0]),ei.alphaBlended=new ei([1,771],s.aM.transparent,[!0,!0,!0,!0]);class Ld{constructor(t){var r,c;if(this.gl=t,this.clearColor=new Id(this),this.clearDepth=new Hr(this),this.clearStencil=new Td(this),this.colorMask=new tu(this),this.depthMask=new Cd(this),this.stencilMask=new eu(this),this.stencilFunc=new Cl(this),this.stencilOp=new iu(this),this.stencilTest=new nu(this),this.depthRange=new ou(this),this.depthTest=new ru(this),this.depthFunc=new lr(this),this.blend=new au(this),this.blendFunc=new Ed(this),this.blendColor=new su(this),this.blendEquation=new Ma(this),this.cullFace=new Ad(this),this.cullFaceSide=new ks(this),this.frontFace=new Md(this),this.program=new Dd(this),this.activeTexture=new lu(this),this.viewport=new cu(this),this.bindFramebuffer=new uu(this),this.bindRenderbuffer=new El(this),this.bindTexture=new hu(this),this.bindVertexBuffer=new Ss(this),this.bindElementBuffer=new uo(this),this.bindVertexArray=new Al(this),this.pixelStoreUnpack=new Ml(this),this.pixelStoreUnpackPremultiplyAlpha=new Dl(this),this.pixelStoreUnpackFlipY=new du(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),ws(t)){this.HALF_FLOAT=t.HALF_FLOAT;const h=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(r=t.RGBA16F)!==null&&r!==void 0?r:h==null?void 0:h.RGBA16F_EXT,this.RGB16F=(c=t.RGB16F)!==null&&c!==void 0?c:h==null?void 0:h.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const h=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=h==null?void 0:h.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,r){return new Sd(this,t,r)}createVertexBuffer(t,r,c){return new Aa(this,t,r,c)}createRenderbuffer(t,r,c){const h=this.gl,m=h.createRenderbuffer();return this.bindRenderbuffer.set(m),h.renderbufferStorage(h.RENDERBUFFER,t,r,c),this.bindRenderbuffer.set(null),m}createFramebuffer(t,r,c,h){return new zd(this,t,r,c,h)}clear({color:t,depth:r,stencil:c}){const h=this.gl;let m=0;t&&(m|=h.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),r!==void 0&&(m|=h.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),c!==void 0&&(m|=h.STENCIL_BUFFER_BIT,this.clearStencil.set(c),this.stencilMask.set(255)),h.clear(m)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){s.aE(t.blendFunction,ei.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return ws(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var r;return ws(this.gl)?this.gl.deleteVertexArray(t):(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}class _e{constructor(t,r,c){this.func=t,this.mask=r,this.range=c}}_e.ReadOnly=!1,_e.ReadWrite=!0,_e.disabled=new _e(519,_e.ReadOnly,[0,1]);const zl=7680;class Fe{constructor(t,r,c,h,m,v){this.test=t,this.ref=r,this.mask=c,this.fail=h,this.depthFail=m,this.pass=v}}Fe.disabled=new Fe({func:519,mask:0},0,0,zl,zl,zl);class Pe{constructor(t,r,c){this.enable=t,this.mode=r,this.frontFace=c}}let ur;function Pa(_,t,r,c,h){const m=_.context,v=m.gl,w=_.useProgram("collisionBox"),S=[];let C=0,M=0;for(let tt=0;tt<c.length;tt++){const q=c[tt],H=t.getTile(q).getBucket(r);if(!H)continue;const ot=h?H.textCollisionBox:H.iconCollisionBox,rt=H.collisionCircleArray;if(rt.length>0){const ut=s.H();s.aQ(ut,H.placementInvProjMatrix,_.transform.glCoordMatrix),s.aQ(ut,ut,H.placementViewportMatrix),S.push({circleArray:rt,circleOffset:M,transform:q.posMatrix,invTransform:ut,coord:q}),C+=rt.length/4,M=C}ot&&w.draw(m,v.LINES,_e.disabled,Fe.disabled,_.colorModeForRenderPass(),Pe.disabled,{u_matrix:q.posMatrix,u_pixel_extrude_scale:[1/(D=_.transform).width,1/D.height]},_.style.map.terrain&&_.style.map.terrain.getTerrainData(q),r.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,null,_.transform.zoom,null,null,ot.collisionVertexBuffer)}var D;if(!h||!S.length)return;const R=_.useProgram("collisionCircle"),U=new s.aR;U.resize(4*C),U._trim();let j=0;for(const tt of S)for(let q=0;q<tt.circleArray.length/4;q++){const H=4*q,ot=tt.circleArray[H+0],rt=tt.circleArray[H+1],ut=tt.circleArray[H+2],_t=tt.circleArray[H+3];U.emplace(j++,ot,rt,ut,_t,0),U.emplace(j++,ot,rt,ut,_t,1),U.emplace(j++,ot,rt,ut,_t,2),U.emplace(j++,ot,rt,ut,_t,3)}(!ur||ur.length<2*C)&&(ur=function(tt){const q=2*tt,H=new s.aT;H.resize(q),H._trim();for(let ot=0;ot<q;ot++){const rt=6*ot;H.uint16[rt+0]=4*ot+0,H.uint16[rt+1]=4*ot+1,H.uint16[rt+2]=4*ot+2,H.uint16[rt+3]=4*ot+2,H.uint16[rt+4]=4*ot+3,H.uint16[rt+5]=4*ot+0}return H}(C));const W=m.createIndexBuffer(ur,!0),K=m.createVertexBuffer(U,s.aS.members,!0);for(const tt of S){const q=gs(tt.transform,tt.invTransform,_.transform);R.draw(m,v.TRIANGLES,_e.disabled,Fe.disabled,_.colorModeForRenderPass(),Pe.disabled,q,_.style.map.terrain&&_.style.map.terrain.getTerrainData(tt.coord),r.id,K,W,s.a0.simpleSegment(0,2*tt.circleOffset,tt.circleArray.length,tt.circleArray.length/2),null,_.transform.zoom,null,null,null)}K.destroy(),W.destroy()}Pe.disabled=new Pe(!1,1029,2305),Pe.backCCW=new Pe(!0,1029,2305);const Is=s.an(new Float32Array(16));function hr(_,t,r,c,h,m){const{horizontalAlign:v,verticalAlign:w}=s.au(_);return new s.P((-(v-.5)*t/h+c[0])*m,(-(w-.5)*r/h+c[1])*m)}function jr(_,t,r,c,h,m){const v=t.tileAnchorPoint.add(new s.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let w=c.mult(m);r||(w=w.rotate(-h));const S=v.add(w);return O(S.x,S.y,t.labelPlaneMatrix,t.getElevation).point}if(r){const w=At(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(_),S=Math.atan(w.y/w.x)+(w.x<0?Math.PI:0);return _.add(c.rotate(S))}return _.add(c)}function In(_,t,r,c,h,m,v,w,S,C,M,D,R,U){const j=_.text.placedSymbolArray,W=_.text.dynamicLayoutVertexArray,K=_.icon.dynamicLayoutVertexArray,tt={};W.clear();for(let q=0;q<j.length;q++){const H=j.get(q),ot=H.hidden||!H.crossTileID||_.allowVerticalPlacement&&!H.placedOrientation?null:c[H.crossTileID];if(ot){const rt=new s.P(H.anchorX,H.anchorY),ut={getElevation:U,width:h.width,height:h.height,labelPlaneMatrix:m,lineVertexArray:null,pitchWithMap:r,projection:M,projectionCache:null,tileAnchorPoint:rt,translation:D,unwrappedTileID:R},_t=r?O(rt.x,rt.y,v,U):At(rt.x,rt.y,ut),kt=G(h.cameraToCenterDistance,_t.signedDistanceFromCamera);let Ct=s.ai(_.textSizeData,S,H)*kt/s.ap;r&&(Ct*=_.tilePixelRatio/w);const{width:Vt,height:Et,anchor:vt,textOffset:Pt,textBoxScale:le}=ot,Mt=hr(vt,Vt,Et,Pt,le,Ct),Lt=M.getPitchedTextCorrection(h,rt.add(new s.P(D[0],D[1])),R),oe=jr(_t.point,ut,t,Mt,h.angle,Lt),Ue=_.allowVerticalPlacement&&H.placedOrientation===s.ah.vertical?Math.PI/2:0;for(let he=0;he<H.numGlyphs;he++)s.aj(W,oe,Ue);C&&H.associatedIconIndex>=0&&(tt[H.associatedIconIndex]={shiftedAnchor:oe,angle:Ue})}else ye(H.numGlyphs,W)}if(C){K.clear();const q=_.icon.placedSymbolArray;for(let H=0;H<q.length;H++){const ot=q.get(H);if(ot.hidden)ye(ot.numGlyphs,K);else{const rt=tt[H];if(rt)for(let ut=0;ut<ot.numGlyphs;ut++)s.aj(K,rt.shiftedAnchor,rt.angle);else ye(ot.numGlyphs,K)}}_.icon.dynamicLayoutVertexBuffer.updateData(K)}_.text.dynamicLayoutVertexBuffer.updateData(W)}function pu(_,t,r){return r.iconsInText&&t?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Ll(_,t,r,c,h,m,v,w,S,C,M,D){const R=_.context,U=R.gl,j=_.transform,W=or(),K=w==="map",tt=S==="map",q=w!=="viewport"&&r.layout.get("symbol-placement")!=="point",H=K&&!tt&&!q,ot=!tt&&q,rt=!r.layout.get("symbol-sort-key").isConstant();let ut=!1;const _t=_.depthModeForSublayer(0,_e.ReadOnly),kt=r._unevaluatedLayout.hasValue("text-variable-anchor")||r._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ct=[],Vt=W.getCircleRadiusCorrection(j);for(const Et of c){const vt=t.getTile(Et),Pt=vt.getBucket(r);if(!Pt)continue;const le=h?Pt.text:Pt.icon;if(!le||!le.segments.get().length||!le.hasVisibleVertices)continue;const Mt=le.programConfigurations.get(r.id),Lt=h||Pt.sdfIcons,oe=h?Pt.textSizeData:Pt.iconSizeData,Ue=tt||j.pitch!==0,he=_.useProgram(pu(Lt,h,Pt),Mt),fe=s.ag(oe,j.zoom),He=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Et);let Ti,Tn,je,Hi,zi=[0,0],Ci=null;if(h)Tn=vt.glyphAtlasTexture,je=U.LINEAR,Ti=vt.glyphAtlasTexture.size,Pt.iconsInText&&(zi=vt.imageAtlasTexture.size,Ci=vt.imageAtlasTexture,Hi=Ue||_.options.rotating||_.options.zooming||oe.kind==="composite"||oe.kind==="camera"?U.LINEAR:U.NEAREST);else{const Je=r.layout.get("icon-size").constantOr(0)!==1||Pt.iconsNeedLinear;Tn=vt.imageAtlasTexture,je=Lt||_.options.rotating||_.options.zooming||Je||Ue?U.LINEAR:U.NEAREST,Ti=vt.imageAtlasTexture.size}const Ei=ne(vt,1,_.transform.zoom),pn=ot?Et.posMatrix:Is,No=z(pn,tt,K,_.transform,Ei),ta=B(pn,tt,K,_.transform,Ei),ho=B(Et.posMatrix,tt,K,_.transform,Ei),po=W.translatePosition(_.transform,vt,m,v),ea=kt&&Pt.hasTextData(),Wa=r.layout.get("icon-text-fit")!=="none"&&ea&&Pt.hasIconData();if(q){const Je=_.style.map.terrain?(Ns,Us)=>_.style.map.terrain.getElevation(Et,Ns,Us):null,vr=r.layout.get("text-rotation-alignment")==="map";at(Pt,Et.posMatrix,_,h,No,ho,tt,C,vr,W,Et.toUnwrapped(),j.width,j.height,po,Je)}const Yi=Et.posMatrix,mn=h&&kt||Wa,mo=q||mn?Is:No,yr=ta,Li=Lt&&r.paint.get(h?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ai;Ai=Lt?Pt.iconsInText?xs(oe.kind,fe,H,tt,q,mn,_,Yi,mo,yr,po,Ti,zi,Vt):vs(oe.kind,fe,H,tt,q,mn,_,Yi,mo,yr,po,h,Ti,!0,Vt):Ea(oe.kind,fe,H,tt,q,mn,_,Yi,mo,yr,po,h,Ti,Vt);const Ji={program:he,buffers:le,uniformValues:Ai,atlasTexture:Tn,atlasTextureIcon:Ci,atlasInterpolation:je,atlasInterpolationIcon:Hi,isSDF:Lt,hasHalo:Li};if(rt&&Pt.canOverlap){ut=!0;const Je=le.segments.get();for(const vr of Je)Ct.push({segments:new s.a0([vr]),sortKey:vr.sortKey,state:Ji,terrainData:He})}else Ct.push({segments:le.segments,sortKey:0,state:Ji,terrainData:He})}ut&&Ct.sort((Et,vt)=>Et.sortKey-vt.sortKey);for(const Et of Ct){const vt=Et.state;if(R.activeTexture.set(U.TEXTURE0),vt.atlasTexture.bind(vt.atlasInterpolation,U.CLAMP_TO_EDGE),vt.atlasTextureIcon&&(R.activeTexture.set(U.TEXTURE1),vt.atlasTextureIcon&&vt.atlasTextureIcon.bind(vt.atlasInterpolationIcon,U.CLAMP_TO_EDGE)),vt.isSDF){const Pt=vt.uniformValues;vt.hasHalo&&(Pt.u_is_halo=1,Ts(vt.buffers,Et.segments,r,_,vt.program,_t,M,D,Pt,Et.terrainData)),Pt.u_is_halo=0}Ts(vt.buffers,Et.segments,r,_,vt.program,_t,M,D,vt.uniformValues,Et.terrainData)}}function Ts(_,t,r,c,h,m,v,w,S,C){const M=c.context;h.draw(M,M.gl.TRIANGLES,m,v,w,Pe.disabled,S,C,r.id,_.layoutVertexBuffer,_.indexBuffer,t,r.paint,c.transform.zoom,_.programConfigurations.get(r.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function dr(_,t,r,c){const h=_.context,m=h.gl,v=Fe.disabled,w=new ei([m.ONE,m.ONE],s.aM.transparent,[!0,!0,!0,!0]),S=t.getBucket(r);if(!S)return;const C=c.key;let M=r.heatmapFbos.get(C);M||(M=za(h,t.tileSize,t.tileSize),r.heatmapFbos.set(C,M)),h.bindFramebuffer.set(M.framebuffer),h.viewport.set([0,0,t.tileSize,t.tileSize]),h.clear({color:s.aM.transparent});const D=S.programConfigurations.get(r.id),R=_.useProgram("heatmap",D),U=_.style.map.terrain.getTerrainData(c);R.draw(h,m.TRIANGLES,_e.disabled,v,w,Pe.disabled,bs(c.posMatrix,t,_.transform.zoom,r.paint.get("heatmap-intensity")),U,r.id,S.layoutVertexBuffer,S.indexBuffer,S.segments,r.paint,_.transform.zoom,D)}function Cs(_,t,r){const c=_.context,h=c.gl;c.setColorMode(_.colorModeForRenderPass());const m=qr(c,t),v=r.key,w=t.heatmapFbos.get(v);w&&(c.activeTexture.set(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,w.colorAttachment.get()),c.activeTexture.set(h.TEXTURE1),m.bind(h.LINEAR,h.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(c,h.TRIANGLES,_e.disabled,Fe.disabled,_.colorModeForRenderPass(),Pe.disabled,Ca(_,t,0,1),null,t.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,t.paint,_.transform.zoom),w.destroy(),t.heatmapFbos.delete(v))}function za(_,t,r){var c,h;const m=_.gl,v=m.createTexture();m.bindTexture(m.TEXTURE_2D,v),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR);const w=(c=_.HALF_FLOAT)!==null&&c!==void 0?c:m.UNSIGNED_BYTE,S=(h=_.RGBA16F)!==null&&h!==void 0?h:m.RGBA;m.texImage2D(m.TEXTURE_2D,0,S,t,r,0,m.RGBA,w,null);const C=_.createFramebuffer(t,r,!1,!1);return C.colorAttachment.set(v),C}function qr(_,t){return t.colorRampTexture||(t.colorRampTexture=new jt(_,t.colorRamp,_.gl.RGBA)),t.colorRampTexture}function La(_,t,r,c,h){if(!r||!c||!c.imageAtlas)return;const m=c.imageAtlas.patternPositions;let v=m[r.to.toString()],w=m[r.from.toString()];if(!v&&w&&(v=w),!w&&v&&(w=v),!v||!w){const S=h.getPaintProperty(t);v=m[S],w=m[S]}v&&w&&_.setConstantPatternPositions(v,w)}function Bl(_,t,r,c,h,m,v){const w=_.context.gl,S="fill-pattern",C=r.paint.get(S),M=C&&C.constantOr(1),D=r.getCrossfadeParameters();let R,U,j,W,K;v?(U=M&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",R=w.LINES):(U=M?"fillPattern":"fill",R=w.TRIANGLES);const tt=C.constantOr(null);for(const q of c){const H=t.getTile(q);if(M&&!H.patternsLoaded())continue;const ot=H.getBucket(r);if(!ot)continue;const rt=ot.programConfigurations.get(r.id),ut=_.useProgram(U,rt),_t=_.style.map.terrain&&_.style.map.terrain.getTerrainData(q);M&&(_.context.activeTexture.set(w.TEXTURE0),H.imageAtlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),rt.updatePaintBuffers(D)),La(rt,S,tt,H,r);const kt=_t?q:null,Ct=_.translatePosMatrix(kt?kt.posMatrix:q.posMatrix,H,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(v){W=ot.indexBuffer2,K=ot.segments2;const Vt=[w.drawingBufferWidth,w.drawingBufferHeight];j=U==="fillOutlinePattern"&&M?yd(Ct,_,D,H,Vt):Kc(Ct,Vt)}else W=ot.indexBuffer,K=ot.segments,j=M?Xc(Ct,_,D,H):Nr(Ct);ut.draw(_.context,R,h,_.stencilModeForClipping(q),m,Pe.disabled,j,_t,r.id,ot.layoutVertexBuffer,W,K,r.paint,_.transform.zoom,rt)}}function $o(_,t,r,c,h,m,v){const w=_.context,S=w.gl,C="fill-extrusion-pattern",M=r.paint.get(C),D=M.constantOr(1),R=r.getCrossfadeParameters(),U=r.paint.get("fill-extrusion-opacity"),j=M.constantOr(null);for(const W of c){const K=t.getTile(W),tt=K.getBucket(r);if(!tt)continue;const q=_.style.map.terrain&&_.style.map.terrain.getTerrainData(W),H=tt.programConfigurations.get(r.id),ot=_.useProgram(D?"fillExtrusionPattern":"fillExtrusion",H);D&&(_.context.activeTexture.set(S.TEXTURE0),K.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),H.updatePaintBuffers(R)),La(H,C,j,K,r);const rt=_.translatePosMatrix(W.posMatrix,K,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),ut=r.paint.get("fill-extrusion-vertical-gradient"),_t=D?fs(rt,_,ut,U,W,R,K):Ta(rt,_,ut,U);ot.draw(w,w.gl.TRIANGLES,h,m,v,Pe.backCCW,_t,q,r.id,tt.layoutVertexBuffer,tt.indexBuffer,tt.segments,r.paint,_.transform.zoom,H,_.style.map.terrain&&tt.centroidVertexBuffer)}}function Gr(_,t,r,c,h,m,v){const w=_.context,S=w.gl,C=r.fbo;if(!C)return;const M=_.useProgram("hillshade"),D=_.style.map.terrain&&_.style.map.terrain.getTerrainData(t);w.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,C.colorAttachment.get()),M.draw(w,S.TRIANGLES,h,m,v,Pe.disabled,((R,U,j,W)=>{const K=j.paint.get("hillshade-shadow-color"),tt=j.paint.get("hillshade-highlight-color"),q=j.paint.get("hillshade-accent-color");let H=j.paint.get("hillshade-illumination-direction")*(Math.PI/180);j.paint.get("hillshade-illumination-anchor")==="viewport"&&(H-=R.transform.angle);const ot=!R.options.moving;return{u_matrix:W?W.posMatrix:R.transform.calculatePosMatrix(U.tileID.toUnwrapped(),ot),u_image:0,u_latrange:Yc(0,U.tileID),u_light:[j.paint.get("hillshade-exaggeration"),H],u_shadow:K,u_highlight:tt,u_accent:q}})(_,r,c,D?t:null),D,c.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function mu(_,t,r,c,h,m){const v=_.context,w=v.gl,S=t.dem;if(S&&S.data){const C=S.dim,M=S.stride,D=S.getPixels();if(v.activeTexture.set(w.TEXTURE1),v.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||_.getTileTexture(M),t.demTexture){const U=t.demTexture;U.update(D,{premultiply:!1}),U.bind(w.NEAREST,w.CLAMP_TO_EDGE)}else t.demTexture=new jt(v,D,w.RGBA,{premultiply:!1}),t.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE);v.activeTexture.set(w.TEXTURE0);let R=t.fbo;if(!R){const U=new jt(v,{width:C,height:C,data:null},w.RGBA);U.bind(w.LINEAR,w.CLAMP_TO_EDGE),R=t.fbo=v.createFramebuffer(C,C,!0,!1),R.colorAttachment.set(U.texture)}v.bindFramebuffer.set(R.framebuffer),v.viewport.set([0,0,C,C]),_.useProgram("hillshadePrepare").draw(v,w.TRIANGLES,c,h,m,Pe.disabled,((U,j)=>{const W=j.stride,K=s.H();return s.aP(K,0,s.X,-s.X,0,0,1),s.J(K,K,[0,-s.X,0]),{u_matrix:K,u_image:1,u_dimension:[W,W],u_zoom:U.overscaledZ,u_unpack:j.getUnpackVector()}})(t.tileID,S),null,r.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),t.needsHillshadePrepare=!1}}function Rl(_,t,r,c,h,m){const v=c.paint.get("raster-fade-duration");if(!m&&v>0){const w=X.now(),S=(w-_.timeAdded)/v,C=t?(w-t.timeAdded)/v:-1,M=r.getSource(),D=h.coveringZoomLevel({tileSize:M.tileSize,roundZoom:M.roundZoom}),R=!t||Math.abs(t.tileID.overscaledZ-D)>Math.abs(_.tileID.overscaledZ-D),U=R&&_.refreshedUponExpiration?1:s.ac(R?S:1-C,0,1);return _.refreshedUponExpiration&&S>=1&&(_.refreshedUponExpiration=!1),t?{opacity:1,mix:1-U}:{opacity:U,mix:0}}return{opacity:1,mix:0}}const we=new s.aM(1,0,0,1),Es=new s.aM(0,1,0,1),Bd=new s.aM(0,0,1,1),_u=new s.aM(1,0,1,1),Ba=new s.aM(0,1,1,1);function fu(_,t,r,c){Ra(_,0,t+r/2,_.transform.width,r,c)}function gu(_,t,r,c){Ra(_,t-r/2,0,r,_.transform.height,c)}function Ra(_,t,r,c,h,m){const v=_.context,w=v.gl;w.enable(w.SCISSOR_TEST),w.scissor(t*_.pixelRatio,r*_.pixelRatio,c*_.pixelRatio,h*_.pixelRatio),v.clear({color:m}),w.disable(w.SCISSOR_TEST)}function Rd(_,t,r){const c=_.context,h=c.gl,m=r.posMatrix,v=_.useProgram("debug"),w=_e.disabled,S=Fe.disabled,C=_.colorModeForRenderPass(),M="$debug",D=_.style.map.terrain&&_.style.map.terrain.getTerrainData(r);c.activeTexture.set(h.TEXTURE0);const R=t.getTileByID(r.key).latestRawTileData,U=Math.floor((R&&R.byteLength||0)/1024),j=t.getTile(r).tileSize,W=512/Math.min(j,512)*(r.overscaledZ/_.transform.zoom)*.5;let K=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(K+=` => ${r.overscaledZ}`),function(tt,q){tt.initDebugOverlayCanvas();const H=tt.debugOverlayCanvas,ot=tt.context.gl,rt=tt.debugOverlayCanvas.getContext("2d");rt.clearRect(0,0,H.width,H.height),rt.shadowColor="white",rt.shadowBlur=2,rt.lineWidth=1.5,rt.strokeStyle="white",rt.textBaseline="top",rt.font="bold 36px Open Sans, sans-serif",rt.fillText(q,5,5),rt.strokeText(q,5,5),tt.debugOverlayTexture.update(H),tt.debugOverlayTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE)}(_,`${K} ${U}kB`),v.draw(c,h.TRIANGLES,w,S,ei.alphaBlended,Pe.disabled,Xi(m,s.aM.transparent,W),null,M,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),v.draw(c,h.LINE_STRIP,w,S,C,Pe.disabled,Xi(m,s.aM.red),D,M,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function As(_,t,r){const c=_.context,h=c.gl,m=_.colorModeForRenderPass(),v=new _e(h.LEQUAL,_e.ReadWrite,_.depthRangeFor3D),w=_.useProgram("terrain"),S=t.getTerrainMesh();c.bindFramebuffer.set(null),c.viewport.set([0,0,_.width,_.height]);for(const C of r){const M=_.renderToTexture.getTexture(C),D=t.getTerrainData(C.tileID);c.activeTexture.set(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,M.texture);const R=_.transform.calculatePosMatrix(C.tileID.toUnwrapped()),U=t.getMeshFrameDelta(_.transform.zoom),j=_.transform.calculateFogMatrix(C.tileID.toUnwrapped()),W=wl(R,U,j,_.style.sky,_.transform.pitch);w.draw(c,h.TRIANGLES,v,Fe.disabled,m,Pe.backCCW,W,D,"terrain",S.vertexBuffer,S.indexBuffer,S.segments)}}class $a{constructor(t,r,c){this.vertexBuffer=t,this.indexBuffer=r,this.segments=c}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Ms{constructor(t,r){this.context=new Ld(t),this.transform=r,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ie.maxUnderzooming+ie.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vl}resize(t,r,c){if(this.width=Math.floor(t*c),this.height=Math.floor(r*c),this.pixelRatio=c,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const h of this.style._order)this.style._layers[h].resize()}setup(){const t=this.context,r=new s.aX;r.emplaceBack(0,0),r.emplaceBack(s.X,0),r.emplaceBack(0,s.X),r.emplaceBack(s.X,s.X),this.tileExtentBuffer=t.createVertexBuffer(r,rr.members),this.tileExtentSegments=s.a0.simpleSegment(0,0,4,2);const c=new s.aX;c.emplaceBack(0,0),c.emplaceBack(s.X,0),c.emplaceBack(0,s.X),c.emplaceBack(s.X,s.X),this.debugBuffer=t.createVertexBuffer(c,rr.members),this.debugSegments=s.a0.simpleSegment(0,0,4,5);const h=new s.$;h.emplaceBack(0,0,0,0),h.emplaceBack(s.X,0,s.X,0),h.emplaceBack(0,s.X,0,s.X),h.emplaceBack(s.X,s.X,s.X,s.X),this.rasterBoundsBuffer=t.createVertexBuffer(h,kn.members),this.rasterBoundsSegments=s.a0.simpleSegment(0,0,4,2);const m=new s.aX;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(m,rr.members),this.viewportSegments=s.a0.simpleSegment(0,0,4,2);const v=new s.aZ;v.emplaceBack(0),v.emplaceBack(1),v.emplaceBack(3),v.emplaceBack(2),v.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(v);const w=new s.aY;w.emplaceBack(0,1,2),w.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(w);const S=this.context.gl;this.stencilClearMode=new Fe({func:S.ALWAYS,mask:0},0,255,S.ZERO,S.ZERO,S.ZERO)}clearStencil(){const t=this.context,r=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const c=s.H();s.aP(c,0,this.width,this.height,0,0,1),s.K(c,c,[r.drawingBufferWidth,r.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,r.TRIANGLES,_e.disabled,this.stencilClearMode,ei.disabled,Pe.disabled,Ki(c),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,r){if(this.currentStencilSource===t.source||!t.isTileClipped()||!r||!r.length)return;this.currentStencilSource=t.source;const c=this.context,h=c.gl;this.nextStencilID+r.length>256&&this.clearStencil(),c.setColorMode(ei.disabled),c.setDepthMode(_e.disabled);const m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const v of r){const w=this._tileClippingMaskIDs[v.key]=this.nextStencilID++,S=this.style.map.terrain&&this.style.map.terrain.getTerrainData(v);m.draw(c,h.TRIANGLES,_e.disabled,new Fe({func:h.ALWAYS,mask:0},w,255,h.KEEP,h.KEEP,h.REPLACE),ei.disabled,Pe.disabled,Ki(v.posMatrix),S,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,r=this.context.gl;return new Fe({func:r.NOTEQUAL,mask:255},t,255,r.KEEP,r.KEEP,r.REPLACE)}stencilModeForClipping(t){const r=this.context.gl;return new Fe({func:r.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,r.KEEP,r.KEEP,r.REPLACE)}stencilConfigForOverlap(t){const r=this.context.gl,c=t.sort((v,w)=>w.overscaledZ-v.overscaledZ),h=c[c.length-1].overscaledZ,m=c[0].overscaledZ-h+1;if(m>1){this.currentStencilSource=void 0,this.nextStencilID+m>256&&this.clearStencil();const v={};for(let w=0;w<m;w++)v[w+h]=new Fe({func:r.GEQUAL,mask:255},w+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=m,[v,c]}return[{[h]:Fe.disabled},c]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new ei([t.CONSTANT_COLOR,t.ONE],new s.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ei.unblended:ei.alphaBlended}depthModeForSublayer(t,r,c){if(!this.opaquePassEnabledForLayer())return _e.disabled;const h=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new _e(c||this.context.gl.LEQUAL,r,[h,h])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,r){this.style=t,this.options=r,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(X.now()),this.imageManager.beginFrame();const c=this.style._order,h=this.style.sourceCaches,m={},v={},w={};for(const S in h){const C=h[S];C.used&&C.prepare(this.context),m[S]=C.getVisibleCoordinates(),v[S]=m[S].slice().reverse(),w[S]=C.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let S=0;S<c.length;S++)if(this.style._layers[c[S]].is3D()){this.opaquePassCutoff=S;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const S of c){const C=this.style._layers[S];if(!C.hasOffscreenPass()||C.isHidden(this.transform.zoom))continue;const M=v[C.source];(C.type==="custom"||M.length)&&this.renderLayer(this,h[C.source],C,M)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:r.showOverdrawInspector?s.aM.black:s.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(S,C){const M=S.context,D=M.gl,R=((tt,q,H)=>({u_sky_color:tt.properties.get("sky-color"),u_horizon_color:tt.properties.get("horizon-color"),u_horizon:(q.height/2+q.getHorizon())*H,u_sky_horizon_blend:tt.properties.get("sky-horizon-blend")*q.height/2*H}))(C,S.style.map.transform,S.pixelRatio),U=new _e(D.LEQUAL,_e.ReadWrite,[0,1]),j=Fe.disabled,W=S.colorModeForRenderPass(),K=S.useProgram("sky");if(!C.mesh){const tt=new s.aX;tt.emplaceBack(-1,-1),tt.emplaceBack(1,-1),tt.emplaceBack(1,1),tt.emplaceBack(-1,1);const q=new s.aY;q.emplaceBack(0,1,2),q.emplaceBack(0,2,3),C.mesh=new $a(M.createVertexBuffer(tt,rr.members),M.createIndexBuffer(q),s.a0.simpleSegment(0,0,tt.length,q.length))}K.draw(M,D.TRIANGLES,U,j,W,Pe.disabled,R,void 0,"sky",C.mesh.vertexBuffer,C.mesh.indexBuffer,C.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=r.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){const S=this.style._layers[c[this.currentLayer]],C=h[S.source],M=m[S.source];this._renderTileClippingMasks(S,M),this.renderLayer(this,C,S,M)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){const S=this.style._layers[c[this.currentLayer]],C=h[S.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(S))continue;const M=(S.type==="symbol"?w:v)[S.source];this._renderTileClippingMasks(S,m[S.source]),this.renderLayer(this,C,S,M)}if(this.options.showTileBoundaries){const S=function(C,M){let D=null;const R=Object.values(C._layers).flatMap(K=>K.source&&!K.isHidden(M)?[C.sourceCaches[K.source]]:[]),U=R.filter(K=>K.getSource().type==="vector"),j=R.filter(K=>K.getSource().type!=="vector"),W=K=>{(!D||D.getSource().maxzoom<K.getSource().maxzoom)&&(D=K)};return U.forEach(K=>W(K)),D||j.forEach(K=>W(K)),D}(this.style,this.transform.zoom);S&&function(C,M,D){for(let R=0;R<D.length;R++)Rd(C,M,D[R])}(this,S,S.getVisibleCoordinates())}this.options.showPadding&&function(S){const C=S.transform.padding;fu(S,S.transform.height-(C.top||0),3,we),fu(S,C.bottom||0,3,Es),gu(S,C.left||0,3,Bd),gu(S,S.transform.width-(C.right||0),3,_u);const M=S.transform.centerPoint;(function(D,R,U,j){Ra(D,R-1,U-10,2,20,j),Ra(D,R-10,U-1,20,2,j)})(S,M.x,S.transform.height-M.y,Ba)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const r=this.terrainFacilitator.matrix,c=this.transform.modelViewProjectionMatrix;let h=this.terrainFacilitator.dirty;h||(h=t?!s.a_(r,c):!s.a$(r,c)),h||(h=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),h&&(s.b0(r,c),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(m,v){const w=m.context,S=w.gl,C=ei.unblended,M=new _e(S.LEQUAL,_e.ReadWrite,[0,1]),D=v.getTerrainMesh(),R=v.sourceCache.getRenderableTiles(),U=m.useProgram("terrainDepth");w.bindFramebuffer.set(v.getFramebuffer("depth").framebuffer),w.viewport.set([0,0,m.width/devicePixelRatio,m.height/devicePixelRatio]),w.clear({color:s.aM.transparent,depth:1});for(const j of R){const W=v.getTerrainData(j.tileID),K={u_matrix:m.transform.calculatePosMatrix(j.tileID.toUnwrapped()),u_ele_delta:v.getMeshFrameDelta(m.transform.zoom)};U.draw(w,S.TRIANGLES,M,Fe.disabled,C,Pe.backCCW,K,W,"terrain",D.vertexBuffer,D.indexBuffer,D.segments)}w.bindFramebuffer.set(null),w.viewport.set([0,0,m.width,m.height])}(this,this.style.map.terrain),function(m,v){const w=m.context,S=w.gl,C=ei.unblended,M=new _e(S.LEQUAL,_e.ReadWrite,[0,1]),D=v.getTerrainMesh(),R=v.getCoordsTexture(),U=v.sourceCache.getRenderableTiles(),j=m.useProgram("terrainCoords");w.bindFramebuffer.set(v.getFramebuffer("coords").framebuffer),w.viewport.set([0,0,m.width/devicePixelRatio,m.height/devicePixelRatio]),w.clear({color:s.aM.transparent,depth:1}),v.coordsIndex=[];for(const W of U){const K=v.getTerrainData(W.tileID);w.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,R.texture);const tt={u_matrix:m.transform.calculatePosMatrix(W.tileID.toUnwrapped()),u_terrain_coords_id:(255-v.coordsIndex.length)/255,u_texture:0,u_ele_delta:v.getMeshFrameDelta(m.transform.zoom)};j.draw(w,S.TRIANGLES,M,Fe.disabled,C,Pe.backCCW,tt,K,"terrain",D.vertexBuffer,D.indexBuffer,D.segments),v.coordsIndex.push(W.tileID.key)}w.bindFramebuffer.set(null),w.viewport.set([0,0,m.width,m.height])}(this,this.style.map.terrain))}renderLayer(t,r,c,h){if(!c.isHidden(this.transform.zoom)&&(c.type==="background"||c.type==="custom"||(h||[]).length))switch(this.id=c.id,c.type){case"symbol":(function(m,v,w,S,C){if(m.renderPass!=="translucent")return;const M=Fe.disabled,D=m.colorModeForRenderPass();(w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(R,U,j,W,K,tt,q,H,ot){const rt=U.transform,ut=or(),_t=K==="map",kt=tt==="map";for(const Ct of R){const Vt=W.getTile(Ct),Et=Vt.getBucket(j);if(!Et||!Et.text||!Et.text.segments.get().length)continue;const vt=s.ag(Et.textSizeData,rt.zoom),Pt=ne(Vt,1,U.transform.zoom),le=z(Ct.posMatrix,kt,_t,U.transform,Pt),Mt=j.layout.get("icon-text-fit")!=="none"&&Et.hasIconData();if(vt){const Lt=Math.pow(2,rt.zoom-Vt.tileID.overscaledZ),oe=U.style.map.terrain?(he,fe)=>U.style.map.terrain.getElevation(Ct,he,fe):null,Ue=ut.translatePosition(rt,Vt,q,H);In(Et,_t,kt,ot,rt,le,Ct.posMatrix,Lt,vt,Mt,ut,Ue,Ct.toUnwrapped(),oe)}}}(S,m,w,v,w.layout.get("text-rotation-alignment"),w.layout.get("text-pitch-alignment"),w.paint.get("text-translate"),w.paint.get("text-translate-anchor"),C),w.paint.get("icon-opacity").constantOr(1)!==0&&Ll(m,v,w,S,!1,w.paint.get("icon-translate"),w.paint.get("icon-translate-anchor"),w.layout.get("icon-rotation-alignment"),w.layout.get("icon-pitch-alignment"),w.layout.get("icon-keep-upright"),M,D),w.paint.get("text-opacity").constantOr(1)!==0&&Ll(m,v,w,S,!0,w.paint.get("text-translate"),w.paint.get("text-translate-anchor"),w.layout.get("text-rotation-alignment"),w.layout.get("text-pitch-alignment"),w.layout.get("text-keep-upright"),M,D),v.map.showCollisionBoxes&&(Pa(m,v,w,S,!0),Pa(m,v,w,S,!1))})(t,r,c,h,this.style.placement.variableOffsets);break;case"circle":(function(m,v,w,S){if(m.renderPass!=="translucent")return;const C=w.paint.get("circle-opacity"),M=w.paint.get("circle-stroke-width"),D=w.paint.get("circle-stroke-opacity"),R=!w.layout.get("circle-sort-key").isConstant();if(C.constantOr(1)===0&&(M.constantOr(1)===0||D.constantOr(1)===0))return;const U=m.context,j=U.gl,W=m.depthModeForSublayer(0,_e.ReadOnly),K=Fe.disabled,tt=m.colorModeForRenderPass(),q=[];for(let H=0;H<S.length;H++){const ot=S[H],rt=v.getTile(ot),ut=rt.getBucket(w);if(!ut)continue;const _t=ut.programConfigurations.get(w.id),kt=m.useProgram("circle",_t),Ct=ut.layoutVertexBuffer,Vt=ut.indexBuffer,Et=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ot),vt={programConfiguration:_t,program:kt,layoutVertexBuffer:Ct,indexBuffer:Vt,uniformValues:ar(m,ot,rt,w),terrainData:Et};if(R){const Pt=ut.segments.get();for(const le of Pt)q.push({segments:new s.a0([le]),sortKey:le.sortKey,state:vt})}else q.push({segments:ut.segments,sortKey:0,state:vt})}R&&q.sort((H,ot)=>H.sortKey-ot.sortKey);for(const H of q){const{programConfiguration:ot,program:rt,layoutVertexBuffer:ut,indexBuffer:_t,uniformValues:kt,terrainData:Ct}=H.state;rt.draw(U,j.TRIANGLES,W,K,tt,Pe.disabled,kt,Ct,w.id,ut,_t,H.segments,w.paint,m.transform.zoom,ot)}})(t,r,c,h);break;case"heatmap":(function(m,v,w,S){if(w.paint.get("heatmap-opacity")===0)return;const C=m.context;if(m.style.map.terrain){for(const M of S){const D=v.getTile(M);v.hasRenderableParent(M)||(m.renderPass==="offscreen"?dr(m,D,w,M):m.renderPass==="translucent"&&Cs(m,w,M))}C.viewport.set([0,0,m.width,m.height])}else m.renderPass==="offscreen"?function(M,D,R,U){const j=M.context,W=j.gl,K=Fe.disabled,tt=new ei([W.ONE,W.ONE],s.aM.transparent,[!0,!0,!0,!0]);(function(q,H,ot){const rt=q.gl;q.activeTexture.set(rt.TEXTURE1),q.viewport.set([0,0,H.width/4,H.height/4]);let ut=ot.heatmapFbos.get(s.aU);ut?(rt.bindTexture(rt.TEXTURE_2D,ut.colorAttachment.get()),q.bindFramebuffer.set(ut.framebuffer)):(ut=za(q,H.width/4,H.height/4),ot.heatmapFbos.set(s.aU,ut))})(j,M,R),j.clear({color:s.aM.transparent});for(let q=0;q<U.length;q++){const H=U[q];if(D.hasRenderableParent(H))continue;const ot=D.getTile(H),rt=ot.getBucket(R);if(!rt)continue;const ut=rt.programConfigurations.get(R.id),_t=M.useProgram("heatmap",ut),{zoom:kt}=M.transform;_t.draw(j,W.TRIANGLES,_e.disabled,K,tt,Pe.disabled,bs(H.posMatrix,ot,kt,R.paint.get("heatmap-intensity")),null,R.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,R.paint,M.transform.zoom,ut)}j.viewport.set([0,0,M.width,M.height])}(m,v,w,S):m.renderPass==="translucent"&&function(M,D){const R=M.context,U=R.gl;R.setColorMode(M.colorModeForRenderPass());const j=D.heatmapFbos.get(s.aU);j&&(R.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,j.colorAttachment.get()),R.activeTexture.set(U.TEXTURE1),qr(R,D).bind(U.LINEAR,U.CLAMP_TO_EDGE),M.useProgram("heatmapTexture").draw(R,U.TRIANGLES,_e.disabled,Fe.disabled,M.colorModeForRenderPass(),Pe.disabled,Ca(M,D,0,1),null,D.id,M.viewportBuffer,M.quadTriangleIndexBuffer,M.viewportSegments,D.paint,M.transform.zoom))}(m,w)})(t,r,c,h);break;case"line":(function(m,v,w,S){if(m.renderPass!=="translucent")return;const C=w.paint.get("line-opacity"),M=w.paint.get("line-width");if(C.constantOr(1)===0||M.constantOr(1)===0)return;const D=m.depthModeForSublayer(0,_e.ReadOnly),R=m.colorModeForRenderPass(),U=w.paint.get("line-dasharray"),j=w.paint.get("line-pattern"),W=j.constantOr(1),K=w.paint.get("line-gradient"),tt=w.getCrossfadeParameters(),q=W?"linePattern":U?"lineSDF":K?"lineGradient":"line",H=m.context,ot=H.gl;let rt=!0;for(const ut of S){const _t=v.getTile(ut);if(W&&!_t.patternsLoaded())continue;const kt=_t.getBucket(w);if(!kt)continue;const Ct=kt.programConfigurations.get(w.id),Vt=m.context.program.get(),Et=m.useProgram(q,Ct),vt=rt||Et.program!==Vt,Pt=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ut),le=j.constantOr(null);if(le&&_t.imageAtlas){const oe=_t.imageAtlas,Ue=oe.patternPositions[le.to.toString()],he=oe.patternPositions[le.from.toString()];Ue&&he&&Ct.setConstantPatternPositions(Ue,he)}const Mt=Pt?ut:null,Lt=W?vd(m,_t,w,tt,Mt):U?xd(m,_t,w,U,tt,Mt):K?Ur(m,_t,w,kt.lineClipsArray.length,Mt):ys(m,_t,w,Mt);if(W)H.activeTexture.set(ot.TEXTURE0),_t.imageAtlasTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),Ct.updatePaintBuffers(tt);else if(U&&(vt||m.lineAtlas.dirty))H.activeTexture.set(ot.TEXTURE0),m.lineAtlas.bind(H);else if(K){const oe=kt.gradients[w.id];let Ue=oe.texture;if(w.gradientVersion!==oe.version){let he=256;if(w.stepInterpolant){const fe=v.getSource().maxzoom,He=ut.canonical.z===fe?Math.ceil(1<<m.transform.maxZoom-ut.canonical.z):1;he=s.ac(s.aV(kt.maxLineLength/s.X*1024*He),256,H.maxTextureSize)}oe.gradient=s.aW({expression:w.gradientExpression(),evaluationKey:"lineProgress",resolution:he,image:oe.gradient||void 0,clips:kt.lineClipsArray}),oe.texture?oe.texture.update(oe.gradient):oe.texture=new jt(H,oe.gradient,ot.RGBA),oe.version=w.gradientVersion,Ue=oe.texture}H.activeTexture.set(ot.TEXTURE0),Ue.bind(w.stepInterpolant?ot.NEAREST:ot.LINEAR,ot.CLAMP_TO_EDGE)}Et.draw(H,ot.TRIANGLES,D,m.stencilModeForClipping(ut),R,Pe.disabled,Lt,Pt,w.id,kt.layoutVertexBuffer,kt.indexBuffer,kt.segments,w.paint,m.transform.zoom,Ct,kt.layoutVertexBuffer2),rt=!1}})(t,r,c,h);break;case"fill":(function(m,v,w,S){const C=w.paint.get("fill-color"),M=w.paint.get("fill-opacity");if(M.constantOr(1)===0)return;const D=m.colorModeForRenderPass(),R=w.paint.get("fill-pattern"),U=m.opaquePassEnabledForLayer()&&!R.constantOr(1)&&C.constantOr(s.aM.transparent).a===1&&M.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===U){const j=m.depthModeForSublayer(1,m.renderPass==="opaque"?_e.ReadWrite:_e.ReadOnly);Bl(m,v,w,S,j,D,!1)}if(m.renderPass==="translucent"&&w.paint.get("fill-antialias")){const j=m.depthModeForSublayer(w.getPaintProperty("fill-outline-color")?2:0,_e.ReadOnly);Bl(m,v,w,S,j,D,!0)}})(t,r,c,h);break;case"fill-extrusion":(function(m,v,w,S){const C=w.paint.get("fill-extrusion-opacity");if(C!==0&&m.renderPass==="translucent"){const M=new _e(m.context.gl.LEQUAL,_e.ReadWrite,m.depthRangeFor3D);if(C!==1||w.paint.get("fill-extrusion-pattern").constantOr(1))$o(m,v,w,S,M,Fe.disabled,ei.disabled),$o(m,v,w,S,M,m.stencilModeFor3D(),m.colorModeForRenderPass());else{const D=m.colorModeForRenderPass();$o(m,v,w,S,M,Fe.disabled,D)}}})(t,r,c,h);break;case"hillshade":(function(m,v,w,S){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const C=m.context,M=m.depthModeForSublayer(0,_e.ReadOnly),D=m.colorModeForRenderPass(),[R,U]=m.renderPass==="translucent"?m.stencilConfigForOverlap(S):[{},S];for(const j of U){const W=v.getTile(j);W.needsHillshadePrepare!==void 0&&W.needsHillshadePrepare&&m.renderPass==="offscreen"?mu(m,W,w,M,Fe.disabled,D):m.renderPass==="translucent"&&Gr(m,j,W,w,M,R[j.overscaledZ],D)}C.viewport.set([0,0,m.width,m.height])})(t,r,c,h);break;case"raster":(function(m,v,w,S){if(m.renderPass!=="translucent"||w.paint.get("raster-opacity")===0||!S.length)return;const C=m.context,M=C.gl,D=v.getSource(),R=m.useProgram("raster"),U=m.colorModeForRenderPass(),[j,W]=D instanceof Po?[{},S]:m.stencilConfigForOverlap(S),K=W[W.length-1].overscaledZ,tt=!m.options.moving;for(const q of W){const H=m.depthModeForSublayer(q.overscaledZ-K,w.paint.get("raster-opacity")===1?_e.ReadWrite:_e.ReadOnly,M.LESS),ot=v.getTile(q);ot.registerFadeDuration(w.paint.get("raster-fade-duration"));const rt=v.findLoadedParent(q,0),ut=v.findLoadedSibling(q),_t=Rl(ot,rt||ut||null,v,w,m.transform,m.style.map.terrain);let kt,Ct;const Vt=w.paint.get("raster-resampling")==="nearest"?M.NEAREST:M.LINEAR;C.activeTexture.set(M.TEXTURE0),ot.texture.bind(Vt,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),C.activeTexture.set(M.TEXTURE1),rt?(rt.texture.bind(Vt,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),kt=Math.pow(2,rt.tileID.overscaledZ-ot.tileID.overscaledZ),Ct=[ot.tileID.canonical.x*kt%1,ot.tileID.canonical.y*kt%1]):ot.texture.bind(Vt,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),ot.texture.useMipmap&&C.extTextureFilterAnisotropic&&m.transform.pitch>20&&M.texParameterf(M.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax);const Et=m.style.map.terrain&&m.style.map.terrain.getTerrainData(q),vt=Et?q:null,Pt=vt?vt.posMatrix:m.transform.calculatePosMatrix(q.toUnwrapped(),tt),le=wd(Pt,Ct||[0,0],kt||1,_t,w);D instanceof Po?R.draw(C,M.TRIANGLES,H,Fe.disabled,U,Pe.disabled,le,Et,w.id,D.boundsBuffer,m.quadTriangleIndexBuffer,D.boundsSegments):R.draw(C,M.TRIANGLES,H,j[q.overscaledZ],U,Pe.disabled,le,Et,w.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}})(t,r,c,h);break;case"background":(function(m,v,w,S){const C=w.paint.get("background-color"),M=w.paint.get("background-opacity");if(M===0)return;const D=m.context,R=D.gl,U=m.transform,j=U.tileSize,W=w.paint.get("background-pattern");if(m.isPatternMissing(W))return;const K=!W&&C.a===1&&M===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==K)return;const tt=Fe.disabled,q=m.depthModeForSublayer(0,K==="opaque"?_e.ReadWrite:_e.ReadOnly),H=m.colorModeForRenderPass(),ot=m.useProgram(W?"backgroundPattern":"background"),rt=S||U.coveringTiles({tileSize:j,terrain:m.style.map.terrain});W&&(D.activeTexture.set(R.TEXTURE0),m.imageManager.bind(m.context));const ut=w.getCrossfadeParameters();for(const _t of rt){const kt=S?_t.posMatrix:m.transform.calculatePosMatrix(_t.toUnwrapped()),Ct=W?Il(kt,M,m,W,{tileID:_t,tileSize:j},ut):Sl(kt,M,C),Vt=m.style.map.terrain&&m.style.map.terrain.getTerrainData(_t);ot.draw(D,R.TRIANGLES,q,tt,H,Pe.disabled,Ct,Vt,w.id,m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}})(t,0,c,h);break;case"custom":(function(m,v,w){const S=m.context,C=w.implementation;if(m.renderPass==="offscreen"){const M=C.prerender;M&&(m.setCustomLayerDefaults(),S.setColorMode(m.colorModeForRenderPass()),M.call(C,S.gl,m.transform.customLayerMatrix()),S.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),S.setColorMode(m.colorModeForRenderPass()),S.setStencilMode(Fe.disabled);const M=C.renderingMode==="3d"?new _e(m.context.gl.LEQUAL,_e.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,_e.ReadOnly);S.setDepthMode(M),C.render(S.gl,m.transform.customLayerMatrix(),{farZ:m.transform.farZ,nearZ:m.transform.nearZ,fov:m.transform._fov,modelViewProjectionMatrix:m.transform.modelViewProjectionMatrix,projectionMatrix:m.transform.projectionMatrix}),S.setDirty(),m.setBaseState(),S.bindFramebuffer.set(null)}})(t,0,c)}}translatePosMatrix(t,r,c,h,m){if(!c[0]&&!c[1])return t;const v=m?h==="map"?this.transform.angle:0:h==="viewport"?-this.transform.angle:0;if(v){const C=Math.sin(v),M=Math.cos(v);c=[c[0]*M-c[1]*C,c[0]*C+c[1]*M]}const w=[m?c[0]:ne(r,c[0],this.transform.zoom),m?c[1]:ne(r,c[1],this.transform.zoom),0],S=new Float32Array(16);return s.J(S,t,w),S}saveTileTexture(t){const r=this._tileTextures[t.size[0]];r?r.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const r=this._tileTextures[t];return r&&r.length>0?r.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const r=this.imageManager.getPattern(t.from.toString()),c=this.imageManager.getPattern(t.to.toString());return!r||!c}useProgram(t,r){this.cache=this.cache||{};const c=t+(r?r.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[c]||(this.cache[c]=new kl(this.context,Ro[t],r,to[t],this._showOverdrawInspector,this.style.map.terrain)),this.cache[c]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new jt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:r}=this.context.gl;return this.width!==t||this.height!==r}}class Va{constructor(t,r){this.points=t,this.planes=r}static fromInvProjectionMatrix(t,r,c){const h=Math.pow(2,c),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(w=>{const S=1/(w=s.af([],w,t))[3]/r*h;return s.b1(w,w,[S,S,1/w[3],S])}),v=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(w=>{const S=function(R,U){var j=U[0],W=U[1],K=U[2],tt=j*j+W*W+K*K;return tt>0&&(tt=1/Math.sqrt(tt)),R[0]=U[0]*tt,R[1]=U[1]*tt,R[2]=U[2]*tt,R}([],function(R,U,j){var W=U[0],K=U[1],tt=U[2],q=j[0],H=j[1],ot=j[2];return R[0]=K*ot-tt*H,R[1]=tt*q-W*ot,R[2]=W*H-K*q,R}([],Qt([],m[w[0]],m[w[1]]),Qt([],m[w[2]],m[w[1]]))),C=-((M=S)[0]*(D=m[w[1]])[0]+M[1]*D[1]+M[2]*D[2]);var M,D;return S.concat(C)});return new Va(m,v)}}class Zr{constructor(t,r){this.min=t,this.max=r,this.center=function(c,h){return c[0]=.5*h[0],c[1]=.5*h[1],c[2]=.5*h[2],c}([],function(c,h,m){return c[0]=h[0]+m[0],c[1]=h[1]+m[1],c[2]=h[2]+m[2],c}([],this.min,this.max))}quadrant(t){const r=[t%2==0,t<2],c=wt(this.min),h=wt(this.max);for(let m=0;m<r.length;m++)c[m]=r[m]?this.min[m]:this.center[m],h[m]=r[m]?this.center[m]:this.max[m];return h[2]=this.max[2],new Zr(c,h)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(t){const r=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let c=!0;for(let h=0;h<t.planes.length;h++){const m=t.planes[h];let v=0;for(let w=0;w<r.length;w++)s.b2(m,r[w])>=0&&v++;if(v===0)return 0;v!==r.length&&(c=!1)}if(c)return 2;for(let h=0;h<3;h++){let m=Number.MAX_VALUE,v=-Number.MAX_VALUE;for(let w=0;w<t.points.length;w++){const S=t.points[w][h]-this.min[h];m=Math.min(m,S),v=Math.max(v,S)}if(v<0||m>this.max[h]-this.min[h])return 0}return 1}}class Fa{constructor(t=0,r=0,c=0,h=0){if(isNaN(t)||t<0||isNaN(r)||r<0||isNaN(c)||c<0||isNaN(h)||h<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=r,this.left=c,this.right=h}interpolate(t,r,c){return r.top!=null&&t.top!=null&&(this.top=s.y.number(t.top,r.top,c)),r.bottom!=null&&t.bottom!=null&&(this.bottom=s.y.number(t.bottom,r.bottom,c)),r.left!=null&&t.left!=null&&(this.left=s.y.number(t.left,r.left,c)),r.right!=null&&t.right!=null&&(this.right=s.y.number(t.right,r.right,c)),this}getCenter(t,r){const c=s.ac((this.left+t-this.right)/2,0,t),h=s.ac((this.top+r-this.bottom)/2,0,r);return new s.P(c,h)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Fa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Oa=85.051129;class Wr{constructor(t,r,c,h,m){this.tileSize=512,this._renderWorldCopies=m===void 0||!!m,this._minZoom=t||0,this._maxZoom=r||22,this._minPitch=c??0,this._maxPitch=h??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Fa,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const t=new Wr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.apply(this),t}apply(t){this.tileSize=t.tileSize,this.latRange=t.latRange,this.lngRange=t.lngRange,this.width=t.width,this.height=t.height,this._center=t._center,this._elevation=t._elevation,this.minElevationForCurrentTile=t.minElevationForCurrentTile,this.zoom=t.zoom,this.angle=t.angle,this._fov=t._fov,this._pitch=t._pitch,this._unmodified=t._unmodified,this._edgeInsets=t._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const r=-s.b3(t,-180,180)*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=function(){var c=new s.A(4);return s.A!=Float32Array&&(c[1]=0,c[2]=0),c[0]=1,c[3]=1,c}(),function(c,h,m){var v=h[0],w=h[1],S=h[2],C=h[3],M=Math.sin(m),D=Math.cos(m);c[0]=v*D+S*M,c[1]=w*D+C*M,c[2]=v*-M+S*D,c[3]=w*-M+C*D}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const r=s.ac(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const r=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==r&&(this._unmodified=!1,this._zoom=r,this.tileZoom=Math.max(0,Math.floor(r)),this.scale=this.zoomScale(r),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,r,c){this._unmodified=!1,this._edgeInsets.interpolate(t,r,c),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const r=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,r)}getVisibleUnwrappedCoordinates(t){const r=[new s.b4(0,t)];if(this._renderWorldCopies){const c=this.pointCoordinate(new s.P(0,0)),h=this.pointCoordinate(new s.P(this.width,0)),m=this.pointCoordinate(new s.P(this.width,this.height)),v=this.pointCoordinate(new s.P(0,this.height)),w=Math.floor(Math.min(c.x,h.x,m.x,v.x)),S=Math.floor(Math.max(c.x,h.x,m.x,v.x)),C=1;for(let M=w-C;M<=S+C;M++)M!==0&&r.push(new s.b4(M,t))}return r}coveringTiles(t){var r,c;let h=this.coveringZoomLevel(t);const m=h;if(t.minzoom!==void 0&&h<t.minzoom)return[];t.maxzoom!==void 0&&h>t.maxzoom&&(h=t.maxzoom);const v=this.pointCoordinate(this.getCameraPoint()),w=s.Z.fromLngLat(this.center),S=Math.pow(2,h),C=[S*v.x,S*v.y,0],M=[S*w.x,S*w.y,0],D=Va.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,h);let R=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(R=h);const U=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,j=H=>({aabb:new Zr([H*S,0,0],[(H+1)*S,S,0]),zoom:0,x:0,y:0,wrap:H,fullyVisible:!1}),W=[],K=[],tt=h,q=t.reparseOverscaled?m:h;if(this._renderWorldCopies)for(let H=1;H<=3;H++)W.push(j(-H)),W.push(j(H));for(W.push(j(0));W.length>0;){const H=W.pop(),ot=H.x,rt=H.y;let ut=H.fullyVisible;if(!ut){const Et=H.aabb.intersects(D);if(Et===0)continue;ut=Et===2}const _t=t.terrain?C:M,kt=H.aabb.distanceX(_t),Ct=H.aabb.distanceY(_t),Vt=Math.max(Math.abs(kt),Math.abs(Ct));if(H.zoom===tt||Vt>U+(1<<tt-H.zoom)-2&&H.zoom>=R){const Et=tt-H.zoom,vt=C[0]-.5-(ot<<Et),Pt=C[1]-.5-(rt<<Et);K.push({tileID:new s.S(H.zoom===tt?q:H.zoom,H.wrap,H.zoom,ot,rt),distanceSq:Tt([M[0]-.5-ot,M[1]-.5-rt]),tileDistanceToCamera:Math.sqrt(vt*vt+Pt*Pt)})}else for(let Et=0;Et<4;Et++){const vt=(ot<<1)+Et%2,Pt=(rt<<1)+(Et>>1),le=H.zoom+1;let Mt=H.aabb.quadrant(Et);if(t.terrain){const Lt=new s.S(le,H.wrap,le,vt,Pt),oe=t.terrain.getMinMaxElevation(Lt),Ue=(r=oe.minElevation)!==null&&r!==void 0?r:this.elevation,he=(c=oe.maxElevation)!==null&&c!==void 0?c:this.elevation;Mt=new Zr([Mt.min[0],Mt.min[1],Ue],[Mt.max[0],Mt.max[1],he])}W.push({aabb:Mt,zoom:le,x:vt,y:Pt,wrap:H.wrap,fullyVisible:ut})}}return K.sort((H,ot)=>H.distanceSq-ot.distanceSq).map(H=>H.tileID)}resize(t,r){this.width=t,this.height=r,this.pixelsToGLUnits=[2/t,-2/r],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){const r=s.ac(t.lat,-85.051129,Oa);return new s.P(s.O(t.lng)*this.worldSize,s.Q(r)*this.worldSize)}unproject(t){return new s.Z(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(t){const r=this.elevation,c=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,h=this.pointLocation(this.centerPoint,t),m=t.getElevationForLngLatZoom(h,this.tileZoom);if(!(this.elevation-m))return;const v=c+r-m,w=Math.cos(this._pitch)*this.cameraToCenterDistance/v/s.b5(1,h.lat),S=this.scaleZoom(w/this.tileSize);this._elevation=m,this._center=h,this.zoom=S}setLocationAtPoint(t,r){const c=this.pointCoordinate(r),h=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(t),v=new s.Z(m.x-(c.x-h.x),m.y-(c.y-h.y));this.center=this.coordinateLocation(v),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,r){return r?this.coordinatePoint(this.locationCoordinate(t),r.getElevationForLngLatZoom(t,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,r){return this.coordinateLocation(this.pointCoordinate(t,r))}locationCoordinate(t){return s.Z.fromLngLat(t)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(t,r){if(r){const R=r.pointCoordinate(t);if(R!=null)return R}const c=[t.x,t.y,0,1],h=[t.x,t.y,1,1];s.af(c,c,this.pixelMatrixInverse),s.af(h,h,this.pixelMatrixInverse);const m=c[3],v=h[3],w=c[1]/m,S=h[1]/v,C=c[2]/m,M=h[2]/v,D=C===M?0:(0-C)/(M-C);return new s.Z(s.y.number(c[0]/m,h[0]/v,D)/this.worldSize,s.y.number(w,S,D)/this.worldSize)}coordinatePoint(t,r=0,c=this.pixelMatrix){const h=[t.x*this.worldSize,t.y*this.worldSize,r,1];return s.af(h,h,c),new s.P(h[0]/h[3],h[1]/h[3])}getBounds(){const t=Math.max(0,this.height/2-this.getHorizon());return new dt().extend(this.pointLocation(new s.P(0,t))).extend(this.pointLocation(new s.P(this.width,t))).extend(this.pointLocation(new s.P(this.width,this.height))).extend(this.pointLocation(new s.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new dt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Oa])}calculateTileMatrix(t){const r=t.canonical,c=this.worldSize/this.zoomScale(r.z),h=r.x+Math.pow(2,r.z)*t.wrap,m=s.an(new Float64Array(16));return s.J(m,m,[h*c,r.y*c,0]),s.K(m,m,[c/s.X,c/s.X,1]),m}calculatePosMatrix(t,r=!1){const c=t.key,h=r?this._alignedPosMatrixCache:this._posMatrixCache;if(h[c])return h[c];const m=this.calculateTileMatrix(t);return s.L(m,r?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,m),h[c]=new Float32Array(m),h[c]}calculateFogMatrix(t){const r=t.key,c=this._fogMatrixCache;if(c[r])return c[r];const h=this.calculateTileMatrix(t);return s.L(h,this.fogMatrix,h),c[r]=new Float32Array(h),c[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(t,r){r=s.ac(+r,this.minZoom,this.maxZoom);const c={center:new s.N(t.lng,t.lat),zoom:r};let h=this.lngRange;if(!this._renderWorldCopies&&h===null){const H=179.9999999999;h=[-H,H]}const m=this.tileSize*this.zoomScale(c.zoom);let v=0,w=m,S=0,C=m,M=0,D=0;const{x:R,y:U}=this.size;if(this.latRange){const H=this.latRange;v=s.Q(H[1])*m,w=s.Q(H[0])*m,w-v<U&&(M=U/(w-v))}h&&(S=s.b3(s.O(h[0])*m,0,m),C=s.b3(s.O(h[1])*m,0,m),C<S&&(C+=m),C-S<R&&(D=R/(C-S)));const{x:j,y:W}=this.project.call({worldSize:m},t);let K,tt;const q=Math.max(D||0,M||0);if(q){const H=new s.P(D?(C+S)/2:j,M?(w+v)/2:W);return c.center=this.unproject.call({worldSize:m},H).wrap(),c.zoom+=this.scaleZoom(q),c}if(this.latRange){const H=U/2;W-H<v&&(tt=v+H),W+H>w&&(tt=w-H)}if(h){const H=(S+C)/2;let ot=j;this._renderWorldCopies&&(ot=s.b3(j,H-m/2,H+m/2));const rt=R/2;ot-rt<S&&(K=S+rt),ot+rt>C&&(K=C-rt)}if(K!==void 0||tt!==void 0){const H=new s.P(K??j,tt??W);c.center=this.unproject.call({worldSize:m},H).wrap()}return c}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:r,zoom:c}=this.getConstrained(this.center,this.zoom);this.center=r,this.zoom=c,this._unmodified=t,this._constraining=!1}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,r=this.point.x,c=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.b5(1,this.center.lat)*this.worldSize;let h=s.an(new Float64Array(16));s.K(h,h,[this.width/2,-this.height/2,1]),s.J(h,h,[1,-1,0]),this.labelPlaneMatrix=h,h=s.an(new Float64Array(16)),s.K(h,h,[1,-1,1]),s.J(h,h,[-1,-1,0]),s.K(h,h,[2/this.width,2/this.height,1]),this.glCoordMatrix=h;const m=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),v=Math.min(this.elevation,this.minElevationForCurrentTile),w=m-v*this._pixelPerMeter/Math.cos(this._pitch),S=v<0?w:m,C=Math.PI/2+this._pitch,M=this._fov*(.5+t.y/this.height),D=Math.sin(M)*S/Math.sin(s.ac(Math.PI-C-M,.01,Math.PI-.01)),R=this.getHorizon(),U=2*Math.atan(R/this.cameraToCenterDistance)*(.5+t.y/(2*R)),j=Math.sin(U)*S/Math.sin(s.ac(Math.PI-C-U,.01,Math.PI-.01)),W=Math.min(D,j);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*W+S),this.nearZ=this.height/50,h=new Float64Array(16),s.b6(h,this._fov,this.width/this.height,this.nearZ,this.farZ),h[8]=2*-t.x/this.width,h[9]=2*t.y/this.height,this.projectionMatrix=s.ae(h),s.K(h,h,[1,-1,1]),s.J(h,h,[0,0,-this.cameraToCenterDistance]),s.b7(h,h,this._pitch),s.ad(h,h,this.angle),s.J(h,h,[-r,-c,0]),this.mercatorMatrix=s.K([],h,[this.worldSize,this.worldSize,this.worldSize]),s.K(h,h,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.L(new Float64Array(16),this.labelPlaneMatrix,h),s.J(h,h,[0,0,-this.elevation]),this.modelViewProjectionMatrix=h,this.invModelViewProjectionMatrix=s.as([],h),this.fogMatrix=new Float64Array(16),s.b6(this.fogMatrix,this._fov,this.width/this.height,m,this.farZ),this.fogMatrix[8]=2*-t.x/this.width,this.fogMatrix[9]=2*t.y/this.height,s.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),s.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),s.b7(this.fogMatrix,this.fogMatrix,this._pitch),s.ad(this.fogMatrix,this.fogMatrix,this.angle),s.J(this.fogMatrix,this.fogMatrix,[-r,-c,0]),s.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),s.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=s.L(new Float64Array(16),this.labelPlaneMatrix,h);const K=this.width%2/2,tt=this.height%2/2,q=Math.cos(this.angle),H=Math.sin(this.angle),ot=r-Math.round(r)+q*K+H*tt,rt=c-Math.round(c)+q*tt+H*K,ut=new Float64Array(h);if(s.J(ut,ut,[ot>.5?ot-1:ot,rt>.5?rt-1:rt,0]),this.alignedModelViewProjectionMatrix=ut,h=s.as(new Float64Array(16),this.pixelMatrix),!h)throw new Error("failed to invert matrix");this.pixelMatrixInverse=h,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const t=this.pointCoordinate(new s.P(0,0)),r=[t.x*this.worldSize,t.y*this.worldSize,0,1];return s.af(r,r,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(0,t))}getCameraQueryGeometry(t){const r=this.getCameraPoint();if(t.length===1)return[t[0],r];{let c=r.x,h=r.y,m=r.x,v=r.y;for(const w of t)c=Math.min(c,w.x),h=Math.min(h,w.y),m=Math.max(m,w.x),v=Math.max(v,w.y);return[new s.P(c,h),new s.P(m,h),new s.P(m,v),new s.P(c,v),new s.P(c,h)]}}lngLatToCameraDepth(t,r){const c=this.locationCoordinate(t),h=[c.x*this.worldSize,c.y*this.worldSize,r,1];return s.af(h,h,this.modelViewProjectionMatrix),h[2]/h[3]}}function Ds(_,t){let r,c=!1,h=null,m=null;const v=()=>{h=null,c&&(_.apply(m,r),h=setTimeout(v,t),c=!1)};return(...w)=>(c=!0,m=this,r=w,h||v(),h)}class bu{constructor(t){this._getCurrentHash=()=>{const r=window.location.hash.replace("#","");if(this._hashName){let c;return r.split("&").map(h=>h.split("=")).forEach(h=>{h[0]===this._hashName&&(c=h)}),(c&&c[1]||"").split("/")}return r.split("/")},this._onHashChange=()=>{const r=this._getCurrentHash();if(r.length>=3&&!r.some(c=>isNaN(c))){const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:c,pitch:+(r[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const r=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,r)},this._removeHash=()=>{const r=this._getCurrentHash();if(r.length===0)return;const c=r.join("/");let h=c;h.split("&").length>0&&(h=h.split("&")[0]),this._hashName&&(h=`${this._hashName}=${c}`);let m=window.location.hash.replace(h,"");m.startsWith("#&")?m=m.slice(0,1)+m.slice(2):m==="#"&&(m="");let v=window.location.href.replace(/(#.+)?$/,m);v=v.replace("&&","&"),window.history.replaceState(window.history.state,null,v)},this._updateHash=Ds(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const r=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,h=Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,h),v=Math.round(r.lng*m)/m,w=Math.round(r.lat*m)/m,S=this._map.getBearing(),C=this._map.getPitch();let M="";if(M+=t?`/${v}/${w}/${c}`:`${c}/${w}/${v}`,(S||C)&&(M+="/"+Math.round(10*S)/10),C&&(M+=`/${Math.round(C)}`),this._hashName){const D=this._hashName;let R=!1;const U=window.location.hash.slice(1).split("&").map(j=>{const W=j.split("=")[0];return W===D?(R=!0,`${W}=${M}`):j}).filter(j=>j);return R||U.push(`${D}=${M}`),`#${U.join("&")}`}return`#${M}`}}const Xr={linearity:.3,easing:s.b8(0,0,.3,1)},$d=s.e({deceleration:2500,maxSpeed:1400},Xr),yu=s.e({deceleration:20,maxSpeed:1400},Xr),Ps=s.e({deceleration:1e3,maxSpeed:360},Xr),$l=s.e({deceleration:1e3,maxSpeed:90},Xr);class vu{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:X.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,r=X.now();for(;t.length>0&&r-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const r={zoom:0,bearing:0,pitch:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:m}of this._inertiaBuffer)r.zoom+=m.zoomDelta||0,r.bearing+=m.bearingDelta||0,r.pitch+=m.pitchDelta||0,m.panDelta&&r.pan._add(m.panDelta),m.around&&(r.around=m.around),m.pinchAround&&(r.pinchAround=m.pinchAround);const c=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,h={};if(r.pan.mag()){const m=pr(r.pan.mag(),c,s.e({},$d,t||{}));h.offset=r.pan.mult(m.amount/r.pan.mag()),h.center=this._map.transform.center,Na(h,m)}if(r.zoom){const m=pr(r.zoom,c,yu);h.zoom=this._map.transform.zoom+m.amount,Na(h,m)}if(r.bearing){const m=pr(r.bearing,c,Ps);h.bearing=this._map.transform.bearing+s.ac(m.amount,-179,179),Na(h,m)}if(r.pitch){const m=pr(r.pitch,c,$l);h.pitch=this._map.transform.pitch+m.amount,Na(h,m)}if(h.zoom||h.bearing){const m=r.pinchAround===void 0?r.around:r.pinchAround;h.around=m?this._map.unproject(m):this._map.getCenter()}return this.clear(),s.e(h,{noMoveStart:!0})}}function Na(_,t){(!_.duration||_.duration<t.duration)&&(_.duration=t.duration,_.easing=t.easing)}function pr(_,t,r){const{maxSpeed:c,linearity:h,deceleration:m}=r,v=s.ac(_*h/(t/1e3),-c,c),w=Math.abs(v)/(m*h);return{easing:r.easing,duration:1e3*w,amount:v*(w/2)}}class Ui extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,r,c,h={}){const m=J.mousePos(r.getCanvas(),c),v=r.unproject(m);super(t,s.e({point:m,lngLat:v,originalEvent:c},h)),this._defaultPrevented=!1,this.target=r}}class Ua extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,r,c){const h=t==="touchend"?c.changedTouches:c.touches,m=J.touchPos(r.getCanvasContainer(),h),v=m.map(S=>r.unproject(S)),w=m.reduce((S,C,M,D)=>S.add(C.div(D.length)),new s.P(0,0));super(t,{points:m,point:w,lngLats:v,lngLat:r.unproject(w),originalEvent:c}),this._defaultPrevented=!1}}class Vl extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,r,c){super(t,{originalEvent:c}),this._defaultPrevented=!1}}class ii{constructor(t,r){this._map=t,this._clickTolerance=r.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Vl(t.type,this._map,t))}mousedown(t,r){return this._mousedownPos=r,this._firePreventable(new Ui(t.type,this._map,t))}mouseup(t){this._map.fire(new Ui(t.type,this._map,t))}click(t,r){this._mousedownPos&&this._mousedownPos.dist(r)>=this._clickTolerance||this._map.fire(new Ui(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Ui(t.type,this._map,t))}mouseover(t){this._map.fire(new Ui(t.type,this._map,t))}mouseout(t){this._map.fire(new Ui(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Ua(t.type,this._map,t))}touchmove(t){this._map.fire(new Ua(t.type,this._map,t))}touchend(t){this._map.fire(new Ua(t.type,this._map,t))}touchcancel(t){this._map.fire(new Ua(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mr{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Ui(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ui("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Ui(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Pi{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.pointLocation(s.P.convert(t),this._map.terrain)}}class zs{constructor(t,r){this._map=t,this._tr=new Pi(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=r.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,r){this.isEnabled()&&t.shiftKey&&t.button===0&&(J.disableDrag(),this._startPos=this._lastPos=r,this._active=!0)}mousemoveWindow(t,r){if(!this._active)return;const c=r;if(this._lastPos.equals(c)||!this._box&&c.dist(this._startPos)<this._clickTolerance)return;const h=this._startPos;this._lastPos=c,this._box||(this._box=J.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const m=Math.min(h.x,c.x),v=Math.max(h.x,c.x),w=Math.min(h.y,c.y),S=Math.max(h.y,c.y);J.setTransform(this._box,`translate(${m}px,${w}px)`),this._box.style.width=v-m+"px",this._box.style.height=S-w+"px"}mouseupWindow(t,r){if(!this._active||t.button!==0)return;const c=this._startPos,h=r;if(this.reset(),J.suppressClick(),c.x!==h.x||c.y!==h.y)return this._map.fire(new s.k("boxzoomend",{originalEvent:t})),{cameraAnimation:m=>m.fitScreenCoordinates(c,h,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(J.remove(this._box),this._box=null),J.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,r){return this._map.fire(new s.k(t,{originalEvent:r}))}}function Ha(_,t){if(_.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${t.length}`);const r={};for(let c=0;c<_.length;c++)r[_[c].identifier]=t[c];return r}class xu{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,r,c){(this.centroid||c.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),c.length===this.numTouches&&(this.centroid=function(h){const m=new s.P(0,0);for(const v of h)m._add(v);return m.div(h.length)}(r),this.touches=Ha(c,r)))}touchmove(t,r,c){if(this.aborted||!this.centroid)return;const h=Ha(c,r);for(const m in this.touches){const v=h[m];(!v||v.dist(this.touches[m])>30)&&(this.aborted=!0)}}touchend(t,r,c){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),c.length===0){const h=!this.aborted&&this.centroid;if(this.reset(),h)return h}}}class Vo{constructor(t){this.singleTap=new xu(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,r,c){this.singleTap.touchstart(t,r,c)}touchmove(t,r,c){this.singleTap.touchmove(t,r,c)}touchend(t,r,c){const h=this.singleTap.touchend(t,r,c);if(h){const m=t.timeStamp-this.lastTime<500,v=!this.lastTap||this.lastTap.dist(h)<30;if(m&&v||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=h,this.count===this.numTaps)return this.reset(),h}}}class ja{constructor(t){this._tr=new Pi(t),this._zoomIn=new Vo({numTouches:1,numTaps:2}),this._zoomOut=new Vo({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,r,c){this._zoomIn.touchstart(t,r,c),this._zoomOut.touchstart(t,r,c)}touchmove(t,r,c){this._zoomIn.touchmove(t,r,c),this._zoomOut.touchmove(t,r,c)}touchend(t,r,c){const h=this._zoomIn.touchend(t,r,c),m=this._zoomOut.touchend(t,r,c),v=this._tr;return h?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:w=>w.easeTo({duration:300,zoom:v.zoom+1,around:v.unproject(h)},{originalEvent:t})}):m?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:w=>w.easeTo({duration:300,zoom:v.zoom-1,around:v.unproject(m)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _r{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const r=this._moveFunction(...t);if(r.bearingDelta||r.pitchDelta||r.around||r.panDelta)return this._active=!0,r}dragStart(t,r){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=r.length?r[0]:r,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,r){if(!this.isEnabled())return;const c=this._lastPoint;if(!c)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const h=r.length?r[0]:r;return!this._moved&&h.dist(c)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=h,this._move(c,h))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&J.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const wu={0:1,2:2};class Ls{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const r=J.mouseButton(t);this._eventButton=r}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!function(r,c){const h=wu[c];return r.buttons===void 0||(r.buttons&h)!==h}(t,this._eventButton)}isValidEndEvent(t){return J.mouseButton(t)===this._eventButton}}class Fl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}const Bs=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=t=>{t.preventDefault()}},Ol=({enable:_,clickTolerance:t,bearingDegreesPerPixelMoved:r=.8})=>{const c=new Ls({checkCorrectEvent:h=>J.mouseButton(h)===0&&h.ctrlKey||J.mouseButton(h)===2});return new _r({clickTolerance:t,move:(h,m)=>({bearingDelta:(m.x-h.x)*r}),moveStateManager:c,enable:_,assignEvents:Bs})},Fo=({enable:_,clickTolerance:t,pitchDegreesPerPixelMoved:r=-.5})=>{const c=new Ls({checkCorrectEvent:h=>J.mouseButton(h)===0&&h.ctrlKey||J.mouseButton(h)===2});return new _r({clickTolerance:t,move:(h,m)=>({pitchDelta:(m.y-h.y)*r}),moveStateManager:c,enable:_,assignEvents:Bs})};class ku{constructor(t,r){this._clickTolerance=t.clickTolerance||1,this._map=r,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,r,c){return this._calculateTransform(t,r,c)}touchmove(t,r,c){if(this._active){if(!this._shouldBePrevented(c.length))return t.preventDefault(),this._calculateTransform(t,r,c);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,r,c){this._calculateTransform(t,r,c),this._active&&this._shouldBePrevented(c.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,r,c){c.length>0&&(this._active=!0);const h=Ha(c,r),m=new s.P(0,0),v=new s.P(0,0);let w=0;for(const C in h){const M=h[C],D=this._touches[C];D&&(m._add(M),v._add(M.sub(D)),w++,h[C]=M)}if(this._touches=h,this._shouldBePrevented(w)||!v.mag())return;const S=v.div(w);return this._sum._add(S),this._sum.mag()<this._clickTolerance?void 0:{around:m.div(w),panDelta:S}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rs{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,r,c){this._firstTwoTouches||c.length<2||(this._firstTwoTouches=[c[0].identifier,c[1].identifier],this._start([r[0],r[1]]))}touchmove(t,r,c){if(!this._firstTwoTouches)return;t.preventDefault();const[h,m]=this._firstTwoTouches,v=qa(c,r,h),w=qa(c,r,m);if(!v||!w)return;const S=this._aroundCenter?null:v.add(w).div(2);return this._move([v,w],S,t)}touchend(t,r,c){if(!this._firstTwoTouches)return;const[h,m]=this._firstTwoTouches,v=qa(c,r,h),w=qa(c,r,m);v&&w||(this._active&&J.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function qa(_,t,r){for(let c=0;c<_.length;c++)if(_[c].identifier===r)return t[c]}function Nl(_,t){return Math.log(_/t)/Math.LN2}class Ul extends Rs{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,r){const c=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Nl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Nl(this._distance,c),pinchAround:r}}}function Hl(_,t){return 180*_.angleWith(t)/Math.PI}class jl extends Rs{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,r,c){const h=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Hl(this._vector,h),pinchAround:r}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const r=25/(Math.PI*this._minDiameter)*360,c=Hl(t,this._startVector);return Math.abs(c)<r}}function fr(_){return Math.abs(_.y)>Math.abs(_.x)}class ql extends Rs{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,r,c){super.touchstart(t,r,c),this._currentTouchCount=c.length}_start(t){this._lastPoints=t,fr(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,r,c){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const h=t[0].sub(this._lastPoints[0]),m=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(h,m,c.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(h.y+m.y)/2*-.5}):void 0}gestureBeginsVertically(t,r,c){if(this._valid!==void 0)return this._valid;const h=t.mag()>=2,m=r.mag()>=2;if(!h&&!m)return;if(!h||!m)return this._firstMove===void 0&&(this._firstMove=c),c-this._firstMove<100&&void 0;const v=t.y>0==r.y>0;return fr(t)&&fr(r)&&v}}const $n={panStep:100,bearingStep:15,pitchStep:10};class Vn{constructor(t){this._tr=new Pi(t);const r=$n;this._panStep=r.panStep,this._bearingStep=r.bearingStep,this._pitchStep=r.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let r=0,c=0,h=0,m=0,v=0;switch(t.keyCode){case 61:case 107:case 171:case 187:r=1;break;case 189:case 109:case 173:r=-1;break;case 37:t.shiftKey?c=-1:(t.preventDefault(),m=-1);break;case 39:t.shiftKey?c=1:(t.preventDefault(),m=1);break;case 38:t.shiftKey?h=1:(t.preventDefault(),v=-1);break;case 40:t.shiftKey?h=-1:(t.preventDefault(),v=1);break;default:return}return this._rotationDisabled&&(c=0,h=0),{cameraAnimation:w=>{const S=this._tr;w.easeTo({duration:300,easeId:"keyboardHandler",easing:Su,zoom:r?Math.round(S.zoom)+r*(t.shiftKey?2:1):S.zoom,bearing:S.bearing+c*this._bearingStep,pitch:S.pitch+h*this._pitchStep,offset:[-m*this._panStep,-v*this._panStep],center:S.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Su(_){return _*(2-_)}const Fn=4.000244140625;class gr{constructor(t,r){this._onTimeout=c=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)},this._map=t,this._tr=new Pi(t),this._triggerRenderFrame=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let r=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const c=X.now(),h=c-(this._lastWheelEventTime||0);this._lastWheelEventTime=c,r!==0&&r%Fn==0?this._type="wheel":r!==0&&Math.abs(r)<4?this._type="trackpad":h>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(h*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),t.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=t,this._delta-=r,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const r=J.mousePos(this._map.getCanvas(),t),c=this._tr;this._around=r.y>c.transform.height/2-c.transform.getHorizon()?s.N.convert(this._aroundCenter?c.center:c.unproject(r)):s.N.convert(c.center),this._aroundPoint=c.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(this._delta!==0){const S=this._type==="wheel"&&Math.abs(this._delta)>Fn?this._wheelZoomRate:this._defaultZoomRate;let C=2/(1+Math.exp(-Math.abs(this._delta*S)));this._delta<0&&C!==0&&(C=1/C);const M=typeof this._targetZoom=="number"?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(M*C))),this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const r=typeof this._targetZoom=="number"?this._targetZoom:t.zoom,c=this._startZoom,h=this._easing;let m,v=!1;const w=X.now()-this._lastWheelEventTime;if(this._type==="wheel"&&c&&h&&w){const S=Math.min(w/200,1),C=h(S);m=s.y.number(c,r,C),S<1?this._frameId||(this._frameId=!0):v=!0}else m=r,v=!0;return this._active=!0,v&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!v,zoomDelta:m-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let r=s.b9;if(this._prevEase){const c=this._prevEase,h=(X.now()-c.start)/c.duration,m=c.easing(h+.01)-c.easing(h),v=.27/Math.sqrt(m*m+1e-4)*.01,w=Math.sqrt(.0729-v*v);r=s.b8(v,w,.25,1)}return this._prevEase={start:X.now(),duration:t,easing:r},r}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Iu{constructor(t,r){this._clickZoom=t,this._tapZoom=r}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Vd{constructor(t){this._tr=new Pi(t),this.reset()}reset(){this._active=!1}dblclick(t,r){return t.preventDefault(),{cameraAnimation:c=>{c.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(r)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fd{constructor(){this._tap=new Vo({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,r,c){if(!this._swipePoint)if(this._tapTime){const h=r[0],m=t.timeStamp-this._tapTime<500,v=this._tapPoint.dist(h)<30;m&&v?c.length>0&&(this._swipePoint=h,this._swipeTouch=c[0].identifier):this.reset()}else this._tap.touchstart(t,r,c)}touchmove(t,r,c){if(this._tapTime){if(this._swipePoint){if(c[0].identifier!==this._swipeTouch)return;const h=r[0],m=h.y-this._swipePoint.y;return this._swipePoint=h,t.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(t,r,c)}touchend(t,r,c){if(this._tapTime)this._swipePoint&&c.length===0&&this.reset();else{const h=this._tap.touchend(t,r,c);h&&(this._tapTime=t.timeStamp,this._tapPoint=h)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tu{constructor(t,r,c){this._el=t,this._mousePan=r,this._touchPan=c}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Gl{constructor(t,r,c){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=r,this._mousePitch=c}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Kr{constructor(t,r,c,h){this._el=t,this._touchZoom=r,this._touchRotate=c,this._tapDragZoom=h,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class eo{constructor(t,r){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=r,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=J.create("div","maplibregl-cooperative-gesture-screen",t);let r=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(r=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const c=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),h=document.createElement("div");h.className="maplibregl-desktop-message",h.textContent=r,this._container.appendChild(h);const m=document.createElement("div");m.className="maplibregl-mobile-message",m.textContent=c,this._container.appendChild(m),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(J.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,r){this._enabled&&(this._map.fire(new s.k("cooperativegestureprevented",{gestureType:t,originalEvent:r})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const $t=_=>_.zoom||_.drag||_.pitch||_.rotate;class Cu extends s.k{}function Ga(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Eu{constructor(t,r){this.handleWindowEvent=h=>{this.handleEvent(h,`${h.type}Window`)},this.handleEvent=(h,m)=>{if(h.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const v=h.type==="renderFrame"?void 0:h,w={needsRenderFrame:!1},S={},C={},M=h.touches,D=M?this._getMapTouches(M):void 0,R=D?J.touchPos(this._map.getCanvas(),D):J.mousePos(this._map.getCanvas(),h);for(const{handlerName:W,handler:K,allowed:tt}of this._handlers){if(!K.isEnabled())continue;let q;this._blockedByActive(C,tt,W)?K.reset():K[m||h.type]&&(q=K[m||h.type](h,R,D),this.mergeHandlerResult(w,S,q,W,v),q&&q.needsRenderFrame&&this._triggerRenderFrame()),(q||K.isActive())&&(C[W]=K)}const U={};for(const W in this._previousActiveHandlers)C[W]||(U[W]=v);this._previousActiveHandlers=C,(Object.keys(U).length||Ga(w))&&(this._changes.push([w,S,U]),this._triggerRenderFrame()),(Object.keys(C).length||Ga(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:j}=w;j&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],j(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new vu(t),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r);const c=this._el;this._listeners=[[c,"touchstart",{passive:!0}],[c,"touchmove",{passive:!1}],[c,"touchend",void 0],[c,"touchcancel",void 0],[c,"mousedown",void 0],[c,"mousemove",void 0],[c,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[c,"mouseover",void 0],[c,"mouseout",void 0],[c,"dblclick",void 0],[c,"click",void 0],[c,"keydown",{capture:!1}],[c,"keyup",void 0],[c,"wheel",{passive:!1}],[c,"contextmenu",void 0],[window,"blur",void 0]];for(const[h,m,v]of this._listeners)J.addEventListener(h,m,h===document?this.handleWindowEvent:this.handleEvent,v)}destroy(){for(const[t,r,c]of this._listeners)J.removeEventListener(t,r,t===document?this.handleWindowEvent:this.handleEvent,c)}_addDefaultHandlers(t){const r=this._map,c=r.getCanvasContainer();this._add("mapEvent",new ii(r,t));const h=r.boxZoom=new zs(r,t);this._add("boxZoom",h),t.interactive&&t.boxZoom&&h.enable();const m=r.cooperativeGestures=new eo(r,t.cooperativeGestures);this._add("cooperativeGestures",m),t.cooperativeGestures&&m.enable();const v=new ja(r),w=new Vd(r);r.doubleClickZoom=new Iu(w,v),this._add("tapZoom",v),this._add("clickZoom",w),t.interactive&&t.doubleClickZoom&&r.doubleClickZoom.enable();const S=new Fd;this._add("tapDragZoom",S);const C=r.touchPitch=new ql(r);this._add("touchPitch",C),t.interactive&&t.touchPitch&&r.touchPitch.enable(t.touchPitch);const M=Ol(t),D=Fo(t);r.dragRotate=new Gl(t,M,D),this._add("mouseRotate",M,["mousePitch"]),this._add("mousePitch",D,["mouseRotate"]),t.interactive&&t.dragRotate&&r.dragRotate.enable();const R=(({enable:q,clickTolerance:H})=>{const ot=new Ls({checkCorrectEvent:rt=>J.mouseButton(rt)===0&&!rt.ctrlKey});return new _r({clickTolerance:H,move:(rt,ut)=>({around:ut,panDelta:ut.sub(rt)}),activateOnStart:!0,moveStateManager:ot,enable:q,assignEvents:Bs})})(t),U=new ku(t,r);r.dragPan=new Tu(c,R,U),this._add("mousePan",R),this._add("touchPan",U,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&r.dragPan.enable(t.dragPan);const j=new jl,W=new Ul;r.touchZoomRotate=new Kr(c,W,j,S),this._add("touchRotate",j,["touchPan","touchZoom"]),this._add("touchZoom",W,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&r.touchZoomRotate.enable(t.touchZoomRotate);const K=r.scrollZoom=new gr(r,()=>this._triggerRenderFrame());this._add("scrollZoom",K,["mousePan"]),t.interactive&&t.scrollZoom&&r.scrollZoom.enable(t.scrollZoom);const tt=r.keyboard=new Vn(r);this._add("keyboard",tt),t.interactive&&t.keyboard&&r.keyboard.enable(),this._add("blockableMapEvent",new mr(r))}_add(t,r,c){this._handlers.push({handlerName:t,handler:r,allowed:c}),this._handlersById[t]=r}stop(t){if(!this._updatingCamera){for(const{handler:r}of this._handlers)r.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!$t(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,r,c){for(const h in t)if(h!==c&&(!r||r.indexOf(h)<0))return!0;return!1}_getMapTouches(t){const r=[];for(const c of t)this._el.contains(c.target)&&r.push(c);return r}mergeHandlerResult(t,r,c,h,m){if(!c)return;s.e(t,c);const v={handlerName:h,originalEvent:c.originalEvent||m};c.zoomDelta!==void 0&&(r.zoom=v),c.panDelta!==void 0&&(r.drag=v),c.pitchDelta!==void 0&&(r.pitch=v),c.bearingDelta!==void 0&&(r.rotate=v)}_applyChanges(){const t={},r={},c={};for(const[h,m,v]of this._changes)h.panDelta&&(t.panDelta=(t.panDelta||new s.P(0,0))._add(h.panDelta)),h.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+h.zoomDelta),h.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+h.bearingDelta),h.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+h.pitchDelta),h.around!==void 0&&(t.around=h.around),h.pinchAround!==void 0&&(t.pinchAround=h.pinchAround),h.noInertia&&(t.noInertia=h.noInertia),s.e(r,m),s.e(c,v);this._updateMapTransform(t,r,c),this._changes=[]}_updateMapTransform(t,r,c){const h=this._map,m=h._getTransformForUpdate(),v=h.terrain;if(!(Ga(t)||v&&this._terrainMovement))return this._fireEvents(r,c,!0);let{panDelta:w,zoomDelta:S,bearingDelta:C,pitchDelta:M,around:D,pinchAround:R}=t;R!==void 0&&(D=R),h._stop(!0),D=D||h.transform.centerPoint;const U=m.pointLocation(w?D.sub(w):D);C&&(m.bearing+=C),M&&(m.pitch+=M),S&&(m.zoom+=S),v?this._terrainMovement||!r.drag&&!r.zoom?r.drag&&this._terrainMovement?m.center=m.pointLocation(m.centerPoint.sub(w)):m.setLocationAtPoint(U,D):(this._terrainMovement=!0,this._map._elevationFreeze=!0,m.setLocationAtPoint(U,D)):m.setLocationAtPoint(U,D),h._applyUpdatedTransform(m),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(r,c,!0)}_fireEvents(t,r,c){const h=$t(this._eventsInProgress),m=$t(t),v={};for(const D in t){const{originalEvent:R}=t[D];this._eventsInProgress[D]||(v[`${D}start`]=R),this._eventsInProgress[D]=t[D]}!h&&m&&this._fireEvent("movestart",m.originalEvent);for(const D in v)this._fireEvent(D,v[D]);m&&this._fireEvent("move",m.originalEvent);for(const D in t){const{originalEvent:R}=t[D];this._fireEvent(D,R)}const w={};let S;for(const D in this._eventsInProgress){const{handlerName:R,originalEvent:U}=this._eventsInProgress[D];this._handlersById[R].isActive()||(delete this._eventsInProgress[D],S=r[R]||U,w[`${D}end`]=S)}for(const D in w)this._fireEvent(D,w[D]);const C=$t(this._eventsInProgress),M=(h||m)&&!C;if(M&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const D=this._map._getTransformForUpdate();D.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(D)}if(c&&M){this._updatingCamera=!0;const D=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),R=U=>U!==0&&-this._bearingSnap<U&&U<this._bearingSnap;!D||!D.essential&&X.prefersReducedMotion?(this._map.fire(new s.k("moveend",{originalEvent:S})),R(this._map.getBearing())&&this._map.resetNorth()):(R(D.bearing||this._map.getBearing())&&(D.bearing=0),D.freezeElevation=!0,this._map.easeTo(D,{originalEvent:S})),this._updatingCamera=!1}}_fireEvent(t,r){this._map.fire(new s.k(t,r?{originalEvent:r}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new Cu("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Za extends s.E{constructor(t,r){super(),this._renderFrameCallback=()=>{const c=Math.min((X.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(c)),c<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=r.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new s.N(this.transform.center.lng,this.transform.center.lat)}setCenter(t,r){return this.jumpTo({center:t},r)}panBy(t,r,c){return t=s.P.convert(t).mult(-1),this.panTo(this.transform.center,s.e({offset:t},r),c)}panTo(t,r,c){return this.easeTo(s.e({center:t},r),c)}getZoom(){return this.transform.zoom}setZoom(t,r){return this.jumpTo({zoom:t},r),this}zoomTo(t,r,c){return this.easeTo(s.e({zoom:t},r),c)}zoomIn(t,r){return this.zoomTo(this.getZoom()+1,t,r),this}zoomOut(t,r){return this.zoomTo(this.getZoom()-1,t,r),this}getBearing(){return this.transform.bearing}setBearing(t,r){return this.jumpTo({bearing:t},r),this}getPadding(){return this.transform.padding}setPadding(t,r){return this.jumpTo({padding:t},r),this}rotateTo(t,r,c){return this.easeTo(s.e({bearing:t},r),c)}resetNorth(t,r){return this.rotateTo(0,s.e({duration:1e3},t),r),this}resetNorthPitch(t,r){return this.easeTo(s.e({bearing:0,pitch:0,duration:1e3},t),r),this}snapToNorth(t,r){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,r):this}getPitch(){return this.transform.pitch}setPitch(t,r){return this.jumpTo({pitch:t},r),this}cameraForBounds(t,r){t=dt.convert(t).adjustAntiMeridian();const c=r&&r.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),c,r)}_cameraForBoxAndBearing(t,r,c,h){const m={top:0,bottom:0,right:0,left:0};if(typeof(h=s.e({padding:m,offset:[0,0],maxZoom:this.transform.maxZoom},h)).padding=="number"){const Et=h.padding;h.padding={top:Et,bottom:Et,right:Et,left:Et}}h.padding=s.e(m,h.padding);const v=this.transform,w=v.padding,S=new dt(t,r),C=v.project(S.getNorthWest()),M=v.project(S.getNorthEast()),D=v.project(S.getSouthEast()),R=v.project(S.getSouthWest()),U=s.ba(-c),j=C.rotate(U),W=M.rotate(U),K=D.rotate(U),tt=R.rotate(U),q=new s.P(Math.max(j.x,W.x,tt.x,K.x),Math.max(j.y,W.y,tt.y,K.y)),H=new s.P(Math.min(j.x,W.x,tt.x,K.x),Math.min(j.y,W.y,tt.y,K.y)),ot=q.sub(H),rt=(v.width-(w.left+w.right+h.padding.left+h.padding.right))/ot.x,ut=(v.height-(w.top+w.bottom+h.padding.top+h.padding.bottom))/ot.y;if(ut<0||rt<0)return void s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const _t=Math.min(v.scaleZoom(v.scale*Math.min(rt,ut)),h.maxZoom),kt=s.P.convert(h.offset),Ct=new s.P((h.padding.left-h.padding.right)/2,(h.padding.top-h.padding.bottom)/2).rotate(s.ba(c)),Vt=kt.add(Ct).mult(v.scale/v.zoomScale(_t));return{center:v.unproject(C.add(D).div(2).sub(Vt)),zoom:_t,bearing:c}}fitBounds(t,r,c){return this._fitInternal(this.cameraForBounds(t,r),r,c)}fitScreenCoordinates(t,r,c,h,m){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.P.convert(t)),this.transform.pointLocation(s.P.convert(r)),c,h),h,m)}_fitInternal(t,r,c){return t?(delete(r=s.e(t,r)).padding,r.linear?this.easeTo(r,c):this.flyTo(r,c)):this}jumpTo(t,r){this.stop();const c=this._getTransformForUpdate();let h=!1,m=!1,v=!1;return"zoom"in t&&c.zoom!==+t.zoom&&(h=!0,c.zoom=+t.zoom),t.center!==void 0&&(c.center=s.N.convert(t.center)),"bearing"in t&&c.bearing!==+t.bearing&&(m=!0,c.bearing=+t.bearing),"pitch"in t&&c.pitch!==+t.pitch&&(v=!0,c.pitch=+t.pitch),t.padding==null||c.isPaddingEqual(t.padding)||(c.padding=t.padding),this._applyUpdatedTransform(c),this.fire(new s.k("movestart",r)).fire(new s.k("move",r)),h&&this.fire(new s.k("zoomstart",r)).fire(new s.k("zoom",r)).fire(new s.k("zoomend",r)),m&&this.fire(new s.k("rotatestart",r)).fire(new s.k("rotate",r)).fire(new s.k("rotateend",r)),v&&this.fire(new s.k("pitchstart",r)).fire(new s.k("pitch",r)).fire(new s.k("pitchend",r)),this.fire(new s.k("moveend",r))}calculateCameraOptionsFromTo(t,r,c,h=0){const m=s.Z.fromLngLat(t,r),v=s.Z.fromLngLat(c,h),w=v.x-m.x,S=v.y-m.y,C=v.z-m.z,M=Math.hypot(w,S,C);if(M===0)throw new Error("Can't calculate camera options with same From and To");const D=Math.hypot(w,S),R=this.transform.scaleZoom(this.transform.cameraToCenterDistance/M/this.transform.tileSize),U=180*Math.atan2(w,-S)/Math.PI;let j=180*Math.acos(D/M)/Math.PI;return j=C<0?90-j:90+j,{center:v.toLngLat(),zoom:R,pitch:j,bearing:U}}easeTo(t,r){var c;this._stop(!1,t.easeId),((t=s.e({offset:[0,0],duration:500,easing:s.b9},t)).animate===!1||!t.essential&&X.prefersReducedMotion)&&(t.duration=0);const h=this._getTransformForUpdate(),m=h.zoom,v=h.bearing,w=h.pitch,S=h.padding,C="bearing"in t?this._normalizeBearing(t.bearing,v):v,M="pitch"in t?+t.pitch:w,D="padding"in t?t.padding:h.padding,R=s.P.convert(t.offset);let U=h.centerPoint.add(R);const j=h.pointLocation(U),{center:W,zoom:K}=h.getConstrained(s.N.convert(t.center||j),(c=t.zoom)!==null&&c!==void 0?c:m);this._normalizeCenter(W,h);const tt=h.project(j),q=h.project(W).sub(tt),H=h.zoomScale(K-m);let ot,rt;t.around&&(ot=s.N.convert(t.around),rt=h.locationPoint(ot));const ut={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||K!==m,this._rotating=this._rotating||v!==C,this._pitching=this._pitching||M!==w,this._padding=!h.isPaddingEqual(D),this._easeId=t.easeId,this._prepareEase(r,t.noMoveStart,ut),this.terrain&&this._prepareElevation(W),this._ease(_t=>{if(this._zooming&&(h.zoom=s.y.number(m,K,_t)),this._rotating&&(h.bearing=s.y.number(v,C,_t)),this._pitching&&(h.pitch=s.y.number(w,M,_t)),this._padding&&(h.interpolatePadding(S,D,_t),U=h.centerPoint.add(R)),this.terrain&&!t.freezeElevation&&this._updateElevation(_t),ot)h.setLocationAtPoint(ot,rt);else{const kt=h.zoomScale(h.zoom-m),Ct=K>m?Math.min(2,H):Math.max(.5,H),Vt=Math.pow(Ct,1-_t),Et=h.unproject(tt.add(q.mult(_t*Vt)).mult(kt));h.setLocationAtPoint(h.renderWorldCopies?Et.wrap():Et,U)}this._applyUpdatedTransform(h),this._fireMoveEvents(r)},_t=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(r,_t)},t),this}_prepareEase(t,r,c={}){this._moving=!0,r||c.moving||this.fire(new s.k("movestart",t)),this._zooming&&!c.zooming&&this.fire(new s.k("zoomstart",t)),this._rotating&&!c.rotating&&this.fire(new s.k("rotatestart",t)),this._pitching&&!c.pitching&&this.fire(new s.k("pitchstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const r=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&r!==this._elevationTarget){const c=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(c-(r-(c*t+this._elevationStart))/(1-t)),this._elevationTarget=r}this.transform.elevation=s.y.number(this._elevationStart,this._elevationTarget,t)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){const r=t.getCameraPosition(),c=this.terrain.getElevationForLngLatZoom(r.lngLat,t.zoom);if(r.altitude<c){const h=this.calculateCameraOptionsFromTo(r.lngLat,c,t.center,t.elevation);return{pitch:h.pitch,zoom:h.zoom}}return{}}_applyUpdatedTransform(t){const r=[];if(this.terrain&&r.push(h=>this._elevateCameraIfInsideTerrain(h)),this.transformCameraUpdate&&r.push(h=>this.transformCameraUpdate(h)),!r.length)return;const c=t.clone();for(const h of r){const m=c.clone(),{center:v,zoom:w,pitch:S,bearing:C,elevation:M}=h(m);v&&(m.center=v),w!==void 0&&(m.zoom=w),S!==void 0&&(m.pitch=S),C!==void 0&&(m.bearing=C),M!==void 0&&(m.elevation=M),c.apply(m)}this.transform.apply(c)}_fireMoveEvents(t){this.fire(new s.k("move",t)),this._zooming&&this.fire(new s.k("zoom",t)),this._rotating&&this.fire(new s.k("rotate",t)),this._pitching&&this.fire(new s.k("pitch",t))}_afterEase(t,r){if(this._easeId&&r&&this._easeId===r)return;delete this._easeId;const c=this._zooming,h=this._rotating,m=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,c&&this.fire(new s.k("zoomend",t)),h&&this.fire(new s.k("rotateend",t)),m&&this.fire(new s.k("pitchend",t)),this.fire(new s.k("moveend",t))}flyTo(t,r){var c;if(!t.essential&&X.prefersReducedMotion){const Lt=s.M(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Lt,r)}this.stop(),t=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.b9},t);const h=this._getTransformForUpdate(),m=h.zoom,v=h.bearing,w=h.pitch,S=h.padding,C="bearing"in t?this._normalizeBearing(t.bearing,v):v,M="pitch"in t?+t.pitch:w,D="padding"in t?t.padding:h.padding,R=s.P.convert(t.offset);let U=h.centerPoint.add(R);const j=h.pointLocation(U),{center:W,zoom:K}=h.getConstrained(s.N.convert(t.center||j),(c=t.zoom)!==null&&c!==void 0?c:m);this._normalizeCenter(W,h);const tt=h.zoomScale(K-m),q=h.project(j),H=h.project(W).sub(q);let ot=t.curve;const rt=Math.max(h.width,h.height),ut=rt/tt,_t=H.mag();if("minZoom"in t){const Lt=s.ac(Math.min(t.minZoom,m,K),h.minZoom,h.maxZoom),oe=rt/h.zoomScale(Lt-m);ot=Math.sqrt(oe/_t*2)}const kt=ot*ot;function Ct(Lt){const oe=(ut*ut-rt*rt+(Lt?-1:1)*kt*kt*_t*_t)/(2*(Lt?ut:rt)*kt*_t);return Math.log(Math.sqrt(oe*oe+1)-oe)}function Vt(Lt){return(Math.exp(Lt)-Math.exp(-Lt))/2}function Et(Lt){return(Math.exp(Lt)+Math.exp(-Lt))/2}const vt=Ct(!1);let Pt=function(Lt){return Et(vt)/Et(vt+ot*Lt)},le=function(Lt){return rt*((Et(vt)*(Vt(oe=vt+ot*Lt)/Et(oe))-Vt(vt))/kt)/_t;var oe},Mt=(Ct(!0)-vt)/ot;if(Math.abs(_t)<1e-6||!isFinite(Mt)){if(Math.abs(rt-ut)<1e-6)return this.easeTo(t,r);const Lt=ut<rt?-1:1;Mt=Math.abs(Math.log(ut/rt))/ot,le=()=>0,Pt=oe=>Math.exp(Lt*ot*oe)}return t.duration="duration"in t?+t.duration:1e3*Mt/("screenSpeed"in t?+t.screenSpeed/ot:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=v!==C,this._pitching=M!==w,this._padding=!h.isPaddingEqual(D),this._prepareEase(r,!1),this.terrain&&this._prepareElevation(W),this._ease(Lt=>{const oe=Lt*Mt,Ue=1/Pt(oe);h.zoom=Lt===1?K:m+h.scaleZoom(Ue),this._rotating&&(h.bearing=s.y.number(v,C,Lt)),this._pitching&&(h.pitch=s.y.number(w,M,Lt)),this._padding&&(h.interpolatePadding(S,D,Lt),U=h.centerPoint.add(R)),this.terrain&&!t.freezeElevation&&this._updateElevation(Lt);const he=Lt===1?W:h.unproject(q.add(H.mult(le(oe))).mult(Ue));h.setLocationAtPoint(h.renderWorldCopies?he.wrap():he,U),this._applyUpdatedTransform(h),this._fireMoveEvents(r)},()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(r)},t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,r){var c;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const h=this._onEaseEnd;delete this._onEaseEnd,h.call(this,r)}return t||(c=this.handlers)===null||c===void 0||c.stop(!1),this}_ease(t,r,c){c.animate===!1||c.duration===0?(t(1),r()):(this._easeStart=X.now(),this._easeOptions=c,this._onEaseFrame=t,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,r){t=s.b3(t,-180,180);const c=Math.abs(t-r);return Math.abs(t-360-r)<c&&(t-=360),Math.abs(t+360-r)<c&&(t+=360),t}_normalizeCenter(t,r){if(!r.renderWorldCopies||r.lngRange)return;const c=t.lng-r.center.lng;t.lng+=c>180?-360:c<-180?360:0}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLatZoom(s.N.convert(t),this.transform.tileZoom)-this.transform.elevation:null}}const Yr={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Zl{constructor(t=Yr){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=r=>{!r||r.sourceDataType!=="metadata"&&r.sourceDataType!=="visibility"&&r.dataType!=="style"&&r.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=J.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=J.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=J.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){J.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,r){const c=this._map._getUIString(`AttributionControl.${r}`);t.title=c,t.setAttribute("aria-label",c)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(h=>typeof h!="string"?"":h)):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const h=this._map.style.stylesheet;this.styleOwner=h.owner,this.styleId=h.id}const r=this._map.style.sourceCaches;for(const h in r){const m=r[h];if(m.used||m.usedForTerrain){const v=m.getSource();v.attribution&&t.indexOf(v.attribution)<0&&t.push(v.attribution)}}t=t.filter(h=>String(h).trim()),t.sort((h,m)=>h.length-m.length),t=t.filter((h,m)=>{for(let v=m+1;v<t.length;v++)if(t[v].indexOf(h)>=0)return!1;return!0});const c=t.join(" | ");c!==this._attribHTML&&(this._attribHTML=c,t.length?(this._innerContainer.innerHTML=c,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Au{constructor(t={}){this._updateCompact=()=>{const r=this._container.children;if(r.length){const c=r[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&c.classList.add("maplibregl-compact"):c.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=J.create("div","maplibregl-ctrl");const r=J.create("a","maplibregl-ctrl-logo");return r.target="_blank",r.rel="noopener nofollow",r.href="https://maplibre.org/",r.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),r.setAttribute("rel","noopener nofollow"),this._container.appendChild(r),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){J.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Od{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const r=++this._id;return this._queue.push({callback:t,id:r,cancelled:!1}),r}remove(t){const r=this._currentlyRunning,c=r?this._queue.concat(r):this._queue;for(const h of c)if(h.id===t)return void(h.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const r=this._currentlyRunning=this._queue;this._queue=[];for(const c of r)if(!c.cancelled&&(c.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Nd=s.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Ud extends s.E{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,r){this.sourceCache.update(t,r),this._renderableTilesKeys=[];const c={};for(const h of t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:r}))c[h.key]=!0,this._renderableTilesKeys.push(h.key),this._tiles[h.key]||(h.posMatrix=new Float64Array(16),s.aP(h.posMatrix,0,s.X,0,s.X,0,1),this._tiles[h.key]=new Bo(h,this.tileSize));for(const h in this._tiles)c[h]||delete this._tiles[h]}freeRtt(t){for(const r in this._tiles){const c=this._tiles[r];(!t||c.tileID.equals(t)||c.tileID.isChildOf(t)||t.isChildOf(c.tileID))&&(c.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(t=>this.getTileByID(t))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t){const r={};for(const c of this._renderableTilesKeys){const h=this._tiles[c].tileID;if(h.canonical.equals(t.canonical)){const m=t.clone();m.posMatrix=new Float64Array(16),s.aP(m.posMatrix,0,s.X,0,s.X,0,1),r[c]=m}else if(h.canonical.isChildOf(t.canonical)){const m=t.clone();m.posMatrix=new Float64Array(16);const v=h.canonical.z-t.canonical.z,w=h.canonical.x-(h.canonical.x>>v<<v),S=h.canonical.y-(h.canonical.y>>v<<v),C=s.X>>v;s.aP(m.posMatrix,0,C,0,C,0,1),s.J(m.posMatrix,m.posMatrix,[-w*C,-S*C,0]),r[c]=m}else if(t.canonical.isChildOf(h.canonical)){const m=t.clone();m.posMatrix=new Float64Array(16);const v=t.canonical.z-h.canonical.z,w=t.canonical.x-(t.canonical.x>>v<<v),S=t.canonical.y-(t.canonical.y>>v<<v),C=s.X>>v;s.aP(m.posMatrix,0,s.X,0,s.X,0,1),s.J(m.posMatrix,m.posMatrix,[w*C,S*C,0]),s.K(m.posMatrix,m.posMatrix,[1/2**v,1/2**v,0]),r[c]=m}}return r}getSourceTile(t,r){const c=this.sourceCache._source;let h=t.overscaledZ-this.deltaZoom;if(h>c.maxzoom&&(h=c.maxzoom),h<c.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(h).key);let m=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!m||!m.dem)&&r)for(;h>=c.minzoom&&(!m||!m.dem);)m=this.sourceCache.getTileByID(t.scaledTo(h--).key);return m}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter(r=>r.timeAdded>=t)}}class Hd{constructor(t,r,c){this.painter=t,this.sourceCache=new Ud(r),this.options=c,this.exaggeration=typeof c.exaggeration=="number"?c.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,r,c,h=s.X){var m;if(!(r>=0&&r<h&&c>=0&&c<h))return 0;const v=this.getTerrainData(t),w=(m=v.tile)===null||m===void 0?void 0:m.dem;if(!w)return 0;const S=function(j,W,K){var tt=W[0],q=W[1];return j[0]=K[0]*tt+K[4]*q+K[12],j[1]=K[1]*tt+K[5]*q+K[13],j}([],[r/h*s.X,c/h*s.X],v.u_terrain_matrix),C=[S[0]*w.dim,S[1]*w.dim],M=Math.floor(C[0]),D=Math.floor(C[1]),R=C[0]-M,U=C[1]-D;return w.get(M,D)*(1-R)*(1-U)+w.get(M+1,D)*R*(1-U)+w.get(M,D+1)*(1-R)*U+w.get(M+1,D+1)*R*U}getElevationForLngLatZoom(t,r){if(!s.bb(r,t.wrap()))return 0;const{tileID:c,mercatorX:h,mercatorY:m}=this._getOverscaledTileIDFromLngLatZoom(t,r);return this.getElevation(c,h%s.X,m%s.X,s.X)}getElevation(t,r,c,h=s.X){return this.getDEMElevation(t,r,c,h)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const h=this.painter.context,m=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new jt(h,m,h.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new jt(h,new s.R({width:1,height:1}),h.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(h.gl.NEAREST,h.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.an([])}const r=this.sourceCache.getSourceTile(t,!0);if(r&&r.dem&&(!r.demTexture||r.needsTerrainPrepare)){const h=this.painter.context;r.demTexture=this.painter.getTileTexture(r.dem.stride),r.demTexture?r.demTexture.update(r.dem.getPixels(),{premultiply:!1}):r.demTexture=new jt(h,r.dem.getPixels(),h.gl.RGBA,{premultiply:!1}),r.demTexture.bind(h.gl.NEAREST,h.gl.CLAMP_TO_EDGE),r.needsTerrainPrepare=!1}const c=r&&r+r.tileID.key+t.key;if(c&&!this._demMatrixCache[c]){const h=this.sourceCache.sourceCache._source.maxzoom;let m=t.canonical.z-r.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=h?m=t.canonical.z-h:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const v=t.canonical.x-(t.canonical.x>>m<<m),w=t.canonical.y-(t.canonical.y>>m<<m),S=s.bc(new Float64Array(16),[1/(s.X<<m),1/(s.X<<m),0]);s.J(S,S,[v*s.X,w*s.X,0]),this._demMatrixCache[t.key]={matrix:S,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:r&&r.dem&&r.dem.dim||1,u_terrain_matrix:c?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:r&&r.dem&&r.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(r&&r.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:r}}getFramebuffer(t){const r=this.painter,c=r.width/devicePixelRatio,h=r.height/devicePixelRatio;return!this._fbo||this._fbo.width===c&&this._fbo.height===h||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new jt(r.context,{width:c,height:h,data:null},r.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(r.context.gl.NEAREST,r.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new jt(r.context,{width:c,height:h,data:null},r.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(r.context.gl.NEAREST,r.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=r.context.createFramebuffer(c,h,!0,!1),this._fbo.depthAttachment.set(r.context.createRenderbuffer(r.context.gl.DEPTH_COMPONENT16,c,h))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const r=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let m=0,v=0;m<this._coordsTextureSize;m++)for(let w=0;w<this._coordsTextureSize;w++,v+=4)r[v+0]=255&w,r[v+1]=255&m,r[v+2]=w>>8<<4|m>>8,r[v+3]=0;const c=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(r.buffer)),h=new jt(t,c,t.gl.RGBA,{premultiply:!1});return h.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=h,h}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const r=new Uint8Array(4),c=this.painter.context,h=c.gl,m=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),v=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),w=Math.round(this.painter.height/devicePixelRatio);c.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),h.readPixels(m,w-v-1,1,1,h.RGBA,h.UNSIGNED_BYTE,r),c.bindFramebuffer.set(null);const S=r[0]+(r[2]>>4<<8),C=r[1]+((15&r[2])<<8),M=this.coordsIndex[255-r[3]],D=M&&this.sourceCache.getTileByID(M);if(!D)return null;const R=this._coordsTextureSize,U=(1<<D.tileID.canonical.z)*R;return new s.Z((D.tileID.canonical.x*R+S)/U+D.tileID.wrap,(D.tileID.canonical.y*R+C)/U,this.getElevation(D.tileID,S,C,R))}depthAtPoint(t){const r=new Uint8Array(4),c=this.painter.context,h=c.gl;return c.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),h.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,h.RGBA,h.UNSIGNED_BYTE,r),c.bindFramebuffer.set(null),(r[0]/16777216+r[1]/65536+r[2]/256+r[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const t=this.painter.context,r=new s.bd,c=new s.aY,h=this.meshSize,m=s.X/h,v=h*h;for(let D=0;D<=h;D++)for(let R=0;R<=h;R++)r.emplaceBack(R*m,D*m,0);for(let D=0;D<v;D+=h+1)for(let R=0;R<h;R++)c.emplaceBack(R+D,h+R+D+1,h+R+D+2),c.emplaceBack(R+D,h+R+D+2,R+D+1);const w=r.length,S=w+2*(h+1);for(const D of[0,1])for(let R=0;R<=h;R++)for(const U of[0,1])r.emplaceBack(R*m,D*s.X,U);for(let D=0;D<2*h;D+=2)c.emplaceBack(S+D,S+D+1,S+D+3),c.emplaceBack(S+D,S+D+3,S+D+2),c.emplaceBack(w+D,w+D+3,w+D+1),c.emplaceBack(w+D,w+D+2,w+D+3);const C=r.length,M=C+2*(h+1);for(const D of[0,1])for(let R=0;R<=h;R++)for(const U of[0,1])r.emplaceBack(D*s.X,R*m,U);for(let D=0;D<2*h;D+=2)c.emplaceBack(C+D,C+D+1,C+D+3),c.emplaceBack(C+D,C+D+3,C+D+2),c.emplaceBack(M+D,M+D+3,M+D+1),c.emplaceBack(M+D,M+D+2,M+D+3);return this._mesh=new $a(t.createVertexBuffer(r,Nd.members),t.createIndexBuffer(c),s.a0.simpleSegment(0,0,r.length,c.length)),this._mesh}getMeshFrameDelta(t){return 2*Math.PI*s.be/Math.pow(2,t)/5}getMinTileElevationForLngLatZoom(t,r){var c;const{tileID:h}=this._getOverscaledTileIDFromLngLatZoom(t,r);return(c=this.getMinMaxElevation(h).minElevation)!==null&&c!==void 0?c:0}getMinMaxElevation(t){const r=this.getTerrainData(t).tile,c={minElevation:null,maxElevation:null};return r&&r.dem&&(c.minElevation=r.dem.min*this.exaggeration,c.maxElevation=r.dem.max*this.exaggeration),c}_getOverscaledTileIDFromLngLatZoom(t,r){const c=s.Z.fromLngLat(t.wrap()),h=(1<<r)*s.X,m=c.x*h,v=c.y*h,w=Math.floor(m/s.X),S=Math.floor(v/s.X);return{tileID:new s.S(r,0,r,w,S),mercatorX:m,mercatorY:v}}}class jd{constructor(t,r,c){this._context=t,this._size=r,this._tileSize=c,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const r=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),c=new jt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return c.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),r.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),r.colorAttachment.set(c.texture),{id:t,fbo:r,texture:c,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(r=>t.id!==r),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const r of this._recentlyUsed)if(!this._objects[r].inUse)return this._objects[r];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(t=>!t.inUse)===!1}}const Jr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class qd{constructor(t,r){this.painter=t,this.terrain=r,this.pool=new jd(t.context,30,r.sourceCache.tileSize*r.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,r){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter(c=>!t._layers[c].isHidden(r)),this._coordsDescendingInv={};for(const c in t.sourceCaches){this._coordsDescendingInv[c]={};const h=t.sourceCaches[c].getVisibleCoordinates();for(const m of h){const v=this.terrain.sourceCache.getTerrainCoords(m);for(const w in v)this._coordsDescendingInv[c][w]||(this._coordsDescendingInv[c][w]=[]),this._coordsDescendingInv[c][w].push(v[w])}}this._coordsDescendingInvStr={};for(const c of t._order){const h=t._layers[c],m=h.source;if(Jr[h.type]&&!this._coordsDescendingInvStr[m]){this._coordsDescendingInvStr[m]={};for(const v in this._coordsDescendingInv[m])this._coordsDescendingInvStr[m][v]=this._coordsDescendingInv[m][v].map(w=>w.key).sort().join()}}for(const c of this._renderableTiles)for(const h in this._coordsDescendingInvStr){const m=this._coordsDescendingInvStr[h][c.tileID.key];m&&m!==c.rttCoords[h]&&(c.rtt=[])}}renderLayer(t){if(t.isHidden(this.painter.transform.zoom))return!1;const r=t.type,c=this.painter,h=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(Jr[r]&&(this._prevType&&Jr[this._prevType]||this._stacks.push([]),this._prevType=r,this._stacks[this._stacks.length-1].push(t.id),!h))return!0;if(Jr[this._prevType]||Jr[r]&&h){this._prevType=r;const m=this._stacks.length-1,v=this._stacks[m]||[];for(const w of this._renderableTiles){if(this.pool.isFull()&&(As(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(w),w.rtt[m]){const C=this.pool.getObjectForId(w.rtt[m].id);if(C.stamp===w.rtt[m].stamp){this.pool.useObject(C);continue}}const S=this.pool.getOrCreateFreeObject();this.pool.useObject(S),this.pool.stampObject(S),w.rtt[m]={id:S.id,stamp:S.stamp},c.context.bindFramebuffer.set(S.fbo.framebuffer),c.context.clear({color:s.aM.transparent,stencil:0}),c.currentStencilSource=void 0;for(let C=0;C<v.length;C++){const M=c.style._layers[v[C]],D=M.source?this._coordsDescendingInv[M.source][w.tileID.key]:[w.tileID];c.context.viewport.set([0,0,S.fbo.width,S.fbo.height]),c._renderTileClippingMasks(M,D),c.renderLayer(c,c.style.sourceCaches[M.source],M,D),M.source&&(w.rttCoords[M.source]=this._coordsDescendingInvStr[M.source][w.tileID.key])}}return As(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Jr[r]}return!1}}const Gd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Zd=T,Wd={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Yr,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Mu=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},Du={showCompass:!0,showZoom:!0,visualizePitch:!1};class Wl{constructor(t,r,c=!1){this.mousedown=v=>{this.startMouse(s.e({},v,{ctrlKey:!0,preventDefault:()=>v.preventDefault()}),J.mousePos(this.element,v)),J.addEventListener(window,"mousemove",this.mousemove),J.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=v=>{this.moveMouse(v,J.mousePos(this.element,v))},this.mouseup=v=>{this.mouseRotate.dragEnd(v),this.mousePitch&&this.mousePitch.dragEnd(v),this.offTemp()},this.touchstart=v=>{v.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=J.touchPos(this.element,v.targetTouches)[0],this.startTouch(v,this._startPos),J.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),J.addEventListener(window,"touchend",this.touchend))},this.touchmove=v=>{v.targetTouches.length!==1?this.reset():(this._lastPos=J.touchPos(this.element,v.targetTouches)[0],this.moveTouch(v,this._lastPos))},this.touchend=v=>{v.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const h=t.dragRotate._mouseRotate.getClickTolerance(),m=t.dragRotate._mousePitch.getClickTolerance();this.element=r,this.mouseRotate=Ol({clickTolerance:h,enable:!0}),this.touchRotate=(({enable:v,clickTolerance:w,bearingDegreesPerPixelMoved:S=.8})=>{const C=new Fl;return new _r({clickTolerance:w,move:(M,D)=>({bearingDelta:(D.x-M.x)*S}),moveStateManager:C,enable:v,assignEvents:Mu})})({clickTolerance:h,enable:!0}),this.map=t,c&&(this.mousePitch=Fo({clickTolerance:m,enable:!0}),this.touchPitch=(({enable:v,clickTolerance:w,pitchDegreesPerPixelMoved:S=-.5})=>{const C=new Fl;return new _r({clickTolerance:w,move:(M,D)=>({pitchDelta:(D.y-M.y)*S}),moveStateManager:C,enable:v,assignEvents:Mu})})({clickTolerance:m,enable:!0})),J.addEventListener(r,"mousedown",this.mousedown),J.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),J.addEventListener(r,"touchcancel",this.reset)}startMouse(t,r){this.mouseRotate.dragStart(t,r),this.mousePitch&&this.mousePitch.dragStart(t,r),J.disableDrag()}startTouch(t,r){this.touchRotate.dragStart(t,r),this.touchPitch&&this.touchPitch.dragStart(t,r),J.disableDrag()}moveMouse(t,r){const c=this.map,{bearingDelta:h}=this.mouseRotate.dragMove(t,r)||{};if(h&&c.setBearing(c.getBearing()+h),this.mousePitch){const{pitchDelta:m}=this.mousePitch.dragMove(t,r)||{};m&&c.setPitch(c.getPitch()+m)}}moveTouch(t,r){const c=this.map,{bearingDelta:h}=this.touchRotate.dragMove(t,r)||{};if(h&&c.setBearing(c.getBearing()+h),this.touchPitch){const{pitchDelta:m}=this.touchPitch.dragMove(t,r)||{};m&&c.setPitch(c.getPitch()+m)}}off(){const t=this.element;J.removeEventListener(t,"mousedown",this.mousedown),J.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),J.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),J.removeEventListener(window,"touchend",this.touchend),J.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){J.enableDrag(),J.removeEventListener(window,"mousemove",this.mousemove),J.removeEventListener(window,"mouseup",this.mouseup),J.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),J.removeEventListener(window,"touchend",this.touchend)}}let Oo;function Pu(_,t,r){const c=new s.N(_.lng,_.lat);if(_=new s.N(_.lng,_.lat),t){const h=new s.N(_.lng-360,_.lat),m=new s.N(_.lng+360,_.lat),v=r.locationPoint(_).distSqr(t);r.locationPoint(h).distSqr(t)<v?_=h:r.locationPoint(m).distSqr(t)<v&&(_=m)}for(;Math.abs(_.lng-r.center.lng)>180;){const h=r.locationPoint(_);if(h.x>=0&&h.y>=0&&h.x<=r.width&&h.y<=r.height)break;_.lng>r.center.lng?_.lng-=360:_.lng+=360}return _.lng!==c.lng&&r.locationPoint(_).y>r.height/2-r.getHorizon()?_:c}const $s={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Xl(_,t,r){const c=_.classList;for(const h in $s)c.remove(`maplibregl-${r}-anchor-${h}`);c.add(`maplibregl-${r}-anchor-${t}`)}class Vs extends s.E{constructor(t){if(super(),this._onKeyPress=r=>{const c=r.code,h=r.charCode||r.keyCode;c!=="Space"&&c!=="Enter"&&h!==32&&h!==13||this.togglePopup()},this._onMapClick=r=>{const c=r.originalEvent.target,h=this._element;this._popup&&(c===h||h.contains(c))&&this.togglePopup()},this._update=r=>{var c;if(!this._map)return;const h=this._map.loaded()&&!this._map.isMoving();((r==null?void 0:r.type)==="terrain"||(r==null?void 0:r.type)==="render"&&!h)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Pu(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let v="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?v="rotateX(0deg)":this._pitchAlignment==="map"&&(v=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||r&&r.type!=="moveend"||(this._pos=this._pos.round()),J.setTransform(this._element,`${$s[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${v} ${m}`),X.frameAsync(new AbortController).then(()=>{this._updateOpacity(r&&r.type==="moveend")}).catch(()=>{})},this._onMove=r=>{if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=r.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=r.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.k("dragstart"))),this.fire(new s.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.k("dragend")),this._state="inactive"},this._addDragHandler=r=>{this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._pointerdownPos=r.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(t==null?void 0:t.opacity,t==null?void 0:t.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=s.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=J.create("div");const r=J.createNS("http://www.w3.org/2000/svg","svg"),c=41,h=27;r.setAttributeNS(null,"display","block"),r.setAttributeNS(null,"height",`${c}px`),r.setAttributeNS(null,"width",`${h}px`),r.setAttributeNS(null,"viewBox",`0 0 ${h} ${c}`);const m=J.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"stroke","none"),m.setAttributeNS(null,"stroke-width","1"),m.setAttributeNS(null,"fill","none"),m.setAttributeNS(null,"fill-rule","evenodd");const v=J.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"fill-rule","nonzero");const w=J.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"transform","translate(3.0, 29.0)"),w.setAttributeNS(null,"fill","#000000");const S=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const tt of S){const q=J.createNS("http://www.w3.org/2000/svg","ellipse");q.setAttributeNS(null,"opacity","0.04"),q.setAttributeNS(null,"cx","10.5"),q.setAttributeNS(null,"cy","5.80029008"),q.setAttributeNS(null,"rx",tt.rx),q.setAttributeNS(null,"ry",tt.ry),w.appendChild(q)}const C=J.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill",this._color);const M=J.createNS("http://www.w3.org/2000/svg","path");M.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),C.appendChild(M);const D=J.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"opacity","0.25"),D.setAttributeNS(null,"fill","#000000");const R=J.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),D.appendChild(R);const U=J.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"transform","translate(6.0, 7.0)"),U.setAttributeNS(null,"fill","#FFFFFF");const j=J.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(8.0, 8.0)");const W=J.createNS("http://www.w3.org/2000/svg","circle");W.setAttributeNS(null,"fill","#000000"),W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"cx","5.5"),W.setAttributeNS(null,"cy","5.5"),W.setAttributeNS(null,"r","5.4999962");const K=J.createNS("http://www.w3.org/2000/svg","circle");K.setAttributeNS(null,"fill","#FFFFFF"),K.setAttributeNS(null,"cx","5.5"),K.setAttributeNS(null,"cy","5.5"),K.setAttributeNS(null,"r","5.4999962"),j.appendChild(W),j.appendChild(K),v.appendChild(w),v.appendChild(C),v.appendChild(D),v.appendChild(U),v.appendChild(j),r.appendChild(v),r.setAttributeNS(null,"height",c*this._scale+"px"),r.setAttributeNS(null,"width",h*this._scale+"px"),this._element.appendChild(r),this._offset=s.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",r=>{r.preventDefault()}),this._element.addEventListener("mousedown",r=>{r.preventDefault()}),Xl(this._element,this._anchor,"marker"),t&&t.className)for(const r of t.className.split(" "))this._element.classList.add(r);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),J.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=s.N.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const h=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[h,-1*(38.1-13.5+h)],"bottom-right":[-h,-1*(38.1-13.5+h)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var r,c;if(!(!((r=this._map)===null||r===void 0)&&r.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const h=this._map,m=h.terrain.depthAtPoint(this._pos),v=h.terrain.getElevationForLngLatZoom(this._lngLat,h.transform.tileZoom);if(h.transform.lngLatToCameraDepth(this._lngLat,v)-m<.006)return void(this._element.style.opacity=this._opacity);const w=-this._offset.y/h.transform._pixelPerMeter,S=Math.sin(h.getPitch()*Math.PI/180)*w,C=h.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),M=h.transform.lngLatToCameraDepth(this._lngLat,v+S)-C>.006;!((c=this._popup)===null||c===void 0)&&c.isOpen()&&M&&this._popup.remove(),this._element.style.opacity=M?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=s.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,r){return t===void 0&&r===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),r!==void 0&&(this._opacityWhenCovered=r),this._map&&this._updateOpacity(!0),this}}const Xd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Fs=0,Qr=!1;const Kl={maxWidth:100,unit:"metric"};function Yl(_,t,r){const c=r&&r.maxWidth||100,h=_._container.clientHeight/2,m=_.unproject([0,h]),v=_.unproject([c,h]),w=m.distanceTo(v);if(r&&r.unit==="imperial"){const S=3.2808*w;S>5280?br(t,c,S/5280,_._getUIString("ScaleControl.Miles")):br(t,c,S,_._getUIString("ScaleControl.Feet"))}else r&&r.unit==="nautical"?br(t,c,w/1852,_._getUIString("ScaleControl.NauticalMiles")):w>=1e3?br(t,c,w/1e3,_._getUIString("ScaleControl.Kilometers")):br(t,c,w,_._getUIString("ScaleControl.Meters"))}function br(_,t,r,c){const h=function(m){const v=Math.pow(10,`${Math.floor(m)}`.length-1);let w=m/v;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:w>=1?1:function(S){const C=Math.pow(10,Math.ceil(-Math.log(S)/Math.LN10));return Math.round(S*C)/C}(w),v*w}(r);_.style.width=t*(h/r)+"px",_.innerHTML=`${h}&nbsp;${c}`}const Jl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Kd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Os(_){if(_){if(typeof _=="number"){const t=Math.round(Math.abs(_)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,_),"top-left":new s.P(t,t),"top-right":new s.P(-t,t),bottom:new s.P(0,-_),"bottom-left":new s.P(t,-t),"bottom-right":new s.P(-t,-t),left:new s.P(_,0),right:new s.P(-_,0)}}if(_ instanceof s.P||Array.isArray(_)){const t=s.P.convert(_);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:s.P.convert(_.center||[0,0]),top:s.P.convert(_.top||[0,0]),"top-left":s.P.convert(_["top-left"]||[0,0]),"top-right":s.P.convert(_["top-right"]||[0,0]),bottom:s.P.convert(_.bottom||[0,0]),"bottom-left":s.P.convert(_["bottom-left"]||[0,0]),"bottom-right":s.P.convert(_["bottom-right"]||[0,0]),left:s.P.convert(_.left||[0,0]),right:s.P.convert(_.right||[0,0])}}return Os(new s.P(0,0))}const Yd=T;u.AJAXError=s.bh,u.Evented=s.E,u.LngLat=s.N,u.MercatorCoordinate=s.Z,u.Point=s.P,u.addProtocol=s.bi,u.config=s.a,u.removeProtocol=s.bj,u.AttributionControl=Zl,u.BoxZoomHandler=zs,u.CanvasSource=zo,u.CooperativeGesturesHandler=eo,u.DoubleClickZoomHandler=Iu,u.DragPanHandler=Tu,u.DragRotateHandler=Gl,u.EdgeInsets=Fa,u.FullscreenControl=class extends s.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var t;let r=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=r==null?void 0:r.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)r=r.shadowRoot.fullscreenElement;r===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=J.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){J.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=J.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);J.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},u.GeoJSONSource=er,u.GeolocateControl=class extends s.E{constructor(_){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new s.k("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.k("geolocate",t)),this._finish()}},this._updateCamera=t=>{const r=new s.N(t.coords.longitude,t.coords.latitude),c=t.coords.accuracy,h=this._map.getBearing(),m=s.e({bearing:h},this.options.fitBoundsOptions),v=dt.fromLngLat(r,c);this._map.fitBounds(v,m,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const r=new s.N(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=t=>{if(this._map){if(this.options.trackUserLocation)if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&Qr)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.k("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=J.create("button","maplibregl-ctrl-geolocate",this._container),J.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{const r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=J.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Vs({element:this._dotElement}),this._circleElement=J.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Vs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",r=>{r.geolocateSource||this._watchState!=="ACTIVE_LOCK"||r.originalEvent&&r.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.k("trackuserlocationend")),this.fire(new s.k("userlocationlostfocus")))})}},this.options=s.e({},Xd,_)}onAdd(_){return this._map=_,this._container=J.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(t=!1){if(Oo!==void 0&&!t)return Oo;if(window.navigator.permissions===void 0)return Oo=!!window.navigator.geolocation,Oo;try{Oo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Oo=!!window.navigator.geolocation}return Oo})}().then(t=>this._finishSetupUI(t)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),J.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fs=0,Qr=!1}_isOutOfMapMaxBounds(_){const t=this._map.getMaxBounds(),r=_.coords;return t&&(r.longitude<t.getWest()||r.longitude>t.getEast()||r.latitude<t.getSouth()||r.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),t=_.getSouthEast(),r=_.getNorthEast(),c=t.distanceTo(r),h=Math.ceil(this._accuracy/(c/this._map._container.clientHeight)*2);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fs--,Qr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.k("trackuserlocationstart")),this.fire(new s.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Fs++,Fs>1?(_={maximumAge:6e5,timeout:0},Qr=!0):(_=this.options.positionOptions,Qr=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},u.Hash=bu,u.ImageSource=Po,u.KeyboardHandler=Vn,u.LngLatBounds=dt,u.LogoControl=Au,u.Map=class extends Za{constructor(_){s.bf.mark(s.bg.create);const t=Object.assign(Object.assign({},Wd),_);if(t.minZoom!=null&&t.maxZoom!=null&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(t.minPitch!=null&&t.maxPitch!=null&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(t.minPitch!=null&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(t.maxPitch!=null&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Wr(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),{bearingSnap:t.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Od,this._controls=[],this._mapId=s.a4(),this._contextLost=r=>{r.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._maxTileCacheZoomLevels=t.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=t.preserveDrawingBuffer===!0,this._antialias=t.antialias===!0,this._trackResize=t.trackResize===!0,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles===!0,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions===!0,this._collectResourceTiming=t.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Gd),t.locale),this._clickTolerance=t.clickTolerance,this._overridePixelRatio=t.pixelRatio,this._maxCanvasSize=t.maxCanvasSize,this.transformCameraUpdate=t.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=t.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=oi.addThrottleControl(()=>this.isMoving()),this._requestManager=new ft(t.transformRequest),typeof t.container=="string"){if(this._container=document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const c=Ds(h=>{this._trackResize&&!this._removed&&(this.resize(h),this.redraw())},50);this._resizeObserver=new ResizeObserver(h=>{r?c(h):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Eu(this,t),this._hash=t.hash&&new bu(typeof t.hash=="string"&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,s.e({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,this._validateStyle=t.validateStyle,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new Zl(typeof t.attributionControl=="boolean"?void 0:t.attributionControl)),t.maplibreLogo&&this.addControl(new Au,t.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new s.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new s.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new s.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(_,t){if(t===void 0&&(t=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new s.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=_.onAdd(this);this._controls.push(_);const c=this._controlPositions[t];return t.indexOf("bottom")!==-1?c.insertBefore(r,c.firstChild):c.appendChild(r),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new s.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(_);return t>-1&&this._controls.splice(t,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,t,r,c){return c==null&&this.terrain&&(c=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,t,r,c)}resize(_){var t;const r=this._containerDimensions(),c=r[0],h=r[1],m=this._getClampedPixelRatio(c,h);if(this._resizeCanvas(c,h,m),this.painter.resize(c,h,m),this.painter.overLimit()){const w=this.painter.context.gl;this._maxCanvasSize=[w.drawingBufferWidth,w.drawingBufferHeight];const S=this._getClampedPixelRatio(c,h);this._resizeCanvas(c,h,S),this.painter.resize(c,h,S)}this.transform.resize(c,h),(t=this._requestedCameraState)===null||t===void 0||t.resize(c,h);const v=!this._moving;return v&&(this.stop(),this.fire(new s.k("movestart",_)).fire(new s.k("move",_))),this.fire(new s.k("resize",_)),v&&this.fire(new s.k("moveend",_)),this}_getClampedPixelRatio(_,t){const{0:r,1:c}=this._maxCanvasSize,h=this.getPixelRatio(),m=_*h,v=t*h;return Math.min(m>r?r/m:1,v>c?c/v:1)*h}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(dt.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(s.N.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(s.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,t,r){if(_==="mouseenter"||_==="mouseover"){let c=!1;return{layers:t,listener:r,delegates:{mousemove:m=>{const v=t.filter(S=>this.getLayer(S)),w=v.length!==0?this.queryRenderedFeatures(m.point,{layers:v}):[];w.length?c||(c=!0,r.call(this,new Ui(_,this,m.originalEvent,{features:w}))):c=!1},mouseout:()=>{c=!1}}}}if(_==="mouseleave"||_==="mouseout"){let c=!1;return{layers:t,listener:r,delegates:{mousemove:v=>{const w=t.filter(S=>this.getLayer(S));(w.length!==0?this.queryRenderedFeatures(v.point,{layers:w}):[]).length?c=!0:c&&(c=!1,r.call(this,new Ui(_,this,v.originalEvent)))},mouseout:v=>{c&&(c=!1,r.call(this,new Ui(_,this,v.originalEvent)))}}}}{const c=h=>{const m=t.filter(w=>this.getLayer(w)),v=m.length!==0?this.queryRenderedFeatures(h.point,{layers:m}):[];v.length&&(h.features=v,r.call(this,h),delete h.features)};return{layers:t,listener:r,delegates:{[_]:c}}}}_saveDelegatedListener(_,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(t)}_removeDelegatedListener(_,t,r){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const c=this._delegatedListeners[_];for(let h=0;h<c.length;h++){const m=c[h];if(m.listener===r&&m.layers.length===t.length&&m.layers.every(v=>t.includes(v))){for(const v in m.delegates)this.off(v,m.delegates[v]);return void c.splice(h,1)}}}on(_,t,r){if(r===void 0)return super.on(_,t);const c=this._createDelegatedListener(_,typeof t=="string"?[t]:t,r);this._saveDelegatedListener(_,c);for(const h in c.delegates)this.on(h,c.delegates[h]);return this}once(_,t,r){if(r===void 0)return super.once(_,t);const c=typeof t=="string"?[t]:t,h=this._createDelegatedListener(_,c,r);for(const m in h.delegates){const v=h.delegates[m];h.delegates[m]=(...w)=>{this._removeDelegatedListener(_,c,r),v(...w)}}this._saveDelegatedListener(_,h);for(const m in h.delegates)this.once(m,h.delegates[m]);return this}off(_,t,r){return r===void 0?super.off(_,t):(this._removeDelegatedListener(_,typeof t=="string"?[t]:t,r),this)}queryRenderedFeatures(_,t){if(!this.style)return[];let r;const c=_ instanceof s.P||Array.isArray(_),h=c?_:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(c?{}:_)||{},h instanceof s.P||typeof h[0]=="number")r=[s.P.convert(h)];else{const m=s.P.convert(h[0]),v=s.P.convert(h[1]);r=[m,new s.P(v.x,m.y),v,new s.P(m.x,v.y),m]}return this.style.queryRenderedFeatures(r,t,this.transform)}querySourceFeatures(_,t){return this.style.querySourceFeatures(_,t)}setStyle(_,t){return(t=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(_,t))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const t=this._locale[_];if(t==null)throw new Error(`Missing UI string '${_}'`);return t}_updateStyle(_,t){if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,t));const r=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new ms(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,t,r):this.style.loadJSON(_,t,r),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ms(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,t){if(typeof _=="string"){const r=this._requestManager.transformRequest(_,"Style");s.h(r,new AbortController).then(c=>{this._updateDiff(c.data,t)}).catch(c=>{c&&this.fire(new s.j(c))})}else typeof _=="object"&&this._updateDiff(_,t)}_updateDiff(_,t){try{this.style.setState(_,t)&&this._update(!0)}catch(r){s.w(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(_,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(_,t){return this._lazyInitEmptyStyle(),this.style.addSource(_,t),this._update(!0)}isSourceLoaded(_){const t=this.style&&this.style.sourceCaches[_];if(t!==void 0)return t.loaded();this.fire(new s.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const t=this.style.sourceCaches[_.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&t.reload();for(const r in this.style._layers){const c=this.style._layers[r];c.type==="hillshade"&&c.source===_.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Hd(this.painter,t,_),this.painter.renderToTexture=new qd(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=r=>{r.dataType==="style"?this.terrain.sourceCache.freeRtt():r.dataType==="source"&&r.tile&&(r.sourceId!==_.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(r.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new s.k("terrain",{terrain:_})),this}getTerrain(){var _,t;return(t=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const t in _){const r=_[t]._tiles;for(const c in r){const h=r[c];if(h.state!=="loaded"&&h.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,t,r={}){const{pixelRatio:c=1,sdf:h=!1,stretchX:m,stretchY:v,content:w,textFitWidth:S,textFitHeight:C}=r;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||s.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:M,height:D,data:R}=t,U=t;return this.style.addImage(_,{data:new s.R({width:M,height:D},new Uint8Array(R)),pixelRatio:c,stretchX:m,stretchY:v,content:w,textFitWidth:S,textFitHeight:C,sdf:h,version:0,userImage:U}),U.onAdd&&U.onAdd(this,_),this}}{const{width:M,height:D,data:R}=X.getImageData(t);this.style.addImage(_,{data:new s.R({width:M,height:D},R),pixelRatio:c,stretchX:m,stretchY:v,content:w,textFitWidth:S,textFitHeight:C,sdf:h,version:0})}}updateImage(_,t){const r=this.style.getImage(_);if(!r)return this.fire(new s.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const c=t instanceof HTMLImageElement||s.b(t)?X.getImageData(t):t,{width:h,height:m,data:v}=c;if(h===void 0||m===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(h!==r.data.width||m!==r.data.height)return this.fire(new s.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const w=!(t instanceof HTMLImageElement||s.b(t));return r.data.replace(v,w),this.style.updateImage(_,r),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new s.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return oi.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,t){return this._lazyInitEmptyStyle(),this.style.addLayer(_,t),this._update(!0)}moveLayer(_,t){return this.style.moveLayer(_,t),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,t,r){return this.style.setLayerZoomRange(_,t,r),this._update(!0)}setFilter(_,t,r={}){return this.style.setFilter(_,t,r),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,t,r,c={}){return this.style.setPaintProperty(_,t,r,c),this._update(!0)}getPaintProperty(_,t){return this.style.getPaintProperty(_,t)}setLayoutProperty(_,t,r,c={}){return this.style.setLayoutProperty(_,t,r,c),this._update(!0)}getLayoutProperty(_,t){return this.style.getLayoutProperty(_,t)}setGlyphs(_,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,t,r={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,t,r,c=>{c||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,t,r=>{r||this._update(!0)}),this}setLight(_,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(_){return this._lazyInitEmptyStyle(),this.style.setSky(_),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,t){return this.style.setFeatureState(_,t),this._update()}removeFeatureState(_,t){return this.style.removeFeatureState(_,t),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,t=0;return this._container&&(_=this._container.clientWidth||400,t=this._container.clientHeight||300),[_,t]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const t=this._canvasContainer=J.create("div","maplibregl-canvas-container",_);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=J.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const r=this._containerDimensions(),c=this._getClampedPixelRatio(r[0],r[1]);this._resizeCanvas(r[0],r[1],c);const h=this._controlContainer=J.create("div","maplibregl-control-container",_),m=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{m[v]=J.create("div",`maplibregl-ctrl-${v} `,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,t,r){this._canvas.width=Math.floor(r*_),this._canvas.height=Math.floor(r*t),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let t=null;this._canvas.addEventListener("webglcontextcreationerror",c=>{t={requestedAttributes:_},c&&(t.statusMessage=c.statusMessage,t.type=c.type)},{once:!0});const r=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!r){const c="Failed to initialize WebGL";throw t?(t.message=c,new Error(JSON.stringify(t))):new Error(c)}this.painter=new Ms(r,this.transform),Zt.testSupport(r)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const t=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let r=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const h=this.transform.zoom,m=X.now();this.style.zoomHistory.update(h,m);const v=new s.z(h,{now:m,fadeDuration:t,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),w=v.crossFadingFactor();w===1&&w===this._crossFadingFactor||(r=!0,this._crossFadingFactor=w),this.style.update(v)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,t,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:t,showPadding:this.showPadding}),this.fire(new s.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.bf.mark(s.bg.load),this.fire(new s.k("load"))),this.style&&(this.style.hasTransitions()||r)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const c=this._sourcesDirty||this._styleDirty||this._placementDirty;return c||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.k("idle")),!this._loaded||this._fullyLoaded||c||(this._fullyLoaded=!0,s.bf.mark(s.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const r of this._controls)r.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),oi.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t!=null&&t.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),J.remove(this._canvasContainer),J.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),s.bf.clearMetrics(),this._removed=!0,this.fire(new s.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,X.frameAsync(this._frameRequest).then(_=>{s.bf.frame(_),this._frameRequest=null,this._render(_)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return Zd}getCameraTargetElevation(){return this.transform.elevation}},u.MapMouseEvent=Ui,u.MapTouchEvent=Ua,u.MapWheelEvent=Vl,u.Marker=Vs,u.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const t=this._map.getZoom(),r=t===this._map.getMaxZoom(),c=t===this._map.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())},this._rotateCompassArrow=()=>{const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t},this._setButtonTitle=(t,r)=>{const c=this._map._getUIString(`NavigationControl.${r}`);t.title=c,t.setAttribute("aria-label",c)},this.options=s.e({},Du,_),this._container=J.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),J.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),J.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=J.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Wl(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){J.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,t){const r=J.create("button",_,this._container);return r.type="button",r.addEventListener("click",t),r}},u.Popup=class extends s.E{constructor(_){super(),this.remove=()=>(this._content&&J.remove(this._content),this._container&&(J.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.k("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{var r;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=J.create("div","maplibregl-popup",this._map.getContainer()),this._tip=J.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const w of this.options.className.split(" "))this._container.classList.add(w);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Pu(this._lngLat,this._flatPos,this._map.transform):(r=this._lngLat)===null||r===void 0?void 0:r.wrap(),this._trackPointer&&!t)return;const c=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationPoint(this._lngLat));let h=this.options.anchor;const m=Os(this.options.offset);if(!h){const w=this._container.offsetWidth,S=this._container.offsetHeight;let C;C=c.y+m.bottom.y<S?["top"]:c.y>this._map.transform.height-S?["bottom"]:[],c.x<w/2?C.push("left"):c.x>this._map.transform.width-w/2&&C.push("right"),h=C.length===0?"bottom":C.join("-")}let v=c.add(m[h]);this.options.subpixelPositioning||(v=v.round()),J.setTransform(this._container,`${$s[h]} translate(${v.x}px,${v.y}px)`),Xl(this._container,h,"popup")},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(Jl),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=s.N.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const t=document.createDocumentFragment(),r=document.createElement("body");let c;for(r.innerHTML=_;c=r.firstChild,c;)t.appendChild(c);return this.setDOMContent(t)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=J.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=J.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Kd);_&&_.focus()}},u.RasterDEMTileSource=Di,u.RasterTileSource=Se,u.ScaleControl=class{constructor(_){this._onMove=()=>{Yl(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,Yl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Kl),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=J.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){J.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},u.ScrollZoomHandler=gr,u.Style=ms,u.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=J.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=J.create("button","maplibregl-ctrl-terrain",this._container),J.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){J.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},u.TwoFingersTouchPitchHandler=ql,u.TwoFingersTouchRotateHandler=jl,u.TwoFingersTouchZoomHandler=Ul,u.TwoFingersTouchZoomRotateHandler=Kr,u.VectorTileSource=hs,u.VideoSource=ds,u.addSourceType=(_,t)=>s._(void 0,void 0,void 0,function*(){if($r(_))throw new Error(`A source type called "${_}" already exists.`);((r,c)=>{ir[r]=c})(_,t)}),u.clearPrewarmedResources=function(){const _=wn;_&&_.isPreloaded()&&_.numActive()===1&&(_.release(sn),wn=null)},u.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},u.getRTLTextPluginStatus=function(){return zn().getRTLTextPluginStatus()},u.getVersion=function(){return Yd},u.getWorkerCount=function(){return xn.workerCount},u.getWorkerUrl=function(){return s.a.WORKER_URL},u.importScriptInWorkers=function(_){return Jo().broadcast("IS",_)},u.prewarm=function(){Pn().acquire(sn)},u.setMaxParallelImageRequests=function(_){s.a.MAX_PARALLEL_IMAGE_REQUESTS=_},u.setRTLTextPlugin=function(_,t){return zn().setRTLTextPlugin(_,t)},u.setWorkerCount=function(_){xn.workerCount=_},u.setWorkerUrl=function(_){s.a.WORKER_URL=_}}),b}()),Gp.exports);/**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
   */const Ff=jp(fc);var Of=Object.defineProperty,gc=(b,p,a)=>(((u,s,T)=>{s in u?Of(u,s,{enumerable:!0,configurable:!0,writable:!0,value:T}):u[s]=T})(b,typeof p!="symbol"?p+"":p,a),a);const Nf=new Blob([`
const vsSource = \`#version 300 es
    in vec4 a_position;
    out vec2 v_tex_coord;

    void main() {
        gl_Position = a_position;
        v_tex_coord = vec2(a_position.x * 0.5 + 0.5, a_position.y * -0.5 + 0.5);
    }
\`;

const fsSource = \`#version 300 es
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    uniform sampler2D u_height_map;
    in vec2 v_tex_coord;
    out vec4 fragColor;

    void main() {
        vec4 color = texture(u_height_map, v_tex_coord);
        vec3 rgb = color.rgb * 255.0;

        // terrainRGBにおける高度0の色
        vec4 zero_elevation_color = vec4(1.0, 134.0, 160.0, 255.0) / 255.0;

        float rgb_value = dot(rgb, vec3(65536.0, 256.0, 1.0));
        float height = mix(rgb_value, rgb_value - 16777216.0, step(8388608.0, rgb_value)) * 0.01;
        height = (height + 10000.0) * 10.0;

        // 地理院標高タイルの無効値または完全に透明なピクセルの判定
        bool is_valid = (rgb.r != 128.0 || rgb.g != 0.0 || rgb.b != 0.0) && color.a != 0.0;

        fragColor = mix(
            zero_elevation_color,
            vec4(
                floor(height / 65536.0) / 255.0,
                floor(mod(height / 256.0, 256.0)) / 255.0,
                mod(height, 256.0) / 255.0,
                1.0
            ),
            float(is_valid)
        );
    }
\`;

let gl = null;
let program = null;
let positionBuffer = null;
let heightMapLocation = null;

const initWebGL = (canvas) => {
	gl = canvas.getContext('webgl2');
	if (!gl) {
		throw new Error('WebGL not supported');
	}

	const loadShader = (
		gl,
		type,
		source,
	) => {
		const shader = gl.createShader(type);
		if (!shader) {
			console.error('Unable to create shader');
			return null;
		}
		gl.shaderSource(shader, source);
		gl.compileShader(shader);

		if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
			console.error(
				'An error occurred compiling the shaders: ' +
					gl.getShaderInfoLog(shader),
			);
			gl.deleteShader(shader);
			return null;
		}
		return shader;
	};

	const vertexShader = loadShader(gl, gl.VERTEX_SHADER, vsSource);
	const fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fsSource);
	if (!vertexShader || !fragmentShader) {
		throw new Error('Failed to load shaders');
	}

	program = gl.createProgram();
	if (!program) {
		throw new Error('Failed to create program');
	}
	gl.attachShader(program, vertexShader);
	gl.attachShader(program, fragmentShader);
	gl.linkProgram(program);

	if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
		console.error(
			'Unable to initialize the shader program: ' +
				gl.getProgramInfoLog(program),
		);
		throw new Error('Failed to link program');
	}

	positionBuffer = gl.createBuffer();
	gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
	const positions = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]);
	gl.bufferData(gl.ARRAY_BUFFER, positions, gl.STATIC_DRAW);
	const positionLocation = gl.getAttribLocation(program, 'a_position');
	gl.enableVertexAttribArray(positionLocation);
	gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);

	heightMapLocation = gl.getUniformLocation(program, 'u_height_map');
};

const canvas = new OffscreenCanvas(256, 256);

self.onmessage = async (e) => {
	const { url, image } = e.data;

	try {
		if (!gl) {
			initWebGL(canvas);
		}

		if (!gl || !program || !positionBuffer || !heightMapLocation) {
			throw new Error('WebGL initialization failed');
		}

		const heightMap = gl.createTexture();
		gl.activeTexture(gl.TEXTURE0);
		gl.bindTexture(gl.TEXTURE_2D, heightMap);
		gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);

		gl.useProgram(program);
		gl.uniform1i(heightMapLocation, 0);

		gl.clear(gl.COLOR_BUFFER_BIT);
		gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);

		const blob = await canvas.convertToBlob();
		if (!blob) {
			throw new Error('Failed to convert canvas to blob');
		}
		const buffer = await blob.arrayBuffer();
		self.postMessage({ url, buffer });
	} catch (error) {
		if (error instanceof Error) {
			self.postMessage({ url, error: error.message });
		}
	}
};
`],{type:"application/javascript"}),Uf=new Worker(URL.createObjectURL(Nf)),Hf=new class{constructor(b){gc(this,"worker"),gc(this,"pendingRequests"),gc(this,"handleMessage",p=>{const{url:a,buffer:u,error:s}=p.data;if(!s){const T=this.pendingRequests.get(a);T&&(T.resolve({data:new Uint8Array(u)}),this.pendingRequests.delete(a))}}),gc(this,"handleError",p=>{this.pendingRequests.forEach(a=>{a.reject(new Error("Worker error occurred"))}),this.pendingRequests.clear()}),this.worker=b,this.pendingRequests=new Map,this.worker.addEventListener("message",this.handleMessage),this.worker.addEventListener("error",this.handleError)}async request(b,p){const a=await(async(u,s)=>{let T;try{T=await fetch(u,{signal:s})}catch{return s.aborted,null}return T.ok?await createImageBitmap(await T.blob()):null})(b,p.signal);return a?new Promise((u,s)=>{this.pendingRequests.set(b,{resolve:u,reject:s,controller:p}),this.worker.postMessage({image:a,url:b}),p.signal.onabort=()=>{this.pendingRequests.delete(b),s(new Error("Request aborted"))}}):Promise.reject(new Error("Failed to load image"))}}(Uf);var Zp,dh,ph,bc={exports:{}},jf=(Zp||(Zp=1,dh=bc,ph=bc.exports,(function(){var b=function(ft){return ft instanceof b?ft:this instanceof b?void(this.EXIFwrapped=ft):new b(ft)};dh.exports&&(ph=dh.exports=b),ph.EXIF=b;var p=b.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},a=b.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},u=b.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},s=b.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},T=b.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function k(ft){return!!ft.exifdata}function $(ft,wt){function Nt(Ht){var jt=X(Ht);ft.exifdata=jt||{};var Kt=function(be){var Ve=new DataView(be);if(Ve.getUint8(0)!=255||Ve.getUint8(1)!=216)return!1;for(var de=2,Ee=be.byteLength,bi=function(si,Ge){return si.getUint8(Ge)===56&&si.getUint8(Ge+1)===66&&si.getUint8(Ge+2)===73&&si.getUint8(Ge+3)===77&&si.getUint8(Ge+4)===4&&si.getUint8(Ge+5)===4};de<Ee;){if(bi(Ve,de)){var yi=Ve.getUint8(de+7);return yi%2!=0&&(yi+=1),yi===0&&(yi=4),Zt(be,de+8+yi,Ve.getUint16(de+6+yi))}de++}}(Ht);if(ft.iptcdata=Kt||{},b.isXmpEnabled){var ae=function(be){if("DOMParser"in self){var Ve=new DataView(be);if(Ve.getUint8(0)!=255||Ve.getUint8(1)!=216)return!1;for(var de=2,Ee=be.byteLength,bi=new DOMParser;de<Ee-4;){if(Ae(Ve,de,4)=="http"){var yi=de-1,si=Ve.getUint16(de-2)-1,Ge=Ae(Ve,yi,si),Yn=Ge.indexOf("xmpmeta>")+8,vn=(Ge=Ge.substring(Ge.indexOf("<x:xmpmeta"),Yn)).indexOf("x:xmpmeta")+10;return Ge=Ge.slice(0,vn)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+Ge.slice(vn),oi(bi.parseFromString(Ge,"text/xml"))}de++}}}(Ht);ft.xmpdata=ae||{}}wt&&wt.call(ft)}if(ft.src)if(/^data\:/i.test(ft.src)){var Qt=function(Ht,jt){jt=jt||Ht.match(/^data\:([^\;]+)\;base64,/im)[1]||"",Ht=Ht.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var Kt=atob(Ht),ae=Kt.length,be=new ArrayBuffer(ae),Ve=new Uint8Array(be),de=0;de<ae;de++)Ve[de]=Kt.charCodeAt(de);return be}(ft.src);Nt(Qt)}else if(/^blob\:/i.test(ft.src))(ee=new FileReader).onload=function(Ht){Nt(Ht.target.result)},function(Ht){var jt=new XMLHttpRequest;jt.open("GET",Ht,!0),jt.responseType="blob",jt.onload=function(Kt){this.status!=200&&this.status!==0||function(ae){ee.readAsArrayBuffer(ae)}(this.response)},jt.send()}(ft.src);else{var Tt=new XMLHttpRequest;Tt.onload=function(){if(this.status!=200&&this.status!==0)throw"Could not load image";Nt(Tt.response),Tt=null},Tt.open("GET",ft.src,!0),Tt.responseType="arraybuffer",Tt.send(null)}else if(self.FileReader&&(ft instanceof self.Blob||ft instanceof self.File)){var ee;(ee=new FileReader).onload=function(Ht){Nt(Ht.target.result)},ee.readAsArrayBuffer(ft)}}function X(ft){var wt=new DataView(ft);if(wt.getUint8(0)!=255||wt.getUint8(1)!=216)return!1;for(var Nt=2,Qt=ft.byteLength;Nt<Qt;){if(wt.getUint8(Nt)!=255)return!1;if(wt.getUint8(Nt+1)==225)return Ye(wt,Nt+4,wt.getUint16(Nt+2));Nt+=2+wt.getUint16(Nt+2)}}var J={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function Zt(ft,wt,Nt){for(var Qt,Tt,ee,Ht,jt=new DataView(ft),Kt={},ae=wt;ae<wt+Nt;)jt.getUint8(ae)===28&&jt.getUint8(ae+1)===2&&(Ht=jt.getUint8(ae+2))in J&&(ee=jt.getInt16(ae+3),Tt=J[Ht],Qt=Ae(jt,ae+5,ee),Kt.hasOwnProperty(Tt)?Kt[Tt]instanceof Array?Kt[Tt].push(Qt):Kt[Tt]=[Kt[Tt],Qt]:Kt[Tt]=Qt),ae++;return Kt}function St(ft,wt,Nt,Qt,Tt){var ee,Ht,jt=ft.getUint16(Nt,!Tt),Kt={};for(Ht=0;Ht<jt;Ht++)ee=Nt+12*Ht+2,Kt[Qt[ft.getUint16(ee,!Tt)]]=ge(ft,ee,wt,0,Tt);return Kt}function ge(ft,wt,Nt,Qt,Tt){var ee,Ht,jt,Kt,ae,be,Ve=ft.getUint16(wt+2,!Tt),de=ft.getUint32(wt+4,!Tt),Ee=ft.getUint32(wt+8,!Tt)+Nt;switch(Ve){case 1:case 7:if(de==1)return ft.getUint8(wt+8,!Tt);for(ee=de>4?Ee:wt+8,Ht=[],Kt=0;Kt<de;Kt++)Ht[Kt]=ft.getUint8(ee+Kt);return Ht;case 2:return Ae(ft,ee=de>4?Ee:wt+8,de-1);case 3:if(de==1)return ft.getUint16(wt+8,!Tt);for(ee=de>2?Ee:wt+8,Ht=[],Kt=0;Kt<de;Kt++)Ht[Kt]=ft.getUint16(ee+2*Kt,!Tt);return Ht;case 4:if(de==1)return ft.getUint32(wt+8,!Tt);for(Ht=[],Kt=0;Kt<de;Kt++)Ht[Kt]=ft.getUint32(Ee+4*Kt,!Tt);return Ht;case 5:if(de==1)return ae=ft.getUint32(Ee,!Tt),be=ft.getUint32(Ee+4,!Tt),(jt=new Number(ae/be)).numerator=ae,jt.denominator=be,jt;for(Ht=[],Kt=0;Kt<de;Kt++)ae=ft.getUint32(Ee+8*Kt,!Tt),be=ft.getUint32(Ee+4+8*Kt,!Tt),Ht[Kt]=new Number(ae/be),Ht[Kt].numerator=ae,Ht[Kt].denominator=be;return Ht;case 9:if(de==1)return ft.getInt32(wt+8,!Tt);for(Ht=[],Kt=0;Kt<de;Kt++)Ht[Kt]=ft.getInt32(Ee+4*Kt,!Tt);return Ht;case 10:if(de==1)return ft.getInt32(Ee,!Tt)/ft.getInt32(Ee+4,!Tt);for(Ht=[],Kt=0;Kt<de;Kt++)Ht[Kt]=ft.getInt32(Ee+8*Kt,!Tt)/ft.getInt32(Ee+4+8*Kt,!Tt);return Ht}}function Ae(ft,wt,Nt){var Qt="";for(n=wt;n<wt+Nt;n++)Qt+=String.fromCharCode(ft.getUint8(n));return Qt}function Ye(ft,wt){if(Ae(ft,wt,4)!="Exif")return!1;var Nt,Qt,Tt,ee,Ht,jt=wt+6;if(ft.getUint16(jt)==18761)Nt=!1;else{if(ft.getUint16(jt)!=19789)return!1;Nt=!0}if(ft.getUint16(jt+2,!Nt)!=42)return!1;var Kt=ft.getUint32(jt+4,!Nt);if(Kt<8)return!1;if((Qt=St(ft,jt,jt+Kt,a,Nt)).ExifIFDPointer)for(Tt in ee=St(ft,jt,jt+Qt.ExifIFDPointer,p,Nt)){switch(Tt){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":ee[Tt]=T[Tt][ee[Tt]];break;case"ExifVersion":case"FlashpixVersion":ee[Tt]=String.fromCharCode(ee[Tt][0],ee[Tt][1],ee[Tt][2],ee[Tt][3]);break;case"ComponentsConfiguration":ee[Tt]=T.Components[ee[Tt][0]]+T.Components[ee[Tt][1]]+T.Components[ee[Tt][2]]+T.Components[ee[Tt][3]]}Qt[Tt]=ee[Tt]}if(Qt.GPSInfoIFDPointer)for(Tt in Ht=St(ft,jt,jt+Qt.GPSInfoIFDPointer,u,Nt))Tt==="GPSVersionID"&&(Ht[Tt]=Ht[Tt][0]+"."+Ht[Tt][1]+"."+Ht[Tt][2]+"."+Ht[Tt][3]),Qt[Tt]=Ht[Tt];return Qt.thumbnail=function(ae,be,Ve,de){var Ee=function(Ge,Yn,vn){var sn=Ge.getUint16(Yn,!vn);return Ge.getUint32(Yn+2+12*sn,!vn)}(ae,be+Ve,de);if(!Ee)return{};if(Ee>ae.byteLength)return{};var bi=St(ae,be,be+Ee,s,de);if(bi.Compression){if(bi.Compression===6&&bi.JpegIFOffset&&bi.JpegIFByteCount){var yi=be+bi.JpegIFOffset,si=bi.JpegIFByteCount;bi.blob=new Blob([new Uint8Array(ae.buffer,yi,si)],{type:"image/jpeg"})}}else bi.PhotometricInterpretation;return bi}(ft,jt,Kt,Nt),Qt}function gi(ft){var wt={};if(ft.nodeType==1){if(ft.attributes.length>0){wt["@attributes"]={};for(var Nt=0;Nt<ft.attributes.length;Nt++){var Qt=ft.attributes.item(Nt);wt["@attributes"][Qt.nodeName]=Qt.nodeValue}}}else if(ft.nodeType==3)return ft.nodeValue;if(ft.hasChildNodes())for(var Tt=0;Tt<ft.childNodes.length;Tt++){var ee=ft.childNodes.item(Tt),Ht=ee.nodeName;if(wt[Ht]==null)wt[Ht]=gi(ee);else{if(wt[Ht].push==null){var jt=wt[Ht];wt[Ht]=[],wt[Ht].push(jt)}wt[Ht].push(gi(ee))}}return wt}function oi(ft){try{var wt={};if(ft.children.length>0)for(var Nt=0;Nt<ft.children.length;Nt++){var Qt=ft.children.item(Nt),Tt=Qt.attributes;for(var ee in Tt){var Ht=Tt[ee],jt=Ht.nodeName,Kt=Ht.nodeValue;jt!==void 0&&(wt[jt]=Kt)}var ae=Qt.nodeName;if(wt[ae]===void 0)wt[ae]=gi(Qt);else{if(wt[ae].push===void 0){var be=wt[ae];wt[ae]=[],wt[ae].push(be)}wt[ae].push(gi(Qt))}}else wt=ft.textContent;return wt}catch{}}b.enableXmp=function(){b.isXmpEnabled=!0},b.disableXmp=function(){b.isXmpEnabled=!1},b.getData=function(ft,wt){return!((self.Image&&ft instanceof self.Image||self.HTMLImageElement&&ft instanceof self.HTMLImageElement)&&!ft.complete||(k(ft)?wt&&wt.call(ft):$(ft,wt),0))},b.getTag=function(ft,wt){if(k(ft))return ft.exifdata[wt]},b.getIptcTag=function(ft,wt){if(k(ft))return ft.iptcdata[wt]},b.getAllTags=function(ft){if(!k(ft))return{};var wt,Nt=ft.exifdata,Qt={};for(wt in Nt)Nt.hasOwnProperty(wt)&&(Qt[wt]=Nt[wt]);return Qt},b.getAllIptcTags=function(ft){if(!k(ft))return{};var wt,Nt=ft.iptcdata,Qt={};for(wt in Nt)Nt.hasOwnProperty(wt)&&(Qt[wt]=Nt[wt]);return Qt},b.pretty=function(ft){if(!k(ft))return"";var wt,Nt=ft.exifdata,Qt="";for(wt in Nt)Nt.hasOwnProperty(wt)&&(typeof Nt[wt]=="object"?Nt[wt]instanceof Number?Qt+=wt+" : "+Nt[wt]+" ["+Nt[wt].numerator+"/"+Nt[wt].denominator+`]\r
`:Qt+=wt+" : ["+Nt[wt].length+` values]\r
`:Qt+=wt+" : "+Nt[wt]+`\r
`);return Qt},b.readFromBinaryFile=function(ft){return X(ft)}}).call(bc.exports)),bc.exports);const Wp=jp(jf),yc=globalThis,mh=yc.ShadowRoot&&(yc.ShadyCSS===void 0||yc.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Xp=Symbol(),Kp=new WeakMap;/**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */let qf=class{constructor(b,p,a){if(this._$cssResult$=!0,a!==Xp)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=b,this.t=p}get styleSheet(){let b=this.o;const p=this.t;if(mh&&b===void 0){const a=p!==void 0&&p.length===1;a&&(b=Kp.get(p)),b===void 0&&((this.o=b=new CSSStyleSheet).replaceSync(this.cssText),a&&Kp.set(p,b))}return b}toString(){return this.cssText}};const Yp=mh?b=>b:b=>b instanceof CSSStyleSheet?(p=>{let a="";for(const u of p.cssRules)a+=u.cssText;return(u=>new qf(typeof u=="string"?u:u+"",void 0,Xp))(a)})(b):b,{is:Gf,defineProperty:Zf,getOwnPropertyDescriptor:Wf,getOwnPropertyNames:Xf,getOwnPropertySymbols:Kf,getPrototypeOf:Yf}=Object,Tr=globalThis,Jp=Tr.trustedTypes,Jf=Jp?Jp.emptyScript:"",_h=Tr.reactiveElementPolyfillSupport,el=(b,p)=>b,vc={toAttribute(b,p){switch(p){case Boolean:b=b?Jf:null;break;case Object:case Array:b=b==null?b:JSON.stringify(b)}return b},fromAttribute(b,p){let a=b;switch(p){case Boolean:a=b!==null;break;case Number:a=b===null?null:Number(b);break;case Object:case Array:try{a=JSON.parse(b)}catch{a=null}}return a}},fh=(b,p)=>!Gf(b,p),Qp={attribute:!0,type:String,converter:vc,reflect:!1,hasChanged:fh};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Tr.litPropertyMetadata??(Tr.litPropertyMetadata=new WeakMap);let is=class extends HTMLElement{static addInitializer(b){this._$Ei(),(this.l??(this.l=[])).push(b)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(b,p=Qp){if(p.state&&(p.attribute=!1),this._$Ei(),this.elementProperties.set(b,p),!p.noAccessor){const a=Symbol(),u=this.getPropertyDescriptor(b,a,p);u!==void 0&&Zf(this.prototype,b,u)}}static getPropertyDescriptor(b,p,a){const{get:u,set:s}=Wf(this.prototype,b)??{get(){return this[p]},set(T){this[p]=T}};return{get(){return u==null?void 0:u.call(this)},set(T){const k=u==null?void 0:u.call(this);s.call(this,T),this.requestUpdate(b,k,a)},configurable:!0,enumerable:!0}}static getPropertyOptions(b){return this.elementProperties.get(b)??Qp}static _$Ei(){if(this.hasOwnProperty(el("elementProperties")))return;const b=Yf(this);b.finalize(),b.l!==void 0&&(this.l=[...b.l]),this.elementProperties=new Map(b.elementProperties)}static finalize(){if(this.hasOwnProperty(el("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(el("properties"))){const p=this.properties,a=[...Xf(p),...Kf(p)];for(const u of a)this.createProperty(u,p[u])}const b=this[Symbol.metadata];if(b!==null){const p=litPropertyMetadata.get(b);if(p!==void 0)for(const[a,u]of p)this.elementProperties.set(a,u)}this._$Eh=new Map;for(const[p,a]of this.elementProperties){const u=this._$Eu(p,a);u!==void 0&&this._$Eh.set(u,p)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(b){const p=[];if(Array.isArray(b)){const a=new Set(b.flat(1/0).reverse());for(const u of a)p.unshift(Yp(u))}else b!==void 0&&p.push(Yp(b));return p}static _$Eu(b,p){const a=p.attribute;return a===!1?void 0:typeof a=="string"?a:typeof b=="string"?b.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var b;this._$ES=new Promise(p=>this.enableUpdating=p),this._$AL=new Map,this._$E_(),this.requestUpdate(),(b=this.constructor.l)==null||b.forEach(p=>p(this))}addController(b){var p;(this._$EO??(this._$EO=new Set)).add(b),this.renderRoot!==void 0&&this.isConnected&&((p=b.hostConnected)==null||p.call(b))}removeController(b){var p;(p=this._$EO)==null||p.delete(b)}_$E_(){const b=new Map,p=this.constructor.elementProperties;for(const a of p.keys())this.hasOwnProperty(a)&&(b.set(a,this[a]),delete this[a]);b.size>0&&(this._$Ep=b)}createRenderRoot(){const b=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((p,a)=>{if(mh)p.adoptedStyleSheets=a.map(u=>u instanceof CSSStyleSheet?u:u.styleSheet);else for(const u of a){const s=document.createElement("style"),T=yc.litNonce;T!==void 0&&s.setAttribute("nonce",T),s.textContent=u.cssText,p.appendChild(s)}})(b,this.constructor.elementStyles),b}connectedCallback(){var b;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(b=this._$EO)==null||b.forEach(p=>{var a;return(a=p.hostConnected)==null?void 0:a.call(p)})}enableUpdating(b){}disconnectedCallback(){var b;(b=this._$EO)==null||b.forEach(p=>{var a;return(a=p.hostDisconnected)==null?void 0:a.call(p)})}attributeChangedCallback(b,p,a){this._$AK(b,a)}_$EC(b,p){var s;const a=this.constructor.elementProperties.get(b),u=this.constructor._$Eu(b,a);if(u!==void 0&&a.reflect===!0){const T=(((s=a.converter)==null?void 0:s.toAttribute)!==void 0?a.converter:vc).toAttribute(p,a.type);this._$Em=b,T==null?this.removeAttribute(u):this.setAttribute(u,T),this._$Em=null}}_$AK(b,p){var s;const a=this.constructor,u=a._$Eh.get(b);if(u!==void 0&&this._$Em!==u){const T=a.getPropertyOptions(u),k=typeof T.converter=="function"?{fromAttribute:T.converter}:((s=T.converter)==null?void 0:s.fromAttribute)!==void 0?T.converter:vc;this._$Em=u,this[u]=k.fromAttribute(p,T.type),this._$Em=null}}requestUpdate(b,p,a){if(b!==void 0){if(a??(a=this.constructor.getPropertyOptions(b)),!(a.hasChanged??fh)(this[b],p))return;this.P(b,p,a)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(b,p,a){this._$AL.has(b)||this._$AL.set(b,p),a.reflect===!0&&this._$Em!==b&&(this._$Ej??(this._$Ej=new Set)).add(b)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(p){Promise.reject(p)}const b=this.scheduleUpdate();return b!=null&&await b,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var a;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,T]of this._$Ep)this[s]=T;this._$Ep=void 0}const u=this.constructor.elementProperties;if(u.size>0)for(const[s,T]of u)T.wrapped!==!0||this._$AL.has(s)||this[s]===void 0||this.P(s,this[s],T)}let b=!1;const p=this._$AL;try{b=this.shouldUpdate(p),b?(this.willUpdate(p),(a=this._$EO)==null||a.forEach(u=>{var s;return(s=u.hostUpdate)==null?void 0:s.call(u)}),this.update(p)):this._$EU()}catch(u){throw b=!1,this._$EU(),u}b&&this._$AE(p)}willUpdate(b){}_$AE(b){var p;(p=this._$EO)==null||p.forEach(a=>{var u;return(u=a.hostUpdated)==null?void 0:u.call(a)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(b)),this.updated(b)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(b){return!0}update(b){this._$Ej&&(this._$Ej=this._$Ej.forEach(p=>this._$EC(p,this[p]))),this._$EU()}updated(b){}firstUpdated(b){}};is.elementStyles=[],is.shadowRootOptions={mode:"open"},is[el("elementProperties")]=new Map,is[el("finalized")]=new Map,_h==null||_h({ReactiveElement:is}),(Tr.reactiveElementVersions??(Tr.reactiveElementVersions=[])).push("2.0.4");/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */const il=globalThis,xc=il.trustedTypes,tm=xc?xc.createPolicy("lit-html",{createHTML:b=>b}):void 0,em="$lit$",Cr=`lit$${Math.random().toFixed(9).slice(2)}$`,im="?"+Cr,Qf=`<${im}>`,la=document,nl=()=>la.createComment(""),ol=b=>b===null||typeof b!="object"&&typeof b!="function",gh=Array.isArray,bh=`[ 	
\f\r]`,rl=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,nm=/-->/g,om=/>/g,ca=RegExp(`>|${bh}(?:([^\\s"'>=/]+)(${bh}*=${bh}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),rm=/'/g,am=/"/g,sm=/^(?:script|style|textarea|title)$/i,lm=b=>(p,...a)=>({_$litType$:b,strings:p,values:a}),bt=lm(1),Ce=lm(2),ua=Symbol.for("lit-noChange"),pi=Symbol.for("lit-nothing"),cm=new WeakMap,ha=la.createTreeWalker(la,129);function um(b,p){if(!gh(b)||!b.hasOwnProperty("raw"))throw Error("invalid template strings array");return tm!==void 0?tm.createHTML(p):p}class al{constructor({strings:p,_$litType$:a},u){let s;this.parts=[];let T=0,k=0;const $=p.length-1,X=this.parts,[J,Zt]=((St,ge)=>{const Ae=St.length-1,Ye=[];let gi,oi=ge===2?"<svg>":ge===3?"<math>":"",ft=rl;for(let wt=0;wt<Ae;wt++){const Nt=St[wt];let Qt,Tt,ee=-1,Ht=0;for(;Ht<Nt.length&&(ft.lastIndex=Ht,Tt=ft.exec(Nt),Tt!==null);)Ht=ft.lastIndex,ft===rl?Tt[1]==="!--"?ft=nm:Tt[1]!==void 0?ft=om:Tt[2]!==void 0?(sm.test(Tt[2])&&(gi=RegExp("</"+Tt[2],"g")),ft=ca):Tt[3]!==void 0&&(ft=ca):ft===ca?Tt[0]===">"?(ft=gi??rl,ee=-1):Tt[1]===void 0?ee=-2:(ee=ft.lastIndex-Tt[2].length,Qt=Tt[1],ft=Tt[3]===void 0?ca:Tt[3]==='"'?am:rm):ft===am||ft===rm?ft=ca:ft===nm||ft===om?ft=rl:(ft=ca,gi=void 0);const jt=ft===ca&&St[wt+1].startsWith("/>")?" ":"";oi+=ft===rl?Nt+Qf:ee>=0?(Ye.push(Qt),Nt.slice(0,ee)+em+Nt.slice(ee)+Cr+jt):Nt+Cr+(ee===-2?wt:jt)}return[um(St,oi+(St[Ae]||"<?>")+(ge===2?"</svg>":ge===3?"</math>":"")),Ye]})(p,a);if(this.el=al.createElement(J,u),ha.currentNode=this.el.content,a===2||a===3){const St=this.el.content.firstChild;St.replaceWith(...St.childNodes)}for(;(s=ha.nextNode())!==null&&X.length<$;){if(s.nodeType===1){if(s.hasAttributes())for(const St of s.getAttributeNames())if(St.endsWith(em)){const ge=Zt[k++],Ae=s.getAttribute(St).split(Cr),Ye=/([.?@])?(.*)/.exec(ge);X.push({type:1,index:T,name:Ye[2],strings:Ae,ctor:Ye[1]==="."?e1:Ye[1]==="?"?i1:Ye[1]==="@"?n1:wc}),s.removeAttribute(St)}else St.startsWith(Cr)&&(X.push({type:6,index:T}),s.removeAttribute(St));if(sm.test(s.tagName)){const St=s.textContent.split(Cr),ge=St.length-1;if(ge>0){s.textContent=xc?xc.emptyScript:"";for(let Ae=0;Ae<ge;Ae++)s.append(St[Ae],nl()),ha.nextNode(),X.push({type:2,index:++T});s.append(St[ge],nl())}}}else if(s.nodeType===8)if(s.data===im)X.push({type:2,index:T});else{let St=-1;for(;(St=s.data.indexOf(Cr,St+1))!==-1;)X.push({type:7,index:T}),St+=Cr.length-1}T++}}static createElement(p,a){const u=la.createElement("template");return u.innerHTML=p,u}}function ns(b,p,a=b,u){var k,$;if(p===ua)return p;let s=u!==void 0?(k=a._$Co)==null?void 0:k[u]:a._$Cl;const T=ol(p)?void 0:p._$litDirective$;return(s==null?void 0:s.constructor)!==T&&(($=s==null?void 0:s._$AO)==null||$.call(s,!1),T===void 0?s=void 0:(s=new T(b),s._$AT(b,a,u)),u!==void 0?(a._$Co??(a._$Co=[]))[u]=s:a._$Cl=s),s!==void 0&&(p=ns(b,s._$AS(b,p.values),s,u)),p}class t1{constructor(p,a){this._$AV=[],this._$AN=void 0,this._$AD=p,this._$AM=a}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(p){const{el:{content:a},parts:u}=this._$AD,s=((p==null?void 0:p.creationScope)??la).importNode(a,!0);ha.currentNode=s;let T=ha.nextNode(),k=0,$=0,X=u[0];for(;X!==void 0;){if(k===X.index){let J;X.type===2?J=new sl(T,T.nextSibling,this,p):X.type===1?J=new X.ctor(T,X.name,X.strings,this,p):X.type===6&&(J=new o1(T,this,p)),this._$AV.push(J),X=u[++$]}k!==(X==null?void 0:X.index)&&(T=ha.nextNode(),k++)}return ha.currentNode=la,s}p(p){let a=0;for(const u of this._$AV)u!==void 0&&(u.strings!==void 0?(u._$AI(p,u,a),a+=u.strings.length-2):u._$AI(p[a])),a++}}class sl{get _$AU(){var p;return((p=this._$AM)==null?void 0:p._$AU)??this._$Cv}constructor(p,a,u,s){this.type=2,this._$AH=pi,this._$AN=void 0,this._$AA=p,this._$AB=a,this._$AM=u,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let p=this._$AA.parentNode;const a=this._$AM;return a!==void 0&&(p==null?void 0:p.nodeType)===11&&(p=a.parentNode),p}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(p,a=this){p=ns(this,p,a),ol(p)?p===pi||p==null||p===""?(this._$AH!==pi&&this._$AR(),this._$AH=pi):p!==this._$AH&&p!==ua&&this._(p):p._$litType$!==void 0?this.$(p):p.nodeType!==void 0?this.T(p):(u=>gh(u)||typeof(u==null?void 0:u[Symbol.iterator])=="function")(p)?this.k(p):this._(p)}O(p){return this._$AA.parentNode.insertBefore(p,this._$AB)}T(p){this._$AH!==p&&(this._$AR(),this._$AH=this.O(p))}_(p){this._$AH!==pi&&ol(this._$AH)?this._$AA.nextSibling.data=p:this.T(la.createTextNode(p)),this._$AH=p}$(p){var T;const{values:a,_$litType$:u}=p,s=typeof u=="number"?this._$AC(p):(u.el===void 0&&(u.el=al.createElement(um(u.h,u.h[0]),this.options)),u);if(((T=this._$AH)==null?void 0:T._$AD)===s)this._$AH.p(a);else{const k=new t1(s,this),$=k.u(this.options);k.p(a),this.T($),this._$AH=k}}_$AC(p){let a=cm.get(p.strings);return a===void 0&&cm.set(p.strings,a=new al(p)),a}k(p){gh(this._$AH)||(this._$AH=[],this._$AR());const a=this._$AH;let u,s=0;for(const T of p)s===a.length?a.push(u=new sl(this.O(nl()),this.O(nl()),this,this.options)):u=a[s],u._$AI(T),s++;s<a.length&&(this._$AR(u&&u._$AB.nextSibling,s),a.length=s)}_$AR(p=this._$AA.nextSibling,a){var u;for((u=this._$AP)==null?void 0:u.call(this,!1,!0,a);p&&p!==this._$AB;){const s=p.nextSibling;p.remove(),p=s}}setConnected(p){var a;this._$AM===void 0&&(this._$Cv=p,(a=this._$AP)==null||a.call(this,p))}}class wc{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(p,a,u,s,T){this.type=1,this._$AH=pi,this._$AN=void 0,this.element=p,this.name=a,this._$AM=s,this.options=T,u.length>2||u[0]!==""||u[1]!==""?(this._$AH=Array(u.length-1).fill(new String),this.strings=u):this._$AH=pi}_$AI(p,a=this,u,s){const T=this.strings;let k=!1;if(T===void 0)p=ns(this,p,a,0),k=!ol(p)||p!==this._$AH&&p!==ua,k&&(this._$AH=p);else{const $=p;let X,J;for(p=T[0],X=0;X<T.length-1;X++)J=ns(this,$[u+X],a,X),J===ua&&(J=this._$AH[X]),k||(k=!ol(J)||J!==this._$AH[X]),J===pi?p=pi:p!==pi&&(p+=(J??"")+T[X+1]),this._$AH[X]=J}k&&!s&&this.j(p)}j(p){p===pi?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,p??"")}}class e1 extends wc{constructor(){super(...arguments),this.type=3}j(p){this.element[this.name]=p===pi?void 0:p}}class i1 extends wc{constructor(){super(...arguments),this.type=4}j(p){this.element.toggleAttribute(this.name,!!p&&p!==pi)}}class n1 extends wc{constructor(p,a,u,s,T){super(p,a,u,s,T),this.type=5}_$AI(p,a=this){if((p=ns(this,p,a,0)??pi)===ua)return;const u=this._$AH,s=p===pi&&u!==pi||p.capture!==u.capture||p.once!==u.once||p.passive!==u.passive,T=p!==pi&&(u===pi||s);s&&this.element.removeEventListener(this.name,this,u),T&&this.element.addEventListener(this.name,this,p),this._$AH=p}handleEvent(p){var a;typeof this._$AH=="function"?this._$AH.call(((a=this.options)==null?void 0:a.host)??this.element,p):this._$AH.handleEvent(p)}}class o1{constructor(p,a,u){this.element=p,this.type=6,this._$AN=void 0,this._$AM=a,this.options=u}get _$AU(){return this._$AM._$AU}_$AI(p){ns(this,p)}}const yh=il.litHtmlPolyfillSupport;yh==null||yh(al,sl),(il.litHtmlVersions??(il.litHtmlVersions=[])).push("3.2.1");/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */let ll=class extends is{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var p;const b=super.createRenderRoot();return(p=this.renderOptions).renderBefore??(p.renderBefore=b.firstChild),b}update(b){const p=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(b),this._$Do=((a,u,s)=>{const T=(s==null?void 0:s.renderBefore)??u;let k=T._$litPart$;if(k===void 0){const $=(s==null?void 0:s.renderBefore)??null;T._$litPart$=k=new sl(u.insertBefore(nl(),$),$,void 0,s??{})}return k._$AI(a),k})(p,this.renderRoot,this.renderOptions)}connectedCallback(){var b;super.connectedCallback(),(b=this._$Do)==null||b.setConnected(!0)}disconnectedCallback(){var b;super.disconnectedCallback(),(b=this._$Do)==null||b.setConnected(!1)}render(){return ua}};ll._$litElement$=!0,ll.finalized=!0,(Zm=globalThis.litElementHydrateSupport)==null||Zm.call(globalThis,{LitElement:ll});const vh=globalThis.litElementPolyfillSupport;vh==null||vh({LitElement:ll}),(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */const r1={attribute:!0,type:String,converter:vc,reflect:!1,hasChanged:fh},a1=(b=r1,p,a)=>{const{kind:u,metadata:s}=a;let T=globalThis.litPropertyMetadata.get(s);if(T===void 0&&globalThis.litPropertyMetadata.set(s,T=new Map),T.set(a.name,b),u==="accessor"){const{name:k}=a;return{set($){const X=p.get.call(this);p.set.call(this,$),this.requestUpdate(k,X,b)},init($){return $!==void 0&&this.P(k,void 0,b),$}}}if(u==="setter"){const{name:k}=a;return function($){const X=this[k];p.call(this,$),this.requestUpdate(k,X,b)}}throw Error("Unsupported decorator location: "+u)};function F(b){return(p,a)=>typeof a=="object"?a1(b,p,a):((u,s,T)=>{const k=s.hasOwnProperty(T);return s.constructor.createProperty(T,k?{...u,wrapped:!0}:u),k?Object.getOwnPropertyDescriptor(s,T):void 0})(b,p,a);/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */}function se(b){return F({...b,state:!0,attribute:!1})}/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */const hm=(b,p,a)=>(a.configurable=!0,a.enumerable=!0,Reflect.decorate&&typeof p!="object"&&Object.defineProperty(b,p,a),a);function qt(b,p){return(a,u,s)=>hm(a,u,{get(){return(T=>{var k;return((k=T.renderRoot)==null?void 0:k.querySelector(b))??null})(this)}});/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */}let s1;function rn(b){return(p,a)=>hm(p,a,{get(){return(this.renderRoot??s1??(s1=document.createDocumentFragment())).querySelectorAll(b)}})}const dm=1048576,pm=1073741824,l1={ATTACHMENT_BROWSE:"Browse",ATTACHMENT_DRAG_DROP_ZONE:"Drop files here."},c1={ATTACHMENT_BROWSE:"参照",ATTACHMENT_DRAG_DROP_ZONE:"ここにファイルをドロップします。"},u1={ATTACHMENT_BROWSE:"选择文件",ATTACHMENT_DRAG_DROP_ZONE:"拖动文件到此。"},h1={ATTACHMENT_BROWSE:"選擇檔案",ATTACHMENT_DRAG_DROP_ZONE:"拖曳檔案到此。"},d1={ATTACHMENT_BROWSE:"Examinar",ATTACHMENT_DRAG_DROP_ZONE:"Suelte los archivos aquí."},bo="'items' property is not array.",mm="'value' property is not unique in items.",p1="'value' property is not specified in items.",m1="'files' property is not array.",kc="'value' property is not array.",os="'value' property is not string.",Sc="'selectedIndex' property is not array.",Ic="'selectedIndex' property is not number.",_m="'columns' property is not array.",_1="'field' property is not specified in columns.",f1="'field' property is not unique in columns.",xh="'rowsPerPage' property is not positive integer.",fm="'data' property is not array.",Tc="'container' property is not HTMLElement.";let g1=class{constructor(b){}get _$AU(){return this._$AM._$AU}_$AT(b,p,a){this._$Ct=b,this._$AM=p,this._$Ci=a}_$AS(b,p){return this.update(b,p)}update(b,p){return this.render(...p)}},wh=class extends g1{constructor(b){if(super(b),this.it=pi,b.type!==2)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(b){if(b===pi||b==null)return this._t=void 0,this.it=b;if(b===ua)return b;if(typeof b!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(b===this.it)return this._t;this.it=b;const p=[b];return p.raw=p,this._t={_$litType$:this.constructor.resultType,strings:p,values:[]}}};/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */wh.directiveName="unsafeHTML",wh.resultType=1;const b1=(b=>(...p)=>({_$litDirective$:b,values:p}))(wh),da=24,oo=12,cl="AM",ul="PM",gm='"max" must be greater than or equal to "min".',bm="Time is out of valid range.",ym="'timeStep' property is not number.",kh="00:00",vm="23:59",yo="'value' property format is not valid.",xm="'max' property format is not valid.",wm="'min' property format is not valid.",km="'timeStep' property format is not valid.",y1={MONTH_SELECT:["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"],YEAR_SELECT_POSTFIX:"",WEEK_DAYS:[{text:"SUN",abbr:"Sunday"},{text:"MON",abbr:"Monday"},{text:"TUE",abbr:"Tuesday"},{text:"WED",abbr:"Wednesday"},{text:"THU",abbr:"Thursday"},{text:"FRI",abbr:"Friday"},{text:"SAT",abbr:"Saturday"}],INVALID_FORMAT:"Format is not valid.",INVALID_TIME_FORMAT:"Format is not valid.",CALENDAR_FOOTER_TEXT:{none:"None",today:"Today",close:"Close"},TIME_IS_OUT_OF_VALID_RANGE:"Time is out of valid range."},v1={MONTH_SELECT:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],YEAR_SELECT_POSTFIX:"年",WEEK_DAYS:[{text:"日",abbr:"日"},{text:"月",abbr:"月"},{text:"火",abbr:"火"},{text:"水",abbr:"水"},{text:"木",abbr:"木"},{text:"金",abbr:"金"},{text:"土",abbr:"土"}],INVALID_FORMAT:"日付の形式が不正です。",INVALID_TIME_FORMAT:"時刻の形式が不正です。",CALENDAR_FOOTER_TEXT:{none:"選択を解除",today:"今日",close:"閉じる"},TIME_IS_OUT_OF_VALID_RANGE:"時刻が有効な範囲外です。"},x1={MONTH_SELECT:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],YEAR_SELECT_POSTFIX:"年",WEEK_DAYS:[{text:"周日",abbr:"周日"},{text:"周一",abbr:"周一"},{text:"周二",abbr:"周二"},{text:"周三",abbr:"周三"},{text:"周四",abbr:"周四"},{text:"周五",abbr:"周五"},{text:"周六",abbr:"周六"}],INVALID_FORMAT:"日期格式不正确。",INVALID_TIME_FORMAT:"时间格式不正确。",CALENDAR_FOOTER_TEXT:{none:"清空",today:"今天",close:"关闭"},TIME_IS_OUT_OF_VALID_RANGE:"时间超出有效范围。"},w1={MONTH_SELECT:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],YEAR_SELECT_POSTFIX:"年",WEEK_DAYS:[{text:"週日",abbr:"週日"},{text:"週一",abbr:"週一"},{text:"週二",abbr:"週二"},{text:"週三",abbr:"週三"},{text:"週四",abbr:"週四"},{text:"週五",abbr:"週五"},{text:"週六",abbr:"週六"}],INVALID_FORMAT:"日期格式錯誤。",INVALID_TIME_FORMAT:"時間格式錯誤。",CALENDAR_FOOTER_TEXT:{none:"清空",today:"今天",close:"關閉"},TIME_IS_OUT_OF_VALID_RANGE:"時間超出有效範圍。"},k1={MONTH_SELECT:["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"],YEAR_SELECT_POSTFIX:"",WEEK_DAYS:[{text:"Do.",abbr:"Domingo"},{text:"Lu.",abbr:"Lunes"},{text:"Ma.",abbr:"Martes"},{text:"Mi.",abbr:"Miércoles"},{text:"Ju.",abbr:"Jueves"},{text:"Vi.",abbr:"Viernes"},{text:"Sá.",abbr:"Sábado"}],INVALID_FORMAT:"Formato no válido.",INVALID_TIME_FORMAT:"Formato no válido.",CALENDAR_FOOTER_TEXT:{none:"Ninguno",today:"Hoy",close:"Cerrar"},TIME_IS_OUT_OF_VALID_RANGE:"La hora está fuera del rango válido."},Sm=(b,p)=>{const a=C1(b,p);let u=new Date(a.start),s=[];const T=[];for(;u<=a.end;)s.push(T1(u)),s.length===7&&(T.push(s),s=[]),u.setDate(u.getDate()+1),u=new Date(u);return T},S1=(b,p)=>{let a,u;a=Math.floor(b/60),u=b%60;const s=a%da<oo?cl:ul;return a=p?a%oo:a%da,a===0&&p&&(a=oo),a<10&&(a="0"+a),u<10&&(u="0"+u),{label:a+":"+u+(p?" "+s:""),value:a+":"+u+(p?" "+s:"")}},rs=b=>{const p=b.split(":");let a=parseInt(p[0],10),u=parseInt(p[1],10);return isNaN(a)||isNaN(u)?0:(a<0?a=0:a>=da&&(a=23),u<0?u=0:u>=60&&(u=59),60*a+u)},Er=(b,p)=>{const a=rs(b),u=rs(p);return a>u?1:a===u?0:-1},Im=b=>{let p=b%oo;return p=p===0?oo:p,p},Tm=b=>b>=oo?ul:cl,hl=b=>{const[p,a]=b.split(" "),[u,s]=p.split(":");return a?`${I1(u,a)}:${s}`:b},I1=(b,p)=>{const a=parseInt(b,10);return Be(p===ul?a===oo?12:a+12:a===oo?0:a)},T1=b=>{const p=new Date(b),a=p.getFullYear(),u=Be(p.getMonth()+1),s=Be(p.getDate());return{text:`${p.getFullYear()}-${p.getMonth()+1}-${p.getDate()}`,attr:`${a}-${u}-${s}`}},Cm=(b,p)=>{if(p&&!Ih(p)){const a=p.split("-");if(a.length!==3)return p;const u=a[0],s=a[1],T=a[2];return b==="en"?`${s}/${T}/${u}`:`${u}-${s}-${T}`}return p},Sh=(b,p)=>{if(Ih(p))return p;const a=b==="en",u=a?"/":"-",s=p.split(u);return`${a?s[2]:s[0]}-${a?s[0]:s[1]}-${a?s[1]:s[2]}`},Ih=b=>b==null||b.length===0||!/[^(^\s*)|(\s*$)]/.test(b),Ar=(b="ja")=>{const p=new Date,a=p.getFullYear(),u=Be(p.getMonth()+1),s=Be(p.getDate());return b==="ja"||b==="zh"?a+"-"+u+"-"+s:u+"/"+s+"/"+a},Em=(b,p)=>{if(p&&!Ih(p)){const a=b==="en",u=a?"/":"-";if(new Date(`${p}${a?"":"T00:00:00"}`).getDate()!==parseInt(p.split(u)[a?1:2],10))return!1;const s=/^(0[1-9]|1[0-2])\/(0[1-9]|[12][0-9]|3[01])\/(\d{4})$/;if(b==="en")return p.match(s)!==null;const T=/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/g;return p.match(T)!==null}return!1},Be=(b,p=2)=>{const a=`0000000000${b}`;return a.substr(a.length-p)},C1=(b,p)=>{const a=new Date(b,p);a.setDate(1);const u=new Date(a);u.setDate(u.getDate()-u.getDay());const s=new Date(b,p);s.setMonth(s.getMonth()+1,0);const T=new Date(s);T.setDate(T.getDate()+(6-T.getDay()));const k=(T.getTime()-u.getTime())/864e5;return T.setDate(T.getDate()+(42-k)),{start:u,end:T}},mi=b=>{switch(b){case"en":default:return y1;case"zh":return x1;case"ja":return v1;case"zh-TW":return w1;case"es":return k1}},Am=b=>{const p=[];p.push({value:`${b} 12`,label:`${b} 12`});for(let a=1;a<=11;a++)p.push({value:`${b} ${Be(a)}`,label:`${b} ${Be(a)}`});return p},Mm=()=>Ce`
    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M0 0.5V1.2764L6 7.5L12 1.2764V0.5L6 6.5L0 0.5Z" fill="#888888"/>
    </svg>
    `;function Cc(b,p){const a=b.querySelector(".kuc-base-datetime-listbox-1-18-0__listbox"),u=dl(b);if(!b.parentElement||!a||!u)return;const{inputToBottom:s,inputToTop:T}=u,k=b.tagName.toLowerCase()==="kuc-base-datetime-header-month-1-18-0"?360:300,$=b.parentElement.getBoundingClientRect().height;return a.style.maxHeight=k+"px",b.parentElement.style.position="relative",s>=k?(a.style.height=k+"px",p==="bottom"?void(a.style.top=$+"px"):void(a.style.bottom=$+"px")):p==="bottom"?(a.style.top=$+"px",void(a.style.height=s-18+"px")):(a.style.height=T-18+"px",a.style.top="auto",void(a.style.bottom=b.parentElement.getBoundingClientRect().height+"px"))}const dl=b=>{var p,a;if(!b.parentElement)return{inputToBottom:0,inputToTop:0,inputToRight:0,inputToLeft:0};const u=(p=b.closest("kuc-base-date-1-18-0"))!==null&&p!==void 0?p:b.closest("kuc-mobile-base-date-1-18-0"),s=((a=u.getElementsByClassName("kuc-base-date-1-18-0__input")[0])!==null&&a!==void 0?a:u.getElementsByClassName("kuc-mobile-base-date-1-18-0__group")[0]).getBoundingClientRect().width;return{inputToBottom:window.innerHeight-b.parentElement.getBoundingClientRect().bottom,inputToTop:b.parentElement.getBoundingClientRect().top,inputToRight:window.innerWidth-b.parentElement.getBoundingClientRect().left,inputToLeft:b.parentElement.getBoundingClientRect().left+s}},We={fromAttribute:b=>b===null,toAttribute:b=>b?null:""},pa={fromAttribute:b=>!b||["en","ja","zh","zh-TW","es"].indexOf(b)===-1,toAttribute:b=>{const p=["en","ja","zh","zh-TW","es"];return p.indexOf(b)!==-1?b:p.indexOf(document.documentElement.lang)!==-1?document.documentElement.lang:"en"}},vo=b=>b instanceof HTMLElement?b:b1(b),Ec=b=>{if(b===void 0||b==="")return"";let p=[];return b.indexOf("-")>0&&(p=b.split("-")),p.length<2?`${b}-01-01`:p.length===2?`${Be(p[0],4)}-${Be(p[1])}-01`:p.length>2?`${Be(p[0],4)}-${Be(p[1])}-${Be(p[2])}`:""},Zo=b=>{if(b.length===5||b==="")return b;const p=b.indexOf(":"),a=b.substr(0,p),u=b.substr(p+1,5);return`${Be(a)}:${Be(u)}`};for(var Th,Fi=[],Ch=0;Ch<256;++Ch)Fi.push((Ch+256).toString(16).slice(1));var E1=new Uint8Array(16);function A1(){if(!Th&&!(Th=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Th(E1)}const Dm={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function M1(b,p,a){if(Dm.randomUUID&&!p&&!b)return Dm.randomUUID();var u=(b=b||{}).random||(b.rng||A1)();return u[6]=15&u[6]|64,u[8]=63&u[8]|128,function(s,T=0){return(Fi[s[T+0]]+Fi[s[T+1]]+Fi[s[T+2]]+Fi[s[T+3]]+"-"+Fi[s[T+4]]+Fi[s[T+5]]+"-"+Fi[s[T+6]]+Fi[s[T+7]]+"-"+Fi[s[T+8]]+Fi[s[T+9]]+"-"+Fi[s[T+10]]+Fi[s[T+11]]+Fi[s[T+12]]+Fi[s[T+13]]+Fi[s[T+14]]+Fi[s[T+15]]).toLowerCase()}(u)}class ce extends ll{createRenderRoot(){return this}async throwErrorAfterUpdateComplete(p){throw await this.updateComplete,new Error(p)}}const Ot=(b,p,a)=>{const u=new CustomEvent(p,{detail:a,bubbles:!0,composed:!0});return b.dispatchEvent(u)},ue=b=>{const p="kuc-style-1-18-0";let a=document.getElementById(p);a||(a=document.createElement("style"),a.id=p,document.head.appendChild(a)),a.appendChild(document.createTextNode(b))},ti=()=>M1();var Eh=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class Ac extends ce{constructor(){super(...arguments),this.ariaLive="",this.guid="",this.text=""}render(){return bt`
      ${this.ariaLive&&this.ariaLive!==""?bt`
            <div
              class="kuc-base-error-1-18-0__error"
              .id="${this.guid}-error"
              role="alert"
              aria-live="${this.ariaLive}"
              ?hidden="${!this.text}"
            >
              ${this.text}
            </div>
          `:bt`
            <div
              class="kuc-base-error-1-18-0__error"
              .id="${this.guid}-error"
              role="alert"
              ?hidden="${!this.text}"
            >
              ${this.text}
            </div>
          `}
    `}}Eh([F({type:String})],Ac.prototype,"ariaLive",void 0),Eh([F({type:String})],Ac.prototype,"guid",void 0),Eh([F({type:String})],Ac.prototype,"text",void 0),window.customElements.get("kuc-base-error-1-18-0")||(ue(`
  kuc-base-error-1-18-0,
  kuc-base-error-1-18-0 *,
  kuc-base-error-1-18-0:lang(en),
  kuc-base-error-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-base-error-1-18-0:lang(es),
  kuc-base-error-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-base-error-1-18-0:lang(ja),
  kuc-base-error-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-base-error-1-18-0:lang(zh),
  kuc-base-error-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-base-error-1-18-0:lang(zh-TW),
  kuc-base-error-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  kuc-base-error-1-18-0 {
    width: 100%;
    font-size: 14px;
    display: inline-table;
    vertical-align: top;
  }
  kuc-base-error-1-18-0[hidden] {
    display: none;
  }
  .kuc-base-error-1-18-0__error {
    line-height: 1.5;
    padding: 4px 18px;
    box-sizing: border-box;
    background-color: #e74c3c;
    color: #ffffff;
    margin: 8px 0px;
    word-break: break-all;
    white-space: normal;
  }
  .kuc-base-error-1-18-0__error[hidden] {
    display: none;
  }
`),window.customElements.define("kuc-base-error-1-18-0",Ac));var Ah=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class Mc extends ce{constructor(){super(...arguments),this.requiredIcon=!1,this.guid="",this.text=""}render(){return bt`
      ${this._getTextTemplate()}
      <span
        class="kuc-base-label-1-18-0__required-icon"
        ?hidden="${!this.requiredIcon}"
        >*</span
      >
    `}_getTextTemplate(){return this.guid&&this.guid!==""?bt`
          <span class="kuc-base-label-1-18-0__text" .id="${this.guid}-group"
            >${this.text}</span
          >
        `:bt` <span class="kuc-base-label-1-18-0__text">${this.text}</span> `}}function ze(b){if(!b||typeof b!="object")return{};const p={...b};for(const a in p)Object.prototype.hasOwnProperty.call(p,a)&&p[a]===void 0&&delete p[a];return p}function Pm(b){return!(b!==""&&b!==void 0&&!/(^(\d{1,4})-(0?[1-9]|1[0-2])-(0?[1-9]|[12][0-9]|3[01])$)|(^(\d{1,4})$)|(^(\d{1,4})-(0?[1-9]|1[0-2])$)/g.test(b))}function ma(b){return!(b!==""&&!/^(2[0-3]|[01]?[0-9]):([0-9]|[0-5][0-9])$/.test(b))}function zm(b,p,a){const u=Math.round(b),s=rs(p),T=rs(a);return!isNaN(u)&&u>0&&u<=s-T}function _a(b){const[p,a,u]=b.split("-"),s=new Date(`${b}T00:00:00`),T=s.getFullYear(),k=s.getMonth(),$=s.getDate();return T===Number(p)&&k===Number(a)-1&&$===Number(u)}function as(b){return typeof b=="string"}function Lm(b,p){return!(!/(^(\d{4})-(0[0-9]|1[0-2])-(0[1-9]|([12][0-9]|3[01]))$)|(^(\d{4})$)|(^(\d{4})-(0[0-9]|1[0-2])$)/g.test(b)||!/(^([01][0-9]|2[0-3])$)|(^([01][0-9]|2[0-3]):([0-5][0-9]))$|(^([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9])$/.test(p))}function Bm(b){return b.length<2||!b.some(p=>b.indexOf(p)!==b.lastIndexOf(p))}function Mh(b){return!(b<.5||!fa(b))}function fa(b){return typeof b=="number"&&!Number.isNaN(b)}function Xe(b){return Array.isArray(b)}Ah([F({type:Boolean})],Mc.prototype,"requiredIcon",void 0),Ah([F({type:String})],Mc.prototype,"guid",void 0),Ah([F({type:String})],Mc.prototype,"text",void 0),window.customElements.get("kuc-base-label-1-18-0")||(ue(`
  kuc-base-label-1-18-0,
  kuc-base-label-1-18-0 *,
  kuc-base-label-1-18-0:lang(en),
  kuc-base-label-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-base-label-1-18-0:lang(es),
  kuc-base-label-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-base-label-1-18-0:lang(ja),
  kuc-base-label-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
    sans-serif;
  }
  kuc-base-label-1-18-0:lang(zh),
  kuc-base-label-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", sans-serif;
  }
  kuc-base-label-1-18-0:lang(zh-TW),
  kuc-base-label-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  kuc-base-label-1-18-0 {
    font-size: 14px;
    color: #333333;
    display: inline-table;
    vertical-align: top;
  }
  kuc-base-label-1-18-0[hidden] {
    display: none;
  }
  .kuc-base-label-1-18-0__required-icon {
    font-size: 20px;
    vertical-align: -3px;
    color: #e74c3c;
    margin-left: 4px;
    line-height: 1;
  }
  .kuc-base-label-1-18-0__required-icon[hidden] {
    display: none;
  }
`),window.customElements.define("kuc-base-label-1-18-0",Mc));var Oi=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Dh;(()=>{if(Dh=window.customElements.get("kuc-attachment-1-18-0"),!Dh){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.language="auto",this.message="",this.disabled=!1,this.requiredIcon=!1,this.visible=!0,this.files=[],this._isDraging=!1,this._dragEnterCounter=0,this._locale=this._getLocale(),this._isFileOrDirectoryDrag=s=>{if(!s.dataTransfer)return!1;if(s.dataTransfer.items!==void 0){for(let T=0;T<s.dataTransfer.items.length;T++)if(s.dataTransfer.items[T].kind.toLowerCase()==="file")return!0}if(s.dataTransfer.types!==void 0){for(let T=0;T<s.dataTransfer.types.length;T++)if(s.dataTransfer.types[T].toLowerCase()==="files")return!0}return!1},this._GUID=ti();const u=ze(a);Object.assign(this,u)}shouldUpdate(a){return!(a.has("files")&&!Xe(this.files)&&(this.throwErrorAfterUpdateComplete(m1),1))}willUpdate(a){return a.has("language")&&(this._locale=this._getLocale()),!0}render(){return bt`
      <div class="kuc-attachment-1-18-0__group">
        <label
          class="kuc-attachment-1-18-0__group__label"
          ?hidden="${!this.label}"
          for="${this._GUID}-input"
          @click="${this._handleClickLabel}"
        >
          <kuc-base-label-1-18-0
            .text="${this.label}"
            .requiredIcon="${this.requiredIcon}"
          ></kuc-base-label-1-18-0>
        </label>
        <div
          class="kuc-attachment-1-18-0__group__files ${this.disabled?" kuc-attachment-1-18-0__group__files--disabled":""}"
          @dragenter="${this._handleDragEnter}"
          @dragover="${this._handleDragOver}"
          @dragleave="${this._handleDragLeave}"
          @drop="${this._handleDragDrop}"
        >
          <div
            class="kuc-attachment-1-18-0__group__files__droppable"
            ?hidden="${!this._isDraging}"
          >
          <div class="kuc-attachment-1-18-0__group__files__droppable__text">${this._locale.ATTACHMENT_DRAG_DROP_ZONE}</div>
          </div>
          <ul
            class="kuc-attachment-1-18-0__group__files__display-area${this._isDraging?" kuc-attachment-1-18-0__group__files__not-droppable--dragenter":""}"
          >
          ${this.files.map((a,u)=>this._getAttachmentItemTemplate(a,u))}
          </ul>
          <div class="kuc-attachment-1-18-0__group__files__browse-button${this._isDraging?" kuc-attachment-1-18-0__group__files__not-droppable--dragenter":""}"
          ?hidden="${this.disabled}">
            <span class="kuc-attachment-1-18-0__group__files__browse-button__text">${this._locale.ATTACHMENT_BROWSE}</span>
            <div class="kuc-attachment-1-18-0__group__files__browse-button__input-container">
              <input class="kuc-attachment-1-18-0__group__files__browse-button__input-container__input" type="file" multiple 
              .id="${this._GUID}-input"
              aria-required="${this.requiredIcon}"
              aria-invalid="${this.error}"
              aria-describedby="${this._GUID}-error"
              @change="${this._handleChangeFiles}"></input>
            </div>
          </div>
          <p class="kuc-attachment-1-18-0__group__files__browse-message${this.disabled?" kuc-attachment-1-18-0__group__files__browse-message--disabled":""}"
            ?hidden="${!this.message}"
          >
            ${this.message}
          </p>
        </div>
        <kuc-base-error-1-18-0
          class="kuc-attachment-1-18-0__error"
          ?hidden="${!this.error}"
          .text="${this.error}"
          .guid="${this._GUID}"
        ></kuc-base-error-1-18-0>
      </div>
    `}_getAttachmentItemTemplate(a,u){return bt`
        <li class="kuc-attachment-1-18-0__group__files__display-area__item">
          <div
            title="${a.name||""}"
            class="kuc-attachment-1-18-0__group__files__display-area__item__name"
          >
            ${a.name||""}
          </div>
          <div
            class="kuc-attachment-1-18-0__group__files__display-area__item__remove-button__container"
            ?hidden="${this.disabled}"
          >
            <button
              class="kuc-attachment-1-18-0__group__files__display-area__item__remove-button__container__button"
              aria-label="Cancel File"
              data-file-index="${u}"
              @click="${this._handleClickFileRemove}"
              tabindex="0"
            >
              ${this._getRemoveButtonIcon()}
            </button>
          </div>
          <span class="kuc-attachment-1-18-0__group__files__display-area__item__size">
            ${this._getFileSize(a.size)}
          </span>
        </li>
      `}async updated(a){await this.updateComplete,this._updateFileNameMaxWidth()}_updateFileNameMaxWidth(){const a=this._labelEl.getBoundingClientRect().width;this._fileItemsEl.forEach(u=>{u.style.maxWidth=`calc(var(--kuc-attachment-width, ${a<191?191:a}px) - 14px)`})}_getRemoveButtonIcon(){return Ce`<svg
        xmlns="http://www.w3.org/2000/svg"
        width="14"
        height="14"
        viewBox="0 0 14 14"
        fill="none"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M5.93933 7.00001L1.96966 3.03034L1.43933 2.50001L2.49999 1.43935L3.03032 1.96968L6.99999 5.93935L10.9697 1.96968L11.5 1.43935L12.5607 2.50001L12.0303 3.03034L8.06065 7.00001L12.0303 10.9697L12.5607 11.5L11.5 12.5607L10.9697 12.0303L6.99999 8.06067L3.03032 12.0303L2.49999 12.5607L1.43933 11.5L1.96966 10.9697L5.93933 7.00001Z"
          fill="#a8a8a8"
        />
      </svg>`}_getLanguage(){const a=["en","ja","zh","zh-TW","es"];return a.indexOf(this.language)!==-1?this.language:a.indexOf(document.documentElement.lang)!==-1?document.documentElement.lang:"en"}_getLocale(){switch(this._getLanguage()){case"en":default:return l1;case"zh":return u1;case"zh-TW":return h1;case"ja":return c1;case"es":return d1}}_handleClickFileRemove(a){const u=a.currentTarget,s=parseInt(u.getAttribute("data-file-index"),10);if(this.files){s===this.files.length-1&&this._inputEl.focus();const T=[...this.files];this.files.splice(s,1);const k={oldFiles:T,files:this.files,type:"remove-file",fileIndex:[s]};Ot(this,"change",k),this.requestUpdate(),s<=this.files.length-1&&this._fileRemoveButtons[s].focus()}}_handleClickLabel(a){a.preventDefault()}_handleDragEnter(a){if(!this.disabled&&(this._dragEnterCounter++,this._dragEnterCounter===1&&this._isFileOrDirectoryDrag(a))){a.preventDefault();const u=2,s=1;this._groupFilesEl.style.height=this._groupFilesEl.getBoundingClientRect().height+"px",this._dragTextEl.style.width=this._groupFilesEl.getBoundingClientRect().width-2*s+"px",this._dragTextEl.style.height=this._groupFilesEl.getBoundingClientRect().height-2*(s+u)+"px",this._isDraging=!0}}_handleDragOver(a){this.disabled||(a.stopPropagation(),this._isFileOrDirectoryDrag(a)&&a.preventDefault())}_handleDragDrop(a){!this.disabled&&this._isDraging&&(a.preventDefault(),this._handleDragLeave(),this._isFileDrop(a)&&this._addFiles(a))}_isFileDrop(a){var u;if(a.dataTransfer&&a.dataTransfer.items){for(let s=0;s<a.dataTransfer.items.length;s++)if(typeof a.dataTransfer.items[s].webkitGetAsEntry=="function"&&(!((u=a.dataTransfer.items[s].webkitGetAsEntry())===null||u===void 0)&&u.isDirectory))return!1}return!0}_handleDragLeave(){this.disabled||(this._dragEnterCounter--,this._dragEnterCounter===0&&(this._groupFilesEl.style.height="var(--kuc-attachment-height, auto)",this._isDraging=!1))}_handleChangeFiles(a){a.preventDefault(),a.stopPropagation(),this._addFiles(a)}_addFiles(a){if(this.files){let u=a.dataTransfer?a.dataTransfer.files:a.target.files;u=Object.keys(u).map($=>u[$]);const s=[...this.files],T=u.map(($,X)=>s.length+X);u.forEach($=>this.files.push($));const k={oldFiles:s,files:this.files,type:"add-file",fileIndex:T};Ot(this,"change",k),this.requestUpdate()}this._inputEl.value=""}_getFileSize(a){return typeof a=="number"?this._formatFileSize(a):/^[1-9]\d*$/.test(a)?this._formatFileSize(parseInt(a,10)):"NaN size"}_formatFileSize(a){return a>=pm?Math.round(a/pm)+" GB":a>=dm?Math.round(a/dm)+" MB":a>=1024?Math.round(a/1024)+" KB":Math.round(a)+" bytes"}}Oi([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),Oi([F({type:String})],b.prototype,"error",void 0),Oi([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),Oi([F({type:String})],b.prototype,"label",void 0),Oi([F({type:String,attribute:"lang",reflect:!0,converter:pa})],b.prototype,"language",void 0),Oi([F({type:String})],b.prototype,"message",void 0),Oi([F({type:Boolean})],b.prototype,"disabled",void 0),Oi([F({type:Boolean})],b.prototype,"requiredIcon",void 0),Oi([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),Oi([F({type:Array})],b.prototype,"files",void 0),Oi([se()],b.prototype,"_isDraging",void 0),Oi([qt(".kuc-attachment-1-18-0__group__files")],b.prototype,"_groupFilesEl",void 0),Oi([qt(".kuc-attachment-1-18-0__group__files__droppable__text")],b.prototype,"_dragTextEl",void 0),Oi([qt(".kuc-attachment-1-18-0__group__files__browse-button__input-container__input")],b.prototype,"_inputEl",void 0),Oi([qt(".kuc-attachment-1-18-0__group__label")],b.prototype,"_labelEl",void 0),Oi([rn(".kuc-attachment-1-18-0__group__files__display-area__item__name")],b.prototype,"_fileItemsEl",void 0),Oi([rn(".kuc-attachment-1-18-0__group__files__display-area__item__remove-button__container__button")],b.prototype,"_fileRemoveButtons",void 0),window.customElements.define("kuc-attachment-1-18-0",b),ue(`
  kuc-attachment-1-18-0,
  kuc-attachment-1-18-0 *,
  kuc-attachment-1-18-0:lang(en),
  kuc-attachment-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-attachment-1-18-0:lang(ja),
  kuc-attachment-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
        sans-serif;
  }
  kuc-attachment-1-18-0:lang(zh),
  kuc-attachment-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
        Hei, "Heiti SC", sans-serif;
  }
  kuc-attachment-1-18-0:lang(zh-TW),
  kuc-attachment-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
        Hei,"Heiti SC",sans-serif;
  }
  kuc-attachment-1-18-0:lang(es),
  kuc-attachment-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-attachment-1-18-0 {
    font-size: 14px;
    display: inline-table;
    vertical-align: top;
    width: var(--kuc-attachment-width, 191px);
    min-width: var(--kuc-attachment-width, 191px);
  }
  kuc-attachment-1-18-0[hidden] {
    display: none;
  }
  .kuc-attachment-1-18-0__group {
    width: 100%;
    height: auto;
    box-sizing: border-box;
    position: relative;
    display: block;
  }
  .kuc-attachment-1-18-0__group__label {
    display: inline-block;
    padding: 4px 0 8px 0;
    color: #333333;
    white-space: nowrap;
  }
  .kuc-attachment-1-18-0__group__label[hidden] {
    display: none;
  }
  .kuc-attachment-1-18-0__group__files {
    border: solid 1px #e3e7e8;
    background-color: #eeeeee;
    padding: 16px 4px;
    display: block;
    font-size: 14px;
    overflow: hidden;
    position: relative;
    box-sizing: border-box;
    width: var(--kuc-attachment-width, auto);
    height: var(--kuc-attachment-height, auto);
  }
  .kuc-attachment-1-18-0__group__files--disabled {
    cursor: not-allowed;
  }
  .kuc-attachment-1-18-0__group__files__browse-button {
    border: 1px solid transparent;
    position: relative;
    display: inline-block;
    margin-right: 16px;
    padding: 8px;
    text-decoration: none;
  }
  .kuc-attachment-1-18-0__group__files__browse-button[hidden]{
    display: none;
  }
  .kuc-attachment-1-18-0__group__files__browse-button:focus-within {
    border: 1px solid #3498db;
  }
  .kuc-attachment-1-18-0__group__files__browse-button:hover
  .kuc-attachment-1-18-0__group__files__browse-button__text {
    color: #217dbb;
  }
  .kuc-attachment-1-18-0__group__files__browse-button__text {
    color: #3498db;
    font-size: 14px;
  }
  .kuc-attachment-1-18-0__group__files__browse-button__input-container {
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: hidden;
    display: inline-block;
  }
  .kuc-attachment-1-18-0__group__files__browse-button__input-container__input {
    cursor: pointer;
    font-size: 999px;
    vertical-align: middle;
    height: 100%;
    width: 100%;
    line-height: 1.5;
  }
  .kuc-attachment-1-18-0__group__files__display-area {
    padding-inline-start: 0px;
    list-style-type: disc;
    margin-block-start: 0em;
    margin-block-end: 0em;
  }
  .kuc-attachment-1-18-0__group__files__display-area__item {
    position: relative;
    margin-bottom: 8px;
    height: auto;
    min-height: 24px;
    border: 2px solid #f1f4f5;
    background-color: #f1f4f5;
    list-style: none;
    display: flex;
    align-items: center;
  }
  .kuc-attachment-1-18-0__group__files__display-area__item__name {
    display: inline-block;
    padding: 3px calc(4.6em + 4px) 3px 26px;
    width: 100%;
    max-width: 177px;
    box-sizing: border-box;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    word-wrap: normal;
    font-size: var(--kuc-attachment-item-font-size, 14px);
    line-height: 1.2;
  }
  .kuc-attachment-1-18-0__group__files__display-area__item__remove-button__container {
    display: inline-block;
    position: absolute;
    top: calc(50% - 12px);
    left: 0;
    width: 24px;
    height: 24px;
  }
  .kuc-attachment-1-18-0__group__files__display-area__item__remove-button__container[hidden] {
    display: none;
  }
  .kuc-attachment-1-18-0__group__files__display-area__item__remove-button__container__button {
    background-color: #f2f4f6;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid transparent;
    padding: 0px;
    width:100%;
    height:100%;
  }
  .kuc-attachment-1-18-0__group__files__display-area__item__remove-button__container__button:hover {
    background: #d8e1e6;
  }
  .kuc-attachment-1-18-0__group__files__display-area__item__remove-button__container__button:focus-within {
    border: 1px solid #3498db;
  }
  .kuc-attachment-1-18-0__group__files__display-area__item__remove-button__container__button:focus {
    outline: none;
  }
  .kuc-attachment-1-18-0__group__files__display-area__item__size {
    display: inline-block;
    position: absolute;
    right: 0;
    color: #888888;
    padding: 0 3px 0 0;
    max-width: 4.6em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    word-wrap: normal;
    font-size: var(--kuc-attachment-item-font-size, 14px);
    line-height: 1.2;
  }
  .kuc-attachment-1-18-0__group__files__droppable {
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    margin: auto 0;
  }
  .kuc-attachment-1-18-0__group__files__droppable[hidden] {
    display: none;
  }
  .kuc-attachment-1-18-0__group__files__droppable__text {
    background-color: #e2f2fe;
    border: dashed 2px #3498db;
    display: table-cell;
    vertical-align: middle;
    text-align: center;
    color: #3498db;
    font-size: 14px;
  }
  .kuc-attachment-1-18-0__group__files__browse-message {
    display: inline-block;
    color: var(--kuc-attachment-message-color, #888888);
    font-size: var(--kuc-attachment-message-font-size, 14px);
    margin: 3px 0 0;
    word-break: break-all;
  }
  .kuc-attachment-1-18-0__group__files__browse-message--disabled {
    color: #888888;
  }
  .kuc-attachment-1-18-0__group__files__browse-message[hidden] {
    display: none;
  }
  .kuc-attachment-1-18-0__group__files__not-droppable--dragenter {
    visibility: hidden;
  }
`),Dh=b}})();var ga=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Ph;(()=>{if(Ph=window.customElements.get("kuc-button-1-18-0"),!Ph){class b extends ce{constructor(a){super(),this.className="",this.id="",this.text="",this.type="normal",this.content="",this.disabled=!1,this.visible=!0;const u=ze(a);Object.assign(this,u)}_handleClickButton(a){a.stopPropagation(),Ot(this,"click")}_getButtonColorType(){return this.type==="normal"||this.type==="submit"||this.type==="alert"?this.type:"normal"}render(){return bt`
        <button
          type="button"
          class="kuc-button-1-18-0__button kuc-button-1-18-0__button--${this._getButtonColorType()}"
          ?disabled="${this.disabled}"
          @click="${this._handleClickButton}"
        >
          ${this.content?vo(this.content):this.text}
        </button>
      `}}ga([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),ga([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),ga([F({type:String})],b.prototype,"text",void 0),ga([F({type:String})],b.prototype,"type",void 0),ga([F()],b.prototype,"content",void 0),ga([F({type:Boolean})],b.prototype,"disabled",void 0),ga([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),window.customElements.define("kuc-button-1-18-0",b),ue(`
  kuc-button-1-18-0,
  kuc-button-1-18-0 *,
  kuc-button-1-18-0:lang(en),
  kuc-button-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-button-1-18-0:lang(es),
  kuc-button-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-button-1-18-0:lang(ja),
  kuc-button-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
  }
  kuc-button-1-18-0:lang(zh),
  kuc-button-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti, Hei,
      "Heiti SC", sans-serif;
  }
  kuc-button-1-18-0:lang(zh-TW),
  kuc-button-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  kuc-button-1-18-0 {
    display: inline-block;
    vertical-align: top;
  }
  kuc-button-1-18-0[hidden] {
    display: none;
  }
  .kuc-button-1-18-0__button {
    display: grid;
    align-items: center;
    align-content: center;
    font-size: var(--kuc-button-font-size, 16px);
    width: var(--kuc-button-width, "auto");
    height: var(--kuc-button-height, 48px);
    min-width: var(--kuc-button-width, 163px);
    padding: 0px 16px;
    user-select: none;
    white-space: nowrap;
  }
  .kuc-button-1-18-0__button--normal {
    background-color: var(--kuc-button-background-color, #f7f9fa);
    color: var(--kuc-button-text-color, #3498db);
    border: 1px solid #e3e7e8;
  }
  .kuc-button-1-18-0__button--normal:hover,
  .kuc-button-1-18-0__button--normal:focus-visible,
  .kuc-button-1-18-0__button--normal:active {
    cursor: pointer;
  }
  .kuc-button-1-18-0__button--normal:hover {
    background-color: var(--kuc-button-background-color-hover, #c8d6dd);
  }
  .kuc-button-1-18-0__button--normal:focus-visible {
    background-color: var(--kuc-button-background-color-focus, #c8d6dd);
  }
  .kuc-button-1-18-0__button--normal:active {
    background-color: var(--kuc-button-background-color-active, #c8d6dd);
  }
  .kuc-button-1-18-0__button--submit {
    background-color: var(--kuc-button-background-color, #3498db);
    color: var(--kuc-button-text-color, #ffffff);
    border: 1px solid #e3e7e8;
  }
  .kuc-button-1-18-0__button--submit:hover,
  .kuc-button-1-18-0__button--submit:focus-visible,
  .kuc-button-1-18-0__button--submit:active {
    cursor: pointer;
  }
  .kuc-button-1-18-0__button--submit:hover {
    background-color: var(--kuc-button-background-color-hover, #1d6fa5);
  }
  .kuc-button-1-18-0__button--submit:focus-visible {
    background-color: var(--kuc-button-background-color-focus, #1d6fa5);
  }
  .kuc-button-1-18-0__button--submit:active {
    background-color: var(--kuc-button-background-color-active, #1d6fa5);
  }
  .kuc-button-1-18-0__button--alert {
    background-color: var(--kuc-button-background-color, #e74c3c);
    color: var(--kuc-button-text-color, #ffffff);
    border: 1px solid #e3e7e8;
  }
  .kuc-button-1-18-0__button--alert:hover,
  .kuc-button-1-18-0__button--alert:focus-visible,
  .kuc-button-1-18-0__button--alert:active {
    cursor: pointer;
  }
  .kuc-button-1-18-0__button--alert:hover {
    background-color: var(--kuc-button-background-color-hover, #bf2718);
  }
  .kuc-button-1-18-0__button--alert:focus-visible {
    background-color: var(--kuc-button-background-color-focus, #bf2718);
  }
  .kuc-button-1-18-0__button--alert:active {
    background-color: var(--kuc-button-background-color-active, #bf2718);
  }
  .kuc-button-1-18-0__button:disabled {
    background-color: #d4d7d7;
    border: 1px solid #e3e7e8;
    color: #888888;
    cursor: not-allowed;
  }
  .kuc-button-1-18-0__button--normal:focus-visible,
  .kuc-button-1-18-0__button--submit:focus-visible,
  .kuc-button-1-18-0__button--alert:focus-visible {
    outline: 1px solid #3498db;
  }
`),Ph=b}})();var fn=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let zh;(()=>{if(zh=window.customElements.get("kuc-checkbox-1-18-0"),!zh){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.itemLayout="horizontal",this.label="",this.borderVisible=!0,this.disabled=!1,this.requiredIcon=!1,this.visible=!0,this.items=[],this.selectedIndex=[],this.value=[],this._valueMapping={},this._GUID=ti();const u=ze(a);this._setInitialValue(u),Object.assign(this,u)}_setInitialValue(a){const u="value"in a,s="selectedIndex"in a,T=a.selectedIndex||[];if(!u&&s){if(!Xe(T))return;const k=this._getValueMapping(a);this.value=this._getValidValue(k,T)}}shouldUpdate(a){return a.has("items")&&!Xe(this.items)?(this.throwErrorAfterUpdateComplete(bo),!1):a.has("value")&&!Xe(this.value)?(this.throwErrorAfterUpdateComplete(kc),!1):!(a.has("selectedIndex")&&!Xe(this.selectedIndex)&&(this.throwErrorAfterUpdateComplete(Sc),1))}willUpdate(a){if(a.has("value")){if(this.value.length>0)return;this.selectedIndex=[]}}_getNewValueMapping(a,u){const s=parseInt(u,10),T=Object.keys(this._valueMapping),k={...this._valueMapping};return T.indexOf(u)>-1?(delete k[s],k):(k[s]=a,k)}_handleChangeInput(a){a.stopPropagation();const u=a.target,s=u.dataset.index||"0",T=u.value,k=this.value?[...this.value]:this.value,$=this._getNewValueMapping(T,s),X=this.items.map(St=>St.value),J=Object.values($).filter(St=>X.indexOf(St)>-1);if(J===k)return;const Zt=Object.keys($).map(St=>parseInt(St,10));this.value=J,this.selectedIndex=Zt,Ot(this,"change",{oldValue:k,value:J})}_handleFocusInput(a){a.target.parentNode.setAttribute("focused","")}_handleBlurInput(a){a.target.parentNode.removeAttribute("focused")}_getCheckboxIconSvgTemplate(a,u){return Ce`
    <svg
      class="kuc-checkbox-1-18-0__group__select-menu__item__label__icon"
      width="21"
      height="21"
      viewBox="0 0 21 21"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <rect
        x="1"
        y="1"
        width="19"
        height="19"
        rx="1"
        fill="white"
        stroke="${this._getSVGStrokeValue(a,u)}"
        stroke-width="2"/>
      ${u?Ce`<path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M5 11L6.5 9L9.5 11.5L14.5 6L16 7.5L9.5 14.5L5 11Z"
            fill="${a?"#d8d8d8":"#3498db"}"/>`:""}
    </svg>
  `}_getSVGStrokeValue(a,u){return a?"#d8d8d8":u?"#3498db":"#d8d8d8"}_isCheckedItem(a,u){const s=Object.values(this._valueMapping),T=Object.keys(this._valueMapping);return s.filter((k,$)=>k===a.value&&u===parseInt(T[$],10)).length>0}_getItemTemplate(a,u){const s=this._isCheckedItem(a,u),T=a.disabled||this.disabled;return bt`
        <div
          class="kuc-checkbox-1-18-0__group__select-menu__item"
          itemLayout="${this.itemLayout}"
        >
          <input
            type="checkbox"
            aria-describedby="${this._GUID}-error"
            aria-required="${this.requiredIcon}"
            data-index="${u}"
            id="${this._GUID}-item-${u}"
            class="kuc-checkbox-1-18-0__group__select-menu__item__input"
            name="${this._GUID}-group"
            value="${a.value!==void 0?a.value:""}"
            ?disabled="${T}"
            @change="${this._handleChangeInput}"
            @focus="${this._handleFocusInput}"
            @blur="${this._handleBlurInput}"
          />
          <label
            for="${this._GUID}-item-${u}"
            class="kuc-checkbox-1-18-0__group__select-menu__item__label"
            >${this._getCheckboxIconSvgTemplate(T,s)}${a.label===void 0?a.value:a.label}
          </label>
        </div>
      `}update(a){(a.has("items")||a.has("value")||a.has("selectedIndex"))&&(this._valueMapping=this._getValueMapping({items:this.items,value:this.value,selectedIndex:this.selectedIndex}),this._setValueAndSelectedIndex()),super.update(a)}render(){return bt`
        <div
          class="kuc-checkbox-1-18-0__group"
          role="group"
          aria-labelledby="${this._GUID}-group"
        >
          <div class="kuc-checkbox-1-18-0__group__label" ?hidden="${!this.label}">
            <kuc-base-label-1-18-0
              .text="${this.label}"
              .guid="${this._GUID}"
              .requiredIcon="${this.requiredIcon}"
            ></kuc-base-label-1-18-0>
          </div>
          <div
            class="kuc-checkbox-1-18-0__group__select-menu"
            ?borderVisible="${this.borderVisible}"
            itemLayout="${this.itemLayout}"
          >
            ${this.items.map((a,u)=>this._getItemTemplate(a,u))}
          </div>
          <kuc-base-error-1-18-0
            .text="${this.error}"
            .guid="${this._GUID}"
            ?hidden="${!this.error}"
            ariaLive="assertive"
          ></kuc-base-error-1-18-0>
        </div>
      `}updated(){this._inputEls.forEach(a=>{a.checked=this.value.indexOf(a.value)>-1})}_getValueMapping(a){const u=a.items||[],s=a.value||[],T=a.selectedIndex||[],k=u.map(J=>J.value||""),$=Object.assign({},k),X={};if(s.length===0){const J=this._getValidValue($,T);return T.forEach((Zt,St)=>X[Zt]=J[St]),X}return this._getValidSelectedIndex($).forEach((J,Zt)=>X[J]=s[Zt]),X}_getValidValue(a,u){return u.filter(s=>a[s]).map(s=>a[s])}_getValidSelectedIndex(a){const u=[];for(let s=0;s<this.value.length;s++){const T=this.selectedIndex[s];if(a[T]===this.value[s]){u.push(T);continue}const k=this.items.findIndex($=>$.value===this.value[s]);u.push(k)}return u}_setValueAndSelectedIndex(){this.value=Object.values(this._valueMapping),this.selectedIndex=Object.keys(this._valueMapping).map(a=>parseInt(a,10))}}fn([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),fn([F({type:String})],b.prototype,"error",void 0),fn([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),fn([F({type:String})],b.prototype,"itemLayout",void 0),fn([F({type:String})],b.prototype,"label",void 0),fn([F({type:Boolean})],b.prototype,"borderVisible",void 0),fn([F({type:Boolean})],b.prototype,"disabled",void 0),fn([F({type:Boolean})],b.prototype,"requiredIcon",void 0),fn([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),fn([F({type:Array})],b.prototype,"items",void 0),fn([F({type:Array})],b.prototype,"selectedIndex",void 0),fn([F({type:Array})],b.prototype,"value",void 0),fn([rn(".kuc-checkbox-1-18-0__group__select-menu__item__input")],b.prototype,"_inputEls",void 0),fn([se()],b.prototype,"_valueMapping",void 0),window.customElements.define("kuc-checkbox-1-18-0",b),ue(`
  kuc-checkbox-1-18-0,
  kuc-checkbox-1-18-0 *,
  kuc-checkbox-1-18-0:lang(en),
  kuc-checkbox-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-checkbox-1-18-0:lang(es),
  kuc-checkbox-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-checkbox-1-18-0:lang(ja),
  kuc-checkbox-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-checkbox-1-18-0:lang(zh),
  kuc-checkbox-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-checkbox-1-18-0:lang(zh-TW),
  kuc-checkbox-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  kuc-checkbox-1-18-0 {
    font-size: 14px;
    color: #333333;
    display: inline-table;
    vertical-align: top;
    width: var(--kuc-checkbox-menu-width, 239px);
    min-width: var(--kuc-checkbox-menu-width, 239px);
    line-height: 1.5;
  }
  kuc-checkbox-1-18-0[hidden] {
    display: none;
  }
  .kuc-checkbox-1-18-0__group {
    border: none;
    padding: 0px;
    height: auto;
    display: inline-block;
    width: 100%;
    margin: 0px;
  }
  .kuc-checkbox-1-18-0__group__select-menu {
    white-space: nowrap;
    width: var(--kuc-checkbox-menu-width, auto);
    height: var(--kuc-checkbox-menu-height, auto);
    color: var(--kuc-checkbox-menu-color, #333333);
    font-size: var(--kuc-checkbox-menu-font-size, 14px);
    display: flex;
    align-items: flex-start;
  }
  .kuc-checkbox-1-18-0__group__select-menu[itemLayout="vertical"] {
    display: block;
  }
  .kuc-checkbox-1-18-0__group__label {
    display: inline-block;
    padding: 4px 0 8px 0;
    white-space: nowrap;
  }
  .kuc-checkbox-1-18-0__group__label[hidden] {
    display: none;
  }
  .kuc-checkbox-1-18-0__group__select-menu[borderVisible] {
    border-color: #e3e7e8;
    border-width: 1px;
    border-style: solid;
    padding: 4px 0 0 4px;
  }
  .kuc-checkbox-1-18-0__group__select-menu__item {
    margin-bottom: 4px;
    margin-right: 16px;
    padding: 4px;
    border: 1px solid transparent;
    position: relative;
    white-space: normal;
    word-wrap: normal;
    display: flex;
    align-items: center;
  }
  .kuc-checkbox-1-18-0__group__select-menu__item[focused] {
    border: 1px solid #3498db;
  }
  .kuc-checkbox-1-18-0__group__select-menu__item__input {
    position: absolute;
    opacity: 0;
    cursor: pointer;
  }
  .kuc-checkbox-1-18-0__group__select-menu__item__input:hover
    + .kuc-checkbox-1-18-0__group__select-menu__item__label {
    color: var(--kuc-checkbox-menu-color-hover, #666666);
  }
  .kuc-checkbox-1-18-0__group__select-menu__item__label__icon {
    position: absolute;
    left: -30px;
    box-sizing: border-box;
    width: 21px;
    height: 21px;
    box-shadow: 1px 1px 3px #f5f5f5 inset, -1px -1px 3px #f5f5f5 inset;
    content: "";
  }
  .kuc-checkbox-1-18-0__group__select-menu__item__input[disabled]
    + .kuc-checkbox-1-18-0__group__select-menu__item__label {
    color: #888888;
    cursor: not-allowed;
  }
  .kuc-checkbox-1-18-0__group__select-menu__item__label {
    cursor: pointer;
    position: relative;
    margin-left: 32px;
    display: flex;
    align-items: center;
    vertical-align: middle;
    white-space: nowrap;
    min-height: 24px;
    line-height: 1.2;
  }
  `),zh=b}})();var hi=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Lh;(()=>{if(Lh=window.customElements.get("kuc-combobox-1-18-0"),!Lh){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.value="",this.disabled=!1,this.requiredIcon=!1,this.visible=!0,this.items=[],this._selectorVisible=!1,this._searchText="",this._DISABLED_CLASS="kuc-combobox-1-18-0__group__select-menu__item--disabled",this._query="",this._matchingItems=[],this._GUID=ti();const u=ze(a);this._handleClickDocument=this._handleClickDocument.bind(this),Object.assign(this,u)}shouldUpdate(a){if(a.has("items")){if(!Xe(this.items))return this.throwErrorAfterUpdateComplete(bo),!1;if(!Bm(this.items.map(u=>u.value)))return this.throwErrorAfterUpdateComplete(mm),!1}return!(a.has("value")&&!as(this.value)&&(this.throwErrorAfterUpdateComplete(os),1))}willUpdate(a){a.has("value")&&(this._searchText=this._getSelectedLabel()||"")}render(){return bt`
        <div class="kuc-combobox-1-18-0__group">
          <div
            class="kuc-combobox-1-18-0__group__label"
            id="${this._GUID}-label"
            ?hidden="${!this.label}"
          >
            <kuc-base-label-1-18-0
              .text="${this.label}"
              .requiredIcon="${this.requiredIcon}"
            ></kuc-base-label-1-18-0>
          </div>
          <div class="kuc-combobox-1-18-0__group__toggle">
            <input
              class="kuc-combobox-1-18-0__group__toggle__input"
              role="combobox"
              type="text"
              .value="${this._searchText}"
              aria-haspopup="listbox"
              aria-autocomplete="list"
              aria-labelledby="${this._GUID}-label"
              aria-controls="${this._GUID}-listbox"
              aria-describedby="${this._GUID}-error"
              aria-expanded="${this._selectorVisible}"
              aria-required="${this.requiredIcon}"
              ?disabled="${this.disabled}"
              @change="${this._handleChangeComboboxInput}"
              @input="${this._handleInputComboboxInput}"
              @keydown="${this._handleKeyDownComboboxInput}"
              @click="${this._handleClickComboboxInput}"
              @blur="${this._handleBlurComboboxInput}"
            />
            <div class="kuc-combobox-1-18-0__group__toggle__icon">
              <button
                class="kuc-combobox-1-18-0__group__toggle__icon__button"
                tabindex="-1"
                type="button"
                aria-labelledby="${this._GUID}-label"
                aria-controls="${this._GUID}-listbox"
                aria-expanded="${this._selectorVisible}"
                ?disabled="${this.disabled}"
                @click="${this._handleClickToggleButton}"
              >
                ${this._getToggleIconSvgTemplate()}
              </button>
            </div>
          </div>
          <ul
            class="kuc-combobox-1-18-0__group__select-menu"
            role="listbox"
            id="${this._GUID}-listbox"
            aria-labelledby="${this._GUID}-label"
            aria-hidden="${!this._selectorVisible}"
            ?hidden="${!this._selectorVisible}"
            @mouseleave="${this._handleMouseLeaveMenu}"
            @mousedown="${this._handleMouseDownMenu}"
          >
            ${this._matchingItems.map((a,u)=>this._getItemTemplate(a,u))}
          </ul>
          <kuc-base-error-1-18-0
            .text="${this.error}"
            .guid="${this._GUID}"
            ?hidden="${!this.error}"
            ariaLive="assertive"
          ></kuc-base-error-1-18-0>
        </div>
      `}firstUpdated(){window.addEventListener("resize",()=>{this._actionResizeScrollWindow()}),window.addEventListener("scroll",()=>{this._actionResizeScrollWindow()})}async updated(a){super.updated(a),await this.updateComplete,this._selectorVisible?(this._setMenuPosition(),this._scrollToView(),this._selectedItemEl===null||this._selectedItemEl.classList.contains(this._DISABLED_CLASS)?this._actionClearAllHighlightMenuItem():this._setHighlightAndActiveDescendantMenu(this._selectedItemEl),setTimeout(()=>{document.addEventListener("click",this._handleClickDocument,!0)},1)):setTimeout(()=>{document.removeEventListener("click",this._handleClickDocument,!0)},1)}_getToggleIconSvgTemplate(){return Ce`
      <svg
        width="36"
        height="36"
        viewBox="0 0 36 36"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M24.2122 15.6665L25 16.1392L19.7332 21.4998H18.2668L13 16.1392L13.7878 15.6665L18.765 20.6866H19.235L24.2122 15.6665Z"
          fill="#3498db"/>
      </svg>
    `}_getItemTemplate(a,u){const s=this._isCheckedItem(a),T=a.disabled,k=a.label===void 0?a.value:a.label;let $=s?bt`<b>${k}</b>`:bt`${k}`;const X=this._query.trim().toLowerCase();if(X&&k){const J=k.toLowerCase().indexOf(X),Zt=J+X.length;$=bt`
          ${k.slice(0,J)}<b>${k.slice(J,Zt)}</b>${k.slice(Zt)}
        `}return bt`
        <li
          class="kuc-combobox-1-18-0__group__select-menu__item ${T?this._DISABLED_CLASS:""}"
          role="option"
          aria-selected="${s?"true":"false"}"
          value="${a.value!==void 0?a.value:""}"
          id="${this._GUID}-menuitem-${u}"
          @mousedown="${T?null:this._handleMouseDownComboboxItem}"
          @mouseover="${T?null:this._handleMouseOverComboboxItem}"
        >
          ${this._getComboboxIconSvgTemplate(s,T)}
          ${$}
        </li>
      `}_getComboboxIconSvgTemplate(a,u){return Ce`
      ${a?Ce`<svg
          class="kuc-combobox-1-18-0__group__select-menu__item__icon"
          width="11"
          height="9"
          viewBox="0 0 11 9"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M0 5L1.5 3L4.5 5.5L9.5 0L11 1.5L4.5 8.5L0 5Z"
            fill="${u?"#888888":"#3498db"}"/>
        </svg>`:""}`}_handleMouseDownComboboxItem(a){const u=this._getItemElementWhenMouseOverDown(a.target).getAttribute("value");this._actionUpdateValue(u)}_handleMouseOverComboboxItem(a){const u=this._getItemElementWhenMouseOverDown(a.target);this._actionHighlightMenuItem(u)}_handleMouseLeaveMenu(){this._actionClearAllHighlightMenuItem()}_handleMouseDownMenu(a){a.preventDefault()}_handleClickToggleButton(a){a.preventDefault(),this._inputEl.focus(),this._inputEl.select(),this._resetToggleInputValue(),this._actionToggleMenu()}_handleInputComboboxInput(a){a.stopPropagation(),this._searchText=this._inputEl.value,this._query=this._inputEl.value,this._setMatchingItems()}_handleClickComboboxInput(a){a.stopPropagation(),this._inputEl.select(),this._setMatchingItems()}_handleChangeComboboxInput(a){a.stopPropagation()}_handleBlurComboboxInput(a){this._resetToggleInputValue()}_handleClickDocument(a){(a.target===this._toggleEl||this._toggleEl.contains(a.target))&&(this._inputEl.focus(),a.stopPropagation()),Array.from(this._disabledItemsEl).some(u=>u===a.target||u.contains(a.target))||this._actionHideMenu()}_handleKeyDownComboboxInput(a){switch(a.key){case"Up":case"ArrowUp":if(a.preventDefault(),!this._selectorVisible){this._actionShowMenu();break}this._actionHighlightPrevMenuItem();break;case"Tab":this._selectorVisible&&this._actionHideMenu();break;case"Down":case"ArrowDown":if(a.preventDefault(),!this._selectorVisible){this._actionShowMenu();break}this._actionHighlightNextMenuItem();break;case"Enter":{a.preventDefault();const u=this._highlightItemEl;if(u===null)break;const s=u.getAttribute("value");this._actionUpdateValue(s),this._actionHideMenu();break}case"Escape":a.preventDefault(),this._selectorVisible&&a.stopPropagation(),this._resetToggleInputValue(),this._actionHideMenu();break;case"Home":this._selectorVisible&&(a.preventDefault(),this._actionHighlightFirstMenuItem());break;case"End":this._selectorVisible&&(a.preventDefault(),this._actionHighlightLastMenuItem())}}_getSelectedLabel(){const a=this.items.filter((u,s)=>this._isCheckedItem(u));return a.length===0?"":a[0].label===void 0?a[0].value:a[0].label}_actionShowMenu(){this._query.trim()===""&&(this._matchingItems=this.items),this.items.length!==0&&this._matchingItems.length!==0&&(this._inputEl.focus(),this._selectorVisible=!0)}_actionHideMenu(){this._selectorVisible=!1,this._actionRemoveActiveDescendant()}_actionToggleMenu(){this._selectorVisible?this._actionHideMenu():this._actionShowMenu()}_actionHighlightFirstMenuItem(){let a=this._firstItemEl,u=!1;for(let s=0;s<this._matchingItems.length&&(u=a.classList.contains(this._DISABLED_CLASS),u);s++)a=a.nextElementSibling;!u&&this._setHighlightAndActiveDescendantMenu(a)}_actionHighlightLastMenuItem(){let a=this._lastItemEl,u=!1;for(let s=0;s<this._matchingItems.length&&(u=a.classList.contains(this._DISABLED_CLASS),u);s++)a=a.previousElementSibling;!u&&this._setHighlightAndActiveDescendantMenu(a)}_actionHighlightPrevMenuItem(){let a=null;this._highlightItemEl!==null&&(a=this._highlightItemEl.previousElementSibling),a===null&&(a=this._lastItemEl);let u=!1;for(let s=0;s<this._matchingItems.length&&(u=a.classList.contains(this._DISABLED_CLASS),u);s++)a=a.previousElementSibling,a===null&&(a=this._lastItemEl);!u&&this._setHighlightAndActiveDescendantMenu(a)}_actionHighlightNextMenuItem(){let a=null;this._highlightItemEl!==null&&(a=this._highlightItemEl.nextElementSibling),a===null&&(a=this._firstItemEl);let u=!1;for(let s=0;s<this._matchingItems.length&&(u=a.classList.contains(this._DISABLED_CLASS),u);s++)a=a.nextElementSibling,a===null&&(a=this._firstItemEl);!u&&this._setHighlightAndActiveDescendantMenu(a)}_actionClearAllHighlightMenuItem(){this._itemsEl.forEach(a=>{a.classList.remove("kuc-combobox-1-18-0__group__select-menu__highlight")}),this._actionRemoveActiveDescendant()}_setHighlightAndActiveDescendantMenu(a){this._actionHighlightMenuItem(a),this._actionSetActiveDescendant(a.id),this._scrollToView()}_actionHighlightMenuItem(a){this._actionClearAllHighlightMenuItem(),a.classList.add("kuc-combobox-1-18-0__group__select-menu__highlight")}_actionUpdateValue(a){if(this.value===a)return void this._resetToggleInputValue();const u={oldValue:this.value,value:a};this.value=a,this._query="",Ot(this,"change",u)}_actionSetActiveDescendant(a){a!==void 0&&this._inputEl!==null&&this._inputEl.setAttribute("aria-activedescendant",a)}_actionRemoveActiveDescendant(){this._inputEl.removeAttribute("aria-activedescendant")}_setMatchingItems(){const a=this.items.filter(u=>{const s=new RegExp(this._query.trim().replace(/[.*+?^=!:${}()|[\]/\\]/g,"\\$&"),"gi");return u.label?s.test(u.label):!!u.value&&s.test(u.value)});a.length===0?(this._matchingItems=[],this._actionHideMenu()):(this._matchingItems=a,this._actionShowMenu())}_getScrollbarWidthHeight(){const a=document.createElement("div");a.style.cssText="overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(a);const u=a.offsetWidth-a.clientWidth,s=a.offsetHeight-a.clientHeight;return document.body.removeChild(a),{scrollbarWidth:u,scrollbarHeight:s}}_getDistanceToggleButton(){const{scrollbarWidth:a,scrollbarHeight:u}=this._getScrollbarWidthHeight(),s=document.body.scrollHeight>window.innerHeight,T=document.body.scrollWidth>window.innerWidth;return{toTop:this._toggleEl.getBoundingClientRect().top,toBottom:window.innerHeight-this._toggleEl.getBoundingClientRect().bottom-(T?u:0),toLeft:this._toggleEl.getBoundingClientRect().left,toRight:window.innerWidth-this._toggleEl.getBoundingClientRect().left-(s?a:0)}}_setMenuPositionAboveOrBelow(){this._menuEl.style.height="auto",this._menuEl.style.bottom="auto",this._menuEl.style.overflowY="";const a=this._menuEl.getBoundingClientRect().height,u=this._getDistanceToggleButton();if(!(u.toBottom>=a))if(u.toBottom<u.toTop){const s=this._errorEl.offsetHeight?this._errorEl.offsetHeight+16:0;if(this._menuEl.style.bottom=`${this._toggleEl.offsetHeight+s}px`,u.toTop>=a)return;this._menuEl.style.height=`${u.toTop}px`,this._menuEl.style.overflowY="scroll"}else this._menuEl.style.height=`${u.toBottom}px`,this._menuEl.style.overflowY="scroll"}_setMenuPositionLeftOrRight(){this._menuEl.style.right="auto";const a=this._menuEl.getBoundingClientRect().width,u=this._getDistanceToggleButton();if(u.toRight>=a||u.toLeft<a||u.toRight<0)return;const s=this._toggleEl.offsetWidth-u.toRight;this._menuEl.style.right=s>0?`${s}px`:"0px"}_setMenuPosition(){this._setMenuPositionAboveOrBelow(),this._setMenuPositionLeftOrRight()}_scrollToView(){if(!this._highlightItemEl||!this._menuEl)return;const a=this._menuEl.getBoundingClientRect(),u=this._highlightItemEl.getBoundingClientRect();u.top<a.top&&(this._menuEl.scrollTop-=a.top-u.top),a.bottom<u.bottom&&(this._menuEl.scrollTop+=u.bottom-a.bottom)}_actionResizeScrollWindow(){!this._timeoutID&&this._selectorVisible&&(this._timeoutID=window.setTimeout(()=>{this._timeoutID=null,this._setMenuPosition()},50))}_isCheckedItem(a){return a.value===this.value}_resetToggleInputValue(){const a=this._getSelectedLabel();this._searchText!==a&&(this._searchText=a||""),this._query=""}_getItemElementWhenMouseOverDown(a){return a.classList.value.split(" ").includes("kuc-combobox-1-18-0__group__select-menu__item")?a:this._getItemElementWhenMouseOverDown(a.parentElement)}}hi([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),hi([F({type:String})],b.prototype,"error",void 0),hi([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),hi([F({type:String})],b.prototype,"label",void 0),hi([F({type:String})],b.prototype,"value",void 0),hi([F({type:Boolean})],b.prototype,"disabled",void 0),hi([F({type:Boolean})],b.prototype,"requiredIcon",void 0),hi([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),hi([F({type:Array})],b.prototype,"items",void 0),hi([se()],b.prototype,"_selectorVisible",void 0),hi([qt(".kuc-combobox-1-18-0__group__toggle")],b.prototype,"_toggleEl",void 0),hi([qt(".kuc-combobox-1-18-0__group__toggle__input")],b.prototype,"_inputEl",void 0),hi([qt(".kuc-combobox-1-18-0__group__select-menu")],b.prototype,"_menuEl",void 0),hi([rn(".kuc-combobox-1-18-0__group__select-menu__item")],b.prototype,"_itemsEl",void 0),hi([qt(".kuc-combobox-1-18-0__group__select-menu__item")],b.prototype,"_firstItemEl",void 0),hi([qt(".kuc-combobox-1-18-0__group__select-menu__item:last-child")],b.prototype,"_lastItemEl",void 0),hi([qt(".kuc-combobox-1-18-0__group__select-menu__item[aria-selected=true]")],b.prototype,"_selectedItemEl",void 0),hi([qt(".kuc-combobox-1-18-0__group__select-menu__highlight")],b.prototype,"_highlightItemEl",void 0),hi([qt(".kuc-base-error-1-18-0__error")],b.prototype,"_errorEl",void 0),hi([rn(".kuc-combobox-1-18-0__group__select-menu__item--disabled")],b.prototype,"_disabledItemsEl",void 0),hi([se()],b.prototype,"_searchText",void 0),window.customElements.define("kuc-combobox-1-18-0",b),ue(`
  kuc-combobox-1-18-0,
  kuc-combobox-1-18-0 *,
  kuc-combobox-1-18-0:lang(en),
  kuc-combobox-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-combobox-1-18-0:lang(es),
  kuc-combobox-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-combobox-1-18-0:lang(ja),
  kuc-combobox-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-combobox-1-18-0:lang(zh),
  kuc-combobox-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-combobox-1-18-0:lang(zh-TW),
  kuc-combobox-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體", "Microsoft JhengHei", "新宋体", NSimSun, STHeiti, Hei, "Heiti SC", sans-serif;
  }
  kuc-combobox-1-18-0 {
    position: relative;
    display: inline-table;
    font-size: 14px;
    color: #333333;
    width: var(--kuc-combobox-toggle-width, 180px);
    vertical-align: top;
    line-height: 1.5;
  }
  kuc-combobox-1-18-0[hidden] {
    display: none;
  }
  .kuc-combobox-1-18-0__group {
    border: none;
    padding: 0px;
    height: auto;
    display: inline-block;
    width: 100%;
    margin: 0px;
    position: relative;
  }
  .kuc-combobox-1-18-0__group__label {
    padding: 4px 0px 8px 0px;
    display: inline-block;
    white-space: nowrap;
  }
  .kuc-combobox-1-18-0__group__label[hidden] {
    display: none;
  }
  .kuc-combobox-1-18-0__group__toggle {
    position: relative;
    display: flex;
    width: var(--kuc-combobox-toggle-width);
  }
  input[type=text].kuc-combobox-1-18-0__group__toggle__input {
    width: 100%;
    height: var(--kuc-combobox-toggle-height, 40px);
    box-sizing: border-box;
    box-shadow: 2px 2px 4px #f5f5f5 inset, -2px -2px 4px #f5f5f5 inset;
    border: 1px solid #e3e7e8;
    background-color: #ffffff;
    color: var(--kuc-combobox-toggle-color, #000000);
    font-size: var(--kuc-combobox-font-size, 14px);
    line-height: 1.5;
    padding: 0 40px 0 8px;
    margin: 0;
  }
  input[type=text].kuc-combobox-1-18-0__group__toggle__input:focus {
    outline: none;
    border: 1px solid #3498db;
    background-color: #e2f2fe;
    box-shadow: none;
  }
  input[type=text].kuc-combobox-1-18-0__group__toggle__input:disabled,
  .kuc-combobox-1-18-0__group__toggle__icon__button:disabled {
    background-color: #d4d7d7;
    box-shadow: none;
    cursor: not-allowed;
    color: #888888;
  }
  .kuc-combobox-1-18-0__group__toggle__icon {
    position: absolute;
    right: 0px;
    top: 2px;
    border-left: 1px solid #e3e7e8;
  }
  .kuc-combobox-1-18-0__group__toggle__icon__button {
    width: 40px;
    height: calc(var(--kuc-combobox-toggle-height, 40px) - 4px);
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0;
    padding: 0;
    border-style: none;
    background-color: transparent;
    cursor: pointer;
  }
  .kuc-combobox-1-18-0__group__select-menu {
    min-width: 280px;
    color: var(--kuc-combobox-menu-color);
    padding: 8px 0;
    border: 1px solid #e3e7e8;
    box-sizing: border-box;
    background-color: #ffffff;
    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
    position: absolute;
    z-index: 2000;
    margin: 0;
    list-style: none;
  }
  .kuc-combobox-1-18-0__group__select-menu[hidden] {
    display: none;
  }
  .kuc-combobox-1-18-0__group__select-menu__item {
    font-size: var(--kuc-combobox-font-size, 14px);
    padding: 8px 16px 8px 24px;
    line-height: 1;
    position: relative;
    cursor: pointer;
    white-space: nowrap;
  }
  .kuc-combobox-1-18-0__group__select-menu__item:lang(en) b,
  .kuc-combobox-1-18-0__group__select-menu__item:lang(ja) b,
  .kuc-combobox-1-18-0__group__select-menu__item:lang(zh) b,
  .kuc-combobox-1-18-0__group__select-menu__item:lang(zh-TW) b{
    font-weight: 700;
  }
  .kuc-combobox-1-18-0__group__select-menu__item__icon {
    position: absolute;
    top: 50%;
    left: 6px;
    margin-top: -5px;
  }
  .kuc-combobox-1-18-0__group__select-menu__item[aria-selected="true"] {
    color: var(--kuc-combobox-menu-color-selected, #3498db);
  }
  .kuc-combobox-1-18-0__group__select-menu__item--disabled,
  .kuc-combobox-1-18-0__group__select-menu__item--disabled[aria-selected="true"] {
    background-color: #d4d7d7;
    cursor: not-allowed;
    color: #888888;
  }
  .kuc-combobox-1-18-0__group__select-menu__highlight[role="option"] {
    background-color: #e2f2fe;
  }
`),Lh=b}})();var Dc=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class pl extends ce{constructor(){super(),this.year=new Date().getFullYear(),this.postfix="",this._listBoxVisible=!1,this._handleScrollDocument=this._handleScrollDocument.bind(this)}connectedCallback(){super.connectedCallback(),setTimeout(()=>{document.addEventListener("scroll",this._handleScrollDocument)},1)}disconnectedCallback(){document.removeEventListener("scroll",this._handleScrollDocument),super.disconnectedCallback()}update(p){this._listBoxItems=this._getYearOptions().map(a=>({value:`${a}`,label:`${a}${this.postfix}`})),super.update(p)}render(){return bt`
      <button
        class="kuc-base-datetime-header-year-1-18-0__toggle"
        aria-haspopup="listbox"
        aria-expanded="${this._listBoxVisible}"
        tabindex="${this._listBoxVisible?"-1":"0"}"
        @mouseup="${this._handleMouseUpDropdownToggle}"
        @mousedown="${this._handleMouseDownDropdownToggle}"
        @click="${this._handleClickDropdownYearToggle}"
        @keydown="${this._handleKeyDownYearToggle}"
      >
        <span class="kuc-base-datetime-header-year-1-18-0__toggle__label"
          >${this.year}${this.postfix}</span
        >
        <span class="kuc-base-datetime-header-year-1-18-0__toggle__icon"
          >${Mm()}
        </span>
      </button>
      ${this._getListBoxTemplate()}
    `}async updated(p){await this.updateComplete,p.has("_listBoxVisible")&&this._listBoxVisible&&this._handleScrollDocument(),super.update(p)}closeListBox(){this._listBoxVisible=!1,this._toggleEl.focus()}_handleScrollDocument(){const p=dl(this);p.inputToBottom>=p.inputToTop?Cc(this,"bottom"):Cc(this,"top")}_getListBoxTemplate(){return this._listBoxVisible?bt`
          <kuc-base-datetime-listbox-1-18-0
            .items="${this._listBoxItems||[]}"
            .value="${this.year.toString()}"
            class="kuc-base-datetime-header-year-1-18-0__listbox"
            @kuc:listbox-click="${this._handleChangeListBox}"
            @kuc:listbox-blur="${this._handleFocusOutListBox}"
            @kuc:listbox-escape="${this._handleListBoxEscape}"
            aria-hidden="${!this._listBoxVisible}"
          >
          </kuc-base-datetime-listbox-1-18-0>
        `:""}_handleFocusOutListBox(){this._listBoxVisible=!1,this._toggleEl.focus()}_handleListBoxEscape(){this._handleFocusOutListBox()}_handleMouseUpDropdownToggle(p){p.preventDefault()}_handleMouseDownDropdownToggle(p){p.preventDefault()}_handleClickDropdownYearToggle(p){p.stopPropagation(),p.preventDefault(),this._listBoxVisible?this.closeListBox():this._openListBox(),Ot(this,"kuc:year-dropdown-click",{value:this._listBoxVisible.toString(),oldValue:(!this._listBoxVisible).toString()})}_handleKeyDownYearToggle(p){p.key!=="Tab"&&(p.preventDefault(),this._openListBoxByKey(p.key))}_openListBoxByKey(p){[" ","Up","ArrowUp","Down","ArrowDown","Enter"].indexOf(p)>-1&&this._openListBox()}_handleChangeListBox(p){if(p.preventDefault(),p.stopPropagation(),this.closeListBox(),!p.detail.value)return;this.year=Number(p.detail.value);const a={value:`${this.year}`};Ot(this,"kuc:year-dropdown-change",a)}_openListBox(){this._listBoxVisible=!0}_getYearOptions(){const p=[];Number.isInteger(this.year)||(this.year=new Date().getFullYear());let a=this.year<100?0:this.year-100;const u=this.year>=9899?9999:this.year+100;for(;a<=u;a++)p.push(a);return p}}Dc([F({type:Number})],pl.prototype,"year",void 0),Dc([F({type:String})],pl.prototype,"postfix",void 0),Dc([se()],pl.prototype,"_listBoxVisible",void 0),Dc([qt(".kuc-base-datetime-header-year-1-18-0__toggle")],pl.prototype,"_toggleEl",void 0),window.customElements.get("kuc-base-datetime-header-year-1-18-0")||(ue(`
.kuc-base-datetime-header-year-1-18-0__toggle {
  position: relative;
  box-sizing: border-box;
  height: 32px;
  padding: 0 24px 0 8px;
  line-height: 30px;
  overflow: hidden;
  background-color: white;
  border: 1px solid transparent;
  cursor: pointer;
}
.kuc-base-datetime-header-year-1-18-0__toggle__icon {
  position: absolute;
  flex: none;
  width: 24px;
  height: 32px;
}
.kuc-base-datetime-header-year-1-18-0__toggle__label {
  font-size: 13px;
  color: #333333;
}
.kuc-base-datetime-header-year-1-18-0__toggle:focus {
  border: 1px solid #3498db;
  outline: none;
}
`),window.customElements.define("kuc-base-datetime-header-year-1-18-0",pl));var Pc=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class ml extends ce{constructor(){super(),this.language="auto",this.month=1,this._listBoxVisible=!1,this._locale=mi("en"),this._monthLabel="",this._maxHeight=1e3,this._handleScrollDocument=this._handleScrollDocument.bind(this)}connectedCallback(){super.connectedCallback(),setTimeout(()=>{document.addEventListener("scroll",this._handleScrollDocument)},1)}disconnectedCallback(){document.removeEventListener("scroll",this._handleScrollDocument),super.disconnectedCallback()}update(p){p.has("language")&&(this._locale=mi(this.language),this._listBoxItems=this._getListBoxItems()),p.has("month")&&(this._monthLabel=this._getMonthLabel()),super.update(p)}render(){return bt`
      <button
        class="kuc-base-datetime-header-month-1-18-0__toggle"
        aria-haspopup="listbox"
        aria-expanded="${this._listBoxVisible}"
        tabindex="${this._listBoxVisible?"-1":"0"}"
        @mouseup="${this._handleMouseUpDropdownToggle}"
        @mousedown="${this._handleMouseDownDropdownToggle}"
        @click="${this._handleClickDropdownMonthToggle}"
        @keydown="${this._handleKeyDownMonthToggle}"
      >
        <span class="kuc-base-datetime-header-month-1-18-0__toggle__label"
          >${this._monthLabel}</span
        >
        <span class="kuc-base-datetime-header-month-1-18-0__toggle__icon"
          >${Mm()}
        </span>
      </button>
      ${this._getListBoxTemplate()}
    `}async updated(p){await this.updateComplete,p.has("_listBoxVisible")&&this._listBoxVisible&&this._handleScrollDocument(),super.update(p)}_handleScrollDocument(){const p=dl(this);p.inputToBottom>=p.inputToTop?Cc(this,"bottom"):Cc(this,"top")}closeListBox(){this._listBoxVisible=!1,this._toggleEl.focus()}_getListBoxTemplate(){return this._listBoxVisible?bt`
          <kuc-base-datetime-listbox-1-18-0
            .items="${this._listBoxItems||[]}"
            .value="${this.month.toString()}"
            .maxHeight="${this._maxHeight}"
            class="kuc-base-datetime-header-month-1-18-0__listbox"
            @kuc:listbox-click="${this._handleChangeListBox}"
            @kuc:listbox-blur="${this._handleFocusOutListBox}"
            @kuc:listbox-escape="${this._handleListBoxEscape}"
            aria-hidden="${!this._listBoxVisible}"
          >
          </kuc-base-datetime-listbox-1-18-0>
        `:""}_handleFocusOutListBox(){this._listBoxVisible=!1,this._toggleEl.focus()}_handleListBoxEscape(){this._handleFocusOutListBox()}_handleClickDropdownMonthToggle(p){p.stopPropagation(),p.preventDefault(),this._listBoxVisible?this.closeListBox():this._openListBox(),Ot(this,"kuc:month-dropdown-click",{value:this._listBoxVisible.toString(),oldValue:(!this._listBoxVisible).toString()})}_handleMouseUpDropdownToggle(p){p.preventDefault()}_handleMouseDownDropdownToggle(p){p.preventDefault()}_handleKeyDownMonthToggle(p){this._handleTabKey(p.key)||(p.preventDefault(),this._openListBoxByKey(p.key))}_openListBoxByKey(p){[" ","Up","ArrowUp","Down","ArrowDown","Enter"].indexOf(p)>-1&&this._openListBox()}_handleTabKey(p){return p==="Tab"}_handleChangeListBox(p){if(p.preventDefault(),p.stopPropagation(),this.closeListBox(),!p.detail.value)return;this.month=Number(p.detail.value);const a={value:`${this.month}`};Ot(this,"kuc:month-dropdown-change",a)}_openListBox(){this._listBoxVisible=!0}_getListBoxItems(){return this._locale.MONTH_SELECT.map((p,a)=>({value:`${a+1}`,label:`${p}`}))}_getMonthLabel(){const p=this._locale.MONTH_SELECT.filter((a,u)=>this.month===u+1);return p.length>0?p[0]:"JANUARY"}}Pc([F({type:String,attribute:"lang",reflect:!0})],ml.prototype,"language",void 0),Pc([F({type:Number})],ml.prototype,"month",void 0),Pc([se()],ml.prototype,"_listBoxVisible",void 0),Pc([qt(".kuc-base-datetime-header-month-1-18-0__toggle")],ml.prototype,"_toggleEl",void 0),window.customElements.get("kuc-base-datetime-header-month-1-18-0")||(ue(`
.kuc-base-datetime-header-month-1-18-0__toggle {
  position: relative;
  box-sizing: border-box;
  height: 32px;
  padding: 0 24px 0 8px;
  line-height: 30px;
  overflow: hidden;
  background-color: white;
  border: 1px solid transparent;
  cursor: pointer;
}
.kuc-base-datetime-header-month-1-18-0__toggle__icon {
  position: absolute;
  flex: none;
  width: 24px;
  height: 32px;
}
.kuc-base-datetime-header-month-1-18-0__toggle__label {
  font-size: 13px;
  color: #333333;
}
.kuc-base-datetime-header-month-1-18-0__toggle:focus {
  border: 1px solid #3498db;
  outline: none;
}
`),window.customElements.define("kuc-base-datetime-header-month-1-18-0",ml));var ba=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class Mr extends ce{constructor(){super(...arguments),this.language="en",this.month=1,this.year=new Date().getFullYear(),this._locale=mi("en")}update(p){p.has("language")&&(this._locale=mi(this.language)),super.update(p)}render(){return bt`
      <div class="kuc-base-datetime-calendar-header-1-18-0__group">
        <button
          aria-label="previous month"
          type="button"
          class="kuc-base-datetime-calendar-header-1-18-0__group__button kuc-base-datetime-calendar-header-1-18-0__group__button--previous-month"
          @click="${this._handleClickCalendarPrevMonthBtn}"
          @keydown="${this._handleKeyDownCalendarPrevMonthBtn}"
        >
          ${Ce`
    <svg
      class="kuc-base-datetime-calendar-header-1-18-0__group__button-icon"
      width="9"
      height="14"
      viewBox="0 0 9 14"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M3.06077 7L8.53044 1.53033L7.46978 0.469666L0.939453 7L7.46978 13.5303L8.53044 12.4697L3.06077 7Z"
        fill="#888888"
      />
    </svg>`}
        </button>
        <div class="kuc-base-datetime-calendar-header-1-18-0__group__center">
          ${this._getYearMonthTemplate()}
        </div>
        <button
          aria-label="next month"
          type="button"
          class="kuc-base-datetime-calendar-header-1-18-0__group__button kuc-base-datetime-calendar-header-1-18-0__group__button--next-month"
          @click="${this._handleClickCalendarNextMonthBtn}"
        >
          ${Ce`
    <svg
      class="kuc-base-datetime-calendar-header-1-18-0__group__button-icon"
      width="9"
      height="14"
      viewBox="0 0 9 14"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M5.93923 7L0.469557 1.53033L1.53022 0.469666L8.06055 7L1.53022 13.5303L0.469557 12.4697L5.93923 7Z"
        fill="#888888"
      />
    </svg>`}
        </button>
      </div>
    `}_getYearTemplate(){return bt`
      <kuc-base-datetime-header-year-1-18-0
        class="kuc-base-datetime-calendar-header-1-18-0__year"
        .postfix="${this._locale.YEAR_SELECT_POSTFIX}"
        .year="${this.year}"
        @kuc:year-dropdown-change="${this._handleYearDropdownChange}"
        @kuc:year-dropdown-click="${this._handleYearDropdownClick}"
      >
      </kuc-base-datetime-header-year-1-18-0>
    `}_getMonthTemplate(){return bt`
      <kuc-base-datetime-header-month-1-18-0
        class="kuc-base-datetime-calendar-header-1-18-0__month"
        .month="${this.month}"
        .language="${this.language}"
        @kuc:month-dropdown-change="${this._handleMonthDropdownChange}"
        @kuc:month-dropdown-click="${this._handleMonthDropdownClick}"
      >
      </kuc-base-datetime-header-month-1-18-0>
    `}_getYearMonthTemplate(){return this.language==="zh"||this.language==="ja"||this.language==="zh-TW"?bt` ${this._getYearTemplate()}${this._getMonthTemplate()} `:bt` ${this._getMonthTemplate()}${this._getYearTemplate()} `}_handleMonthDropdownChange(p){p.stopPropagation(),p.preventDefault(),this.month=parseInt(p.detail.value,10),this._dispatchCalendarHeaderChangeEvent()}_handleYearDropdownChange(p){p.stopPropagation(),p.preventDefault(),this.year=parseInt(p.detail.value,10),this._dispatchCalendarHeaderChangeEvent()}_handleYearDropdownClick(){this._listBoxMonthEl&&this._baseDateTimeHeaderMonthEl.closeListBox()}_handleMonthDropdownClick(){this._listBoxYearEl&&this._baseDateTimeHeaderYearEl.closeListBox()}_handleClickCalendarPrevMonthBtn(p){p.stopPropagation(),this.month===1?(this.month=12,this.year--):this.month-=1,this._dispatchCalendarHeaderChangeEvent()}_handleKeyDownCalendarPrevMonthBtn(p){p.shiftKey&&p.key==="Tab"&&(p.preventDefault(),Ot(this,"kuc:calendar-header-previous-shifttab"))}_handleClickCalendarNextMonthBtn(p){p.stopPropagation(),this.month===12?(this.month=1,this.year++):this.month+=1,this._dispatchCalendarHeaderChangeEvent()}_dispatchCalendarHeaderChangeEvent(){const p=this.year,a=this.month;Ot(this,"kuc:calendar-header-change",{value:`${p}-${a}`})}}ba([F({type:String,attribute:"lang",reflect:!0})],Mr.prototype,"language",void 0),ba([F({type:Number,hasChanged(b){return(p=b)>0&&p<13;var p}})],Mr.prototype,"month",void 0),ba([F({type:Number,hasChanged(b){return(p=b)>=0&&p<1e4;var p}})],Mr.prototype,"year",void 0),ba([qt(".kuc-base-datetime-calendar-header-1-18-0__month")],Mr.prototype,"_baseDateTimeHeaderMonthEl",void 0),ba([qt(".kuc-base-datetime-calendar-header-1-18-0__year")],Mr.prototype,"_baseDateTimeHeaderYearEl",void 0),ba([qt(".kuc-base-datetime-header-month-1-18-0__listbox")],Mr.prototype,"_listBoxMonthEl",void 0),ba([qt(".kuc-base-datetime-header-year-1-18-0__listbox")],Mr.prototype,"_listBoxYearEl",void 0),window.customElements.get("kuc-base-datetime-calendar-header-1-18-0")||(ue(`
kuc-base-datetime-calendar-header-1-18-0,
kuc-base-datetime-calendar-header-1-18-0 *,
kuc-base-datetime-calendar-header-1-18-0:lang(en),
kuc-base-datetime-calendar-header-1-18-0:lang(en) * {
  font-family: sans-serif;
}
kuc-base-datetime-calendar-header-1-18-0:lang(ja),
kuc-base-datetime-calendar-header-1-18-0:lang(ja) * {
  font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
    sans-serif;
  font-weight: 700;
}
kuc-base-datetime-calendar-header-1-18-0:lang(zh),
kuc-base-datetime-calendar-header-1-18-0:lang(zh) * {
  font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", sans-serif;
}
kuc-base-datetime-calendar-header-1-18-0:lang(zh-TW),
kuc-base-datetime-calendar-header-1-18-0:lang(zh-TW) * {
  font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
    Hei,"Heiti SC",sans-serif;
}
kuc-base-datetime-calendar-header-1-18-0:lang(es),
kuc-base-datetime-calendar-header-1-18-0:lang(es) * {
  font-family: sans-serif;
}
kuc-base-datetime-calendar-header-1-18-0:lang(ja) kuc-base-datetime-listbox-1-18-0 * {
  font-weight: 400;
}
.kuc-base-datetime-calendar-header-1-18-0__group {
  display: flex;
  align-items: center;
  box-sizing: border-box;
  border-bottom: 1px solid #e3e7e8;
  padding: 0;
  white-space: nowrap;
  width: 266px;
  height: 44px;
}
.kuc-base-datetime-calendar-header-1-18-0__group__button {
  background: transparent;
  border: none;
  cursor: pointer;
  outline: none;
  width: 38px;
  height: 32px;
  margin: 0;
  text-align: center;
}
.kuc-base-datetime-calendar-header-1-18-0__group__button:focus {
  border: 1px solid #3498db;
  outline: none;
}
.kuc-base-datetime-calendar-header-1-18-0__group__button-icon {
  vertical-align: middle;
}
.kuc-base-datetime-calendar-header-1-18-0__group__center {
  width: 190px;
  text-align: center;
  display: flex;
  justify-content: center;
}
.kuc-base-datetime-calendar-header-1-18-0__month {
  margin: 0 4px 0 4px;
}
`),window.customElements.define("kuc-base-datetime-calendar-header-1-18-0",Mr));var Wo=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class xo extends ce{constructor(){super(),this.month=1,this.year=2021,this.language="en",this.value="",this._month=1,this._year=2021,this._locale=mi("en"),this._handleClickDocument=this._handleClickDocument.bind(this),this._handleKeyDownDocument=this._handleKeyDownDocument.bind(this)}connectedCallback(){super.connectedCallback(),setTimeout(()=>{document.addEventListener("click",this._handleClickDocument),document.addEventListener("keydown",this._handleKeyDownDocument)},1)}disconnectedCallback(){document.removeEventListener("click",this._handleClickDocument),document.removeEventListener("keydown",this._handleKeyDownDocument),super.disconnectedCallback()}update(p){if(p.forEach((a,u)=>{u==="language"&&(this._locale=mi(this.language))}),p.has("month")&&(this._month=this.month),p.has("year")&&(this._year=this.year),p.has("value")){const{month:a,year:u}=this._separateDateValue();this._month=parseInt(a,10),this._year=parseInt(u,10)}super.update(p)}render(){return bt`
      <table class="kuc-base-datetime-calendar-body-1-18-0__table" role="grid">
        ${this._getHeaderItemsTemplate()}<!--
        -->${this._getDateItemsTemplate()}
      </table>
    `}updated(p){p.has("value")&&this._focusDateEl(),super.update(p)}_handleClickDocument(){Ot(this,"kuc:calendar-body-blur",{})}_handleKeyDownDocument(p){p.key==="Escape"&&(p.preventDefault(),p.stopPropagation(),Ot(this,"kuc:calendar-body-blur",{}))}_handleClickDate(p){p.preventDefault(),p.stopPropagation();const a=p.target;a.setAttribute("aria-selected","true");const u=a.getAttribute("data-date")||"";this._dispatchClickEvent(u)}_handleKeyDownDate(p){let a=!1;switch(p.key){case"Up":case"ArrowUp":a=!0,this._moveToDate(-7);break;case"Down":case"ArrowDown":a=!0,this._moveToDate(7);break;case"Left":case"ArrowLeft":a=!0,this._moveToDate(-1);break;case"Right":case"ArrowRight":a=!0,this._moveToDate(1);break;case" ":case"Enter":{a=!0;const u=this._getSelectedValue();this._dispatchClickEvent(u);break}}a&&(p.stopPropagation(),p.preventDefault())}_dispatchClickEvent(p){const a={oldValue:this.value,value:p};Ot(this,"kuc:calendar-body-click-date",a),this.value=p}_isToday(p){const a=new Date;return parseInt(p[0],10)===a.getFullYear()&&parseInt(p[1],10)===a.getMonth()+1&&parseInt(p[2],10)===a.getDate()}_moveToDate(p){let a=this.value;const u=this._getSelectedValue(),{day:s}=this._separateDateValue(u);a=`${this._year}-${Be(this._month)}-${s}`;const T=new Date(`${a||this._getValueItemFocused()}T00:00:00`);if(isNaN(T.getTime()))return;T.setDate(T.getDate()+p);const k=this._getDateString(T),$=a;this.value=k,Ot(this,"kuc:calendar-body-change-date",{oldValue:$,value:k})}_separateDateValue(p=this.value){const a=p.split("-");return{day:a[2],month:a[1],year:a[0]}}_getSelectedValue(){return this._highlightItem?this._highlightItem.dataset.date||"":this._selectedItem&&this._selectedItem.getAttribute("data-date")||""}_getValueItemFocused(){return this._focusedItem&&this._focusedItem.getAttribute("data-date")||""}_getDateClass(p,a){return a?this._isToday(p)?" kuc-base-datetime-calendar-body-1-18-0__table__date--selected--today":"":this._isToday(p)?" kuc-base-datetime-calendar-body-1-18-0__table__date--selected--today":" kuc-base-datetime-calendar-body-1-18-0__table__date--other-month"}_getDateString(p=new Date){return`${p.getFullYear()}-${Be(p.getMonth()+1)}-${Be(p.getDate())}`}_isSameDayOfMoment(p){const a=parseInt(p[1],10),u=parseInt(p[2],10),s=parseInt(p[0],10);let T=new Date().getDate();if(!this.value.split("-")[2])return!1;if(this.value&&(T=new Date(`${this.value}T00:00:00`).getDate()),T===u&&a===this._month)return!0;const k=new Date(s,this._month,0).getDate();return T>k&&k===u&&a===this._month}_getHeaderItemsTemplate(){return bt`
      <thead>
        <tr>
          ${this._locale.WEEK_DAYS.map(p=>bt`
              <th
                class="kuc-base-datetime-calendar-body-1-18-0__table__header"
                role="columnheader"
                abbr="${p.abbr}"
              >
                ${p.text}
              </th>
            `)}
        </tr>
      </thead>
    `}_getDateItemsTemplate(){const p=Sm(this._year,this._month-1),a=this._locale.MONTH_SELECT[this._month-1];return bt`
      <tbody>
        ${p.map(u=>bt`
            <tr>
              ${u.map(s=>{const T=s.text.split("-"),k=this._isSameDayOfMoment(T),$=parseInt(T[1],10)===this._month,X=(this.value===s.attr||k)&&$;return bt`
                  <td
                    role="gridcell"
                    class="kuc-base-datetime-calendar-body-1-18-0__table__date${X?"--selected":""}${this._getDateClass(T,$)}"
                    aria-selected="${this.value===s.attr}"
                    tabindex="${X?"0":"-1"}"
                    aria-current="${!!this._isToday(T)&&"date"}"
                    aria-label="${T[2]} ${a}"
                    data-date="${s.attr}"
                    @click="${this._handleClickDate}"
                    @keydown="${this._handleKeyDownDate}"
                  >
                    ${T[2]||""}
                  </td>
                `})}
            </tr>
          `)}
      </tbody>
    `}_focusDateEl(){this._focusedItem&&this._focusedItem.focus({preventScroll:!0})}}Wo([F({type:Number})],xo.prototype,"month",void 0),Wo([F({type:Number})],xo.prototype,"year",void 0),Wo([F({type:String,attribute:"lang",reflect:!0})],xo.prototype,"language",void 0),Wo([F({type:String,reflect:!0})],xo.prototype,"value",void 0),Wo([se()],xo.prototype,"_month",void 0),Wo([se()],xo.prototype,"_year",void 0),Wo([qt('.kuc-base-datetime-calendar-body-1-18-0__table__date--selected[aria-selected="true"]')],xo.prototype,"_selectedItem",void 0),Wo([qt(".kuc-base-datetime-calendar-body-1-18-0__table__date--selected")],xo.prototype,"_highlightItem",void 0),Wo([qt('.kuc-base-datetime-calendar-body-1-18-0__table__date--selected[tabindex="0"]')],xo.prototype,"_focusedItem",void 0),window.customElements.get("kuc-base-datetime-calendar-body-1-18-0")||(ue(`
kuc-base-datetime-calendar-body-1-18-0,
kuc-base-datetime-calendar-body-1-18-0 *,
kuc-base-datetime-calendar-body-1-18-0:lang(en),
kuc-base-datetime-calendar-body-1-18-0:lang(en) * {
  font-family: sans-serif;
}
kuc-base-datetime-calendar-body-1-18-0:lang(ja),
kuc-base-datetime-calendar-body-1-18-0:lang(ja) * {
  font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
    sans-serif;
}
kuc-base-datetime-calendar-body-1-18-0:lang(zh),
kuc-base-datetime-calendar-body-1-18-0:lang(zh) * {
  font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", sans-serif;
}
kuc-base-datetime-calendar-body-1-18-0:lang(zh-TW),
kuc-base-datetime-calendar-body-1-18-0:lang(zh-TW) * {
  font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
    Hei,"Heiti SC",sans-serif;
}
kuc-base-datetime-calendar-body-1-18-0:lang(es),
kuc-base-datetime-calendar-body-1-18-0:lang(es) * {
  font-family: sans-serif;
}
.kuc-base-datetime-calendar-body-1-18-0__table,
.kuc-base-datetime-calendar-body-1-18-0__table tr {
  border-collapse: separate;
  border-spacing: 0;
}
.kuc-base-datetime-calendar-body-1-18-0__table__date,
.kuc-base-datetime-calendar-body-1-18-0__table__date--selected {
  border-spacing: 1px;
  padding: 0px;
  border: 1px solid #ffffff;
}
.kuc-base-datetime-calendar-body-1-18-0__table__header {
  text-align: center;
  text-transform: uppercase;
  font-size: 10px;
  font-weight: 400;
  color: #333333;
}
:lang(ja) th.kuc-base-datetime-calendar-body-1-18-0__table__header {
  font-weight: 700;
}
:lang(es) th.kuc-base-datetime-calendar-body-1-18-0__table__header {
  text-transform: revert;
}
.kuc-base-datetime-calendar-body-1-18-0__table__date--selected,
.kuc-base-datetime-calendar-body-1-18-0__table__date,
.kuc-base-datetime-calendar-body-1-18-0__table__header {
  box-sizing: border-box;
  padding: 8px 0;
  width: 36px;
  height: 31px;
  border: 1px solid #ffffff;
  text-align: center;
  text-transform: uppercase;
  font-size: 10px;
  font-weight: 400;
  color: #333333;
  cursor: pointer;
}
.kuc-base-datetime-calendar-body-1-18-0__table__header:nth-child(1),
.kuc-base-datetime-calendar-body-1-18-0__table__header:nth-child(7) {
  color: #d4d7d7;
}
.kuc-base-datetime-calendar-body-1-18-0__table__date:focus,
.kuc-base-datetime-calendar-body-1-18-0__table__date--selected:focus {
  outline: none;
}
.kuc-base-datetime-calendar-body-1-18-0__table__date
  .kuc-base-datetime-calendar-body-1-18-0__table__date__button:hover {
  color: #000000;
}
.kuc-base-datetime-calendar-body-1-18-0__table__date--selected {
  border-color: #3498db;
}
.kuc-base-datetime-calendar-body-1-18-0__table__date--selected--today,
.kuc-base-datetime-calendar-body-1-18-0__table__date--today {
  color: #ffffff;
  background: #888888;
}
.kuc-base-datetime-calendar-body-1-18-0__table__date--today:hover {
  color: #333333;
}
.kuc-base-datetime-calendar-body-1-18-0__table__date--other-month,
.kuc-base-datetime-calendar-body-1-18-0__table__date--other-month:hover {
  color: #d4d7d7;
}
`),window.customElements.define("kuc-base-datetime-calendar-body-1-18-0",xo));var Rm=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class Bh extends ce{constructor(){super(...arguments),this.language="en",this._locale=mi("en")}update(p){p.has("language")&&(this._locale=mi(this.language)),super.update(p)}_handleClickCalendarFooterButtonNone(p){p.stopPropagation(),Ot(this,"kuc:calendar-footer-click-none")}_handleClickCalendarFooterButtonToday(p){p.stopPropagation(),Ot(this,"kuc:calendar-footer-click-today")}_handleKeyDownCalendarFooterButtonNone(p){p.key==="Tab"&&(p.shiftKey||(p.preventDefault(),Ot(this,"kuc:calendar-footer-tab-none")))}render(){return bt`
      <div class="kuc-base-datetime-calendar-footer-1-18-0__group">
        <button
          type="button"
          tabindex="0"
          class="kuc-base-datetime-calendar-footer-1-18-0__group__button kuc-base-datetime-calendar-footer-1-18-0__group__button--today"
          @click="${this._handleClickCalendarFooterButtonToday}"
        >
          ${this._locale.CALENDAR_FOOTER_TEXT.today}
        </button>
        <span class="kuc-base-datetime-calendar-footer-1-18-0__group__center"></span>
        <button
          type="button"
          tabindex="0"
          class="kuc-base-datetime-calendar-footer-1-18-0__group__button kuc-base-datetime-calendar-footer-1-18-0__group__button--none"
          @click="${this._handleClickCalendarFooterButtonNone}"
          @keydown="${this._handleKeyDownCalendarFooterButtonNone}"
        >
          ${this._locale.CALENDAR_FOOTER_TEXT.none}
        </button>
      </div>
    `}}Rm([F({type:String,attribute:"lang",reflect:!0})],Bh.prototype,"language",void 0),Rm([se()],Bh.prototype,"_locale",void 0),window.customElements.get("kuc-base-datetime-calendar-footer-1-18-0")||(ue(`
kuc-base-datetime-calendar-footer-1-18-0,
kuc-base-datetime-calendar-footer-1-18-0 *,
kuc-base-datetime-calendar-footer-1-18-0:lang(en),
kuc-base-datetime-calendar-footer-1-18-0:lang(en) * {
  font-family: sans-serif;
}
kuc-base-datetime-calendar-footer-1-18-0:lang(ja),
kuc-base-datetime-calendar-footer-1-18-0:lang(ja) * {
  font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
    sans-serif;
}
kuc-base-datetime-calendar-footer-1-18-0:lang(zh),
kuc-base-datetime-calendar-footer-1-18-0:lang(zh) * {
  font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", sans-serif;
}
kuc-base-datetime-calendar-footer-1-18-0:lang(zh-TW),
kuc-base-datetime-calendar-footer-1-18-0:lang(zh-TW) * {
  font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
    Hei,"Heiti SC",sans-serif;
}
kuc-base-datetime-calendar-footer-1-18-0:lang(es),
kuc-base-datetime-calendar-footer-1-18-0:lang(es) * {
  font-family: sans-serif;
}
.kuc-base-datetime-calendar-footer-1-18-0__group {
  display: flex;
  align-items: flex-end;
  box-sizing: border-box;
  padding: 0;
  height: 27px;
  white-space: nowrap;
  width: 272px;
}
.kuc-base-datetime-calendar-footer-1-18-0__group__button {
  background: transparent;
  border: 1px solid transparent;
  color: #3498db;
  cursor: pointer;
  font-size: 13px;
  outline: none;
}
.kuc-base-datetime-calendar-footer-1-18-0__group__button:hover {
  color: #217dbb;
}
.kuc-base-datetime-calendar-footer-1-18-0__group__button:focus {
  border: 1px solid #3498db;
  outline: none;
}
.kuc-base-datetime-calendar-footer-1-18-0__group__center {
  width: 100%;
}
`),window.customElements.define("kuc-base-datetime-calendar-footer-1-18-0",Bh));var Xo=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class wo extends ce{constructor(){super(...arguments),this.language="en",this.value="",this._month=1,this._year=new Date().getFullYear()}update(p){p.has("value")&&this._updateValue(),super.update(p)}render(){return bt`
      <div
        class="kuc-base-datetime-calendar-1-18-0__group"
        role="dialog"
        aria-modal="true"
        aria-label="Calender"
        @click="${this._handleClickCalendarGroup}"
        @keydown="${this._handleKeyDownCalendarGroup}"
      >
        <kuc-base-datetime-calendar-header-1-18-0
          .year="${this._year}"
          .month="${this._month}"
          .language="${this.language}"
          @kuc:calendar-header-change="${this._handleCalendarHeaderChange}"
        ></kuc-base-datetime-calendar-header-1-18-0>
        <kuc-base-datetime-calendar-body-1-18-0
          .year="${this._year}"
          .month="${this._month}"
          .value="${this.value}"
          .language="${this.language}"
          @kuc:calendar-body-change-date="${this._handleCalendarBodyChangeDate}"
        ></kuc-base-datetime-calendar-body-1-18-0>
        <kuc-base-datetime-calendar-footer-1-18-0
          .language="${this.language}"
        ></kuc-base-datetime-calendar-footer-1-18-0>
      </div>
    `}async updated(p){await this.updateComplete,this._calculateBodyCalendarPosition(),super.updated(p)}_handleKeyDownCalendarGroup(p){p.key==="Escape"&&(p.preventDefault(),p.stopPropagation(),Ot(this,"kuc:calendar-escape",{}))}_handleClickCalendarGroup(p){p.stopPropagation(),this._listBoxMonthEl&&this._monthEl.closeListBox(),this._listBoxYearEl&&this._yearEl.closeListBox()}_calculateBodyCalendarPosition(){const{inputToBottom:p,inputToTop:a,inputToRight:u,inputToLeft:s}=dl(this);p>=this._baseCalendarGroupEl.getBoundingClientRect().height||a<0||p>a?this._calculateCalendarPosition(u,s,"bottom"):this._calculateCalendarPosition(u,s,"top")}_calculateCalendarPosition(p,a,u){if(!this.parentElement)return;const s=this.parentElement.getElementsByClassName("kuc-base-date-1-18-0__input")[0],T=s.getBoundingClientRect().height,k=s.getBoundingClientRect().width;if(p<336&&p<a){const J=this.parentElement.getBoundingClientRect().width,Zt=u==="bottom"?T:"auto",St=u==="bottom"?"auto":T,ge=J>k?J-k:0;return void this._setCalendarPosition({top:Zt,bottom:St,right:ge})}const $=u==="bottom"?T:"auto",X=u==="bottom"?"auto":T;this._setCalendarPosition({bottom:X,top:$,left:0})}_setCalendarPosition({top:p="auto",left:a="auto",right:u="auto",bottom:s="auto"}){const T=this._baseCalendarGroupEl.parentElement;this.parentElement&&T&&(this.parentElement.style.position="relative",T.style.bottom=s==="auto"?s:s+"px",T.style.top=p==="auto"?p:p+"px",T.style.left=a==="auto"?a:a+"px",T.style.right=u==="auto"?u:u+"px")}_handleCalendarHeaderChange(p){const{year:a,month:u}=this._separateValue(p.detail.value);this._year=a,this._month=u}_handleCalendarBodyChangeDate(p){const{year:a,month:u}=this._separateValue(p.detail.value);this._year=a,this._month=u}_updateValue(){this.value===""&&(this.value=Ar().slice(0,7)+"-01");const{year:p,month:a}=this._separateValue(this.value);this._year=p,this._month=a}_separateValue(p){const a=p.split("-");return{year:parseInt(a[0],10),month:parseInt(a[1],10)}}}Xo([F({type:String,attribute:"lang",reflect:!0})],wo.prototype,"language",void 0),Xo([F({type:String,reflect:!0})],wo.prototype,"value",void 0),Xo([qt(".kuc-base-datetime-calendar-1-18-0__group")],wo.prototype,"_baseCalendarGroupEl",void 0),Xo([qt(".kuc-base-datetime-calendar-header-1-18-0__month")],wo.prototype,"_monthEl",void 0),Xo([qt(".kuc-base-datetime-calendar-header-1-18-0__year")],wo.prototype,"_yearEl",void 0),Xo([qt(".kuc-base-datetime-header-month-1-18-0__listbox")],wo.prototype,"_listBoxMonthEl",void 0),Xo([qt(".kuc-base-datetime-header-year-1-18-0__listbox")],wo.prototype,"_listBoxYearEl",void 0),Xo([se()],wo.prototype,"_month",void 0),Xo([se()],wo.prototype,"_year",void 0),window.customElements.get("kuc-base-datetime-calendar-1-18-0")||(ue(`
.kuc-base-datetime-calendar-1-18-0__group {
  display: inline-block;
  box-sizing: border-box;
  width: 336px;
  padding: 32px 32px 24px;
  background: #ffffff;
  box-shadow: 0 0 8px 2px rgb(0 0 0 / 10%);
  text-align: center;
  font-size: 13px;
}
`),window.customElements.define("kuc-base-datetime-calendar-1-18-0",wo));var qn=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class En extends ce{constructor(){super(),this.value="",this.items=[],this.maxHeight=300,this.doFocus=!0,this._actionKeyboard=!1,this._firstHighlight=!0,this._handleClickDocument=this._handleClickDocument.bind(this)}connectedCallback(){super.connectedCallback(),setTimeout(()=>{document.addEventListener("click",this._handleClickDocument)},1)}disconnectedCallback(){document.removeEventListener("click",this._handleClickDocument),super.disconnectedCallback()}getHighlightItemEl(){return this._highlightItemEl}render(){return bt`
      <ul
        style="max-height: ${this.maxHeight}px;"
        class="kuc-base-datetime-listbox-1-18-0__listbox"
        role="listbox"
        @mousedown="${this._handleMouseDownListBox}"
        @click="${this._handleClickListBox}"
      >
        ${this.items.map(p=>this._getListBoxItemTemplate(p))}
      </ul>
    `}async updated(p){await this.updateComplete,p.has("value")&&this._highlightSelectedItem(),this._setListBoxPosition(),this._scrollToView(),super.updated(p)}_handleClickDocument(){Ot(this,"kuc:listbox-blur",{})}_handleClickListBox(p){p.stopPropagation()}_handleKeyDownListBox(p){switch(p.preventDefault(),p.stopPropagation(),p.key){case"Up":case"ArrowUp":this._actionKeyboard=!0,this._highlightPrevItemEl(),this._focusHighlightItemEl(),this._scrollToView();break;case"Down":case"ArrowDown":this._actionKeyboard=!0,this._highlightNextItemEl(),this._focusHighlightItemEl(),this._scrollToView();break;case"Home":this._actionKeyboard=!0,this._highlightFirstItem(),this._focusHighlightItemEl();break;case"End":this._actionKeyboard=!0,this._highlightLastItem(),this._focusHighlightItemEl();break;case"Tab":Ot(this,"kuc:listbox-click",{});break;case"Escape":Ot(this,"kuc:listbox-escape",{});break;case" ":case"Enter":{const a=this._highlightItemEl.getAttribute("value");Ot(this,"kuc:listbox-click",{value:a||""});break}}}_handleMouseDownListBox(p){if(p.preventDefault(),p.stopPropagation(),p.target===p.currentTarget)return;const a=p.target.getAttribute("value")||"";Ot(this,"kuc:listbox-click",{value:a})}_handleMouseOverItem(p){if(this._actionKeyboard)return void(this._actionKeyboard=!1);const a=p.target;this._setHighlightItemEl(a),this.doFocus&&this._focusHighlightItemEl(!1)}_setListBoxPosition(){const p=this._listBoxEl.getBoundingClientRect().height;if(!this._listBoxEl.parentElement||!this.parentElement)return;const a=window.innerHeight-this.parentElement.getBoundingClientRect().bottom,u=this.parentElement.offsetHeight;this._listBoxEl.style.bottom="auto",this._listBoxEl.style.left="auto",a>=p||(this.parentElement.style.position="relative",this._listBoxEl.style.bottom=u+"px",this._listBoxEl.style.left="0px")}_setHighlightItemEl(p){this._removeHighlight(),p.classList.add("kuc-base-datetime-listbox-1-18-0__listbox--highlight"),p.setAttribute("tabindex","0")}_highlightSelectedItem(){if(!this.doFocus)return;const p=Array.from(this._itemsEl).filter(a=>a.getAttribute("aria-selected")==="true")[0];p&&(this._itemSelectedEl=p,this._setHighlightItemEl(p),this._focusHighlightItemEl())}_highlightFirstItem(){this._itemSelectedEl=this._firstItemEl,this._setHighlightItemEl(this._firstItemEl)}_highlightLastItem(){this._itemSelectedEl=this._lastItemEl,this._setHighlightItemEl(this._lastItemEl)}_highlightNextItemEl(){if(this._highlightItemEl===null||this._iconChecked===null)return void this._highlightFirstItem();const p=this._getNextItemEl();if(p)return this._setHighlightItemEl(p),this._firstHighlight=!1,void(this._itemSelectedEl=p);this._highlightFirstItem()}_getNextItemEl(){const p=this._iconChecked.parentElement;!this._itemSelectedEl&&p&&this._firstHighlight&&(this._itemSelectedEl=p);let a=this._highlightItemEl.nextElementSibling;return this._itemSelectedEl?this._itemSelectedEl.nextElementSibling?(a=this._itemSelectedEl.nextElementSibling,a):this._firstItemEl:a}_highlightPrevItemEl(){if(this._highlightItemEl===null||this._iconChecked===null)return void this._highlightLastItem();const p=this._getPreviousItemEl();if(p)return this._setHighlightItemEl(p),this._firstHighlight=!1,void(this._itemSelectedEl=p);this._highlightLastItem()}_getPreviousItemEl(){const p=this._iconChecked.parentElement;!this._itemSelectedEl&&p&&this._firstHighlight&&(this._itemSelectedEl=p);let a=this._highlightItemEl.previousElementSibling;return this._itemSelectedEl?this._itemSelectedEl.previousElementSibling?(a=this._itemSelectedEl.previousElementSibling,a):this._lastItemEl:a}_removeHighlight(){this._highlightItemEl&&(this._highlightItemEl.setAttribute("tabindex","-1"),this._highlightItemEl.classList.remove("kuc-base-datetime-listbox-1-18-0__listbox--highlight"))}_focusHighlightItemEl(p){const a=this._highlightItemEl;a&&(a.focus({preventScroll:!0}),p!==!1&&this._dispatchListBoxFocusChange())}_dispatchListBoxFocusChange(){const p=this._highlightItemEl.getAttribute("value")||"";Ot(this,"kuc:listbox-focus-change",{value:p})}_scrollToView(){const p=this._highlightItemEl||this._getHighlightItemByValue();if(!p||!this._listBoxEl)return;const a=p.offsetHeight,u=this._listBoxEl.clientHeight/a/2;let s=p.offsetTop-u*a;s<0&&(s=0),this._listBoxEl.scrollTop=s}_getHighlightItemByValue(){const p=Array.from(this._listBoxEl.children),a=new Date(Date.parse(`2021/01/01 ${this.value}`));let u=p.find(s=>new Date(Date.parse(`2021/01/01 ${s.title}`))>=a);return u||(u=p[p.length-1]),this.doFocus&&u&&(this._setHighlightItemEl(u),this._focusHighlightItemEl()),u}_getListBoxItemTemplate(p){const a=this.value===p.value&&this.doFocus;return bt`
      <li
        class="kuc-base-datetime-listbox-1-18-0__listbox__item"
        role="option"
        tabindex="${a?"0":"-1"}"
        aria-selected="${a}"
        title="${p.label||""}"
        value="${p.value!==void 0?p.value:""}"
        @mouseover="${this._handleMouseOverItem}"
        @keydown="${this._handleKeyDownListBox}"
      >
        ${a?this._getCheckedIconSvgTemplate():""}
        ${p.label===void 0?p.value:p.label}
      </li>
    `}_getCheckedIconSvgTemplate(){return Ce`<svg
          class="kuc-base-datetime-listbox-1-18-0__listbox__item__icon"
          width="11"
          height="9"
          viewBox="0 0 11 9"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M0 5L1.5 3L4.5 5.5L9.5 0L11 1.5L4.5 8.5L0 5Z"
            fill="#3498db"
          />
        </svg>`}}qn([F({type:String})],En.prototype,"value",void 0),qn([F({type:Array})],En.prototype,"items",void 0),qn([F({type:Number})],En.prototype,"maxHeight",void 0),qn([F({type:Boolean})],En.prototype,"doFocus",void 0),qn([qt(".kuc-base-datetime-listbox-1-18-0__listbox")],En.prototype,"_listBoxEl",void 0),qn([rn(".kuc-base-datetime-listbox-1-18-0__listbox__item")],En.prototype,"_itemsEl",void 0),qn([qt(".kuc-base-datetime-listbox-1-18-0__listbox__item")],En.prototype,"_firstItemEl",void 0),qn([qt(".kuc-base-datetime-listbox-1-18-0__listbox__item:last-child")],En.prototype,"_lastItemEl",void 0),qn([qt(".kuc-base-datetime-listbox-1-18-0__listbox--highlight")],En.prototype,"_highlightItemEl",void 0),qn([qt(".kuc-base-datetime-listbox-1-18-0__listbox__item__icon")],En.prototype,"_iconChecked",void 0),qn([se()],En.prototype,"_actionKeyboard",void 0),qn([se()],En.prototype,"_firstHighlight",void 0),window.customElements.get("kuc-base-datetime-listbox-1-18-0")||(ue(`
kuc-base-datetime-listbox-1-18-0,
kuc-base-datetime-listbox-1-18-0 *,
kuc-base-datetime-listbox-1-18-0:lang(en),
kuc-base-datetime-listbox-1-18-0:lang(en) * {
  font-family: sans-serif;
}
kuc-base-datetime-listbox-1-18-0:lang(ja),
kuc-base-datetime-listbox-1-18-0:lang(ja) * {
  font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
    sans-serif;
}
kuc-base-datetime-listbox-1-18-0:lang(zh),
kuc-base-datetime-listbox-1-18-0:lang(zh) * {
  font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", sans-serif;
}
kuc-base-datetime-listbox-1-18-0:lang(zh-TW),
kuc-base-datetime-listbox-1-18-0:lang(zh-TW) * {
  font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
    Hei,"Heiti SC"
}
kuc-base-datetime-listbox-1-18-0:lang(es),
kuc-base-datetime-listbox-1-18-0:lang(es) * {
  font-family: sans-serif;
}
.kuc-base-datetime-listbox-1-18-0__listbox {
  position: absolute;
  z-index: 2000;
  min-width: 280px;
  margin: 0;
  padding: 8px 0;
  border: 1px solid #e3e7e8;
  background-color: #ffffff;
  list-style: none;
  line-height: 1;
  overflow-y: auto;
  -webkit-tap-highlight-color: transparent;
  box-shadow: 0 5px 10px rgb(0 0 0 / 10%);
}
.kuc-base-datetime-listbox-1-18-0__listbox__item {
  position: relative;
  display: block;
  box-sizing: border-box;
  width: 100%;
  padding: 8px 16px 8px 25px;
  color: #333333;
  cursor: pointer;
  -webkit-tap-highlight-color: initial;
  text-align: left;
  font-size: 14px;
  user-select: none;
}
.kuc-base-datetime-listbox-1-18-0__listbox__item[aria-selected="true"] {
  color: #3498db;
}
.kuc-base-datetime-listbox-1-18-0__listbox--highlight {
  background-color: #e2f2fe;
  cursor: pointer;
}
.kuc-base-datetime-listbox-1-18-0__listbox__item__icon {
  position: absolute;
  left: 8px;
  top: 10px;
  background-color: transparent;
}
.kuc-base-datetime-listbox-1-18-0__listbox__item:focus {
  outline: none;
}
`),window.customElements.define("kuc-base-datetime-listbox-1-18-0",En));var ro=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class Gn extends ce{constructor(){super(...arguments),this.inputAriaLabel="",this.inputId="",this.language="en",this.value="",this.disabled=!1,this.inputAriaInvalid=!1,this.required=!1,this._dateTimeCalendarVisible=!1,this._locale=mi("en"),this._calendarValue="",this._inputValue="",this._valueForReset=""}update(p){p.has("inputId")&&(this._GUID=this.inputId),p.has("language")&&(this._locale=mi(this.language),this._updateValueProp()),p.has("value")&&this._updateValueProp(),super.update(p)}render(){return bt`
      <input
        class="kuc-base-date-1-18-0__input"
        id="${this._GUID}-label"
        type="text"
        text-align="center"
        .value="${this._inputValue}"
        aria-describedby="${this._GUID}-error"
        aria-invalid="${this.inputAriaInvalid}"
        aria-required="${this.required}"
        ?disabled="${this.disabled}"
        ?required="${this.required}"
        @click="${this._handleClickInput}"
        @change="${this._handleChangeInput}"
        @keydown="${this._handleKeyDownInput}"
        @input="${this._handleInputValue}"
      />
      <button
        aria-haspopup="dialog"
        aria-expanded="${this._dateTimeCalendarVisible}"
        class="kuc-base-date-1-18-0__assistive-text"
        @click="${this._handleClickButton}"
        @focus="${this._handleFocusButton}"
        @blur="${this._handleBlurButton}"
        ?disabled="${this.disabled}"
      >
        show date picker
      </button>
      ${this._dateTimeCalendarVisible?bt`
            <kuc-base-datetime-calendar-1-18-0
              class="kuc-base-date-1-18-0__calendar"
              .language="${this.language}"
              .value="${this._calendarValue}"
              ?hidden="${!this._dateTimeCalendarVisible}"
              @kuc:calendar-header-previous-shifttab="${this._handleShiftTabCalendarPrevMonth}"
              @kuc:calendar-body-change-date="${this._handleClickCalendarChangeDate}"
              @kuc:calendar-body-click-date="${this._handleClickCalendarClickDate}"
              @kuc:calendar-footer-click-none="${this._handleClickCalendarFooterButtonNone}"
              @kuc:calendar-footer-tab-none="${this._handleTabCalendarFooterButtonNone}"
              @kuc:calendar-footer-click-today="${this._handleClickCalendarFooterButtonToday}"
              @kuc:calendar-escape="${this._handleCalendarEscape}"
              @kuc:calendar-body-blur="${this._handleCalendarBlurBody}"
            >
            </kuc-base-datetime-calendar-1-18-0>
          `:""}
    `}updated(p){p.has("inputAriaLabel")&&this.inputAriaLabel&&this._dateInput.setAttribute("aria-label",this.inputAriaLabel),super.updated(p)}_handleInputValue(p){const a=p.target.value;this._inputValue=a||""}_handleClickInput(){if(!this._dateTimeCalendarVisible)return this._valueForReset=this.value,this._calendarValue=this._getNewCalendarValue(this._inputValue||""),void this._openCalendar();this._closeCalendar()}_updateValueProp(){if(this.value){const a=this._setCalendarValueWhenInvalidValue();return this._inputValue=Cm(this.language,this.value),void(this._calendarValue=a||this.value)}const p=Ar();this._inputValue="",this._calendarValue=this._calendarValue?this._calendarValue.slice(0,7)+"-01":p.slice(0,7)}_setCalendarValueWhenInvalidValue(){if(this.value&&!_a(this.value)){const p=Ar();return this._calendarValue||p.slice(0,7)}return""}_getNewCalendarValue(p){if(Em(this.language,p))return Sh(this.language,p);if(!this._calendarValue)return"";let a=this._calendarValue.slice(0,7);return p===""&&(a=this._calendarValue.slice(0,7)+"-01"),a}_handleChangeInput(p){p.stopPropagation();const a=(p==null?void 0:p.target).value;if(this._calendarValue=this._getNewCalendarValue(a),this._calendarValue.length>7)return void this._dispathDateChangeCustomEvent(Sh(this.language,a));const u={value:void 0,oldValue:this.value,error:this._locale.INVALID_FORMAT};this._inputValue=a,Ot(this,"kuc:base-date-change",u)}_handleKeyDownInput(p){p.key==="Escape"&&this._closeCalendar()}_closeCalendar(){this._dateTimeCalendarVisible=!1}_openCalendar(){this._dateTimeCalendarVisible=!0}_handleShiftTabCalendarPrevMonth(){this._footerNoneBtn.focus()}_handleClickCalendarChangeDate(p){p.detail.oldValue=this.value,this.value=p.detail.value,Ot(this,"kuc:base-date-change",p.detail)}_handleClickCalendarClickDate(p){this._closeCalendar(),p.detail.oldValue=this.value,this._dateInput.focus(),p.detail.oldValue!==p.detail.value&&(this.value=p.detail.value,Ot(this,"kuc:base-date-change",p.detail))}_handleClickCalendarFooterButtonNone(){this._closeCalendar(),this._dateInput.focus(),this._inputValue="";const p=Ar();let a=this._setCalendarValueWhenInvalidValue();a||(a=this._calendarValue?this._calendarValue.slice(0,7)+"-01":p.slice(0,7)+"-01"),this._calendarValue=a,this._dispathDateChangeCustomEvent(void 0)}_handleTabCalendarFooterButtonNone(){this._previousMonth.focus()}_handleClickCalendarFooterButtonToday(){this._closeCalendar();const p=Ar();this._dateInput.focus(),this._dispathDateChangeCustomEvent(p)}_handleCalendarEscape(){const p=this._valueForReset;if(this._closeCalendar(),this._dateInput.focus(),p===this.value)return;const a={oldValue:this.value,value:p};this.value=p,Ot(this,"kuc:base-date-change",a)}_handleCalendarBlurBody(p){p.preventDefault(),this._dateTimeCalendarVisible=!1}_dispathDateChangeCustomEvent(p){const a={value:p,oldValue:this.value};this.value=p===void 0?"":p,Ot(this,"kuc:base-date-change",a)}_handleClickButton(){if(!this._dateTimeCalendarVisible)return this._valueForReset=this.value,this._calendarValue=this._getNewCalendarValue(this._inputValue||""),void this._openCalendar();this._closeCalendar()}_handleBlurButton(){this._dateInput.classList.remove("kuc-base-date-1-18-0__input--focus")}_handleFocusButton(){this._dateInput.classList.add("kuc-base-date-1-18-0__input--focus")}}ro([F({type:String})],Gn.prototype,"inputAriaLabel",void 0),ro([F({type:String})],Gn.prototype,"inputId",void 0),ro([F({type:String,attribute:"lang",reflect:!0})],Gn.prototype,"language",void 0),ro([F({type:String,reflect:!0})],Gn.prototype,"value",void 0),ro([F({type:Boolean})],Gn.prototype,"disabled",void 0),ro([F({type:Boolean})],Gn.prototype,"inputAriaInvalid",void 0),ro([F({type:Boolean})],Gn.prototype,"required",void 0),ro([qt(".kuc-base-date-1-18-0__input")],Gn.prototype,"_dateInput",void 0),ro([qt(".kuc-base-datetime-calendar-header-1-18-0__group__button--previous-month")],Gn.prototype,"_previousMonth",void 0),ro([qt(".kuc-base-datetime-calendar-footer-1-18-0__group__button--none")],Gn.prototype,"_footerNoneBtn",void 0),ro([se()],Gn.prototype,"_dateTimeCalendarVisible",void 0),window.customElements.get("kuc-base-date-1-18-0")||(ue(`
input.kuc-base-date-1-18-0__input {
  width: 100px;
  height: 40px;
  padding: 0px;
  text-align: center;
  border: 1px solid #e3e7e8;
  color: #333333;
  box-sizing: border-box;
  font-size: 14px;
  box-shadow: 2px 2px 4px #f5f5f5 inset, -2px -2px 4px #f5f5f5 inset;
}

input.kuc-base-date-1-18-0__input:focus {
  outline: none;
  border: 1px solid #3498db;
}
input.kuc-base-date-1-18-0__input--focus {
  box-shadow: 2px 2px 4px #f5f5f5 inset, -2px -2px 4px #f5f5f5 inset;
  border: 1px solid #3498db;
  background-color: #ffffff;
  color: #333333;
}
.kuc-datetime-picker-1-18-0__group__inputs--date
  input.kuc-base-date-1-18-0__input--focus {
  border-color: #3498db;
}
input.kuc-base-date-1-18-0__input:disabled {
  color: #888888 !important;
  background-color: #d4d7d7;
  box-shadow: none;
  cursor: not-allowed;
}
.kuc-base-date-1-18-0__calendar {
  position: absolute;
  z-index: 2000;
  background-color: #ffffff;
  text-align: center;
  box-sizing: border-box;
}
.kuc-base-date-1-18-0__assistive-text {
  clip: rect(1px, 1px, 1px, 1px);
  overflow: hidden;
  position: absolute !important;
  padding: 0px !important;
  border: 0px !important;
  height: 1px !important;
  width: 1px !important;
}
`),window.customElements.define("kuc-base-date-1-18-0",Gn));var ko=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Rh;(()=>{if(Rh=window.customElements.get("kuc-date-picker-1-18-0"),!Rh){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.disabled=!1,this.requiredIcon=!1,this.language="auto",this.value="",this.visible=!0,this._errorFormat="",this._errorText="",this._inputValue="",this._invalidValue="",this._valueConverted="",this._GUID=ti();const u=ze(a);Object.assign(this,u)}shouldUpdate(a){return!(this.value!==void 0&&this.value!==""&&(typeof this.value=="string"&&Pm(this.value)?(this._valueConverted=Ec(this.value),this._valueConverted&&!_a(this._valueConverted)&&(this.throwErrorAfterUpdateComplete(yo),1)):(this.throwErrorAfterUpdateComplete(yo),1)))}willUpdate(a){a.has("value")&&(this.value===void 0?this._inputValue=this._invalidValue:(this.value=this.value===""?this.value:this._valueConverted,this._inputValue=this.value,this._errorFormat="")),this._updateErrorText()}render(){return bt`
        <div class="kuc-date-picker-1-18-0__group">
          <label
            class="kuc-date-picker-1-18-0__group__label"
            for="${this._GUID}-label"
            @click="${this._handleClickLabel}"
            ?hidden="${!this.label}"
          >
            <kuc-base-label-1-18-0
              .text="${this.label}"
              .requiredIcon="${this.requiredIcon}"
            ></kuc-base-label-1-18-0>
          </label>
          <kuc-base-date-1-18-0
            .inputId="${this._GUID}"
            .inputAriaInvalid="${this.error!==""}"
            .disabled="${this.disabled}"
            .value="${this._inputValue}"
            .required="${this.requiredIcon}"
            .language="${this._getLanguage()}"
            @kuc:base-date-change="${this._handleDateChange}"
          >
          </kuc-base-date-1-18-0>
          <kuc-base-error-1-18-0
            .text="${this._errorText}"
            .guid="${this._GUID}"
          ></kuc-base-error-1-18-0>
        </div>
      `}updated(){this._invalidValue=""}_updateErrorText(){this._errorText=this._errorFormat||this.error}_getLanguage(){const a=["en","ja","zh","zh-TW","es"];return a.indexOf(this.language)!==-1?this.language:a.indexOf(document.documentElement.lang)!==-1?document.documentElement.lang:"en"}_handleClickLabel(a){a.preventDefault()}_handleDateChange(a){a.stopPropagation(),a.preventDefault();const u={oldValue:this.value,value:""};a.detail.error?(this.value=void 0,this._invalidValue=this._dateInput.value,this._errorFormat=a.detail.error,this.error="",u.value=void 0):(this._errorFormat="",this.value=a.detail.value===void 0?"":a.detail.value,u.value=this.value),this._dispatchChangeEvent(u)}_dispatchChangeEvent(a){Ot(this,"change",a)}}ko([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),ko([F({type:String})],b.prototype,"error",void 0),ko([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),ko([F({type:String})],b.prototype,"label",void 0),ko([F({type:Boolean})],b.prototype,"disabled",void 0),ko([F({type:Boolean})],b.prototype,"requiredIcon",void 0),ko([F({type:String,attribute:"lang",reflect:!0,converter:pa})],b.prototype,"language",void 0),ko([F({type:String})],b.prototype,"value",void 0),ko([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),ko([qt(".kuc-base-date-1-18-0__input")],b.prototype,"_dateInput",void 0),window.customElements.define("kuc-date-picker-1-18-0",b),ue(`
kuc-date-picker-1-18-0,
kuc-date-picker-1-18-0 *,
kuc-date-picker-1-18-0:lang(en),
kuc-date-picker-1-18-0:lang(en) * {
  font-family: sans-serif;
}
kuc-date-picker-1-18-0:lang(ja),
kuc-date-picker-1-18-0:lang(ja) * {
  font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
    sans-serif;
}
kuc-date-picker-1-18-0:lang(zh),
kuc-date-picker-1-18-0:lang(zh) * {
  font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", sans-serif;
}
kuc-date-picker-1-18-0:lang(zh-TW),
kuc-date-picker-1-18-0:lang(zh-TW) * {
  font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
    Hei,"Heiti SC"
}
kuc-date-picker-1-18-0:lang(es),
kuc-date-picker-1-18-0:lang(es) * {
  font-family: sans-serif;
}
kuc-date-picker-1-18-0 {
  font-size: 14px;
  color: #333333;
  display: inline-table;
  vertical-align: top;
  max-width: var(--kuc-date-picker-input-width, 100px);
  width: var(--kuc-date-picker-input-width, 100px);
  line-height: 1.5;
}
kuc-date-picker-1-18-0[hidden] {
  display: none;
}
.kuc-date-picker-1-18-0__group {
  display: flex;
  flex-direction: column;
  border: none;
  padding: 0px;
  height: auto;
  margin: 0px;
}
.kuc-date-picker-1-18-0__group__label {
  display: inline-block;
  padding: 4px 0px 8px 0px;
  white-space: nowrap;
}
.kuc-date-picker-1-18-0__group__label[hidden] {
  display: none;
}
.kuc-date-picker-1-18-0__group input[type=text].kuc-base-date-1-18-0__input {
  width: var(--kuc-date-picker-input-width, 100px);
  height: var(--kuc-date-picker-input-height, 40px);
  padding: 0px;
  text-align: center;
  color: var(--kuc-date-picker-input-color);
  border: 1px solid #e3e7e8;
  box-sizing: border-box;
  font-size: var(--kuc-date-picker-input-font-size, 14px);
  box-shadow: 2px 2px 4px #f5f5f5 inset, -2px -2px 4px #f5f5f5 inset;
}

.kuc-date-picker-1-18-0__group kuc-base-date-1-18-0 {
  display: inline-flex;
}

.kuc-date-picker-1-18-0__group input[type=text].kuc-base-date-1-18-0__input:focus {
  outline: none;
  border: 1px solid #3498db;
}
.kuc-date-picker-1-18-0__group input[type=text].kuc-base-date-1-18-0__input--focus {
  box-shadow: 2px 2px 4px #f5f5f5 inset, -2px -2px 4px #f5f5f5 inset;
  border: 1px solid #3498db;
  background-color: #ffffff;
  color: var(--kuc-date-picker-input-color, #333333);
}
.kuc-date-picker-1-18-0__group input[type=text].kuc-base-date-1-18-0__input:disabled {
  color: #888888;
  background-color: #d4d7d7;
  box-shadow: none;
  cursor: not-allowed;
}
`),Rh=b}})();var Si=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class _i extends ce{constructor(){super(...arguments),this.language="en",this.max="",this.min="",this.value="",this.disabled=!1,this.hour12=!1,this.timeStep=30,this._listBoxVisible=!1,this._valueLabel="",this._doFocusListBox=!1,this._hours="",this._minutes="",this._suffix="",this._valueForReset="",this._locale=mi("en")}update(p){(p.has("hour12")||p.has("timeStep")||p.has("max")||p.has("min"))&&(this._listBoxItems=((a,u,s,T)=>{const k=[],$=Math.round(u),X=rs(T),J=rs(s);if($>0){const Zt=Math.floor((X-J)/$)+1;for(let St=0;St<Zt;St++){const ge=S1(J+St*$,a);k.push(ge)}}return k})(this.hour12,this.timeStep,this.min,this.max),this._updateInputValue()),p.has("value")&&this._updateInputValue(),p.has("language")&&(this._locale=mi(this.language)),super.update(p)}render(){return bt`
      <div class="kuc-base-time-1-18-0__group" @click="${this._handleClickInputGroup}">
        <input
          type="text"
          class="kuc-base-time-1-18-0__group__hours"
          role="spinbutton"
          tabindex="${this._hours?"0":"-1"}"
          aria-label="Hour"
          @focus="${this._handleFocusInput}"
          @blur="${this._handleBlurInput}"
          @keydown="${this._handleKeyDownInput}"
          @paste="${this._handlePasteInput}"
          ?disabled="${this.disabled}"
          value="${this._hours}"
        />
        ${this._getColonTemplate()}
        <input
          type="text"
          class="kuc-base-time-1-18-0__group__minutes"
          role="spinbutton"
          tabindex="${this._minutes?"0":"-1"}"
          aria-label="Minute"
          @focus="${this._handleFocusInput}"
          @blur="${this._handleBlurInput}"
          @keydown="${this._handleKeyDownInput}"
          @paste="${this._handlePasteInput}"
          ?disabled="${this.disabled}"
          value="${this._minutes}"
        />
        ${this._getSuffixTemplate()}
      </div>
      <button
        aria-haspopup="listbox"
        aria-expanded="${this._listBoxVisible}"
        class="kuc-base-time-1-18-0__assistive-text"
        @keydown="${this._handleKeyDownButton}"
        @focus="${this._handleFocusButton}"
        @blur="${this._handleBlurButton}"
        ?disabled="${this.disabled}"
      >
        show time picker
      </button>
      ${this._getListBoxTemplate()}
    `}updated(p){p.has("disabled")&&this._toggleDisabledGroup(),super.update(p)}_handleClickInputGroup(p){if(this.disabled)return;if(this.value==="")return this._toggleEl.focus(),void this._openListBox();const a=p.target;this._openListBox(),a.tagName.toUpperCase()!=="INPUT"?this._hoursEl.select():a.select()}_handleBlurListBox(p){p.preventDefault(),this._inputFocusEl||(this._listBoxVisible=!1)}_toggleDisabledGroup(){return this.disabled?this._inputGroupEl.classList.add("kuc-base-time-1-18-0__group--disabled"):this._inputGroupEl.classList.remove("kuc-base-time-1-18-0__group--disabled")}_updateInputValue(){var p;const a=((u,s)=>{const T=u.split(":"),k=parseInt(T[0],10),$=parseInt(T[1],10),X=k%da;return isNaN(X)||isNaN($)?{hours:"",minutes:"",suffix:""}:s?((J,Zt)=>{const St=Tm(J),ge=Im(J);return{hours:Be(ge),minutes:Be(Zt),suffix:St}})(k,$):{hours:Be(X),minutes:Be($),suffix:""}})(this.value,this.hour12);this._hours=a.hours,this._minutes=a.minutes,this._suffix=a.suffix||"",this._valueLabel=this._getValueLabel(a),this._inputGroupEl&&(this._setValueToInput(a),(p=this._inputFocusEl)===null||p===void 0||p.select())}_getValueLabel(p){if(!p.hours||!p.minutes)return"";const a=`${p.hours}:${p.minutes}`;return p.suffix?a+` ${p.suffix}`:a}_setValueToInput(p){this._hoursEl.value=p.hours,this._minutesEl.value=p.minutes,this._suffixEl&&(this._suffixEl.value=p.suffix||"")}_handleKeyDownButton(p){switch(p.key){case"Tab":case"Escape":if(p.key==="Escape"&&p.preventDefault(),!this._listBoxVisible)return;this._closeListBox();break;case"Enter":case" ":case"ArrowUp":case"ArrowDown":p.preventDefault(),p.stopPropagation(),this._openListBoxByKey();break;default:p.preventDefault(),p.stopPropagation(),this._handleDefaultKeyButton(p.key)}}_handleBlurButton(){this._inputGroupEl.classList.remove("kuc-base-time-1-18-0__group--focus")}_handleFocusButton(p){p.stopPropagation(),this._inputGroupEl.classList.add("kuc-base-time-1-18-0__group--focus")}_openListBoxByKey(){return!this._listBoxVisible&&(this._valueForReset=this.value,this._doFocusListBox=!0,this._listBoxVisible=!0,this._inputGroupEl.classList.remove("kuc-base-time-1-18-0__group--focus"),!0)}_handleListBoxEscape(){this._closeListBox(),this.value=this._valueForReset,this._actionUpdateInputValue(this.value),this.value!==""?this._hoursEl.select():this._toggleEl.focus()}_handleDefaultKeyButton(p){if(!/^[0-9]$/i.test(p)||this.value!=="")return;const a=this._computeNumberKeyValueHours(p);this._actionUpdateInputValue(a),this._hoursEl.select()}_handleChangeListBox(p){if(p.preventDefault(),p.stopPropagation(),this._closeListBox(),this._inputFocusEl=this._hoursEl,this._hoursEl.select(),!p.detail.value)return;const a=p.detail.value;this._actionUpdateInputValue(a)}_handleListBoxFocusChange(p){const a=p.detail.value,u=hl(a);this._actionUpdateInputValue(u)}_handleFocusInput(p){this._inputFocusEl=p.target,this._inputFocusEl.select(),this._inputGroupEl.classList.add("kuc-base-time-1-18-0__group--focus")}_handleBlurInput(p){this._inputFocusEl=null;const a=p.relatedTarget;a&&a instanceof HTMLInputElement&&[this._hoursEl,this._minutesEl,this._suffixEl].indexOf(a)>-1||(this._closeListBox(),this._inputGroupEl.classList.remove("kuc-base-time-1-18-0__group--focus"))}_handleTabKey(p){return p.key==="Tab"}_handleKeyDownInput(p){this._closeListBox(),this._handleTabKey(p)||this._handleSupportedKey(p)}_handlePasteInput(p){p.preventDefault()}_handleSupportedKey(p){p.preventDefault();const a=p.key;let u;switch(a){case"Enter":case"ArrowRight":this._actionSelectNextRange();break;case"ArrowLeft":this._actionSelectPreviousRange();break;case"ArrowUp":u=this._computeArrowUpDownValue(1),this._actionUpdateInputValue(u);break;case"ArrowDown":u=this._computeArrowUpDownValue(-1),this._actionUpdateInputValue(u);break;case"Backspace":case"Delete":u=this._computeDeleteValue(),this._actionUpdateInputValue(u);break;default:u=this._computeDefaultKeyValue(a),this._actionUpdateInputValue(u)}}_actionUpdateInputValue(p){const a=this.value===""?this.value:this._formatKeyDownValue(),u=hl(a),s=hl(p);u!==s&&(this.value=s,this._dispatchEventTimeChange(s,u))}_computeDeleteValue(){return this._inputFocusEl===this._minutesEl?this._formatKeyDownValue({minutes:"00"}):this._inputFocusEl===this._hoursEl?this._formatKeyDownValue({hours:"00"}):this._formatKeyDownValue()}_computeArrowUpDownValue(p){return this._inputFocusEl===this._hoursEl?this._computeArrowUpDownHourValue(p):this._inputFocusEl===this._minutesEl?this._computeArrowUpDownMinuteValue(p):this._computeKeyDownSuffixValue()}_computeKeyDownSuffixValue(p){if(!p){const u=this._suffix===cl?ul:cl;return this._formatKeyDownValue({suffix:u})}if(["a","A","p","P"].indexOf(p)===-1)return this._formatKeyDownValue();const a=p==="a"||p==="A"?cl:ul;return this.value===""&&this._hoursEl.select(),this._formatKeyDownValue({suffix:a})}_computeArrowUpDownHourValue(p){let a=parseInt(this._hours,10)+p;return this.hour12?(a%=oo,a=a<=0?oo:a):(a%=da,a=a<0?23:a),this._formatKeyDownValue({hours:a.toString()})}_computeArrowUpDownMinuteValue(p){let a=parseInt(this._minutes,10)+p;return a%=60,a=a<0?59:a,this._formatKeyDownValue({minutes:a.toString()})}_computeDefaultKeyValue(p){return/^[0-9]$/i.test(p)?this._computeNumberKeyValue(p):this._inputFocusEl===this._suffixEl?this._computeKeyDownSuffixValue(p):this._formatKeyDownValue()}_computeNumberKeyValue(p){return this._inputFocusEl===this._minutesEl?this._computeNumberKeyValueMinutes(p):this._inputFocusEl===this._hoursEl?this._computeNumberKeyValueHours(p):this._formatKeyDownValue()}_computeNumberKeyValueMinutes(p){const a=this._getPreviousMinutes(this._minutes),u=Be(a+p);return this.value===""?(this._hoursEl.select(),this._computeNumberKeyValueHours(p)):this._formatKeyDownValue({minutes:u})}_computeNumberKeyValueHours(p){const a=this._getPreviousHours(this._hours,p),u=Be(a+p);return this.value===""?this._formatKeyDownValue({hours:u,minutes:"00"}):this._formatKeyDownValue({hours:u})}_getPreviousMinutes(p){let a;return a=parseInt(p,10)>10?(""+p)[1]:""+p,a=parseInt(a,10)>5?"0":a,a}_getPreviousHours(p,a){let u;u=parseInt(p,10)>10?(""+p)[1]:""+p;const s=parseInt(u+a,10);return u=this.hour12&&s>oo||!this.hour12&&s>=da?"0":u,u}_actionSelectNextRange(){this._inputFocusEl!==this._hoursEl?this.hour12&&this._inputFocusEl===this._minutesEl&&this._suffixEl.select():this._minutesEl.select()}_actionSelectPreviousRange(){this._inputFocusEl!==this._suffixEl?this._inputFocusEl===this._minutesEl&&this._hoursEl.select():this._minutesEl.select()}_dispatchEventTimeChange(p,a){const u={value:p,oldValue:a};(Er(p,this.min)<0||Er(this.max,p)<0)&&(u.error=this._locale.TIME_IS_OUT_OF_VALID_RANGE),Ot(this,"kuc:base-time-change",u)}_formatKeyDownValue(p={hours:this._hours,minutes:this._minutes,suffix:this._suffix}){const a=p.hours||this._hours,u=p.minutes||this._minutes,s=p.suffix||this._suffix,T=`${Be(a)}:${Be(u)}`;return s?`${T} ${s}`:T}_openListBox(){this._listBoxVisible||(this._doFocusListBox=!1,this._listBoxVisible=!0)}_closeListBox(){this._doFocusListBox=!1,this._listBoxVisible=!1}_getColonTemplate(){return this._hours?bt` <span class="kuc-base-time-1-18-0__group__colon">:</span> `:""}_getSuffixTemplate(){return this.hour12?bt`
          <input
            class="kuc-base-time-1-18-0__group__suffix"
            role="spinbutton"
            tabindex="${this._suffix?"0":"-1"}"
            aria-label="${this._suffix||"suffix"}"
            @focus="${this._handleFocusInput}"
            @blur="${this._handleBlurInput}"
            @keydown="${this._handleKeyDownInput}"
            @paste="${this._handlePasteInput}"
            ?disabled="${this.disabled}"
            value="${this._suffix}"
          />
        `:""}_getListBoxTemplate(){return this._listBoxVisible?bt`
          <kuc-base-datetime-listbox-1-18-0
            maxHeight="165"
            aria-hidden="${!this._listBoxVisible}"
            class="kuc-base-time-1-18-0__group__listbox"
            .items="${this._listBoxItems||[]}"
            .value="${this._valueLabel}"
            .doFocus="${this._doFocusListBox}"
            @kuc:listbox-click="${this._handleChangeListBox}"
            @kuc:listbox-blur="${this._handleBlurListBox}"
            @kuc:listbox-focus-change="${this._handleListBoxFocusChange}"
            @kuc:listbox-escape="${this._handleListBoxEscape}"
          ></kuc-base-datetime-listbox-1-18-0>
        `:""}}Si([F({type:String,attribute:"lang",reflect:!0})],_i.prototype,"language",void 0),Si([F({type:String})],_i.prototype,"max",void 0),Si([F({type:String})],_i.prototype,"min",void 0),Si([F({type:String})],_i.prototype,"value",void 0),Si([F({type:Boolean})],_i.prototype,"disabled",void 0),Si([F({type:Boolean})],_i.prototype,"hour12",void 0),Si([F({type:Number})],_i.prototype,"timeStep",void 0),Si([se()],_i.prototype,"_listBoxVisible",void 0),Si([se()],_i.prototype,"_valueLabel",void 0),Si([se()],_i.prototype,"_doFocusListBox",void 0),Si([se()],_i.prototype,"_hours",void 0),Si([se()],_i.prototype,"_minutes",void 0),Si([se()],_i.prototype,"_suffix",void 0),Si([se()],_i.prototype,"_inputFocusEl",void 0),Si([qt(".kuc-base-time-1-18-0__group__hours")],_i.prototype,"_hoursEl",void 0),Si([qt(".kuc-base-time-1-18-0__group__minutes")],_i.prototype,"_minutesEl",void 0),Si([qt(".kuc-base-time-1-18-0__group__suffix")],_i.prototype,"_suffixEl",void 0),Si([qt(".kuc-base-time-1-18-0__assistive-text")],_i.prototype,"_toggleEl",void 0),Si([qt(".kuc-base-time-1-18-0__group")],_i.prototype,"_inputGroupEl",void 0),window.customElements.get("kuc-base-time-1-18-0")||(ue(`
:lang(ja) .kuc-base-time-1-18-0__group input.kuc-base-time-1-18-0__group__hours,
:lang(ja) .kuc-base-time-1-18-0__group input.kuc-base-time-1-18-0__group__minutes {
  width: 2ch;
}
.kuc-base-time-1-18-0__group {
  display: inline-flex;
  position: relative;
  justify-content: center;
  -webkit-box-align: center;
  align-items: center;
  max-width: 85px;
  width: 85px;
  height: 40px;
  color: #333333;
  border: solid 1px #e3e7e8;
  box-sizing: border-box;
  padding: 0px 8px;
  box-shadow: 2px 2px 4px #f5f5f5 inset, -2px -2px 4px #f5f5f5 inset;
  background-color: #ffffff;
  overflow: hidden;
}
.kuc-base-time-1-18-0__group input.kuc-base-time-1-18-0__group__hours {
  border: 0px;
  padding: 0px;
  width: 2ch;
  font-size: inherit;
  outline: none;
  background-color: transparent;
  color: #333333;
  caret-color: transparent;
  user-select: none;
}
.kuc-base-time-1-18-0__group input.kuc-base-time-1-18-0__group__minutes {
  border: 0px;
  padding: 0px;
  width: 2ch;
  font-size: inherit;
  outline: none;
  background-color: transparent;
  color: #333333;
  caret-color: transparent;
  user-select: none;
}
.kuc-base-time-1-18-0__group input.kuc-base-time-1-18-0__group__hours:focus {
  border: 0px;
}
.kuc-base-time-1-18-0__group input.kuc-base-time-1-18-0__group__minutes:focus {
  border: 0px;
}
.kuc-base-time-1-18-0__group__colon {
  width: auto;
  text-align: center;
}
.kuc-base-time-1-18-0__group input.kuc-base-time-1-18-0__group__suffix {
  border: 0px;
  width: 3ch;
  text-align: right;
  font-size: inherit;
  outline: none;
  appearance: none;
  margin-left: 1px;
  padding: 0px;
  background-color: transparent;
  color: #333333;
  caret-color: transparent;
  user-select: none;
}
.kuc-base-time-1-18-0__group--focus {
  box-shadow: 2px 2px 4px #f5f5f5 inset, -2px -2px 4px #f5f5f5 inset;
  border: 1px solid #3498db;
  background-color: #ffffff;
  color: #333333;
}
.kuc-base-time-1-18-0__assistive-text {
  clip: rect(1px, 1px, 1px, 1px);
  overflow: hidden;
  position: absolute !important;
  padding: 0px !important;
  border: 0px !important;
  height: 1px !important;
  width: 1px !important;
}
.kuc-base-time-1-18-0__group--disabled {
  background-color: #d4d7d7;
  box-shadow: none;
  color: #888888;
  cursor: not-allowed;
}
.kuc-base-time-1-18-0__group--disabled input:disabled,
.kuc-base-time-1-18-0__group--disabled span {
  cursor: not-allowed;
  color: #888888;
  -webkit-text-fill-color: #888888;
}
`),window.customElements.define("kuc-base-time-1-18-0",_i));var gn=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let $h;(()=>{if($h=window.customElements.get("kuc-datetime-picker-1-18-0"),!$h){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.language="auto",this.max="",this.min="",this.value="",this.disabled=!1,this.hour12=!1,this.requiredIcon=!1,this.visible=!0,this.timeStep=30,this._dateValue="",this._timeValue="",this._previousTimeValue="",this._previousDateValue="",this._errorFormat="",this._errorText="",this._dateConverted="",this._changeDateByUI=!1,this._changeTimeByUI=!1,this._inputMax="",this._inputMin="",this._timeConverted="",this._errorInvalidTime="",this._inputTimeStep=30,this._GUID=ti();const u=ze(a);Object.assign(this,u)}shouldUpdate(a){return!((a.has("max")||a.has("min"))&&!this._checkAndUpdateMaxMinProperty())&&!(a.has("timeStep")&&!this._checkAndUpdateTimeStepProperty())&&(this.value===void 0||this.value===""||(typeof this.value!="string"?(this.throwErrorAfterUpdateComplete(yo),!1):(this._dateAndTime=this._getDateTimeValue(this.value),this._dateConverted=Ec(this._dateAndTime.date),Lm(this._dateAndTime.date,this._dateAndTime.time)&&_a(this._dateConverted)?(this._timeConverted=Zo(this._dateAndTime.time.slice(0,5)),!a.has("value")||!(Er(this._timeConverted,this._inputMin)<0||Er(this._inputMax,this._timeConverted)<0)||(this.throwErrorAfterUpdateComplete(bm),!1)):(this.throwErrorAfterUpdateComplete(yo),!1))))}willUpdate(a){this._changeDateByUI||this._changeTimeByUI?this._updateValueChangeByUI():this._updateValueWhenSetter()}_checkAndUpdateMaxMinProperty(){let a=this._inputMin,u=this._inputMax;if(this.max===void 0||this.max==="")u=vm;else{if(!ma(this.max))return this.throwErrorAfterUpdateComplete(xm),!1;u=this.max=Zo(this.max)}if(this.min===void 0||this.min==="")a=kh;else{if(!ma(this.min))return this.throwErrorAfterUpdateComplete(wm),!1;a=this.min=Zo(this.min)}return Er(u,a)<0?(this.throwErrorAfterUpdateComplete(gm),!1):(this._inputMin=a,this._inputMax=u,!0)}_checkAndUpdateTimeStepProperty(){return fa(this.timeStep)?zm(this.timeStep,this._inputMax,this._inputMin)?(this._inputTimeStep=this.timeStep,!0):(this.throwErrorAfterUpdateComplete(km),!1):(this.throwErrorAfterUpdateComplete(ym),!1)}_updateValueChangeByUI(){const a=this._validateDateTimeFormat();this.value=a?this.value:void 0,!a||this._dateValue||this._timeValue||(this.value="");const u=!this._dateValue&&this._timeValue,s=this._dateValue&&!this._timeValue;this._errorText=u||s?this.error||this._errorFormat||this._errorInvalidTime:a?this.error:this._errorFormat||this._errorInvalidTime}_validateDateTimeFormat(){const a=!!this._timeValue&&!this._dateValue,u=!!this._dateValue&&!this._timeValue;return!(this._errorFormat||this._errorInvalidTime||a||u)}_updateValueWhenSetter(){if(this._errorText=this.error,this.value===""||this.value===void 0)return this._previousTimeValue="",this._errorFormat="",void(this._errorInvalidTime="");this._setDateTimeValueSeparate(this._dateAndTime,this._dateConverted),this.value=this._getDateTimeString()}_setDateTimeValueSeparate(a,u){this._dateValue=u||this._dateInput.value,this._timeValue=this._dateValue&&_a(u)?Zo(a.time.slice(0,5)):this._previousTimeValue}update(a){a.has("value")&&(this.value===void 0&&this._setUndefinedValue(),this.value===""&&this._setEmptyValue()),(a.has("max")||a.has("min")||a.has("value"))&&this.value!==void 0&&(this._errorInvalidTime=""),super.update(a)}_setUndefinedValue(){if(!this._changeTimeByUI){if(this._errorFormat)return this._changeDateByUI?void(this._dateValue=this._dateInput.value):(this._dateValue="",void(this._timeValue=""));this._dateValue=this._previousDateValue,this._timeValue=this._previousTimeValue}}_setEmptyValue(){this._dateValue="",this._timeValue="",this._previousTimeValue="",this._previousDateValue="",this._errorFormat="",this._errorInvalidTime=""}render(){return bt`
        <fieldset
          class="kuc-datetime-picker-1-18-0__group"
          aria-describedby="${this._GUID}-error"
        >
          <legend
            class="kuc-datetime-picker-1-18-0__group__label"
            ?hidden="${!this.label}"
          >
            <kuc-base-label-1-18-0
              .text="${this.label}"
              .requiredIcon="${this.requiredIcon}"
            ></kuc-base-label-1-18-0>
          </legend>
          <div class="kuc-datetime-picker-1-18-0__group__inputs">
            <kuc-base-date-1-18-0
              class="kuc-datetime-picker-1-18-0__group__inputs--date"
              .value="${this._dateValue}"
              .language="${this._getLanguage()}"
              .disabled="${this.disabled}"
              inputAriaLabel="date"
              @kuc:base-date-change="${this._handleDateChange}"
            ></kuc-base-date-1-18-0
            ><kuc-base-time-1-18-0
              class="kuc-datetime-picker-1-18-0__group__inputs--time"
              .value="${this._timeValue}"
              .hour12="${this.hour12}"
              .disabled="${this.disabled}"
              .timeStep="${this._inputTimeStep}"
              .min="${this._inputMin}"
              .max="${this._inputMax}"
              .language="${this._getLanguage()}"
              @kuc:base-time-change="${this._handleTimeChange}"
            ></kuc-base-time-1-18-0>
          </div>
          <kuc-base-error-1-18-0
            .text="${this._errorText}"
            .guid="${this._GUID}"
            ?hidden="${!this._errorText}"
          ></kuc-base-error-1-18-0>
        </fieldset>
      `}updated(){this._resetState()}_resetState(){this._previousTimeValue="",this._previousDateValue="",this._changeDateByUI=!1,this._changeTimeByUI=!1}_handleDateChange(a){a.stopPropagation(),a.preventDefault(),this._changeDateByUI=!0;let u=this._dateValue;a.detail.error?(this._errorFormat=a.detail.error,this.error=""):(u=a.detail.value,this._errorFormat=""),this._updateDateTimeValue(u,"date")}_handleTimeChange(a){a.preventDefault(),a.stopPropagation(),this._changeTimeByUI=!0;const u=a.detail.value;a.detail.error?(this._errorInvalidTime=a.detail.error,this.error=""):this._errorInvalidTime="",this._updateDateTimeValue(u,"time")}_updateDateTimeValue(a,u){const s=this.value;u==="date"?this._dateValue=a||"":this._timeValue=a,this._previousTimeValue=this._timeValue,this._previousDateValue=this._dateValue;const T=this._errorFormat||this._errorInvalidTime?void 0:this._getDateTimeString(),k=this._errorFormat||this._errorInvalidTime?void 0:T;this.value=k,!this._validateDateTimeFormat()||this._dateValue||this._timeValue||(this.value="");const $={value:this.value,oldValue:s,changedPart:u};Ot(this,"change",$)}_getDateTimeString(){if(!this._dateValue||!this._timeValue)return;if(!this.value)return`${this._dateValue}T${this._timeValue}:00`;const a=this.value.split(":");return a.length===3?`${this._dateValue}T${this._timeValue}:${a[2]}`:`${this._dateValue}T${this._timeValue}:00`}_getDateTimeValue(a){if(a===""||a===void 0)return{date:"",time:""};const u=a.split("T"),s=u[0],T=u[1];if(a.indexOf("T")===a.length-1||u.length>2)return{date:s,time:""};if(!T)return{date:s,time:kh};const[k,$,X]=T.split(":");if(k===""||$===""||X==="")return{date:s,time:T};const J=`${k}:${$||"00"}`;return X?{date:s,time:`${J}:${X}`}:{date:s,time:J}}_getLanguage(){const a=["en","ja","zh","zh-TW","es"];return a.indexOf(this.language)!==-1?this.language:a.indexOf(document.documentElement.lang)!==-1?document.documentElement.lang:"en"}}gn([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),gn([F({type:String})],b.prototype,"error",void 0),gn([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),gn([F({type:String})],b.prototype,"label",void 0),gn([F({type:String,attribute:"lang",reflect:!0,converter:pa})],b.prototype,"language",void 0),gn([F({type:String})],b.prototype,"max",void 0),gn([F({type:String})],b.prototype,"min",void 0),gn([F({type:String,hasChanged:(p,a)=>(p===""||p===void 0)&&p===a||p!==a})],b.prototype,"value",void 0),gn([F({type:Boolean})],b.prototype,"disabled",void 0),gn([F({type:Boolean})],b.prototype,"hour12",void 0),gn([F({type:Boolean})],b.prototype,"requiredIcon",void 0),gn([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),gn([F({type:Number})],b.prototype,"timeStep",void 0),gn([qt(".kuc-base-date-1-18-0__input")],b.prototype,"_dateInput",void 0),window.customElements.define("kuc-datetime-picker-1-18-0",b),ue(`
kuc-datetime-picker-1-18-0,
kuc-datetime-picker-1-18-0 *,
kuc-datetime-picker-1-18-0:lang(en),
kuc-datetime-picker-1-18-0:lang(en) * {
  font-family: sans-serif;
}
kuc-datetime-picker-1-18-0:lang(ja),
kuc-datetime-picker-1-18-0:lang(ja) * {
  font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
    sans-serif;
}
kuc-datetime-picker-1-18-0:lang(zh),
kuc-datetime-picker-1-18-0:lang(zh) * {
  font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", sans-serif;
}
kuc-datetime-picker-1-18-0:lang(zh-TW),
kuc-datetime-picker-1-18-0:lang(zh-TW) * {
  font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
    Hei,"Heiti SC"
}
kuc-datetime-picker-1-18-0:lang(es),
kuc-datetime-picker-1-18-0:lang(es) * {
  font-family: sans-serif;
}
kuc-datetime-picker-1-18-0 {
  font-size: 14px;
  display: inline-table;
  vertical-align: top;
  line-height: 1.5;
  max-width: calc(var(--kuc-date-time-picker-date-input-width, 100px) + var(--kuc-date-time-picker-time-input-width, 85px));
  width: calc(var(--kuc-date-time-picker-date-input-width, 100px) + var(--kuc-date-time-picker-time-input-width, 85px));
}
kuc-datetime-picker-1-18-0[hidden] {
  display: none;
}
.kuc-datetime-picker-1-18-0__group {
  border: none;
  padding: 0px;
  height: auto;
  display: flex;
  flex-direction: column;
  margin: 0px;
}
.kuc-datetime-picker-1-18-0__group__label {
  display: inline-block;
  padding: 4px 0px 8px 0px;
  white-space: nowrap;
}
.kuc-datetime-picker-1-18-0__group__label[hidden] {
  display: none;
}
.kuc-datetime-picker-1-18-0__group__inputs {
  display: flex;
  width: calc(var(--kuc-date-time-picker-date-input-width, 100px) + var(--kuc-date-time-picker-time-input-width, 85px));
}
.kuc-datetime-picker-1-18-0__group input[type=text].kuc-base-date-1-18-0__input {
  width: var(--kuc-date-time-picker-date-input-width, 100px);
  height: var(--kuc-date-time-picker-input-height, 40px);
  color: var(--kuc-date-time-picker-input-color, #333333);
  font-size: var(--kuc-date-time-picker-input-font-size, 14px);
}
.kuc-datetime-picker-1-18-0__group .kuc-base-time-1-18-0__group {
  max-width: var(--kuc-date-time-picker-time-input-width, 85px);
  width: var(--kuc-date-time-picker-time-input-width, 85px);
  font-size: var(--kuc-date-time-picker-input-font-size, 14px);
  height: var(--kuc-date-time-picker-input-height, 40px);
  color: var(--kuc-date-time-picker-input-color, #333333);
}
.kuc-datetime-picker-1-18-0__group .kuc-base-time-1-18-0__group input[type=text].kuc-base-time-1-18-0__group__hours,
.kuc-datetime-picker-1-18-0__group .kuc-base-time-1-18-0__group input[type=text].kuc-base-time-1-18-0__group__minutes,
.kuc-datetime-picker-1-18-0__group .kuc-base-time-1-18-0__group input.kuc-base-time-1-18-0__group__suffix,
.kuc-datetime-picker-1-18-0__group .kuc-base-time-1-18-0__group--focus  {
  color: var(--kuc-date-time-picker-input-color, #333333);
}
`),$h=b}})();var So=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Vh;(()=>{if(Vh=window.customElements.get("kuc-dialog-1-18-0"),!Vh){class b extends ce{constructor(a){super(),this.icon="",this.title="",this.content="",this.footer="",this.header="",this.container=document.body,this.footerVisible=!0,this._isOpened=!1,this._triggeredElement=null,this._content="",this._footer="",this._header="",this._GUID=ti();const u=ze(a);Object.assign(this,u)}_handleFocusFirstDummy(){const a=this._focusableElements[this._focusableElements.length-2];a&&a.focus()}_handleFocusLastDummy(){this._dialogEl.focus()}_handleKeyDownDialog(a){a.key==="Escape"&&(a.preventDefault(),this.close())}_handleClickCloseButton(a){this.close()}_getCloseButtonSvgTemplate(){return Ce`
        <svg
          class="kuc-dialog-1-18-0__dialog__header__close-button-svg"
          width="32"
          height="32"
          viewBox="0 0 32 32"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M16 32C24.8366 32 32 24.8366 32 16C32 7.16344 24.8366 0 16 0C7.16344 0 0 7.16344 0 16C0 24.8366 7.16344 32 16 32Z"
            fill="#f7f9fa"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M16.4765 15.7071L20.1229 12.0607L20.4765 11.7071L19.7694 11L19.4158 11.3536L15.7694 15L12.1229 11.3536L11.7694 11L11.0623 11.7071L11.4158 12.0607L15.0623 15.7071L11.3536 19.4158L11 19.7694L11.7071 20.4765L12.0607 20.1229L15.7694 16.4142L19.4781 20.1229L19.8316 20.4765L20.5387 19.7694L20.1852 19.4158L16.4765 15.7071Z"
            fill="#888888"
          />
        </svg>
      `}_getIconTemplate(){switch(this.icon){case"info":return Ce`
            <svg
              class="kuc-dialog-1-18-0__dialog__content__icon-info"
              width="18"
              height="18"
              viewBox="0 0 18 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M9.09673 17.7173C13.9604 17.7173 17.9032 13.7933 17.9032 8.95287C17.9032 4.11243 13.9604 0.188477 9.09673 0.188477C4.23306 0.188477 0.290283 4.11243 0.290283 8.95287C0.290283 13.7933 4.23306 17.7173 9.09673 17.7173Z"
                fill="#448aca"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M8.71195 7.96235C8.81719 7.69023 8.67929 7.5524 8.5559 7.5524C7.98977 7.5524 7.24945 8.87059 6.97364 8.87059C6.86531 8.86323 6.77965 8.7783 6.77405 8.67269C6.77405 8.40057 7.44905 7.76444 7.64864 7.57007C8.25505 6.95498 9.08189 6.59163 9.95671 6.5558C10.6172 6.5558 11.3249 6.94808 10.7696 8.4147L9.66276 11.3656C9.53205 11.6338 9.44394 11.9198 9.40147 12.2138C9.3955 12.2661 9.41197 12.3186 9.44701 12.3587C9.48204 12.3988 9.53253 12.4231 9.58655 12.4258C10.0474 12.4258 10.893 11.1394 11.1107 11.1394C11.221 11.1597 11.2987 11.2565 11.2922 11.3656C11.2922 11.8038 9.49582 13.6804 7.9426 13.6804C7.38735 13.6804 7.00268 13.4224 7.00268 12.8499C7.00268 12.1219 7.52889 10.8815 7.63413 10.6235L8.71195 7.96235ZM9.53937 4.97962C9.55317 4.3095 10.114 3.77277 10.8023 3.77099C11.0868 3.75724 11.364 3.86105 11.5658 4.05686C11.7675 4.25267 11.8751 4.52229 11.862 4.79939C11.8604 5.12532 11.7247 5.43704 11.4853 5.66484C11.2459 5.89264 10.9228 6.01752 10.5882 6.01156C10.3033 6.02775 10.0251 5.92385 9.82434 5.72636C9.62362 5.52886 9.51981 5.25684 9.53937 4.97962Z"
                fill="white"
              />
            </svg>
          `;case"success":return Ce`
            <svg
              class="kuc-dialog-1-18-0__dialog__content__icon-success"
              width="18"
              height="18"
              viewBox="0 0 18 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path 
                d="M9.09673 17.7173C13.9604 17.7173 17.9032 13.7933 17.9032 8.95287C17.9032 4.11243 13.9604 0.188477 9.09673 0.188477C4.23306 0.188477 0.290283 4.11243 0.290283 8.95287C0.290283 13.7933 4.23306 17.7173 9.09673 17.7173Z"
                fill="#2ecc71"
              />
              <path 
                d="M7.45159 10.3666L4.64513 7.44514L2.9032 9.32996L7.45159 13.9478L15.0967 6.59697L13.258 4.8064L7.45159 10.3666Z"
                fill="white"
              />
            </svg>
          `;case"error":return Ce`
            <svg
              class="kuc-dialog-1-18-0__dialog__content__icon-error"
              width="18"
              height="18"
              viewBox="0 0 18 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M9 18C13.9706 18 18 13.9706 18 9C18 4.02944 13.9706 0 9 0C4.02944 0 0 4.02944 0 9C0 13.9706 4.02944 18 9 18Z"
                fill="#e74c3c"
              />
              <path
                d="M10.1497 8.99989L12.7572 6.39244L12.9339 6.21567L12.7572 6.03889L11.9617 5.24339L11.7849 5.06661L11.6081 5.24339L9.00063 7.85084L6.39317 5.24339L6.2164 5.06661L6.03962 5.24339L5.24412 6.03889L5.06734 6.21567L5.24412 6.39244L7.85159 8.99989L5.24412 11.6074L5.06734 11.7842L5.24412 11.9609L6.03962 12.7564L6.2164 12.9332L6.39317 12.7564L9.00063 10.1489L11.6081 12.7564L11.7849 12.9332L11.9617 12.7564L12.7572 11.9609L12.9339 11.7842L12.7572 11.6074L10.1497 8.99989Z"
                fill="white"
                stroke="white"
                stroke-width="0.5"
              />
            </svg>
          `;case"warning":return Ce`
            <svg
              class="kuc-dialog-1-18-0__dialog__content__icon-warning"
              width="18"
              height="18"
              viewBox="0 0 18 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M9.09673 17.7173C13.9604 17.7173 17.9032 13.7933 17.9032 8.95287C17.9032 4.11243 13.9604 0.188477 9.09673 0.188477C4.23306 0.188477 0.290283 4.11243 0.290283 8.95287C0.290283 13.7933 4.23306 17.7173 9.09673 17.7173Z"
                fill="#ffcc00"
              />
              <path
                d="M7.74182 3.76978H10.645L9.91924 9.42423H8.46763L7.74182 3.76978Z"
                fill="#333333"
              />
              <rect
                x="7.74182"
                y="11.3088"
                width="2.90323"
                height="2.82722"
                rx="1"
                fill="#333333"
              />
            </svg>
          `;case"question":return Ce`
            <svg
              class="kuc-dialog-1-18-0__dialog__content__icon-question"
              width="18"
              height="18"
              viewBox="0 0 18 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M11.0933 8.87676C10.383 9.34006 10.1707 9.73991 10.1469 10.6575C10.1447 10.7581 10.0632 10.8371 9.96337 10.8371H8.08135C8.03123 10.8371 7.89783 10.7033 7.89783 10.6532V9.90432C7.89783 9.11869 8.32111 8.42752 9.1947 7.79043C9.2632 7.7432 9.91722 7.31559 9.91722 6.72573C9.91722 6.23647 9.54947 5.89467 9.022 5.89467C8.27063 5.89467 7.85168 6.27144 7.81166 6.99037C7.80589 7.08736 7.72549 7.16344 7.62815 7.16344H7.53044H5.64914C5.59902 7.16344 5.54999 7.14252 5.51574 7.10611C5.48149 7.07005 5.46274 7.02066 5.46562 6.97054C5.56802 4.97527 6.86452 3.83053 9.02416 3.83053C10.6614 3.83053 12.4248 4.71892 12.4248 6.66984C12.4248 7.97683 12.1266 8.22381 11.0933 8.87676ZM8.99982 0C4.02976 0 0 4.02948 0 9C0 13.9709 4.02976 18 8.99982 18C13.9702 18 18 13.9709 18 9C18 4.02948 13.9702 0 8.99982 0ZM10.503 14.5101C10.503 14.7124 10.3383 14.8775 10.136 14.8775H7.89742C7.69516 14.8775 7.53003 14.7124 7.53003 14.5101V12.3061C7.53003 12.1038 7.69516 11.9387 7.89742 11.9387H10.136C10.3383 11.9387 10.503 12.1038 10.503 12.3061V14.5101Z"
                fill="#666666"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M11.0933 8.8768C10.383 9.3401 10.1707 9.73995 10.1469 10.6575C10.1447 10.7581 10.0632 10.8371 9.96337 10.8371H8.08135C8.03123 10.8371 7.89783 10.7033 7.89783 10.6532V9.90436C7.89783 9.11872 8.32111 8.42755 9.1947 7.79047C9.2632 7.74323 9.91722 7.31562 9.91722 6.72577C9.91722 6.2365 9.54947 5.8947 9.022 5.8947C8.27063 5.8947 7.85168 6.27148 7.81166 6.99041C7.80589 7.0874 7.72549 7.16347 7.62815 7.16347H7.53044H5.64914C5.59902 7.16347 5.54999 7.14256 5.51574 7.10615C5.48149 7.07009 5.46274 7.0207 5.46562 6.97058C5.56802 4.97531 6.86452 3.83057 9.02416 3.83057C10.6614 3.83057 12.4248 4.71896 12.4248 6.66988C12.4248 7.97687 12.1266 8.22384 11.0933 8.8768V8.8768Z"
                fill="white"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M10.503 14.5101C10.503 14.7124 10.3383 14.8775 10.136 14.8775H7.89742C7.69516 14.8775 7.53003 14.7124 7.53003 14.5101V12.3061C7.53003 12.1039 7.69516 11.9387 7.89742 11.9387H10.136C10.3383 11.9387 10.503 12.1039 10.503 12.3061V14.5101Z"
                fill="white"
              />
            </svg>
          `;default:return""}}shouldUpdate(a){if(a.has("container")){if(this.container===null||this.container===void 0)return this._isOpened&&this._close(),!1;const u=this._isValidContainerElement(),s=!u||!document.contains(this.container);if(this._isOpened&&s&&this._close(),!u)return this.throwErrorAfterUpdateComplete(Tc),!1}return!0}update(a){a.has("content")&&(this._content=vo(this.content)),a.has("footer")&&(this._footer=vo(this.footer)),(a.has("header")||a.has("title"))&&(this._header=this.header?vo(this.header):this.title),super.update(a)}_isValidContainerElement(){return this.container instanceof HTMLElement}open(){if(!this._isValidContainerElement())return document.body.appendChild(this),requestAnimationFrame(()=>{document.body.removeChild(this)}),void this.performUpdate();this.container.appendChild(this),this.container.classList.add("kuc--has-dialog"),this.performUpdate(),this.setAttribute("opened",""),this._isOpened=!0,this._triggeredElement=document.activeElement,this._dialogEl&&this._dialogEl.focus()}close(){this._close(),Ot(this,"close")}_close(){this._isOpened=!1,document.getElementsByTagName("body")[0].classList.remove("kuc--has-dialog"),this.removeAttribute("opened"),this._triggeredElement instanceof HTMLElement&&this._triggeredElement.focus()}render(){return bt`
        <span
          class="kuc-dialog-1-18-0__first-dummy"
          tabIndex="0"
          @focus="${this._handleFocusFirstDummy}"
        ></span>
        <div
          class="kuc-dialog-1-18-0__dialog"
          role="dialog"
          tabindex="-1"
          aria-labelledby="${this._GUID}-title"
          aria-modal="true"
          @keydown="${this._handleKeyDownDialog}"
        >
          <div class="kuc-dialog-1-18-0__dialog__header">
            <h2
              class="kuc-dialog-1-18-0__dialog__header__title"
              id="${this._GUID}-title"
            >
              ${this._header}
            </h2>
            <button
              class="kuc-dialog-1-18-0__dialog__header__close-button"
              type="button"
              aria-label="close"
              @click="${this._handleClickCloseButton}"
            >
              ${this._getCloseButtonSvgTemplate()}
            </button>
          </div>
          <div class="kuc-dialog-1-18-0__dialog__content">
            <div class="kuc-dialog-1-18-0__dialog__content__icon">
              ${this._getIconTemplate()}
            </div>
            <div class="kuc-dialog-1-18-0__dialog__content__content">
              ${this._content}
            </div>
          </div>
          <div
            class="kuc-dialog-1-18-0__dialog__footer"
            ?hidden="${!this.footerVisible}"
          >
            ${this._footer}
          </div>
        </div>
        <span
          class="kuc-dialog-1-18-0__last-dummy"
          tabIndex="0"
          @focus="${this._handleFocusLastDummy}"
        ></span>
        <div class="kuc-dialog-1-18-0__mask"></div>
      `}}So([F({type:String})],b.prototype,"icon",void 0),So([F({type:String})],b.prototype,"title",void 0),So([F()],b.prototype,"content",void 0),So([F()],b.prototype,"footer",void 0),So([F()],b.prototype,"header",void 0),So([F()],b.prototype,"container",void 0),So([F({type:Boolean})],b.prototype,"footerVisible",void 0),So([se()],b.prototype,"_isOpened",void 0),So([qt(".kuc-dialog-1-18-0__dialog")],b.prototype,"_dialogEl",void 0),So([rn("a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type='text']:not([disabled]), input[type='radio']:not([disabled]), input[type='checkbox']:not([disabled]), select:not([disabled]),[tabindex='0']")],b.prototype,"_focusableElements",void 0),window.customElements.define("kuc-dialog-1-18-0",b),ue(`
  kuc-dialog-1-18-0,
  kuc-dialog-1-18-0 *,
  kuc-dialog-1-18-0:lang(en),
  kuc-dialog-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-dialog-1-18-0:lang(es),
  kuc-dialog-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-dialog-1-18-0:lang(ja),
  kuc-dialog-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-dialog-1-18-0:lang(zh),
  kuc-dialog-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-dialog-1-18-0:lang(zh-TW),
  kuc-dialog-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }

  kuc-dialog-1-18-0 {
    display: none;
  }

  kuc-dialog-1-18-0[opened] {
    display: block;
  }

  .kuc-dialog-1-18-0__dialog {
    min-width: 400px;
    max-width: var(--kuc-dialog-max-width, 600px);
    width: max-content;
    font-size: 20px;
    background-color: #ffffff;
    position: fixed;
    line-height: normal;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 10000;
  }
  
  .kuc-dialog-1-18-0__dialog:focus-visible {
    outline: 1px solid #3498db;
  }

  .kuc-dialog-1-18-0__dialog__header {
    min-height: 64px;
    border-bottom: 1px solid #e3e7e8;
    display: flex;
    justify-content: space-between;
  }

  .kuc-dialog-1-18-0__dialog__header__title {
    font-size: var(--kuc-dialog-header-font-size, 24px);
    color: var(--kuc-dialog-header-color);
    padding: 0 24px;
    align-self: center;
    overflow-wrap: anywhere;
    word-break: normal;
    font-weight: 400;
  }

  .kuc-dialog-1-18-0__dialog__header__close-button {
    width: 48px;
    height: 48px;
    border: none;
    background-color: #ffffff;
    margin-right: 12px;
    margin-top: 11px;
    cursor: pointer;
  }

  .kuc-dialog-1-18-0__dialog__header__close-button:focus-visible {
    outline: 1px solid #3498db;
  }

  .kuc-dialog-1-18-0__dialog__header__close-button-svg {
    vertical-align: middle;
  }

  .kuc-dialog-1-18-0__dialog__content {
    border-bottom: #e3e7e8 solid 1px;
    background-color: #f7f9fa;
    padding: 24px;
    display: flex;
    overflow: auto;
  }

  .kuc-dialog-1-18-0__dialog__content__content {
    line-height: 1.2;
    overflow-wrap: anywhere;
    word-break: normal;
  }

  .kuc-dialog-1-18-0__dialog__content__icon-info,
  .kuc-dialog-1-18-0__dialog__content__icon-success,
  .kuc-dialog-1-18-0__dialog__content__icon-error,
  .kuc-dialog-1-18-0__dialog__content__icon-warning,
  .kuc-dialog-1-18-0__dialog__content__icon-question {
    margin-right: 16px;
    width: 24px;
    height: 24px;
  }

  .kuc-dialog-1-18-0__dialog__footer {
    padding: 24px;
    overflow-wrap: anywhere;
    word-break: normal;
  }

  .kuc-dialog-1-18-0__dialog__footer[hidden] {
    display: none;
  }

  .kuc-dialog-1-18-0__mask {
    position: fixed;
    top: 0;
    right: 0;
    display: block;
    width: 100%;
    height: 100%;
    background-color: #000000;
    opacity: 0.6;
    z-index: 9999;
  }

  .kuc--has-dialog {
    overflow: hidden;
  }

  .kuc--has-dialog .kuc-dialog-1-18-0__dialog {
    overflow-x: hidden;
    overflow-y: auto;
    max-height: 80vh;
  }
`),Vh=b}})();var fi=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let zc;(()=>{if(zc=window.customElements.get("kuc-dropdown-1-18-0"),!zc){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.value="",this.selectedIndex=-1,this.disabled=!1,this.requiredIcon=!1,this.visible=!0,this.items=[],this._selectorVisible=!1,this._DISABLED_CLASS="kuc-dropdown-1-18-0__group__select-menu__item--disabled",this._hasValueInItems=!1,this._GUID=ti();const u=ze(a);this._handleClickDocument=this._handleClickDocument.bind(this),this._setInitialValue(u),Object.assign(this,u)}_setInitialValue(a){!("value"in a)&&"selectedIndex"in a&&(this.value=this._getValue(a)||"")}_getSelectedLabel(){const a=this.items.filter((u,s)=>this._isCheckedItem(u,s));return a.length===0?"":a[0].label===void 0?a[0].value:a[0].label}_getToggleIconSvgTemplate(){return Ce`
      <svg
        width="36"
        height="36"
        viewBox="0 0 36 36"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M24.2122 15.6665L25 16.1392L19.7332 21.4998H18.2668L13 16.1392L13.7878 15.6665L18.765 20.6866H19.235L24.2122 15.6665Z"
          fill="#3498db"/>
      </svg>
    `}shouldUpdate(a){return a.has("items")&&!Xe(this.items)?(this.throwErrorAfterUpdateComplete(bo),!1):a.has("value")&&!as(this.value)?(this.throwErrorAfterUpdateComplete(os),!1):!(a.has("selectedIndex")&&!fa(this.selectedIndex)&&(this.throwErrorAfterUpdateComplete(Ic),1))}willUpdate(a){if((a.has("items")||a.has("value"))&&(this._hasValueInItems=this.items.some(u=>u.value===this.value)),a.has("value")){if(this.value!==""||this._hasValueInItems)return;this.selectedIndex=-1}}update(a){(a.has("items")||a.has("value")||a.has("selectedIndex"))&&(this.selectedIndex=this._getSelectedIndex(),this.value=this._getValue({items:this.items,selectedIndex:this.selectedIndex})||""),super.update(a)}_getSelectedIndex(){if(!this.value&&!this._hasValueInItems)return this.items[this.selectedIndex]?this.selectedIndex:-1;const a=this.items.findIndex(s=>s.value===this.value);if(a===-1)return-1;const u=this.items.findIndex((s,T)=>s.value===this.value&&T===this.selectedIndex);return u>-1?u:a}_getValue(a){const u=(a.items||[])[a.selectedIndex===0||a.selectedIndex?a.selectedIndex:-1];return u?u.value:""}render(){return bt`
        <div class="kuc-dropdown-1-18-0__group">
          <div
            class="kuc-dropdown-1-18-0__group__label"
            id="${this._GUID}-label"
            ?hidden="${!this.label}"
          >
            <kuc-base-label-1-18-0
              .text="${this.label}"
              .requiredIcon="${this.requiredIcon}"
            ></kuc-base-label-1-18-0>
          </div>
          <button
            class="kuc-dropdown-1-18-0__group__toggle"
            id="${this._GUID}-toggle"
            type="button"
            aria-haspopup="true"
            aria-labelledby="${this._GUID}-label ${this._GUID}-toggle"
            aria-describedby="${this._GUID}-error"
            aria-required="${this.requiredIcon}"
            ?disabled="${this.disabled}"
            @mouseup="${this._handleMouseUpDropdownToggle}"
            @mousedown="${this._handleMouseDownDropdownToggle}"
            @click="${this._handleClickDropdownToggle}"
            @keydown="${this._handleKeyDownDropdownToggle}"
          >
            <span class="kuc-dropdown-1-18-0__group__toggle__selected-item-label"
              >${this._getSelectedLabel()}</span
            >
            <span class="kuc-dropdown-1-18-0__group__toggle__icon">
              ${this._getToggleIconSvgTemplate()}
            </span>
          </button>
          <ul
            class="kuc-dropdown-1-18-0__group__select-menu"
            role="listbox"
            aria-hidden="${!this._selectorVisible}"
            ?hidden="${!this._selectorVisible}"
            @mouseleave="${this._handleMouseLeaveMenu}"
            @mousedown="${this._handleMouseDownMenu}"
          >
            ${this.items.map((a,u)=>this._getItemTemplate(a,u))}
          </ul>
          <kuc-base-error-1-18-0
            .text="${this.error}"
            .guid="${this._GUID}"
            ?hidden="${!this.error}"
            ariaLive="assertive"
          ></kuc-base-error-1-18-0>
        </div>
      `}firstUpdated(){window.addEventListener("resize",()=>{this._actionResizeScrollWindow()}),window.addEventListener("scroll",()=>{this._actionResizeScrollWindow()})}async updated(){await this.updateComplete,this._selectorVisible?(this._setMenuPosition(),this._scrollToView(),setTimeout(()=>{document.addEventListener("click",this._handleClickDocument,!0)},1)):setTimeout(()=>{document.removeEventListener("click",this._handleClickDocument,!0)},1)}_handleMouseDownDropdownItem(a){const u=this._getItemElementWhenMouseOverDown(a.target),s=u.getAttribute("value"),T=u.dataset.index||"0";this._actionUpdateValue(s,T)}_handleMouseOverDropdownItem(a){const u=this._getItemElementWhenMouseOverDown(a.target);this._actionHighlightMenuItem(u)}_handleMouseLeaveMenu(){this._actionClearAllHighlightMenuItem()}_handleMouseDownMenu(a){a.preventDefault()}_handleMouseDownDropdownToggle(a){a.preventDefault()}_handleMouseUpDropdownToggle(a){a.preventDefault()}_handleClickDropdownToggle(a){a.stopPropagation(),this._actionToggleMenu()}_handleClickDocument(a){(a.target===this._buttonEl||this._buttonEl.contains(a.target))&&a.stopPropagation(),Array.from(this._disabledItemsEl).some(u=>u===a.target||u.contains(a.target))||this._actionHideMenu()}_handleKeyDownDropdownToggle(a){switch(a.key){case"Up":case"ArrowUp":if(a.preventDefault(),this.items.length===0)break;if(!this._selectorVisible){this._actionShowMenu();break}this._actionHighlightPrevMenuItem();break;case"Tab":this._selectorVisible&&this._actionHideMenu();break;case"Down":case"ArrowDown":if(a.preventDefault(),this.items.length===0)break;if(!this._selectorVisible){this._actionShowMenu();break}this._actionHighlightNextMenuItem();break;case"Enter":{if(a.preventDefault(),this.items.length===0)break;if(!this._selectorVisible){this._actionShowMenu();break}const{value:u,selectedIndex:s}=this._getInfoHighlightItem();if(u===null)break;this._actionUpdateValue(u,s),this._actionHideMenu();break}case"Escape":a.preventDefault(),this._selectorVisible&&a.stopPropagation(),this._actionHideMenu();break;case"Home":this._selectorVisible&&(a.preventDefault(),this._actionHighlightFirstMenuItem());break;case"End":this._selectorVisible&&(a.preventDefault(),this._actionHighlightLastMenuItem())}}_getInfoHighlightItem(){const a=this._highlightItemEl;return a===null?{value:null,selectedIndex:"-1"}:{value:a.getAttribute("value"),selectedIndex:a.dataset.index||"0"}}_actionShowMenu(){this._buttonEl.focus(),this.items.length!==0&&(this._selectorVisible=!0,this._selectedItemEl===null||this._selectedItemEl.classList.contains(this._DISABLED_CLASS)||this._setHighlightAndActiveDescendantMenu(this._selectedItemEl))}_actionHideMenu(){this._selectorVisible=!1,this._actionRemoveActiveDescendant()}_actionToggleMenu(){this.items.length!==0&&(this._selectorVisible?this._actionHideMenu():this._actionShowMenu())}_actionHighlightFirstMenuItem(){let a=this._firstItemEl,u=!1;for(let s=0;s<this.items.length&&(u=a.classList.contains(this._DISABLED_CLASS),u);s++)a=a.nextElementSibling;!u&&this._setHighlightAndActiveDescendantMenu(a)}_actionHighlightLastMenuItem(){let a=this._lastItemEl,u=!1;for(let s=0;s<this.items.length&&(u=a.classList.contains(this._DISABLED_CLASS),u);s++)a=a.previousElementSibling;!u&&this._setHighlightAndActiveDescendantMenu(a)}_actionHighlightPrevMenuItem(){let a=null;this._highlightItemEl!==null&&(a=this._highlightItemEl.previousElementSibling),a===null&&(a=this._lastItemEl);let u=!1;for(let s=0;s<this.items.length&&(u=a.classList.contains(this._DISABLED_CLASS),u);s++)a=a.previousElementSibling,a===null&&(a=this._lastItemEl);!u&&this._setHighlightAndActiveDescendantMenu(a)}_actionHighlightNextMenuItem(){let a=null;this._highlightItemEl!==null&&(a=this._highlightItemEl.nextElementSibling),a===null&&(a=this._firstItemEl);let u=!1;for(let s=0;s<this.items.length&&(u=a.classList.contains(this._DISABLED_CLASS),u);s++)a=a.nextElementSibling,a===null&&(a=this._firstItemEl);!u&&this._setHighlightAndActiveDescendantMenu(a)}_actionClearAllHighlightMenuItem(){this._itemsEl.forEach(a=>{a.classList.remove("kuc-dropdown-1-18-0__group__select-menu__highlight")}),this._actionRemoveActiveDescendant()}_setHighlightAndActiveDescendantMenu(a){this._actionHighlightMenuItem(a),this._actionSetActiveDescendant(a.id),this._scrollToView()}_actionHighlightMenuItem(a){this._actionClearAllHighlightMenuItem(),a.classList.add("kuc-dropdown-1-18-0__group__select-menu__highlight")}_actionUpdateValue(a,u){const s=parseInt(u,10);if(this.value===a&&this.selectedIndex===s)return;const T={oldValue:this.value,value:a};this.value=a,this.selectedIndex=s,Ot(this,"change",T)}_actionSetActiveDescendant(a){a!==void 0&&this._buttonEl!==null&&this._buttonEl.setAttribute("aria-activedescendant",a)}_actionRemoveActiveDescendant(){this._buttonEl.removeAttribute("aria-activedescendant")}_getScrollbarWidthHeight(){const a=document.createElement("div");a.style.cssText="overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(a);const u=a.offsetWidth-a.clientWidth,s=a.offsetHeight-a.clientHeight;return document.body.removeChild(a),{scrollbarWidth:u,scrollbarHeight:s}}_getDistanceToggleButton(){const{scrollbarWidth:a,scrollbarHeight:u}=this._getScrollbarWidthHeight(),s=document.body.scrollHeight>window.innerHeight,T=document.body.scrollWidth>window.innerWidth;return{toTop:this._buttonEl.getBoundingClientRect().top,toBottom:window.innerHeight-this._buttonEl.getBoundingClientRect().bottom-(T?u:0),toLeft:this._buttonEl.getBoundingClientRect().left,toRight:window.innerWidth-this._buttonEl.getBoundingClientRect().left-(s?a:0)}}_setMenuPositionAboveOrBelow(){this._menuEl.style.height="auto",this._menuEl.style.bottom="auto",this._menuEl.style.overflowY="";const a=this._menuEl.getBoundingClientRect().height,u=this._getDistanceToggleButton();if(!(u.toBottom>=a))if(u.toBottom<u.toTop){const s=this._errorEl.offsetHeight?this._errorEl.offsetHeight+16:0;if(this._menuEl.style.bottom=`${this._buttonEl.offsetHeight+s}px`,u.toTop>=a)return;this._menuEl.style.height=`${u.toTop}px`,this._menuEl.style.overflowY="scroll"}else this._menuEl.style.height=`${u.toBottom}px`,this._menuEl.style.overflowY="scroll"}_setMenuPositionLeftOrRight(){this._menuEl.style.right="auto";const a=this._menuEl.getBoundingClientRect().width,u=this._getDistanceToggleButton();if(u.toRight>=a||u.toLeft<a||u.toRight<0)return;const s=this._buttonEl.offsetWidth-u.toRight;this._menuEl.style.right=s>0?`${s}px`:"0px"}_setMenuPosition(){this._setMenuPositionAboveOrBelow(),this._setMenuPositionLeftOrRight()}_scrollToView(){if(!this._highlightItemEl||!this._menuEl)return;const a=this._menuEl.getBoundingClientRect(),u=this._highlightItemEl.getBoundingClientRect();u.top<a.top&&(this._menuEl.scrollTop-=a.top-u.top),a.bottom<u.bottom&&(this._menuEl.scrollTop+=u.bottom-a.bottom)}_actionResizeScrollWindow(){!this._timeoutID&&this._selectorVisible&&(this._timeoutID=window.setTimeout(()=>{this._timeoutID=null,this._setMenuPosition()},50))}_isCheckedItem(a,u){return this.value?a.value===this.value&&this.selectedIndex===u:this.selectedIndex===u}_getItemTemplate(a,u){const s=this._isCheckedItem(a,u);return bt`
        <li
          class="kuc-dropdown-1-18-0__group__select-menu__item ${a.disabled?this._DISABLED_CLASS:""}"
          role="option"
          tabindex="${!a.disabled&&s?"0":"-1"}"
          aria-selected="${s?"true":"false"}"
          data-index="${u}"
          value="${a.value!==void 0?a.value:""}"
          id="${this._GUID}-menuitem-${u}"
          @mousedown="${a.disabled?null:this._handleMouseDownDropdownItem}"
          @mouseover="${a.disabled?null:this._handleMouseOverDropdownItem}"
        >
          ${this._getDropdownIconSvgTemplate(s,!!a.disabled)}
          ${a.label===void 0?a.value:a.label}
        </li>
      `}_getDropdownIconSvgTemplate(a,u){return Ce`
      ${a?Ce`<svg
          class="kuc-dropdown-1-18-0__group__select-menu__item__icon"
          width="11"
          height="9"
          viewBox="0 0 11 9"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M0 5L1.5 3L4.5 5.5L9.5 0L11 1.5L4.5 8.5L0 5Z"
            fill="${u?"#888888":"#3498db"}"/>
        </svg>`:""}`}_getItemElementWhenMouseOverDown(a){return a.classList.value.split(" ").includes("kuc-dropdown-1-18-0__group__select-menu__item")?a:this._getItemElementWhenMouseOverDown(a.parentElement)}}fi([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),fi([F({type:String})],b.prototype,"error",void 0),fi([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),fi([F({type:String})],b.prototype,"label",void 0),fi([F({type:String})],b.prototype,"value",void 0),fi([F({type:Number})],b.prototype,"selectedIndex",void 0),fi([F({type:Boolean})],b.prototype,"disabled",void 0),fi([F({type:Boolean})],b.prototype,"requiredIcon",void 0),fi([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),fi([F({type:Array})],b.prototype,"items",void 0),fi([se()],b.prototype,"_selectorVisible",void 0),fi([qt(".kuc-dropdown-1-18-0__group__select-menu")],b.prototype,"_menuEl",void 0),fi([rn(".kuc-dropdown-1-18-0__group__select-menu__item")],b.prototype,"_itemsEl",void 0),fi([qt("button.kuc-dropdown-1-18-0__group__toggle")],b.prototype,"_buttonEl",void 0),fi([qt(".kuc-dropdown-1-18-0__group__select-menu__item")],b.prototype,"_firstItemEl",void 0),fi([qt(".kuc-dropdown-1-18-0__group__select-menu__item:last-child")],b.prototype,"_lastItemEl",void 0),fi([qt(".kuc-dropdown-1-18-0__group__select-menu__item[aria-selected=true]")],b.prototype,"_selectedItemEl",void 0),fi([qt(".kuc-dropdown-1-18-0__group__select-menu__highlight")],b.prototype,"_highlightItemEl",void 0),fi([rn(".kuc-dropdown-1-18-0__group__select-menu__item--disabled")],b.prototype,"_disabledItemsEl",void 0),fi([qt(".kuc-base-error-1-18-0__error")],b.prototype,"_errorEl",void 0),window.customElements.define("kuc-dropdown-1-18-0",b),ue(`
  kuc-dropdown-1-18-0,
  kuc-dropdown-1-18-0 *,
  kuc-dropdown-1-18-0:lang(en),
  kuc-dropdown-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-dropdown-1-18-0:lang(es),
  kuc-dropdown-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-dropdown-1-18-0:lang(ja),
  kuc-dropdown-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-dropdown-1-18-0:lang(zh),
  kuc-dropdown-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-dropdown-1-18-0:lang(zh-TW),
  kuc-dropdown-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  kuc-dropdown-1-18-0 {
    display: inline-table;
    font-size: 14px;
    color: #333333;
    vertical-align: top;
    width: var(--kuc-dropdown-toggle-width, 180px);
    min-width: var(--kuc-dropdown-toggle-width, 180px);
    line-height: 1.5;
  }
  kuc-dropdown-1-18-0[hidden] {
    display: none;
  }
  .kuc-dropdown-1-18-0__group {
    border: none;
    padding: 0px;
    height: auto;
    display: inline-block;
    width: 100%;
    margin: 0px;
    position: relative;
  }
  .kuc-dropdown-1-18-0__group__label {
    padding: 4px 0px 8px 0px;
    display: inline-block;
    white-space: nowrap;
  }
  .kuc-dropdown-1-18-0__group__label[hidden] {
    display: none;
  }
  .kuc-dropdown-1-18-0__group__toggle {
    height: var(--kuc-dropdown-toggle-height, 40px);
    box-sizing: border-box;
    box-shadow: 1px 1px 1px #ffffff inset;
    border: 1px solid #e3e7e8;
    color: var(--kuc-dropdown-toggle-color, #3498db);
    background-color: #f7f9fa;
    padding: 0 0 0 24px;
    display: grid;
    grid: auto / auto-flow;
    align-items: center;
    align-content: center;
    justify-content: space-between;
    width: var(--kuc-dropdown-toggle-width, 100%);
    cursor: pointer;
  }
  .kuc-dropdown-1-18-0__group__toggle:focus {
    outline: none;
    border: 1px solid #3498db;
  }
  .kuc-dropdown-1-18-0__group__toggle:disabled {
    background-color: #d4d7d7;
    box-shadow: none;
    cursor: not-allowed;
    color: #888888;
  }
  .kuc-dropdown-1-18-0__group__toggle__selected-item-label {
    font-size: var(--kuc-dropdown-font-size, 14px);
    text-align: left;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .kuc-dropdown-1-18-0__group__toggle__icon {
    flex: none;
    width: 38px;
    height: 38px;
  }
  .kuc-dropdown-1-18-0__group__select-menu {
    position: absolute;
    min-width: 280px;
    margin: 0;
    padding: 8px 0;
    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
    background-color: #ffffff;
    z-index: 2000;
    list-style: none;
    box-sizing: border-box;
  }
  .kuc-dropdown-1-18-0__group__select-menu[hidden] {
    display: none;
  }
  .kuc-dropdown-1-18-0__group__select-menu__item {
    padding: 8px 16px 8px 24px;
    line-height: 1;
    position: relative;
    cursor: pointer;
    white-space: nowrap;
    color: var(--kuc-dropdown-menu-color, #333333);
    font-size: var(--kuc-dropdown-font-size, 14px);
  }
  .kuc-dropdown-1-18-0__group__select-menu__item__icon {
    position: absolute;
    top: 50%;
    left: 6px;
    margin-top: -5px;
  }
  .kuc-dropdown-1-18-0__group__select-menu__item[aria-selected="true"] {
    color: var(--kuc-dropdown-menu-color-selected, #3498db);
  }
  .kuc-dropdown-1-18-0__group__select-menu__highlight[role="option"] {
    background-color: #e2f2fe;
  }
  .kuc-dropdown-1-18-0__group__select-menu__item--disabled,
  .kuc-dropdown-1-18-0__group__select-menu__item--disabled[aria-selected="true"] {
    background-color: #d4d7d7;
    cursor: not-allowed;
    color: #888888;
  }
`),zc=b}})();const D1=zc;var Io=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};const Lc=517;let Fh;(()=>{if(Fh=window.customElements.get("kuc-field-group-1-18-0"),!Fh){class b extends ce{constructor(a){super(),this.className="",this.content="",this.id="",this.label="",this.disabled=!1,this.expanded=!1,this.visible=!0,this._content="",this._GUID=ti();const u=ze(a);Object.assign(this,u)}update(a){a.has("content")&&(this._content=vo(this.content)),super.update(a)}render(){return bt`
        <div
          class="kuc-field-group-1-18-0__group"
          role="group"
          aria-labelledby="${this._GUID}-control"
        >
          <button
            type="button"
            id="${this._GUID}-control"
            class="kuc-field-group-1-18-0__group__toggle"
            aria-controls="${this._GUID}-body"
            aria-expanded="${this.expanded&&!this.disabled}"
            ?disabled="${this.disabled}"
            @click="${this._handleClickButton}"
            @keydown="${this._handleKeyDownButton}"
          >
            ${this._getSvgTemplate()}
            <kuc-base-label-1-18-0
              .text="${this.label}"
              .requiredIcon="${!1}"
            ></kuc-base-label-1-18-0>
          </button>
          <div
            id="${this._GUID}-body"
            class="kuc-field-group-1-18-0__group__body"
            ?hidden="${!this.expanded||this.disabled}"
            @change="${this._handleChangeBody}"
          >
            ${this._content}
          </div>
        </div>
      `}updated(a){a.has("content")&&(this._groupEl.style.minWidth=Lc+"px",requestAnimationFrame(()=>{this._updateContainerWidth()}))}_updateContainerWidth(){if(!this._bodyEl)return;const a=this._bodyEl.hasAttribute("hidden");a&&this._bodyEl.removeAttribute("hidden");const u=this._bodyEl.offsetWidth;a&&this._bodyEl.setAttribute("hidden",""),u<=Lc||(this._groupEl.style.minWidth=u+"px")}_getSvgTemplate(){return this.expanded?bt`<svg
            width="13"
            height="8"
            viewBox="0 0 13 8"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M11.7122 0.5L12.5 1.03608L7.23318 7.11548L5.76682 7.11548L0.5 1.03608L1.2878 0.5L6.26504 6.19318L6.73496 6.19318L11.7122 0.5Z"
              fill="#939393"
            />
          </svg>`:bt`<svg
            width="8"
            height="13"
            viewBox="0 0 8 13"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M0.5 1.2878L1.03608 0.5L7.11548 5.76682V7.23318L1.03608 12.5L0.5 11.7122L6.19318 6.73496V6.26504L0.5 1.2878Z"
              fill="#939393"
            />
          </svg> `}_handleChangeBody(a){a.stopPropagation()}_handleKeyDownButton(a){a.key!=="Tab"&&(a.preventDefault(),a.key!=="Enter"&&a.key!==" "||this._handleClickButton(a))}_handleClickButton(a){if(a.target!==document.activeElement&&this._toggle.focus(),this.expanded){const s=this._bodyEl.getBoundingClientRect().width;s>Lc&&(this._groupEl.style.minWidth=s+"px")}else this._groupEl.style.minWidth=Lc+"px";this.expanded=!this.expanded;const u={expanded:this.expanded};Ot(this,"change",u)}}Io([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),Io([F()],b.prototype,"content",void 0),Io([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),Io([F({type:String})],b.prototype,"label",void 0),Io([F({type:Boolean})],b.prototype,"disabled",void 0),Io([F({type:Boolean})],b.prototype,"expanded",void 0),Io([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),Io([qt(".kuc-field-group-1-18-0__group")],b.prototype,"_groupEl",void 0),Io([qt(".kuc-field-group-1-18-0__group__body")],b.prototype,"_bodyEl",void 0),Io([qt(".kuc-field-group-1-18-0__group__toggle")],b.prototype,"_toggle",void 0),window.customElements.define("kuc-field-group-1-18-0",b),ue(`
  kuc-field-group-1-18-0 .kuc-field-group-1-18-0__group__toggle .kuc-base-label-1-18-0__text,
  kuc-field-group-1-18-0:lang(en) .kuc-field-group-1-18-0__group__toggle .kuc-base-label-1-18-0__text {
    font-family: sans-serif;
  }
  kuc-field-group-1-18-0:lang(es) .kuc-field-group-1-18-0__group__toggle .kuc-base-label-1-18-0__text {
    font-family: sans-serif;
  }
  kuc-field-group-1-18-0:lang(ja) .kuc-field-group-1-18-0__group__toggle .kuc-base-label-1-18-0__text {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-field-group-1-18-0:lang(zh) .kuc-field-group-1-18-0__group__toggle .kuc-base-label-1-18-0__text {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-field-group-1-18-0:lang(zh-TW) .kuc-field-group-1-18-0__group__toggle .kuc-base-label-1-18-0__text {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  kuc-field-group-1-18-0 {
    display: inline-table;
  }
  kuc-field-group-1-18-0[hidden] {
    display: none;
  }
  .kuc-field-group-1-18-0__group {
    min-width: 517px;
    padding: 0px 8px;
    border: 1px solid #e3e7e8;
    background-color: #f5f5f5;
  }
  .kuc-field-group-1-18-0__group h3 {
    margin: 0px;
    padding: 0px;
  }
  .kuc-field-group-1-18-0__group__toggle {
    display: flex;
    align-items: center;
    border-style: none;
    position: relative;
    outline: none;
    margin: 12px 0px 12px 8px;
    min-height: 34px;
    padding: 4px 8px 4px 24px;
    color: #333333;
    font-size: 16px;
    cursor: pointer;
    border: 1px solid transparent;
    background-color: inherit;
    line-height: 1.5;
  }
  .kuc-field-group-1-18-0__group__toggle:disabled {
    color: rgba(0, 0, 0, 0.25);
    cursor: not-allowed;
  }
  .kuc-field-group-1-18-0__group__toggle:disabled .kuc-base-label-1-18-0__text {
    color: rgba(0, 0, 0, 0.25);
    cursor: not-allowed;
  }
  .kuc-field-group-1-18-0__group__toggle .kuc-base-label-1-18-0__text {
    font-size: 16px;
  }
  .kuc-field-group-1-18-0__group__toggle:disabled:focus {
    outline: 0;
    border: 1px solid transparent;
  }
  .kuc-field-group-1-18-0__group__toggle:focus {
    outline: 0;
    border: 1px solid #3498db;
  }
  .kuc-field-group-1-18-0__group__toggle svg {
    position: absolute;
    left: 8px;
  }
  .kuc-field-group-1-18-0__group__body {
    padding: 0px 8px;
    margin-left: 0px;
    white-space: nowrap;
    word-wrap: normal;
    margin-bottom: 12px;
  }
`),Fh=b}})();var Zi=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Oh;(()=>{if(Oh=window.customElements.get("kuc-multi-choice-1-18-0"),!Oh){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.disabled=!1,this.requiredIcon=!1,this.visible=!0,this.items=[],this.selectedIndex=[],this.value=[],this._valueMapping={},this._DISABLED_CLASS="kuc-multi-choice-1-18-0__group__menu__item--disabled",this._GUID=ti();const u=ze(a);this._setInitialValue(u),Object.assign(this,u)}_setInitialValue(a){const u="value"in a,s="selectedIndex"in a,T=a.selectedIndex||[];if(!u&&s){if(!Xe(T))return;const k=this._getValueMapping(a);this.value=this._getValidValue(k,T)}}shouldUpdate(a){return a.has("items")&&!Xe(this.items)?(this.throwErrorAfterUpdateComplete(bo),!1):a.has("value")&&!Xe(this.value)?(this.throwErrorAfterUpdateComplete(kc),!1):!(a.has("selectedIndex")&&!Xe(this.selectedIndex)&&(this.throwErrorAfterUpdateComplete(Sc),1))}willUpdate(a){if(a.has("value")){if(this.value.length>0)return;this.selectedIndex=[]}}update(a){(a.has("items")||a.has("value")||a.has("selectedIndex"))&&(this._valueMapping=this._getValueMapping({items:this.items,value:this.value,selectedIndex:this.selectedIndex}),this._setValueAndSelectedIndex()),super.update(a)}render(){return bt`
        <div class="kuc-multi-choice-1-18-0__group">
          <div
            class="kuc-multi-choice-1-18-0__group__label"
            id="${this._GUID}-label"
            ?hidden="${!this.label}"
          >
            <kuc-base-label-1-18-0
              .text="${this.label}"
              .requiredIcon="${this.requiredIcon}"
            ></kuc-base-label-1-18-0>
          </div>
          <div
            class="kuc-multi-choice-1-18-0__group__menu"
            role="listbox"
            aria-multiselectable="true"
            aria-describedby="${this._GUID}-error"
            aria-labelledby="${this._GUID}-label"
            ?disabled="${this.disabled}"
            tabindex="${this.disabled?"-1":"0"}"
            @keydown="${this._handleKeyDownMultiChoice}"
          >
            ${this.items.map((a,u)=>this._getMenuItemTemplate(a,u))}
          </div>
          <kuc-base-error-1-18-0
            .text="${this.error}"
            .guid="${this._GUID}"
            ?hidden="${!this.error}"
            ariaLive="assertive"
          ></kuc-base-error-1-18-0>
        </div>
      `}_getValueMapping(a){const u=a.items||[],s=a.value||[],T=a.selectedIndex||[],k=u.map(J=>J.value||""),$=Object.assign({},k),X={};if(s.length===0){const J=this._getValidValue($,T);return T.forEach((Zt,St)=>X[Zt]=J[St]),X}return this._getValidSelectedIndex($).forEach((J,Zt)=>X[J]=s[Zt]),X}_getValidValue(a,u){return u.filter(s=>a[s]).map(s=>a[s])}_getValidSelectedIndex(a){const u=[];for(let s=0;s<this.value.length;s++){const T=this.selectedIndex[s];if(a[T]===this.value[s]){u.push(T);continue}const k=this.items.findIndex($=>$.value===this.value[s]);u.push(k)}return u}_setValueAndSelectedIndex(){this.value=Object.values(this._valueMapping),this.selectedIndex=Object.keys(this._valueMapping).map(a=>parseInt(a,10))}_handleMouseDownMultiChoiceItem(a){if(this.disabled)return;const u=a.target,s=u.getAttribute("value"),T=u.dataset.index||"0";this._handleChangeValue(s,T)}_handleMouseOverMultiChoiceItem(a){if(this.disabled)return;this._itemsEl.forEach(s=>{s.classList.contains("kuc-multi-choice-1-18-0__group__menu__highlight")&&s.classList.remove("kuc-multi-choice-1-18-0__group__menu__highlight")});const u=a.currentTarget;u.classList.add("kuc-multi-choice-1-18-0__group__menu__highlight"),this._setActiveDescendant(u.id)}_handleMouseLeaveMultiChoiceItem(a){this.disabled||(a.currentTarget.classList.remove("kuc-multi-choice-1-18-0__group__menu__highlight"),this._setActiveDescendant())}_handleKeyDownMultiChoice(a){if(!this.disabled)switch(a.key){case"Up":case"ArrowUp":if(a.preventDefault(),this.items.length===0)break;this._actionHighlightPrevMenuItem();break;case"Down":case"ArrowDown":if(a.preventDefault(),this.items.length===0)break;this._actionHighlightNextMenuItem();break;case"Spacebar":case" ":a.preventDefault(),this._actionUpdateValue()}}_actionHighlightPrevMenuItem(){let a=null;this._highlightItemEl!==null&&(a=this._highlightItemEl.previousElementSibling),a===null&&(a=this._lastItemEl,this._highlightItemEl===null&&(a=this._firstItemEl));let u=!1;this._actionClearAllHighlightMenuItem();for(let s=0;s<this._itemsEl.length&&(u=a.classList.contains(this._DISABLED_CLASS),u);s++)a=a.previousElementSibling,a===null&&(a=this._lastItemEl);u||(a.classList.add("kuc-multi-choice-1-18-0__group__menu__highlight"),this._setActiveDescendant(a.id))}_actionHighlightNextMenuItem(){let a=null;this._highlightItemEl!==null&&(a=this._highlightItemEl.nextElementSibling),a===null&&(a=this._firstItemEl);let u=!1;this._actionClearAllHighlightMenuItem();for(let s=0;s<this._itemsEl.length&&(u=a.classList.contains(this._DISABLED_CLASS),u);s++)a=a.nextElementSibling,a===null&&(a=this._firstItemEl);u||(a.classList.add("kuc-multi-choice-1-18-0__group__menu__highlight"),this._setActiveDescendant(a.id))}_actionClearAllHighlightMenuItem(){this._itemsEl.forEach(a=>{a.classList.remove("kuc-multi-choice-1-18-0__group__menu__highlight")})}_actionUpdateValue(){this._itemsEl.forEach(a=>{if(a.classList.contains("kuc-multi-choice-1-18-0__group__menu__highlight")){const u=a.getAttribute("value"),s=a.dataset.index||"0";this._handleChangeValue(u,s)}})}_getMultiChoiceCheckedIconSvgTemplate(a,u){return Ce`
        ${u?Ce`<svg
            class="kuc-multi-choice-1-18-0__group__menu__item__icon"
            width="11"
            height="9"
            viewBox="0 0 11 9"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M0 5L1.5 3L4.5 5.5L9.5 0L11 1.5L4.5 8.5L0 5Z"
              fill="${a?"#888888":"#3498db"}"
            />
          </svg>`:""}`}_isCheckedItem(a,u){const s=Object.values(this._valueMapping),T=Object.keys(this._valueMapping);return s.filter((k,$)=>k===a.value&&u===parseInt(T[$],10)).length>0}_getMenuItemTemplate(a,u){const s=this._isCheckedItem(a,u),T=a.disabled||this.disabled;return bt`
        <div
          class="kuc-multi-choice-1-18-0__group__menu__item ${T?this._DISABLED_CLASS:""}"
          role="option"
          aria-selected="${s}"
          aria-required="${this.requiredIcon}"
          data-index="${u}"
          value="${a.value!==void 0?a.value:""}"
          id="${this._GUID}-menuitem-${u}"
          @mousedown="${T?null:this._handleMouseDownMultiChoiceItem}"
          @mouseover="${T?null:this._handleMouseOverMultiChoiceItem}"
          @mouseleave="${T?null:this._handleMouseLeaveMultiChoiceItem}"
        >
          ${this._getMultiChoiceCheckedIconSvgTemplate(T,s)}
          ${a.label===void 0?a.value:a.label}
        </div>
      `}_setActiveDescendant(a){a!==void 0&&this._menuEl!==null?this._menuEl.setAttribute("aria-activedescendant",a):this._menuEl.removeAttribute("aria-activedescendant")}_handleChangeValue(a,u){const s=this.value?[...this.value]:this.value,T=this._getNewValueMapping(a,u),k=this.items.map(J=>J.value),$=Object.values(T).filter(J=>k.indexOf(J)>-1);if($===s)return;const X=Object.keys(T).map(J=>parseInt(J,10));this.value=$,this.selectedIndex=X,Ot(this,"change",{oldValue:s,value:$})}_getNewValueMapping(a,u){const s=parseInt(u,10),T=Object.keys(this._valueMapping),k={...this._valueMapping};return T.indexOf(u)>-1?(delete k[s],k):(k[s]=a,k)}}Zi([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),Zi([F({type:String})],b.prototype,"error",void 0),Zi([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),Zi([F({type:String})],b.prototype,"label",void 0),Zi([F({type:Boolean})],b.prototype,"disabled",void 0),Zi([F({type:Boolean})],b.prototype,"requiredIcon",void 0),Zi([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),Zi([F({type:Array})],b.prototype,"items",void 0),Zi([F({type:Array})],b.prototype,"selectedIndex",void 0),Zi([F({type:Array})],b.prototype,"value",void 0),Zi([qt(".kuc-multi-choice-1-18-0__group__menu")],b.prototype,"_menuEl",void 0),Zi([rn(".kuc-multi-choice-1-18-0__group__menu__item")],b.prototype,"_itemsEl",void 0),Zi([qt(".kuc-multi-choice-1-18-0__group__menu__item")],b.prototype,"_firstItemEl",void 0),Zi([qt(".kuc-multi-choice-1-18-0__group__menu__item:last-child")],b.prototype,"_lastItemEl",void 0),Zi([qt(".kuc-multi-choice-1-18-0__group__menu__highlight")],b.prototype,"_highlightItemEl",void 0),Zi([se()],b.prototype,"_valueMapping",void 0),window.customElements.define("kuc-multi-choice-1-18-0",b),ue(`
  kuc-multi-choice-1-18-0,
  kuc-multi-choice-1-18-0 *,
  kuc-multi-choice-1-18-0:lang(en),
  kuc-multi-choice-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-multi-choice-1-18-0:lang(es),
  kuc-multi-choice-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-multi-choice-1-18-0:lang(ja),
  kuc-multi-choice-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-multi-choice-1-18-0:lang(zh),
  kuc-multi-choice-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-multi-choice-1-18-0:lang(zh-TW),
  kuc-multi-choice-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  kuc-multi-choice-1-18-0 {
    display: inline-table;
    font-size: 14px;
    color: var(--kuc-multi-choice-menu-color, #333333);
    width: var(--kuc-multi-choice-menu-width, 180px);
    min-width: var(--kuc-multi-choice-menu-width, 180px);
    line-height: 1.5;
  }
  kuc-multi-choice-1-18-0[hidden] {
    display: none;
  }
  .kuc-multi-choice-1-18-0__group {
    border: none;
    padding: 0px;
    height: auto;
    display: inline-block;
    vertical-align: top;
    width: 100%;
    margin: 0px;
  }
  .kuc-multi-choice-1-18-0__group__label {
    padding: 4px 0px 8px 0px;
    display: inline-block;
    white-space: nowrap;
  }
  .kuc-multi-choice-1-18-0__group__label[hidden] {
    display: none;
  }
  .kuc-multi-choice-1-18-0__group__menu {
    position: relative;
    background: #ffffff;
    border: 1px solid #e3e7e8;
    box-sizing: border-box;
    box-shadow: 1px 1px 12px #f5f5f5 inset, -1px -1px 12px #f5f5f5 inset;
    padding: 6px 0;
    overflow-y: auto;
    overflow-x: hidden;
    height: var(--kuc-multi-choice-menu-height, auto);
    max-height: var(--kuc-multi-choice-menu-height, 134px);
    width: var(--kuc-multi-choice-menu-width, auto);
    font-size: var(--kuc-multi-choice-menu-font-size, 14px);
  }
  .kuc-multi-choice-1-18-0__group__menu:not([disabled]):focus {
    outline: none;
    border: 1px solid #3498db;
  }
  .kuc-multi-choice-1-18-0__group__menu[disabled] {
    background-color: #dbdcdd;
    box-shadow: none;
    cursor: not-allowed;
    color: #888888;
    outline: none;
  }
  .kuc-multi-choice-1-18-0__group__menu__item {
    padding: 4px 16px;
    margin-bottom: 2px;
    line-height: 1;
    position: relative;
    white-space: nowrap;
  }
  .kuc-multi-choice-1-18-0__group__menu__item__icon {
    position: absolute;
    top: 50%;
    left: 16px;
    margin-top: -6px;
    pointer-events: none;
  }
  .kuc-multi-choice-1-18-0__group__menu__item--disabled {
    background-color: #d4d7d7;
    cursor: not-allowed;
    color: #888888;
  }
  .kuc-multi-choice-1-18-0__group__menu__item[aria-selected="true"] {
    color: var(--kuc-multi-choice-menu-color-selected, #3498db);
    padding-left: 32px;
  }
  .kuc-multi-choice-1-18-0__group__menu__item--disabled[aria-selected="true"] {
    color: #888888;
    padding-left: 32px;
  }
  .kuc-multi-choice-1-18-0__group__menu[disabled]
    .kuc-multi-choice-1-18-0__group__menu__item[aria-selected="true"] {
    color: #888888;
  }
  .kuc-multi-choice-1-18-0__group__menu__highlight[role="option"] {
    background-color: var(--kuc-multi-choice-menu-background-color-hover, #e2f2fe);
    cursor: pointer;
  }
`),Oh=b}})();var ss=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Nh;(()=>{if(Nh=window.customElements.get("kuc-notification-1-18-0"),!Nh){class b extends ce{constructor(a){super(),this.className="",this.text="",this.type="danger",this.duration=-1,this.container=document.body,this._isOpened=!1;const u=ze(a);Object.assign(this,u)}shouldUpdate(a){if(a.has("container")){if(this.container===null||this.container===void 0)return this._isOpened&&this._close(),!1;const u=this._isValidContainerElement(),s=!u||!document.contains(this.container);if(this._isOpened&&s&&this._close(),!u)return this.throwErrorAfterUpdateComplete(Tc),!1}return!0}_isValidContainerElement(){return this.container instanceof HTMLElement}_handleClickCloseButton(a){this.close()}_getCloseButtonColorType(){switch(this.type){case"info":case"success":return this.type;default:return"danger"}}_getCloseButtonSvgTemplate(){return Ce`
        <svg
          width="32"
          height="32"
          viewBox="0 0 32 32"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <title>close button</title>
          <path
            class="kuc-notification-1-18-0__notification__close-button__icon-background--${this._getCloseButtonColorType()}"
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M16 32C24.8366 32 32 24.8366 32 16C32 7.16344 24.8366 0 16 0C7.16344 0 0 7.16344 0 16C0 24.8366 7.16344 32 16 32Z"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M16.4765 15.7071L20.1229 12.0607L20.4765 11.7071L19.7694 11L19.4158 11.3536L15.7694 15L12.1229 11.3536L11.7694 11L11.0623 11.7071L11.4158 12.0607L15.0623 15.7071L11.3536 19.4158L11 19.7694L11.7071 20.4765L12.0607 20.1229L15.7694 16.4142L19.4781 20.1229L19.8316 20.4765L20.5387 19.7694L20.1852 19.4158L16.4765 15.7071Z"
            fill="white"
          />
        </svg>
      `}_setAutoCloseTimer(){!Number.isFinite(this.duration)||this.duration<0||(this._clearAutoCloseTimer(),this._timeoutID=window.setTimeout(()=>{this.close()},this.duration))}_clearAutoCloseTimer(){this._timeoutID&&window.clearTimeout(this._timeoutID)}open(){if(!this._isValidContainerElement())return document.body.appendChild(this),requestAnimationFrame(()=>{document.body.removeChild(this)}),void this.performUpdate();this.container.appendChild(this),this.performUpdate(),this.classList.remove("kuc-notification-fadeout-1-18-0"),this.classList.add("kuc-notification-fadein-1-18-0"),this._isOpened=!0,this._setAutoCloseTimer()}_close(){this._isOpened=!1,this.classList.remove("kuc-notification-fadein-1-18-0"),this.classList.add("kuc-notification-fadeout-1-18-0"),this._clearAutoCloseTimer()}close(){this._close(),Ot(this,"close")}render(){return bt`
        <div
          class="kuc-notification-1-18-0__notification kuc-notification-1-18-0__notification--${this.type}"
        >
          <pre
            class="kuc-notification-1-18-0__notification__title"
            aria-live="assertive"
            role="${this._isOpened?"alert":""}"
          ><!--
          -->${this.text}</pre>
          <button
            class="kuc-notification-1-18-0__notification__close-button"
            type="button"
            aria-label="close"
            @click="${this._handleClickCloseButton}"
          >
            ${this._getCloseButtonSvgTemplate()}
          </button>
        </div>
      `}}ss([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),ss([F({type:String})],b.prototype,"text",void 0),ss([F({type:String})],b.prototype,"type",void 0),ss([F({type:Number})],b.prototype,"duration",void 0),ss([F()],b.prototype,"container",void 0),ss([se()],b.prototype,"_isOpened",void 0),window.customElements.define("kuc-notification-1-18-0",b),ue(`
  kuc-notification-1-18-0,
  kuc-notification-1-18-0 *,
  kuc-notification-1-18-0:lang(en),
  kuc-notification-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-notification-1-18-0:lang(es),
  kuc-notification-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-notification-1-18-0:lang(ja),
  kuc-notification-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-notification-1-18-0:lang(zh),
  kuc-notification-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-notification-1-18-0:lang(zh-TW),
  kuc-notification-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  kuc-notification-1-18-0 {
    color: #ffffff;
    font-weight: 700;
    text-align: center;
    text-shadow: 1px -1px 0 rgba(0, 0, 0, 0.5);
  }
  kuc-notification-1-18-0 {
    position: fixed;
    display: inline-block;
    top: 0;
    left: 0;
    width: 100%;
    line-height: 1.5;
    z-index: 10000;
    margin-top: 16px;
    pointer-events: none;
    visibility: hidden;
    animation-fill-mode: forwards;
  }
  .kuc-notification-fadein-1-18-0 {
    animation-name: kuc-notification-fade-in-1-18-0;
    animation-duration: 250ms;
    animation-timing-function: ease-out;
  }
  .kuc-notification-fadeout-1-18-0 {
    animation-name: kuc-notification-fade-out-1-18-0;
    animation-duration: 250ms;
    animation-timing-function: ease-out;
  }
  .kuc-notification-1-18-0__notification {
    position: relative;
    display: inline-block;
    text-align: left;
    padding: 16px 56px 16px 24px;
    background-color: var(--kuc-notification-background-color, #e74c3c);
  }
  .kuc-notification-1-18-0__notification--info {
    background-color: var(--kuc-notification-background-color, #3498db);
  }
  .kuc-notification-1-18-0__notification--success {
    background-color: var(--kuc-notification-background-color, #91c36c);
  }
  .kuc-notification-1-18-0__notification--danger {
    background-color: var(--kuc-notification-background-color, #e74c3c);
  }
  .kuc-notification-1-18-0__notification__title {
    display: flex;
    align-items: center;
    margin: 0;
    font-size: var(--kuc-notification-font-size, 16px);
    color: var(--kuc-notification-color, #ffffff);
    max-width: 500px;
    min-height: 24px;
    word-break: break-word;
    white-space: pre-wrap;
  }
  .kuc-notification-1-18-0__notification__close-button {
    position: absolute;
    top: 4px;
    right: 0;
    width: 48px;
    height: 48px;
    background-color: transparent;
    outline: none;
    border: none;
    pointer-events: auto;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0;
  }
  .kuc-notification-1-18-0__notification__close-button__icon-background--danger {
    fill: var(--kuc-notification-close-button-background-color, #c65040);
  }
  .kuc-notification-1-18-0__notification__close-button__icon-background--info {
    fill: var(--kuc-notification-close-button-background-color, #448aca);
  }
  .kuc-notification-1-18-0__notification__close-button__icon-background--success {
    fill: var(--kuc-notification-close-button-background-color, #9bbc65);
  }
  @keyframes kuc-notification-fade-in-1-18-0 {
    0% {
      visibility: visible;
      top: -56px;
    }
    100% {
      visibility: visible;
      top: 0;
    }
  }
  @keyframes kuc-notification-fade-out-1-18-0 {
    0% {
      visibility: visible;
      top: 0;
    }
    10% {
      visibility: visible;
      top: 14px;
    }
    100% {
      top: -56px;
    }
  }
`),Nh=b}})();var An=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Uh;(()=>{if(Uh=window.customElements.get("kuc-radio-button-1-18-0"),!Uh){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.itemLayout="horizontal",this.label="",this.value="",this.selectedIndex=-1,this.borderVisible=!0,this.disabled=!1,this.requiredIcon=!1,this.visible=!0,this.items=[],this._GUID=ti();const u=ze(a);this._setInitialValue(u),Object.assign(this,u)}_setInitialValue(a){!("value"in a)&&"selectedIndex"in a&&(this.value=this._getValue(a)||"")}shouldUpdate(a){return a.has("items")&&!Xe(this.items)?(this.throwErrorAfterUpdateComplete(bo),!1):a.has("value")&&!as(this.value)?(this.throwErrorAfterUpdateComplete(os),!1):!(a.has("selectedIndex")&&!fa(this.selectedIndex)&&(this.throwErrorAfterUpdateComplete(Ic),1))}_findItemToFocus(){let a=-1;for(let u=0;u<this.items.length;u++){const s=this.items[u];s.disabled||(this.selectedIndex!==u||s.value!==this.value?a===-1&&(a=u):a=u)}return a}willUpdate(a){if(a.has("value")){if(this.value!=="")return;this.selectedIndex=-1}}_handleChangeInput(a){a.stopPropagation();const u=a.target,s=u.value,T=u.dataset.index||"0",k=parseInt(T,10);if(this.value===s&&this.selectedIndex===k)return;const $={oldValue:this.value,value:s};this.value=s,this.selectedIndex=k,Ot(this,"change",$)}_handleFocusInput(a){a.target.parentNode.setAttribute("focused","")}_handleBlurInput(a){a.target.parentNode.removeAttribute("focused")}_getRadioIconSvgTemplate(a,u){return Ce`
    <svg
      class="kuc-radio-button-1-18-0__group__select-menu__item__label__icon"
      width="21"
      height="21"
      viewBox="0 0 21 21"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle
        cx="10.5"
        cy="10.5"
        r="10"
        fill="white"
        stroke="#e3e7e8" stroke-width="1"/>
      ${u?Ce`<circle cx="10.5" cy="10.5" r="6.5" fill="${a?"#e3e7e8":"#3498db"}"/>`:""}
    </svg>
  `}_isCheckedItem(a,u){return this.value?a.value===this.value&&this.selectedIndex===u:this.selectedIndex===u}_getItemTemplate(a,u){const s=this._isCheckedItem(a,u),T=a.disabled||this.disabled,k=a.value!==void 0?a.value:"",$=u===this._findItemToFocus()?"0":"-1";return bt`
        <div
          class="kuc-radio-button-1-18-0__group__select-menu__item"
          itemLayout="${this.itemLayout}"
        >
          <input
            type="radio"
            aria-checked="${s?"true":"false"}"
            aria-describedby="${this._GUID}-error"
            data-index="${u}"
            id="${this._GUID}-item-${u}"
            class="kuc-radio-button-1-18-0__group__select-menu__item__input"
            name="${this._GUID}-group"
            value="${k}"
            tabindex="${$}"
            aria-required="${this.requiredIcon}"
            ?disabled="${T}"
            @change="${this._handleChangeInput}"
            @focus="${this._handleFocusInput}"
            @blur="${this._handleBlurInput}"
          />
          <label
            class="kuc-radio-button-1-18-0__group__select-menu__item__label"
            for="${this._GUID}-item-${u}"
            >${this._getRadioIconSvgTemplate(T,s)}${a.label===void 0?a.value:a.label}
          </label>
        </div>
      `}update(a){(a.has("items")||a.has("value")||a.has("selectedIndex"))&&(this.selectedIndex=this._getSelectedIndex(),this.value=this._getValue({items:this.items,selectedIndex:this.selectedIndex})||""),super.update(a)}render(){return bt`
        <div
          class="kuc-radio-button-1-18-0__group"
          role="radiogroup"
          aria-labelledby="${this._GUID}-group"
        >
          <div class="kuc-radio-button-1-18-0__group__label" ?hidden="${!this.label}">
            <kuc-base-label-1-18-0
              .text="${this.label}"
              .guid="${this._GUID}"
              .requiredIcon="${this.requiredIcon}"
            ></kuc-base-label-1-18-0>
          </div>
          <div
            class="kuc-radio-button-1-18-0__group__select-menu"
            ?borderVisible="${this.borderVisible}"
            itemLayout="${this.itemLayout}"
          >
            ${this.items.map((a,u)=>this._getItemTemplate(a,u))}
          </div>
          <kuc-base-error-1-18-0
            .text="${this.error}"
            .guid="${this._GUID}"
            ?hidden="${!this.error}"
            ariaLive="assertive"
          ></kuc-base-error-1-18-0>
        </div>
      `}updated(){this._inputEls.forEach((a,u)=>{a.checked=this.value===a.value&&u===this.selectedIndex})}_getSelectedIndex(){if(!this.value)return this.items[this.selectedIndex]?this.selectedIndex:-1;const a=this.items.findIndex(s=>s.value===this.value);if(a===-1)return-1;const u=this.items.findIndex((s,T)=>s.value===this.value&&T===this.selectedIndex);return u>-1?u:a}_getValue(a){const u=(a.items||[])[a.selectedIndex===0||a.selectedIndex?a.selectedIndex:-1];return u?u.value:""}}An([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),An([F({type:String})],b.prototype,"error",void 0),An([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),An([F({type:String})],b.prototype,"itemLayout",void 0),An([F({type:String})],b.prototype,"label",void 0),An([F({type:String})],b.prototype,"value",void 0),An([F({type:Number})],b.prototype,"selectedIndex",void 0),An([F({type:Boolean})],b.prototype,"borderVisible",void 0),An([F({type:Boolean})],b.prototype,"disabled",void 0),An([F({type:Boolean})],b.prototype,"requiredIcon",void 0),An([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),An([F({type:Array})],b.prototype,"items",void 0),An([rn(".kuc-radio-button-1-18-0__group__select-menu__item__input")],b.prototype,"_inputEls",void 0),window.customElements.define("kuc-radio-button-1-18-0",b),ue(`
  kuc-radio-button-1-18-0,
  kuc-radio-button-1-18-0 *,
  kuc-radio-button-1-18-0:lang(en),
  kuc-radio-button-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-radio-button-1-18-0:lang(es),
  kuc-radio-button-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-radio-button-1-18-0:lang(ja),
  kuc-radio-button-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-radio-button-1-18-0:lang(zh),
  kuc-radio-button-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-radio-button-1-18-0:lang(zh-TW),
  kuc-radio-button-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  kuc-radio-button-1-18-0 {
    font-size: 14px;
    color: #333333;
    display: inline-table;
    width: var(--kuc-radio-button-menu-width, 239px);
    min-width: var(--kuc-radio-button-menu-width, 239px);
    vertical-align: top;
    line-height: 1.5;
  }

  kuc-radio-button-1-18-0[hidden] {
    display: none;
  }

  .kuc-radio-button-1-18-0__group {
    border: none;
    padding: 0px;
    height: auto;
    display: inline-block;
    margin: 0px;
    width: 100%;
  }

  .kuc-radio-button-1-18-0__group__label {
    display: inline-block;
    padding: 4px 0 8px 0;
    white-space: nowrap;
  }

  .kuc-radio-button-1-18-0__group__label[hidden] {
    display: none;
  }

  .kuc-radio-button-1-18-0__group__select-menu {
    display: flex;
    align-items: flex-start;
    width: var(--kuc-radio-button-menu-width, 100%);
    height: var(--kuc-radio-button-menu-height);
    color: var(--kuc-radio-button-menu-color, #333333);
    font-size: var(--kuc-radio-button-menu-font-size, 14px);
  }

  .kuc-radio-button-1-18-0__group__select-menu[itemlayout="vertical"] {
    display: block;
  }

  .kuc-radio-button-1-18-0__group__select-menu[bordervisible] {
    border-color: #e3e7e8;
    border-width: 1px;
    border-style: solid;
    padding-top: 4px;
    box-sizing: border-box;
  }

  .kuc-radio-button-1-18-0__group__select-menu__item {
    margin-left: 4px;
    margin-bottom: 4px;
    margin-right: 16px;
    padding: 4px;
    border: 1px solid transparent;
    position: relative;
    white-space: normal;
    word-wrap: normal;
    display: flex;
    align-items: center;
  }

  .kuc-radio-button-1-18-0__group__select-menu__item[focused] {
    border: 1px solid #3498db;
  }

  .kuc-radio-button-1-18-0__group__select-menu__item__input {
    position: absolute;
    opacity: 0;
    cursor: pointer;
  }

  .kuc-radio-button-1-18-0__group__select-menu__item__input:hover
    + .kuc-radio-button-1-18-0__group__select-menu__item__label {
    color: var(--kuc-radio-button-menu-color-hover, #666666);
  }

  .kuc-radio-button-1-18-0__group__select-menu__item__label__icon {
    position: absolute;
    left: -30px;
    box-sizing: border-box;
    width: 21px;
    height: 21px;
    box-shadow: 1px 1px 3px #f5f5f5 inset, -1px -1px 3px #f5f5f5 inset;
    content: "";
    border-radius: 9px;
  }

  .kuc-radio-button-1-18-0__group__select-menu__item__input[disabled]
    + .kuc-radio-button-1-18-0__group__select-menu__item__label {
    color: #888888;
    cursor: not-allowed;
  }

  .kuc-radio-button-1-18-0__group__select-menu__item__label {
    cursor: pointer;
    position: relative;
    margin-left: 32px;
    display: flex;
    align-items: center;
    vertical-align: middle;
    white-space: nowrap;
    line-height: 1.2;
    min-height: 24px;
  }
`),Uh=b}})();var Dr=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Hh;(()=>{if(Hh=window.customElements.get("kuc-base-pagination-1-18-0"),!Hh){class b extends ce{constructor(){super(...arguments),this.pagePosition=1,this.rowsPerPage=5,this.total=1,this.isNext=!0,this.isPrev=!0,this.visible=!0}render(){return bt`
        <div class="kuc-base-pagination-1-18-0__group" ?hidden="${!this.visible}">
          <button
            title="previous"
            class="kuc-base-pagination-1-18-0__group__pager-prev${this.isPrev?"":" kuc-base-pagination-1-18-0__group__pager-disable"}"
            type="button"
            @click="${this._handleClickPrevButton}"
            @focus="${this._handleFocusPrevButton}"
            @blur="${this._handleBlurPrevButton}"
            @mouseover="${this._handleMouseOverPrevButton}"
            @mouseleave="${this._handleMouseLeavePrevButton}"
          >
            ${this._getPrevButtonSvgTemplate()}</button
          >${this._getCurrentPageNumberTemplate()}<button
            title="next"
            class="kuc-base-pagination-1-18-0__group__pager-next${this.isNext?"":" kuc-base-pagination-1-18-0__group__pager-disable"}"
            type="button"
            @click="${this._handleClickNextButton}"
            @focus="${this._handleFocusNextButton}"
            @blur="${this._handleBlurNextButton}"
            @mouseover="${this._handleMouseOverNextButton}"
            @mouseleave="${this._handleMouseLeaveNextButton}"
          >
            ${this._getNextButtonSvgTemplate()}
          </button>
        </div>
      `}_handleClickPrevButton(a){a.stopPropagation(),Ot(this,"kuc:pagination-click-prev")}_handleFocusPrevButton(){this._prevButtonEl.classList.add("kuc-base-pagination-1-18-0__group__pager--focus")}_handleBlurPrevButton(){this._prevButtonEl.classList.remove("kuc-base-pagination-1-18-0__group__pager--focus")}_handleMouseOverPrevButton(){this._prevButtonEl.classList.add("kuc-base-pagination-1-18-0__group__pager--horver")}_handleMouseLeavePrevButton(){this._prevButtonEl.classList.remove("kuc-base-pagination-1-18-0__group__pager--horver")}_handleClickNextButton(a){a.stopPropagation(),Ot(this,"kuc:pagination-click-next")}_handleFocusNextButton(){this._nextButtonEl.classList.add("kuc-base-pagination-1-18-0__group__pager--focus")}_handleBlurNextButton(){this._nextButtonEl.classList.remove("kuc-base-pagination-1-18-0__group__pager--focus")}_handleMouseOverNextButton(){this._nextButtonEl.classList.add("kuc-base-pagination-1-18-0__group__pager--horver")}_handleMouseLeaveNextButton(){this._nextButtonEl.classList.remove("kuc-base-pagination-1-18-0__group__pager--horver")}_getPrevButtonSvgTemplate(){return Ce`
        <svg
          width="9"
          height="15"
          viewBox="0 0 9 15"
          fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M1.99061 7.5L9 0.0604158L7.06632 0L0 7.5L7.06632 15L9 14.9396L1.99061 7.5Z"
            fill="#888888"
          />
        </svg>
      `}_getNextButtonSvgTemplate(){return Ce`
      <svg
        width="9"
        height="15"
        viewBox="0 0 9 15"
        fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M7.00939 7.5L0 0.0604158L1.93368 0L9 7.5L1.93368 15L0 14.9396L7.00939 7.5Z"
          fill="#888888"
        />
      </svg>
      `}_getCurrentPageNumberTemplate(){const a=this._createCurrentPageInfo(),u=`${a.firstNum} - ${a.lastNum} / ${this.total}`;return bt`<span class="kuc-base-pagination-1-18-0__group__pager-current"
        >${u}</span
      >`}_createCurrentPageInfo(){const a=(this.pagePosition-1)*this.rowsPerPage+1;let u=this.pagePosition*this.rowsPerPage;return u=u>this.total?this.total:u,{firstNum:a,lastNum:u}}}Dr([F({type:Number})],b.prototype,"pagePosition",void 0),Dr([F({type:Number})],b.prototype,"rowsPerPage",void 0),Dr([F({type:Number})],b.prototype,"total",void 0),Dr([F({type:Boolean})],b.prototype,"isNext",void 0),Dr([F({type:Boolean})],b.prototype,"isPrev",void 0),Dr([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),Dr([qt(".kuc-base-pagination-1-18-0__group__pager-prev")],b.prototype,"_prevButtonEl",void 0),Dr([qt(".kuc-base-pagination-1-18-0__group__pager-next")],b.prototype,"_nextButtonEl",void 0),window.customElements.define("kuc-base-pagination-1-18-0",b),ue(`
  .kuc-base-pagination-1-18-0__group {
    margin-top: 10px;
  }
  .kuc-base-pagination-1-18-0__group button {
    cursor: pointer;
  }
  .kuc-base-pagination-1-18-0__group__pager-prev {
    border: none;
    background-color: transparent;
    visibility: visible;
    height: 23px;
    vertical-align: middle;
  }
  .kuc-base-pagination-1-18-0__group__pager-next {
    border: none;
    background-color: transparent;
    visibility: visible;
    height: 23px;
    vertical-align: middle;
  }
  .kuc-base-pagination-1-18-0__group__pager-next:hover svg path,
  .kuc-base-pagination-1-18-0__group__pager-prev:hover svg path,
  .kuc-base-pagination-1-18-0__group__pager-next:focus-visible svg path,
  .kuc-base-pagination-1-18-0__group__pager-prev:focus-visible svg path
  {
    fill: #3498db;
  }
  .kuc-base-pagination-1-18-0__group__pager--focus,
  .kuc-base-pagination-1-18-0__group__pager-next:focus-visible,
  .kuc-base-pagination-1-18-0__group__pager-prev:focus-visible {
    outline: 1px solid #3498db;
  }
  .kuc-base-pagination-1-18-0__group__pager--horver svg path {
    fill: #3498db;
  }
  .kuc-base-pagination-1-18-0__group__pager-next svg,
  .kuc-base-pagination-1-18-0__group__pager-prev svg {
    margin-top: 3px;
  }
  .kuc-base-pagination-1-18-0__group__pager-disable {
    visibility: hidden;
  }
  .kuc-base-pagination-1-18-0__group__pager-current {
    display: inline-block;
    height: 23px;
    line-height: 23px;
    vertical-align: middle;
    font-size: 14px;
    color: #333333;
  }
`),Hh=b}})();var To=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Bc;(()=>{if(Bc=window.customElements.get("kuc-readonly-table-1-18-0"),!Bc){class b extends ce{constructor(a){if(super(),this.className="",this.id="",this.label="",this.columns=[],this.data=[],this.pagination=!0,this.rowsPerPage=5,this.visible=!0,this._pagePosition=1,this._columnOrder=[],!a)return;const u=ze(a);Object.assign(this,u)}shouldUpdate(a){return a.has("columns")&&!Xe(this.columns)?(this.throwErrorAfterUpdateComplete(_m),!1):a.has("data")&&!Xe(this.data)?(this.throwErrorAfterUpdateComplete(fm),!1):!(a.has("rowsPerPage")&&!Mh(this.rowsPerPage)&&(this.throwErrorAfterUpdateComplete(xh),1))}willUpdate(a){a.has("columns")&&(this._columnOrder=[],this.columns.map(u=>this._columnOrder.push(u.field?u.field:""))),a.has("rowsPerPage")&&(this.rowsPerPage=Math.round(this.rowsPerPage))}render(){const a=this._createDisplayData();return!this.columns||this.columns.length<1?bt`
            <table class="kuc-readonly-table-1-18-0__table">
              <caption
                class="kuc-readonly-table-1-18-0__table__label kuc-readonly-table-1-18-0__table__label--no-column"
                ?hidden="${!this.label}"
              >
                ${this.label}
              </caption>
            </table>
          `:bt`
            <table class="kuc-readonly-table-1-18-0__table">
              <caption
                class="kuc-readonly-table-1-18-0__table__label"
                ?hidden="${!this.label}"
              >
                ${this.label}
              </caption>
              <thead class="kuc-readonly-table-1-18-0__table__header">
                <tr>
                  ${this.columns.map((u,s)=>this._getColumnsTemplate(u,s))}
                </tr>
              </thead>
              <tbody class="kuc-readonly-table-1-18-0__table__body">
                ${a.map((u,s)=>this._getDataTemplate(u,s))}
              </tbody>
            </table>
            <kuc-base-pagination-1-18-0
              .pagePosition="${this._pagePosition}"
              .rowsPerPage="${this.rowsPerPage}"
              .total="${this.data.length}"
              .visible="${this.pagination}"
              .isPrev="${this._toggleDisplayPreviousButton()}"
              .isNext="${this._toggleDisplayNextButton()}"
              @kuc:pagination-click-prev=${this._handleClickPreviousButton}
              @kuc:pagination-click-next=${this._handleClickNextButton}
            ></kuc-base-pagination-1-18-0>
          `}_createDisplayData(){if(!this.pagination)return this.data;const a=(this._pagePosition-1)*this.rowsPerPage+1,u=this._pagePosition*this.rowsPerPage;return this.data.filter((s,T)=>T>=a-1&&T<=u-1)}_customWidthVariables(a){return`var(--kuc-readonly-table-header-${a}-width, var(--kuc-readonly-table-header-width, auto))`}_getColumnsTemplate(a,u){const s=this._customWidthVariables(u);return bt`
        <th
          class="kuc-readonly-table-1-18-0__table__header__cell"
          ?hidden="${a.visible===!1}"
          style="width: ${s}; min-width: ${s}; max-width: ${s}"
        >
          ${a.title||""}
        </th>
      `}_getDataTemplate(a,u){return bt`
        <tr
          class="kuc-readonly-table-1-18-0__table__body__row kuc-readonly-table-1-18-0__table__body__row-${u}"
        >
          ${this._columnOrder.map((s,T)=>{var k;const $=(k=this.columns[T].visible)===null||k===void 0||k;let X=a[s];this._isHTML(X)&&(X=bt`<div
                class="kuc-readonly-table-1-18-0__table__body__row__cell-data--html"
              >
                ${vo(X)}
              </div>`);const J=this._customWidthVariables(T);return bt`<td class="kuc-readonly-table-1-18-0__table__body__row__cell-data" ?hidden="${!$}" style="width: ${J}; min-width: ${J}; max-width: ${J}">${X}</td>`})}
        </tr>
      `}_toggleDisplayPreviousButton(){return this._pagePosition>1}_toggleDisplayNextButton(){return this._pagePosition<this.data.length/this.rowsPerPage}_handleClickPreviousButton(a){this._pagePosition<2||(Mh(this.rowsPerPage)?this._pagePosition-=1:this.throwErrorAfterUpdateComplete(xh))}_handleClickNextButton(a){Mh(this.rowsPerPage)?this._toggleDisplayNextButton()!==!1&&(this._pagePosition+=1):this.throwErrorAfterUpdateComplete(xh)}_isHTML(a){if(a instanceof HTMLElement)return!0;const u=document.createElement("div");return u.innerHTML=a,u.childElementCount>0}}To([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),To([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),To([F({type:String})],b.prototype,"label",void 0),To([F({type:Array})],b.prototype,"columns",void 0),To([F({type:Array})],b.prototype,"data",void 0),To([F({type:Boolean})],b.prototype,"pagination",void 0),To([F({type:Number})],b.prototype,"rowsPerPage",void 0),To([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),To([se()],b.prototype,"_pagePosition",void 0),To([se()],b.prototype,"_columnOrder",void 0),window.customElements.define("kuc-readonly-table-1-18-0",b),ue(`
  kuc-readonly-table-1-18-0 ,
  kuc-readonly-table-1-18-0  *,
  kuc-readonly-table-1-18-0:lang(en),
  kuc-readonly-table-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-readonly-table-1-18-0:lang(es),
  kuc-readonly-table-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-readonly-table-1-18-0:lang(ja),
  kuc-readonly-table-1-18-0:lang(ja) * {
      font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-readonly-table-1-18-0:lang(zh),
  kuc-readonly-table-1-18-0:lang(zh) * {
      font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-readonly-table-1-18-0:lang(zh-TW),
  kuc-readonly-table-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  kuc-readonly-table-1-18-0 {
    font-size: 14px;
    color: #333333;
    display: block;
  }
  kuc-readonly-table-1-18-0[hidden] {
    display: none;
  }
  .kuc-readonly-table-1-18-0__table {
    border-collapse: collapse;
    table-layout: fixed;
    width: 100%;
    display: inline-block;
  }
  .kuc-readonly-table-1-18-0__table__header {
    border-width: 0px 1px;
    border-color: var(--kuc-readonly-table-header-background-color, #3498db);
    border-style: solid;
  }
  .kuc-readonly-table-1-18-0__table__label {
    text-align: left;
    white-space: normal;
    overflow-wrap: anywhere;
    padding: 4px 0px;
  }
  .kuc-readonly-table-1-18-0__table__label[hidden] {
    display: none;
  }
  .kuc-readonly-table-1-18-0__table__label--no-column {
    overflow-wrap: break-word;
  }
  .kuc-readonly-table-1-18-0__table__header__cell {
    background-color: var(--kuc-readonly-table-header-background-color, #3498db);
    color: var(--kuc-readonly-table-header-color, #ffffff);
    height: var(--kuc-readonly-table-header-height, 40px);
    box-sizing: border-box;
    text-align: left;
    overflow: auto;
    white-space: nowrap;
    word-wrap: break-word;
    padding: 4px 8px;
    font-weight: 400;
    font-size: var(--kuc-readonly-table-header-font-size, 12px);
  }
  .kuc-readonly-table-1-18-0__table__header__cell[hidden] {
    display: none;
  }
  .kuc-readonly-table-1-18-0__table__body {
    vertical-align: top;
  }
  .kuc-readonly-table-1-18-0__table__body__row__cell-data {
    box-sizing: border-box;
    padding: 4px 8px;
    white-space: pre-wrap;
    overflow-wrap: break-word;
    border-color: #e3e7e8;
    border-style: solid;
    border-width: 1px;
  }
  .kuc-readonly-table-1-18-0__table__body__row__cell-data[hidden] {
    display: none;
  }
  .kuc-readonly-table-1-18-0__table__header__cell,
  .kuc-readonly-table-1-18-0__table__body__row__cell-data {
    scrollbar-width: none; /* Firefox */
  }
  .kuc-readonly-table-1-18-0__table__header__cell::-webkit-scrollbar,
  .kuc-readonly-table-1-18-0__table__body__row__cell-data::-webkit-scrollbar {
    width: 0; /* Safari and Chrome */
    display: none
  }
  .kuc-readonly-table-1-18-0__table__body__row__cell-data--html {
    white-space: normal;
  }
`),Bc=b}})();const P1=Bc;var $m=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let jh;(()=>{if(jh=window.customElements.get("kuc-spinner-1-18-0"),!jh){class b extends ce{constructor(a){super(),this.text="",this.container=document.body,this._isOpened=!1;const u=ze(a);Object.assign(this,u)}_getSpinnerSvgTemplate(){return Ce`
        <svg
          class="kuc-spinner-1-18-0__spinner__loader"
          viewBox="0 0 50 50"
          aria-hidden="true"
        >
          <circle r="4" cx="30.43" cy="4.72" opacity="0.3" />
          <circle r="4" cx="39.85" cy="10.15" opacity="0.3" />
          <circle r="4" cx="45.28" cy="19.56" opacity="0.3" />
          <circle r="4" cx="45.28" cy="30.43" opacity="0.3" />
          <circle r="4" cx="39.85" cy="39.85" opacity="0.3" />
          <circle r="4" cx="30.44" cy="45.28" opacity="0.4" />
          <circle r="4" cx="19.56" cy="45.28" opacity="0.5" />
          <circle r="4" cx="10.15" cy="39.85" opacity="0.6" />
          <circle r="4" cx="4.7" cy="30.44" opacity="0.7" />
          <circle r="4" cx="4.7" cy="19.56" opacity="0.8" />
          <circle r="4" cx="10.15" cy="10.15" opacity="0.9" />
          <circle r="4" cx="19.56" cy="4.72" opacity="1" />
        </svg>
      `}_isValidContainerElement(){return this.container instanceof HTMLElement}open(){if(!this._isValidContainerElement())return document.body.appendChild(this),requestAnimationFrame(()=>{document.body.removeChild(this)}),void this.performUpdate();this.parentElement&&this.parentElement.classList.remove("kuc--has-spinner"),this.container.appendChild(this),this.performUpdate(),this.container.classList.contains("kuc--has-spinner")||this.container.classList.add("kuc--has-spinner"),this._isOpened=!0}close(){this.parentElement&&this.parentElement.classList.remove("kuc--has-spinner"),this._isOpened=!1,this.parentNode&&this.parentNode.removeChild(this)}shouldUpdate(a){if(a.has("container")){if(this.container===null||this.container===void 0)return this._isOpened&&this.close(),!1;const u=this._isValidContainerElement(),s=!u||!document.contains(this.container);if(this._isOpened&&s&&this.close(),!u)return this.throwErrorAfterUpdateComplete(Tc),!1}return!0}render(){return bt`
        <div class="kuc-spinner-1-18-0__spinner" aria-live="assertive" role="alert">
          ${this._getSpinnerSvgTemplate()}
          <div
            class="kuc-spinner-1-18-0__spinner__text${this.text?"":" visually-hidden"}"
          >
            ${this.text?this.text:"now loading…"}
          </div>
        </div>
        <div class="kuc-spinner-1-18-0__mask"></div>
      `}}$m([F({type:String})],b.prototype,"text",void 0),$m([F()],b.prototype,"container",void 0),window.customElements.define("kuc-spinner-1-18-0",b),ue(`
  kuc-spinner-1-18-0,
  kuc-spinner-1-18-0 *,
  kuc-spinner-1-18-0:lang(en),
  kuc-spinner-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-spinner-1-18-0:lang(es),
  kuc-spinner-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-spinner-1-18-0:lang(ja),
  kuc-spinner-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-spinner-1-18-0:lang(zh),
  kuc-spinner-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-spinner-1-18-0:lang(zh-TW),
  kuc-spinner-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  kuc-spinner-1-18-0 {
    font-size: 14px;
    color: #333333;
  }
  .kuc-spinner-1-18-0__spinner {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 10000;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .kuc-spinner-1-18-0__spinner__loader {
    width: var(--kuc-spinner-loader-width, 50px);
    height: var(--kuc-spinner-loader-height, 50px);
    animation: rotate-loading 1s steps(12) infinite;
    fill: var(--kuc-spinner-loader-color, #99ccff);
  }
  .kuc-spinner-1-18-0__spinner__text {
    margin: 10px 0;
    font-size: var(--kuc-spinner-text-font-size, 14px);
    color: var(--kuc-spinner-text-color, #333333);
  }
  .visually-hidden {
    position: absolute;
    white-space: nowrap;
    width: 1px;
    height: 1px;
    overflow: hidden;
    border: 0;
    padding: 0;
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    margin: -1px;
  }
  .kuc-spinner-1-18-0__mask {
    position: fixed;
    top: 0;
    right: 0;
    display: block;
    width: 100%;
    height: 100%;
    background-color: #666666;
    opacity: 0.6;
    z-index: 9999;
  }
  .kuc--has-spinner {
    overflow: hidden;
  }
  @keyframes rotate-loading {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
`),jh=b}})();var Co=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};const Vm="kuc-table-1-18-0__table__body__row__action-add",Fm="kuc-table-1-18-0__table__body__row__action-remove",Om=b=>`var(--kuc-table-header-${b}-width, var(--kuc-table-header-width, auto))`;let qh;(()=>{if(qh=window.customElements.get("kuc-table-1-18-0"),!qh){class b extends ce{constructor(a){if(super(),this.className="",this.id="",this.label="",this.columns=[],this.data=[],this.actionButton=!0,this.headerVisible=!0,this.visible=!0,!a)return;const u=ze(a);Object.assign(this,u)}shouldUpdate(a){if(a.has("data")||a.has("columns")){const u=this._getErrorValidateColumnsAndData();if(u)return this.throwErrorAfterUpdateComplete(u),!1}return!0}willUpdate(a){this._tBody&&(this._tBody.innerHTML="")}_getErrorMessageWhenValidateColumns(){return Xe(this.columns)?(a=>{for(let u=0;u<a.length;u++)if(!Object.prototype.hasOwnProperty.call(a[u],"field"))return!1;return!0})(this.columns)?(()=>{const a=this.columns.map(u=>u.field);return a.some(function(u,s){return a.indexOf(u)!==s})})()?f1:"":_1:_m}render(){return!this.columns||this.columns.length<1?bt`<table class="kuc-table-1-18-0__table">
            <caption
              class="kuc-table-1-18-0__table__label kuc-table-1-18-0__table__label--no-column"
              ?hidden="${!this.label}"
            >
              ${this.label}
            </caption>
          </table>`:bt`
            <table class="kuc-table-1-18-0__table">
              <caption class="kuc-table-1-18-0__table__label" ?hidden="${!this.label}">
                ${this.label}
              </caption>
              <thead
                class="kuc-table-1-18-0__table__header"
                ?hidden="${!this.headerVisible}"
              >
                ${this._getTableHeaderTemplate()}
              </thead>
              <tbody class="kuc-table-1-18-0__table__body"></tbody>
            </table>
          `}updated(a){if(this.columns.length!==0)for(let u=0;u<this.data.length;u++)this._addRowToTable(u,this.data[u])}_getTableHeaderTemplate(){return bt`
        <tr>
          ${this.columns.map((a,u)=>this._getColumnHeaderTemplate(a,u))}
        </tr>
      `}_getColumnHeaderTemplate(a,u){const s=Om(u);return bt`
        <th
          class="kuc-table-1-18-0__table__header__cell"
          ?hidden="${a.visible===!1}"
          style="width: ${s}; min-width: ${s}; max-width: ${s}"
        >
          <div class="kuc-table-1-18-0__table__header__cell-title">
            ${a.title?vo(a.title):""}<!--
        --><span
              class="kuc-base-label-1-18-0__required-icon"
              ?hidden="${!a.requiredIcon}"
              >*</span
            >
          </div>
        </th>
      `}_getActionsCellWhenRemoveRow(a){let u=null,s=a;for(;this.data.length>1;){const T=this._table.rows[s];if(T){u=T.cells[this.columns.length];break}s--}return u}_getDefaultDataRow(a){const u={};for(const s in a)if(Object.prototype.hasOwnProperty.call(a,s)){if(Array.isArray(a[s])){u[s]=[];continue}if(typeof a[s]=="object"&&a[s]!==null){u[s]={};continue}u[s]=""}return u}_addRowToTable(a,u){var s;const T=this._tBody.insertRow(a);T.classList.add("kuc-table-1-18-0__table__body__row");for(let k=0;k<this.columns.length;k++){const $=Om(k),X=T.insertCell(k),J=this.columns[k];X.classList.add("kuc-table-1-18-0__table__body__row__cell-data"),X.style.width=$,X.style.maxWidth=$,X.style.minWidth=$,X.addEventListener("change",St=>{this._handleChangeCell(St,J.field)}),X.hidden=!((s=J.visible)===null||s===void 0||s);const Zt=J.render?J.render(u[J.field],u,a):u[J.field];Zt&&Zt.nodeType?X.appendChild(Zt):X.innerText=Zt||""}this.actionButton&&this._addActionsCellToNewRow(T)}_handleChangeCell(a,u){a.stopPropagation();const s=this._deepCloneObject(this.data),T=a.currentTarget.parentElement.rowIndex-1,k=this.data[T];if(u in k){let X=a.target.value;"detail"in a&&(X=a.detail.value),k[u]=X}const $={type:"change-cell",rowIndex:T,data:this._deepCloneObject(this.data),oldData:s,field:u};this._dispatchChangeEvent($)}_handleAddRow(a){const u=this._deepCloneObject(this.data),s=this._getDefaultDataRow(this.data[0]);this._addRowToTable(a,s),this.data.splice(a,0,s);const T={type:"add-row",rowIndex:a,data:this._deepCloneObject(this.data),oldData:u};this._dispatchChangeEvent(T),this._toggleRemoveRowButton()}_handleRemoveRow(a){if(this.data.length===1)return;const u=a-1,s=this._deepCloneObject(this.data);this._table.deleteRow(a),this.data.splice(u,1);const T={type:"remove-row",rowIndex:u,data:this._deepCloneObject(this.data),oldData:s};this._dispatchChangeEvent(T),this._toggleRemoveRowButton(),this._focusActionsButtonWhenRemoveRow(a)}_focusActionsButtonWhenRemoveRow(a){const u=this._getActionsCellWhenRemoveRow(a);u?this._focusRemoveRowButton(u):this._focusFirstAddRowButton()}_focusRemoveRowButton(a){a.querySelector(`.${Fm}`).focus()}_focusFirstAddRowButton(){const a=this._table.rows[1].cells[this.columns.length].querySelector(`.${Vm}`);a==null||a.focus()}_toggleRemoveRowButton(){var a;const u=this._tBody.rows[0].lastChild.lastChild;if(this.data.length!==1){if(this.data.length===2){const s=(a=this._tBody.rows[1].lastChild)===null||a===void 0?void 0:a.lastChild;u.style.display=s.style.display="block"}}else u.style.display="none"}_getSvgDOM(a,u){const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("fill","none"),s.setAttribute("width","18"),s.setAttribute("height","18"),s.setAttribute("viewBox","0 0 16 16"),s.setAttribute("aria-hidden","true");const T=document.createElementNS("http://www.w3.org/2000/svg","path");return T.setAttribute("d",u),T.setAttribute("fill-rule","evenodd"),T.setAttribute("clip-rule","evenodd"),T.setAttribute("fill",a),s.appendChild(T),s}_addActionsCellToNewRow(a){const u={add:!0,remove:!0};if(typeof this.actionButton=="object"&&(u.add=!Object.prototype.hasOwnProperty.call(this.actionButton,"add")||this.actionButton.add,u.remove=!Object.prototype.hasOwnProperty.call(this.actionButton,"remove")||this.actionButton.remove),!u.add&&!u.remove)return;const s=a.insertCell(this.columns.length);if(s.classList.add("kuc-table-1-18-0__table__body__row__action"),u.add){const T=this._getActionButtonDOM("add",a);s.appendChild(T)}if(u.remove){const T=this._getActionButtonDOM("remove",a);s.appendChild(T),this.data.length===1&&(T.style.display="none")}}_getActionButtonDOM(a,u){let s=Fm,T="Delete this row";const k=a==="add";k&&(s=Vm,T="Add row");const $=k?"#3498db":"#b5b5b5",X=k?"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16ZM12.0355 8.49997V7.49997H8.50008V3.96454H7.50008V7.49997H3.96443V8.49997H7.50008V12.0356H8.50008V8.49997H12.0355Z":"M16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM12.0355 7.49997V8.49997L3.96443 8.49997V7.49997H12.0355Z",J=this._getSvgDOM($,X),Zt=document.createElement("button");return Zt.classList.add(s),Zt.setAttribute("title",T),Zt.appendChild(J),Zt.addEventListener("click",()=>{const St=this._getErrorValidateColumnsAndData();St?this.throwErrorAfterUpdateComplete(St):k?this._handleAddRow(u.rowIndex):this._handleRemoveRow(u.rowIndex)}),Zt}_getErrorValidateColumnsAndData(){return this._getErrorMessageWhenValidateColumns()||(Xe(this.data)?"":fm)}_deepCloneObject(a){return JSON.parse(JSON.stringify(a))}_dispatchChangeEvent(a){Ot(this,"change",a)}}Co([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),Co([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),Co([F({type:String})],b.prototype,"label",void 0),Co([F({type:Array})],b.prototype,"columns",void 0),Co([F({type:Array})],b.prototype,"data",void 0),Co([F()],b.prototype,"actionButton",void 0),Co([F({type:Boolean})],b.prototype,"headerVisible",void 0),Co([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),Co([qt(".kuc-table-1-18-0__table")],b.prototype,"_table",void 0),Co([qt(".kuc-table-1-18-0__table__body")],b.prototype,"_tBody",void 0),window.customElements.define("kuc-table-1-18-0",b),ue(`
  kuc-table-1-18-0,
  kuc-table-1-18-0 *,
  kuc-table-1-18-0:lang(en),
  kuc-table-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-table-1-18-0:lang(es),
  kuc-table-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-table-1-18-0:lang(ja),
  kuc-table-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-table-1-18-0:lang(zh),
  kuc-table-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-table-1-18-0:lang(zh-TW),
  kuc-table-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  kuc-table-1-18-0 {
    font-size: 14px;
    color: #333333;
    display: block;
  }
  kuc-table-1-18-0[hidden] {
    display: none;
  }
  kuc-table-1-18-0 kuc-* {
    line-height: 1;
  }
  .kuc-table-1-18-0__table {
    border-collapse: collapse;
  }
  .kuc-table-1-18-0__table__header {
    border-width: 0px 1px;
    border-color: var(--kuc-table-header-background-color, #3498db);
    border-style: solid;
    border-right: 0;
  }
  .kuc-table-1-18-0__table__header[hidden] {
    display: none;
  }
  .kuc-table-1-18-0__table__header__cell {
    box-sizing: border-box;
    font-size: var(--kuc-table-header-font-size, 12px);
    font-weight: 400;
    background-color: var(--kuc-table-header-background-color, #3498db);
    color: var(--kuc-table-header-color, #ffffff);
    height: var(--kuc-table-header-height, 40px);
    padding: 4px 8px;
    text-align: left;
    white-space: normal;
  }
  .kuc-table-1-18-0__table__header__cell-title {
    overflow-wrap: break-word;
    display: flex;
    align-items: center;
  }
  .kuc-table-1-18-0__table__header__cell[hidden] {
    display: none;
  }
  .kuc-table-1-18-0__table__header__cell .kuc-base-label-1-18-0__required-icon {
    font-size: var(--kuc-table-header-font-size, 20px);
    align-self: flex-start;
  }
  .kuc-table-1-18-0__table__body__row__cell-data {
    box-sizing: border-box;
    overflow-wrap: break-word;
    white-space: normal;
    border-color: #e3e7e8;
    border-style: solid;
    border-width: 1px;
    padding: 8px 8px;
    vertical-align: top;
  }
  .kuc-table-1-18-0__table__body__row__cell-data[hidden] {
    display: none;
  }
  .kuc-table-1-18-0__table__body__row__action {
    display: flex;
    vertical-align: top;
  }
  .kuc-table-1-18-0__table__body__row__action button {
    display: flex;
    align-items: center;
    width: 24px;
    height: 24px;
    background: transparent;
    border: 1px solid transparent;
    padding: 2px;
    cursor: pointer;
  }
  .kuc-table-1-18-0__table__body__row__action button[hidden] {
    display: none;
  }
  .kuc-table-1-18-0__table__body__row__action-add {
    margin-left: 12px;
  }
  .kuc-table-1-18-0__table__body__row__action-remove {
    margin-left: 4px;
  }
  .kuc-table-1-18-0__table__body__row__action-add:focus,
  .kuc-table-1-18-0__table__body__row__action-remove:focus {
    border: 1px solid #3498db;
    outline: none;
  }
  .kuc-table-1-18-0__table__body__row__action-remove:hover path {
    fill: #e74c3c;
  }
  .kuc-table-1-18-0__table__body__row__action[hidden] {
    display: none;
  }
  .kuc-table-1-18-0__table caption {
    text-align: left;
    margin-bottom: 6px;
    overflow-wrap: anywhere;
    white-space: normal;
  }
  .kuc-table-1-18-0__table .kuc-table-1-18-0__table__label--no-column {
    overflow-wrap: break-word;
  }
`),qh=b}})();var Pr=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Gh;(()=>{if(Gh=window.customElements.get("kuc-tabs-1-18-0"),!Gh){class b extends ce{constructor(a){super(),this.className="",this.id="",this.value="",this.borderVisible=!0,this.visible=!0,this.items=[],this._selectedValue="",this._isClick=!1,this._GUID=ti();const u=ze(a);Object.assign(this,u)}shouldUpdate(a){if(a.has("items")){if(!Xe(this.items))return this.throwErrorAfterUpdateComplete(bo),!1;for(let u=0;u<this.items.length;u++)if(this.items[u].value===void 0)return this.throwErrorAfterUpdateComplete(p1),!1;if(!Bm(this.items.map(u=>u.value)))return this.throwErrorAfterUpdateComplete(mm),!1}return!(a.has("value")&&!as(this.value)&&(this.throwErrorAfterUpdateComplete(os),1))}willUpdate(a){let u=this._getMatchedTabIndex();u===-1&&(u=this._getFirstVisibleTabIndex()),u>-1&&(this._selectedValue=this.items[u].value)}render(){return bt`
        <div class="kuc-tabs-1-18-0__group">
          <ul
            class="kuc-tabs-1-18-0__group__tab-list"
            role="tablist"
            @blur="${this._handleBlur}"
          >
            ${this.items.map((a,u)=>this._getTabTemplate(a,u))}
          </ul>
          <div
            class="kuc-tabs-1-18-0__group__tab-panel"
            ?border-visible="${this.borderVisible}"
          >
            ${this.items.map((a,u)=>this._getTabContentTemplate(a,u))}
          </div>
        </div>
      `}_getTabTemplate(a,u){const s=a.value===this._selectedValue;return bt`<li
        role="presentation"
        class="kuc-tabs-1-18-0__group__tab-list__tab"
      >
        <button
          role="tab"
          ?hidden="${a.visible===!1}"
          aria-selected="${s}"
          tabindex="${s&&!a.disabled?"0":"-1"}"
          class="kuc-tabs-1-18-0__group__tab-list__tab__button ${this._isClick?"kuc-tabs-1-18-0__group__tab-list__tab__button--click":""}"
          id="${this._GUID}-button-${u}"
          aria-controls="${this._GUID}-tabpanel-${u}"
          value="${a.value}"
          @click="${this._handleClickTab}"
          @mousedown="${this._handleMouseDown}"
          @keydown="${this._handleKeyDownTab}"
          ?disabled="${a.disabled}"
        >
          ${a.label?a.label:""}
        </button>
      </li>`}_getTabContentTemplate(a,u){const s=a.value===this._selectedValue;return bt`<div
        class="kuc-tabs-1-18-0__group__tab-panel__content"
        role="tabpanel"
        id="${this._GUID}-tabpanel-${u}"
        aria-labelledby="${this._GUID}-button-${u}"
        ?hidden="${!s||a.visible===!1}"
        @change="${this._handleChangeEvent}"
      >
        ${a.content?vo(a.content):""}
      </div>`}_handleMouseDown(a){this._isClick=!0}_handleClickTab(a){const u=a.target;u.blur();const s=this._getCurrentTabIndex(u.getAttribute("value"));if(this._tabButtons[s].focus(),this.value===u.value)return;const T=this._generateEventDetail(u.value);Ot(this,"change",T)}_handleChangeEvent(a){a.stopPropagation()}_handleBlur(a){this._isClick=!1}_handleKeyDownTab(a){this._isClick=!1;let u=!1;switch(a.key){case"Left":case"ArrowLeft":u=!0,this._moveToAdjacentTab(a.target,"prev");break;case"Right":case"ArrowRight":u=!0,this._moveToAdjacentTab(a.target,"next");break;case"Home":u=!0,this._moveToLastFirstTab(a.target,"first");break;case"End":u=!0,this._moveToLastFirstTab(a.target,"last")}u&&(a.stopPropagation(),a.preventDefault())}_getCurrentTabIndex(a){let u=-1;for(let s=0;s<this.items.length;s++)if(this.items[s].value===a){u=s;break}return u===-1&&(u=this._getFirstVisibleTabIndex()),u}_getFirstVisibleTabIndex(){return this.items.findIndex(a=>a.visible!==!1)}_getMatchedTabIndex(){return this.items.findIndex(a=>a.visible!==!1&&a.value===this.value)}_moveToLastFirstTab(a,u){const s=this._getCurrentTabIndex(a.getAttribute("value")),T=u==="last"?-1:1;let k=u==="last"?this.items.length-1:0;for(;k!==s;){if(this.items[k].visible!==!1&&this.items[k].disabled!==!0){a.blur(),Ot(this,"change",this._generateEventDetail(this._tabButtons[k].getAttribute("value"))),this._tabButtons[this._getCurrentTabIndex(this.value)].focus();break}k+=T}}_moveToAdjacentTab(a,u){const s=this._getCurrentTabIndex(a.getAttribute("value")),T=u==="next"?1:-1;let k=s+T;for(;k!==s&&(k===this.items.length?k=0:k===-1&&(k=this.items.length-1),k!==s);){if(this.items[k].visible!==!1&&this.items[k].disabled!==!0){a.blur(),Ot(this,"change",this._generateEventDetail(this._tabButtons[k].getAttribute("value"))),this._tabButtons[this._getCurrentTabIndex(this.value)].focus();break}k+=T}}_generateEventDetail(a){const u=this.value;return this.value=a,{oldValue:u,value:a}}}Pr([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),Pr([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),Pr([F({type:String})],b.prototype,"value",void 0),Pr([F({type:Boolean})],b.prototype,"borderVisible",void 0),Pr([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),Pr([F({type:Array})],b.prototype,"items",void 0),Pr([rn(".kuc-tabs-1-18-0__group__tab-list__tab__button")],b.prototype,"_tabButtons",void 0),Pr([se()],b.prototype,"_isClick",void 0),window.customElements.define("kuc-tabs-1-18-0",b),ue(`
  kuc-tabs-1-18-0,
  kuc-tabs-1-18-0 *,
  kuc-tabs-1-18-0:lang(en),
  kuc-tabs-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-tabs-1-18-0:lang(es),
  kuc-tabs-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-tabs-1-18-0:lang(ja),
  kuc-tabs-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-tabs-1-18-0:lang(zh),
  kuc-tabs-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-tabs-1-18-0:lang(zh-TW),
  kuc-tabs-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  kuc-tabs-1-18-0 {
    display: inline-block;
  }
  kuc-tabs-1-18-0[hidden] {
    display: none;
  }
  .kuc-tabs-1-18-0__group__tab-list {
    display: flex;
    flex: 1;
    padding: 16px 16px 0 16px;
    margin: 0;
    list-style: none;
  }
  .kuc-tabs-1-18-0__group__tab-list__tab {
    min-height: var(--kuc-tabs-tab-height, 48px);
    height: var(--kuc-tabs-tab-height, 48px);
    white-space: normal;
  }
  .kuc-tabs-1-18-0__group__tab-list__tab__button:disabled {
    color: GrayText;
    background-color: #d4d7d7;
    cursor: not-allowed;
  }
  .kuc-tabs-1-18-0__group__tab-list__tab__button {
    height: 100%;
    margin: 0;
    padding: 0 24px;
    display: grid;
    align-items: center;
    align-content: center;
    font-size: var(--kuc-tabs-tab-font-size, 14px);
    background-color: var(--kuc-tabs-tab-background-color, #d4d7d7);
    color: var(--kuc-tabs-tab-color, #333333);
    border-style: none;
    border-top: 1px solid #c7cbcb;
    border-left: 1px solid #c7cbcb;
    box-shadow: 1px 0 3px #c7cbcb inset;
    box-sizing: border-box;
    cursor: pointer;
    line-height: 1.5;
    width: var(--kuc-tabs-tab-width, auto);
    min-width: var(--kuc-tabs-tab-width, 200px);
    word-wrap: break-word;
  }
  .kuc-tabs-1-18-0__group__tab-list__tab__button[hidden] {
    display: none;
  }
  .kuc-tabs-1-18-0__group__tab-list__tab__button:last-of-type {
    border-right: 1px solid #c7cbcb;
  }

  .kuc-tabs-1-18-0__group__tab-list__tab__button:focus {
    outline: none;
    border: 1px solid #3498db;
  }
  .kuc-tabs-1-18-0__group__tab-list__tab__button--click:focus{
    border: none;
    border-top: 1px solid #c7cbcb;
    border-left: 1px solid #c7cbcb;
    border-right: 1px solid #c7cbcb;
  }
  .kuc-tabs-1-18-0__group__tab-list__tab__button[aria-selected="true"] {
    background-color: var(--kuc-tabs-tab-background-color-selected, #ffffff);
    color: var(--kuc-tabs-tab-color-selected, #333333);
    box-shadow: none;
  }
  .kuc-tabs-1-18-0__group__tab-panel {
    display:block;
    padding: 0;
    border-top: 0;
  }
  .kuc-tabs-1-18-0__group__tab-panel[border-visible] {
    box-shadow: 0 0 8px 2px rgb(0 0 0 / 10%);
  }
  .kuc-tabs-1-18-0__group__tab-panel__content[hidden]{
    display:none;
  }
`),Gh=b}})();var Zn=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Zh;(()=>{if(Zh=window.customElements.get("kuc-text-1-18-0"),!Zh){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.placeholder="",this.prefix="",this.suffix="",this.textAlign="left",this.value="",this.disabled=!1,this.requiredIcon=!1,this.visible=!0,this._GUID=ti();const u=ze(a);Object.assign(this,u)}_handleFocusInput(a){const u={value:this.value};Ot(this,"focus",u)}_handleChangeInput(a){a.stopPropagation();const u=a.target,s={value:"",oldValue:this.value};this.value=u.value,s.value=this.value,Ot(this,"change",s)}_handleInputText(a){a.stopPropagation();const u={value:a.target.value,data:a.data};Ot(this,"input",u)}render(){return bt`
        <div class="kuc-text-1-18-0__group">
          <label
            class="kuc-text-1-18-0__group__label"
            for="${this._GUID}-label"
            ?hidden="${!this.label}"
          >
            <kuc-base-label-1-18-0
              .text="${this.label}"
              .requiredIcon="${this.requiredIcon}"
            ></kuc-base-label-1-18-0>
          </label>
          <div class="kuc-text-1-18-0__group__input-form">
            <div class="kuc-text-1-18-0__group__input-form__prefix-outer">
              <span
                class="kuc-text-1-18-0__group__input-form__prefix-outer__prefix"
                ?hidden="${!this.prefix}"
                >${this.prefix}</span
              >
            </div>
            <div class="kuc-text-1-18-0__group__input-form__input-outer">
              <input
                class="kuc-text-1-18-0__group__input-form__input-outer__input"
                id="${this._GUID}-label"
                placeholder="${this.placeholder}"
                textAlign="${this.textAlign}"
                type="text"
                .value="${this.value}"
                aria-required="${this.requiredIcon}"
                aria-invalid="${this.error!==""}"
                aria-describedby="${this._GUID}-error"
                @focus="${this._handleFocusInput}"
                @change="${this._handleChangeInput}"
                @input="${this._handleInputText}"
                ?disabled="${this.disabled}"
              />
            </div>
            <div class="kuc-text-1-18-0__group__input-form__suffix-outer">
              <span
                class="kuc-text-1-18-0__group__input-form__suffix-outer__suffix"
                ?hidden="${!this.suffix}"
                >${this.suffix}</span
              >
            </div>
          </div>
          <kuc-base-error-1-18-0
            .text="${this.error}"
            .guid="${this._GUID}"
            ?hidden="${!this.error}"
          ></kuc-base-error-1-18-0>
        </div>
      `}}Zn([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),Zn([F({type:String})],b.prototype,"error",void 0),Zn([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),Zn([F({type:String})],b.prototype,"label",void 0),Zn([F({type:String})],b.prototype,"placeholder",void 0),Zn([F({type:String})],b.prototype,"prefix",void 0),Zn([F({type:String})],b.prototype,"suffix",void 0),Zn([F({type:String})],b.prototype,"textAlign",void 0),Zn([F({type:String})],b.prototype,"value",void 0),Zn([F({type:Boolean})],b.prototype,"disabled",void 0),Zn([F({type:Boolean})],b.prototype,"requiredIcon",void 0),Zn([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),window.customElements.define("kuc-text-1-18-0",b),ue(`
kuc-text-1-18-0,
kuc-text-1-18-0 *,
kuc-text-1-18-0:lang(en),
kuc-text-1-18-0:lang(en) * {
  font-family: sans-serif;
}
kuc-text-1-18-0:lang(es),
kuc-text-1-18-0:lang(es) * {
  font-family: sans-serif;
}
kuc-text-1-18-0:lang(ja),
kuc-text-1-18-0:lang(ja) * {
  font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
    sans-serif;
}
kuc-text-1-18-0:lang(zh),
kuc-text-1-18-0:lang(zh) * {
  font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", sans-serif;
}
kuc-text-1-18-0:lang(zh-TW),
kuc-text-1-18-0:lang(zh-TW) * {
  font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
    Hei,"Heiti SC",sans-serif;
}
kuc-text-1-18-0 {
  font-size: 14px;
  color: #333333;
  display: inline-table;
  vertical-align: top;
  min-width: var(--kuc-text-input-width, 177px);
  width: var(--kuc-text-input-width, 177px);
  line-height: 1.5;
}
kuc-text-1-18-0[hidden] {
  display: none;
}
.kuc-text-1-18-0__group {
  border: none;
  padding: 0px;
  height: auto;
  display: inline-block;
  vertical-align: top;
  width: 100%;
  margin: 0px;
}
.kuc-text-1-18-0__group__label {
  display: inline-block;
  padding: 4px 0px 8px 0px;
  white-space: nowrap;
}
.kuc-text-1-18-0__group__label[hidden] {
  display: none;
}
.kuc-text-1-18-0__group__input-form {
  display: flex;
  align-items: center;
  width: 100%;
}
.kuc-text-1-18-0__group__input-form__prefix-outer__prefix {
  padding-right: 4px;
  white-space: nowrap;
}
.kuc-text-1-18-0__group__input-form__input-outer {
  display: flex;
  min-width: var(--kuc-text-input-width, 26px);
  width: var(--kuc-text-input-width, 100%);
}
input[type="text"].kuc-text-1-18-0__group__input-form__input-outer__input {
  width: var(--kuc-text-input-width, 100%);
  height: var(--kuc-text-input-height, 40px);
  font-size: var(--kuc-text-input-font-size, 14px);
  color: var(--kuc-text-input-color, #000000);
  padding: 0 8px;
  border: 1px solid #e3e7e8;
  box-sizing: border-box;
  box-shadow: 2px 2px 4px #f5f5f5 inset, -2px -2px 4px #f5f5f5 inset;
}
.kuc-text-1-18-0__group__input-form__input-outer__input[textAlign="left"] {
  text-align: left;
}
.kuc-text-1-18-0__group__input-form__input-outer__input[textAlign="right"] {
  text-align: right;
}
input[type=text].kuc-text-1-18-0__group__input-form__input-outer__input:focus {
  outline: none;
  border: 1px solid #3498db;
}
input[type=text].kuc-text-1-18-0__group__input-form__input-outer__input:disabled {
  color: #888888;
  background-color: #d4d7d7;
  box-shadow: none;
  cursor: not-allowed;
}
.kuc-text-1-18-0__group__input-form__suffix-outer__suffix {
  padding-left: 4px;
  white-space: nowrap;
}
`),Zh=b}})();var ao=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Wh;(()=>{if(Wh=window.customElements.get("kuc-textarea-1-18-0"),Wh)return;class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.placeholder="",this.value="",this.disabled=!1,this.requiredIcon=!1,this.visible=!0,this._onResize=!1,this._GUID=ti();const u=ze(a);Object.assign(this,u)}_handleFocusTextarea(a){const u={value:this.value};Ot(this,"focus",u)}_handleChangeTextarea(a){a.stopPropagation();const u=a.target,s={value:"",oldValue:this.value};this.value=u.value,s.value=this.value,Ot(this,"change",s)}_handleInputTextArea(a){a.stopPropagation();const u={value:a.target.value,data:a.data};Ot(this,"input",u)}_handleMouseDownResize(){this._onResize=!0}_handleMouseUpDocument(){this._onResize=!1}_handleMouseMoveDocument(a){if(!this._onResize)return;const u=this._textarea.getBoundingClientRect();let s=a.clientX-u.left,T=a.clientY-u.top;s<16&&(s=16),T<16&&(T=16),this._container.style.width=s+"px",this._textarea.style.height=T+"px"}_getResizerButtonSvgTemplate(){return Ce`
      <svg height="16" width="16">
        <g fill="none" stroke="#b6b6b6" stroke-width="2">
          <line x1="14" x2="16" y1="15" y2="15" />
          <line x1="14" x2="16" y1="11" y2="11" />
          <line x1="14" x2="16" y1="7" y2="7" />
          <line x1="10" x2="12" y1="15" y2="15" />
          <line x1="6" x2="8" y1="15" y2="15" />
          <line x1="10" x2="12" y1="11" y2="11" />
        </g>
      </svg>
      `}firstUpdated(){document.addEventListener("mousemove",a=>this._handleMouseMoveDocument(a)),document.addEventListener("mouseup",a=>this._handleMouseUpDocument())}render(){return bt`
        <div class="kuc-textarea-1-18-0__group">
          <label
            class="kuc-textarea-1-18-0__group__label"
            ?hidden="${!this.label}"
            for="${this._GUID}-label"
          >
            <kuc-base-label-1-18-0
              .text="${this.label}"
              .requiredIcon="${this.requiredIcon}"
            ></kuc-base-label-1-18-0>
          </label>
          <div class="kuc-textarea-1-18-0__group__container">
            <textarea
              id="${this._GUID}-label"
              class="kuc-textarea-1-18-0__group__textarea"
              placeholder="${this.placeholder}"
              .value="${this.value}"
              aria-describedby="${this._GUID}-error"
              aria-required="${this.requiredIcon}"
              aria-invalid="${this.error!==""}"
              @change="${this._handleChangeTextarea}"
              @focus="${this._handleFocusTextarea}"
              @input="${this._handleInputTextArea}"
              ?disabled="${this.disabled}"
            >
            </textarea>
            <div
              class="kuc-textarea-1-18-0__group__resizer"
              @mousedown="${this._handleMouseDownResize}"
              ?hidden="${this.disabled}"
            >
              ${this._getResizerButtonSvgTemplate()}
            </div>
          </div>
          <kuc-base-error-1-18-0
            .text="${this.error}"
            .guid="${this._GUID}"
            ?hidden="${!this.error}"
          ></kuc-base-error-1-18-0>
        </div>
      `}}ao([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),ao([F({type:String})],b.prototype,"error",void 0),ao([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),ao([F({type:String})],b.prototype,"label",void 0),ao([F({type:String})],b.prototype,"placeholder",void 0),ao([F({type:String})],b.prototype,"value",void 0),ao([F({type:Boolean})],b.prototype,"disabled",void 0),ao([F({type:Boolean})],b.prototype,"requiredIcon",void 0),ao([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),ao([qt(".kuc-textarea-1-18-0__group__container")],b.prototype,"_container",void 0),ao([qt(".kuc-textarea-1-18-0__group__textarea")],b.prototype,"_textarea",void 0),window.customElements.define("kuc-textarea-1-18-0",b),ue(`
  kuc-textarea-1-18-0,
  kuc-textarea-1-18-0 *,
  kuc-textarea-1-18-0:lang(en),
  kuc-textarea-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-textarea-1-18-0:lang(es),
  kuc-textarea-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-textarea-1-18-0:lang(ja),
  kuc-textarea-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-textarea-1-18-0:lang(zh),
  kuc-textarea-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-textarea-1-18-0:lang(zh-TW),
  kuc-textarea-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  kuc-textarea-1-18-0 {
    font-size: 14px;
    color: var(--kuc-textarea-input-color, #333333);
    display: inline-table;
    vertical-align: top;
    width: var(--kuc-textarea-input-width, 299px);
    height: var(--kuc-textarea-input-height, 125px);
    line-height: 1.5;
  }
  kuc-textarea-1-18-0[hidden] {
    display: none;
  }
  .kuc-textarea-1-18-0__group {
    border: none;
    padding: 0px;
    height: auto;
    display: inline-block;
    vertical-align: top;
    width: 100%;
    margin: 0px;
    white-space: normal;
  }
  .kuc-textarea-1-18-0__group__label {
    white-space: nowrap;
    display: inline-block;
    padding: 4px 0px 8px 0px;
  }
  .kuc-textarea-1-18-0__group__label[hidden] {
    display: none;
  }
  .kuc-textarea-1-18-0__group__container {
    position: relative;
    display: inline-table;
    width: var(--kuc-textarea-input-width, 100%);
    min-width: var(--kuc-textarea-input-width, 100%);
  }
  textarea.kuc-textarea-1-18-0__group__textarea {
    display: block;
    border: 1px solid #e3e7e8;
    box-sizing: border-box;
    font-size: var(--kuc-textarea-input-font-size, 14px);
    box-shadow: 2px 2px 4px #f5f5f5 inset, -2px -2px 4px #f5f5f5 inset;
    min-width: var(--kuc-textarea-input-width, 299px);
    min-height: var(--kuc-textarea-input-height, 125px);
    width: var(--kuc-textarea-input-width, 299px);
    height: var(--kuc-textarea-input-height, 125px);
    padding: 8px;
    resize: none;
    width: 100%;
    background-color: #ffffff;
    color: var(--kuc-textarea-input-color, #333333);
  }
  .kuc-textarea-1-18-0__group__textarea:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 2px 2px 4px #f5f5f5 inset, -2px -2px 4px #f5f5f5 inset;
    border: 1px solid #3498db;
    background-color: #ffffff;
    color: var(--kuc-textarea-input-color, #333333);
  }
  .kuc-textarea-1-18-0__group__textarea:disabled {
    color: #888888;
    background-color: #d4d7d7;
    box-shadow: none;
    cursor: not-allowed;
    resize: none;
  }
  .kuc-textarea-1-18-0__group__resizer {
    position: absolute;
    width: 16px;
    height: 16px;
    cursor: se-resize;
    float: right;
    margin: -16px 0px;
    right: 0px;
  }
`),Wh=b})();var Mn=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Xh;(()=>{if(Xh=window.customElements.get("kuc-time-picker-1-18-0"),!Xh){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.language="auto",this.max="",this.min="",this.value="",this.disabled=!1,this.hour12=!1,this.requiredIcon=!1,this.visible=!0,this.timeStep=30,this._errorText="",this._inputValue="",this._errorInvalid="",this._inputMax="",this._inputMin="",this._inputTimeStep=30,this._valueConverted="",this._GUID=ti();const u=ze(a);Object.assign(this,u)}shouldUpdate(a){if(a.has("max")||a.has("min")){let u=this._inputMin,s=this._inputMax;if(this.max===void 0||this.max==="")s=vm;else{if(!ma(this.max))return this.throwErrorAfterUpdateComplete(xm),!1;s=this.max=Zo(this.max)}if(this.min===void 0||this.min==="")u=kh;else{if(!ma(this.min))return this.throwErrorAfterUpdateComplete(wm),!1;u=this.min=Zo(this.min)}if(Er(s,u)<0)return this.throwErrorAfterUpdateComplete(gm),!1;this._inputMin=u,this._inputMax=s}if(a.has("timeStep")){if(!fa(this.timeStep))return this.throwErrorAfterUpdateComplete(ym),!1;if(!zm(this.timeStep,this._inputMax,this._inputMin))return this.throwErrorAfterUpdateComplete(km),!1;this._inputTimeStep=this.timeStep}return!(this.value!==void 0&&this.value!==""&&(ma(this.value)?(this._valueConverted=Zo(this.value),a.has("value")&&(Er(this._valueConverted,this._inputMin)<0||Er(this._inputMax,this._valueConverted)<0)&&(this.throwErrorAfterUpdateComplete(bm),1)):(this.throwErrorAfterUpdateComplete(yo),1)))}update(a){a.has("value")&&(this.value===void 0?this._errorInvalid===""&&(this._inputValue=""):(this.value=this.value===""?this.value:this._valueConverted,this._inputValue=this.value)),(a.has("max")||a.has("min")||a.has("value"))&&this.value!==void 0&&(this._errorInvalid=""),this._errorText=this._errorInvalid||this.error,super.update(a)}render(){return bt`
        <fieldset
          class="kuc-time-picker-1-18-0__group"
          aria-describedby="${this._GUID}-error"
        >
          <legend
            class="kuc-time-picker-1-18-0__group__label"
            ?hidden="${!this.label}"
          >
            <kuc-base-label-1-18-0
              .text="${this.label}"
              .requiredIcon="${this.requiredIcon}"
            ></kuc-base-label-1-18-0>
          </legend>
          <kuc-base-time-1-18-0
            class="kuc-time-picker-1-18-0__group__input"
            .value="${this._inputValue}"
            .hour12="${this.hour12}"
            .disabled="${this.disabled}"
            .timeStep="${this._inputTimeStep}"
            .min="${this._inputMin}"
            .max="${this._inputMax}"
            .language="${this._getLanguage()}"
            @kuc:base-time-change="${this._handleTimeChange}"
          >
          </kuc-base-time-1-18-0>
          <kuc-base-error-1-18-0
            .text="${this._errorText}"
            .guid="${this._GUID}"
            ?hidden="${!this._errorText}"
          ></kuc-base-error-1-18-0>
        </fieldset>
      `}_handleTimeChange(a){a.preventDefault(),a.stopPropagation();const u={value:a.detail.value,oldValue:this.value};a.detail.error?(u.value=void 0,this.value=void 0,this._errorInvalid=a.detail.error,this.error=""):(this.value=a.detail.value,this._errorInvalid=""),this._inputValue=a.detail.value,Ot(this,"change",u)}_getLanguage(){const a=["en","ja","zh","zh-TW","es"];return a.indexOf(this.language)!==-1?this.language:a.indexOf(document.documentElement.lang)!==-1?document.documentElement.lang:"en"}}Mn([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),Mn([F({type:String})],b.prototype,"error",void 0),Mn([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),Mn([F({type:String})],b.prototype,"label",void 0),Mn([F({type:String,attribute:"lang",reflect:!0,converter:pa})],b.prototype,"language",void 0),Mn([F({type:String})],b.prototype,"max",void 0),Mn([F({type:String})],b.prototype,"min",void 0),Mn([F({type:String})],b.prototype,"value",void 0),Mn([F({type:Boolean})],b.prototype,"disabled",void 0),Mn([F({type:Boolean})],b.prototype,"hour12",void 0),Mn([F({type:Boolean})],b.prototype,"requiredIcon",void 0),Mn([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),Mn([F({type:Number})],b.prototype,"timeStep",void 0),window.customElements.define("kuc-time-picker-1-18-0",b),ue(`
kuc-time-picker-1-18-0,
kuc-time-picker-1-18-0 *,
kuc-time-picker-1-18-0:lang(en),
kuc-time-picker-1-18-0:lang(en) * {
  font-family: sans-serif;
}
kuc-time-picker-1-18-0:lang(ja),
kuc-time-picker-1-18-0:lang(ja) * {
  font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
    sans-serif;
}
kuc-time-picker-1-18-0:lang(zh),
kuc-time-picker-1-18-0:lang(zh) * {
  font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", sans-serif;
}
kuc-time-picker-1-18-0:lang(zh-TW),
kuc-time-picker-1-18-0:lang(zh-TW) * {
  font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
    Hei,"Heiti SC"
}
kuc-time-picker-1-18-0:lang(es),
kuc-time-picker-1-18-0:lang(es) * {
  font-family: sans-serif;
}
kuc-time-picker-1-18-0 {
  font-size: 14px;
  color: var(--kuc-time-picker-input-color, #333333);
  display: inline-table;
  max-width: var(--kuc-time-picker-input-width, 85px);
  width: var(--kuc-time-picker-input-width, 85px);
  vertical-align: top;
  line-height: 1.5;
}
.kuc-time-picker-1-18-0__group__input {
  position: relative;
}
kuc-time-picker-1-18-0[hidden] {
  display: none;
}
.kuc-time-picker-1-18-0__group {
  display: flex;
  flex-direction: column;
  border: none;
  padding: 0px;
  height: auto;
  margin: 0px;
}

.kuc-time-picker-1-18-0__group kuc-base-time-1-18-0 {
  display: inline-flex;
  flex-direction: column;
}

.kuc-time-picker-1-18-0__group .kuc-base-time-1-18-0__group {
  max-width: var(--kuc-time-picker-input-width, 85px);
  width: var(--kuc-time-picker-input-width, 85px);
  font-size: var(--kuc-time-picker-input-font-size, 14px);
  height: var(--kuc-time-picker-input-height, 40px);
  color: var(--kuc-time-picker-input-color, #333333);
}
.kuc-time-picker-1-18-0__group .kuc-base-time-1-18-0__group input[type=text].kuc-base-time-1-18-0__group__hours,
.kuc-time-picker-1-18-0__group .kuc-base-time-1-18-0__group input[type=text].kuc-base-time-1-18-0__group__minutes,
.kuc-time-picker-1-18-0__group .kuc-base-time-1-18-0__group input.kuc-base-time-1-18-0__group__suffix,
.kuc-time-picker-1-18-0__group .kuc-base-time-1-18-0__group--focus {
  color: var(--kuc-time-picker-input-color, #333333);
}
.kuc-time-picker-1-18-0__group__label {
  padding: 4px 0px 8px 0px;
  display: inline-block;
  white-space: nowrap;
}
.kuc-time-picker-1-18-0__group__label[hidden] {
  display: none;
}
`),Xh=b}})();var Ko=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Kh;(()=>{if(Kh=window.customElements.get("kuc-tooltip-1-18-0"),!Kh){class b extends ce{constructor(a){super(),this.className="",this.id="",this.placement="top",this.title="",this.container="",this.describeChild=!1,this._container="",this._GUID=ti();const u=ze(a);Object.assign(this,u),this._globalEscapeBound=this._globalEscape.bind(this)}update(a){a.has("container")&&(this._container=vo(this.container)),super.update(a)}render(){return bt`
        <div
          class="kuc-tooltip-1-18-0__group kuc-tooltip-1-18-0__group--${this._getPlacement()}"
        >
          <div
            class="kuc-tooltip-1-18-0__group__container"
            @focusin="${this._handleFocusinContainer}"
            @focusout="${this._handleFocusoutContainer}"
            @mouseenter="${this._handleMouseEnterContainer}"
            @mouseleave="${this._handleMouseLeaveContainer}"
            @touchstart="${this._handleTouchStartContainer}"
          >
            ${this._container}
          </div>
          ${this._getTitleTemplate()}
        </div>
      `}updated(){this._initializeFirstChildElement(),this.describeChild?this._setChildTitleAttribute():this._setChildAriaLabelAttribute()}_handleMouseEnterContainer(){this._openTooltip()}_handleTouchStartContainer(){this._openTooltip()}_handleMouseLeaveContainer(a){const u=a.relatedTarget;this._titleWrapper&&this._titleWrapper.contains(u)||this._closeTooltip()}_initializeFirstChildElement(){if(typeof this._container!="string"){const a=this._groupContainerEL.firstElementChild;a&&!a.getAttribute("aria-describedby")&&(this._firstChildEl=a)}}_setChildTitleAttribute(){this._firstChildEl&&(this._firstChildEl.setAttribute("title",this.title),this._firstChildEl.removeAttribute("aria-label"))}_setChildAriaLabelAttribute(){this._firstChildEl&&(this._firstChildEl.setAttribute("aria-label",this.title),this._firstChildEl.removeAttribute("title"))}_getTitleTemplate(){return this.title?bt`
        <div
          id="${this._GUID}-title"
          class="kuc-tooltip-1-18-0__group__title kuc-tooltip-1-18-0__group__title--hidden"
          role="tooltip"
          @mouseleave="${this._handleMouseLeaveTitle}"
        >
          <div class="kuc-tooltip-1-18-0__group__title__wrapper">
            <div class="kuc-tooltip-1-18-0__group__title__wrapper__arrow"></div>
            <div class="kuc-tooltip-1-18-0__group__title__wrapper__text">
              ${this.title}
            </div>
          </div>
        </div>
      `:bt``}_handleMouseLeaveTitle(a){const u=a.relatedTarget;this._groupContainerEL.contains(u)||this._closeTooltip()}_handleFocusinContainer(){this._openTooltip()}_handleFocusoutContainer(){this._closeTooltip()}_openTooltip(){this._updateChildElementAttributes(!0),this._showTooltip(),this._attachGlobalListener()}_closeTooltip(){this._updateChildElementAttributes(!1),this._hideTooltip(),this._removeGlobalListener()}_updateChildElementAttributes(a){if(this._firstChildEl&&this.describeChild){if(a)return this._firstChildEl.removeAttribute("title"),void this._firstChildEl.setAttribute("aria-describedby",`${this._GUID}-title`);this._firstChildEl.removeAttribute("aria-describedby"),this._firstChildEl.setAttribute("title",this.title)}}_showTooltip(){this._tooltips.length!==0&&this._tooltips.forEach(a=>{a.id===`${this._GUID}-title`&&a.classList.remove("kuc-tooltip-1-18-0__group__title--hidden")})}_hideTooltip(){this._tooltips.length!==0&&this._tooltips.forEach(a=>{a.id===`${this._GUID}-title`&&a.classList.add("kuc-tooltip-1-18-0__group__title--hidden")})}_attachGlobalListener(){document.addEventListener("keydown",this._globalEscapeBound)}_removeGlobalListener(){document.removeEventListener("keydown",this._globalEscapeBound)}_globalEscape(a){a.key!=="Escape"&&a.key!=="Esc"||this._closeTooltip()}_getPlacement(){return["top","bottom","left","right"].includes(this.placement)?this.placement:"top"}}Ko([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),Ko([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),Ko([F({type:String})],b.prototype,"placement",void 0),Ko([F({type:String})],b.prototype,"title",void 0),Ko([F()],b.prototype,"container",void 0),Ko([F({type:Boolean})],b.prototype,"describeChild",void 0),Ko([qt(".kuc-tooltip-1-18-0__group__container")],b.prototype,"_groupContainerEL",void 0),Ko([qt(".kuc-tooltip-1-18-0__group__title__wrapper")],b.prototype,"_titleWrapper",void 0),Ko([rn(".kuc-tooltip-1-18-0__group__title")],b.prototype,"_tooltips",void 0),window.customElements.define("kuc-tooltip-1-18-0",b),ue(`
  kuc-tooltip-1-18-0,
  kuc-tooltip-1-18-0 *,
  kuc-tooltip-1-18-0:lang(en),
  kuc-tooltip-1-18-0:lang(en) * {
    font-family: sans-serif;
  }
  kuc-tooltip-1-18-0:lang(es),
  kuc-tooltip-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-tooltip-1-18-0:lang(ja),
  kuc-tooltip-1-18-0:lang(ja) * {
    font-family: "メイリオ", "Hiragino Kaku Gothic ProN", Meiryo,
      sans-serif;
  }
  kuc-tooltip-1-18-0:lang(zh),
  kuc-tooltip-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", sans-serif;
  }
  kuc-tooltip-1-18-0:lang(zh-TW),
  kuc-tooltip-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黑體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC",sans-serif;
  }
  .kuc-tooltip-1-18-0__group__title--hidden {
    display: none;
  }
  .kuc-tooltip-1-18-0__group {
    position: relative;
    display: inline-block;
  }
  .kuc-tooltip-1-18-0__group::after {
    position: absolute;
    right: -20%;
    top: 100%;
    left: -20%;
    display: block;
    height: calc(0.5em * 2);
  }
  .kuc-tooltip-1-18-0__group__title .kuc-tooltip-1-18-0__group__title__wrapper__text {
    max-width: var(--kuc-tooltip-width, 250px);
    width: var(--kuc-tooltip-width, auto);
    min-height: var(--kuc-tooltip-height, 32px);;
    height: var(--kuc-tooltip-height, auto);
    padding: 6px 8px;
    color: var(--kuc-tooltip-color, #ffffff);
    text-align: start;
    text-decoration: none;
    word-wrap: break-word;
    overflow: auto;
    white-space: normal;
    background-color: var(--kuc-tooltip-background-color, #000000);
    font-size: var(--kuc-tooltip-font-size);
    border-radius: 6px;
    box-shadow: 0 6px 16px 0 rgb(0 0 0 / 8%), 0 3px 6px -4px rgb(0 0 0 / 12%), 0 9px 28px 8px rgb(0 0 0 / 5%);
    box-sizing: border-box;
  }
  .kuc-tooltip-1-18-0__group__title {
    position: absolute;
    top: calc(100% + calc(0.5em * 2));
    left: 50%;
    transform: translateX(-50%);
    margin: 0;
    border-radius: 0.25em;
    color: var(--kuc-tooltip-color, #ffffff);
    width: max-content;
    z-index: 1000;
  }
  .kuc-tooltip-1-18-0__group.kuc-tooltip-1-18-0__group--top > .kuc-tooltip-1-18-0__group__title {
    top: unset;
    bottom: 100%;
  }
  .kuc-tooltip-1-18-0__group.kuc-tooltip-1-18-0__group--bottom > .kuc-tooltip-1-18-0__group__title {
    width: max-content;
    top: auto;
  }
  .kuc-tooltip-1-18-0__group.kuc-tooltip-1-18-0__group--left > .kuc-tooltip-1-18-0__group__title {
    width: max-content;
    height: fit-content;
    margin: auto 0;
    right: 100%;
    left: auto;
    top: 0;
    bottom: 0;
    transform: translateX(0);
  }
  .kuc-tooltip-1-18-0__group.kuc-tooltip-1-18-0__group--right > .kuc-tooltip-1-18-0__group__title {
    width: max-content;
    height: fit-content;
    margin: auto 0;
    left: 100%;
    top: 0;
    bottom: 0;
    transform: translateX(0);
  }
  .kuc-tooltip-1-18-0__group .kuc-tooltip-1-18-0__group__title__wrapper__arrow {
    border: 0.5em solid transparent;
    border-bottom-color: var(--kuc-tooltip-background-color, #000000);
  }
  .kuc-tooltip-1-18-0__group.kuc-tooltip-1-18-0__group--top > .kuc-tooltip-1-18-0__group__title .kuc-tooltip-1-18-0__group__title__wrapper__arrow {
    border-top-color: var(--kuc-tooltip-background-color, #000000);
    border-right-color: transparent;
    border-bottom-color: transparent;
    margin: auto 0;
  }
  .kuc-tooltip-1-18-0__group.kuc-tooltip-1-18-0__group--left > .kuc-tooltip-1-18-0__group__title .kuc-tooltip-1-18-0__group__title__wrapper__arrow {
    border-left-color: var(--kuc-tooltip-background-color, #000000);
    border-bottom-color: transparent;
  }
  .kuc-tooltip-1-18-0__group.kuc-tooltip-1-18-0__group--right > .kuc-tooltip-1-18-0__group__title .kuc-tooltip-1-18-0__group__title__wrapper__arrow {
    border-right-color: var(--kuc-tooltip-background-color, #000000);
    border-bottom-color: transparent;
    width: fit-content;
    height: fit-content;
    margin: auto 0;
    top: 0;
    bottom: 0;
    right: 100%;
    left: auto;
  }
  .kuc-tooltip-1-18-0__group .kuc-tooltip-1-18-0__group__title__wrapper {
    display: flex;
    align-items: center;
  }
  .kuc-tooltip-1-18-0__group.kuc-tooltip-1-18-0__group--top > .kuc-tooltip-1-18-0__group__title .kuc-tooltip-1-18-0__group__title__wrapper {
    flex-direction: column-reverse;
  }
  .kuc-tooltip-1-18-0__group.kuc-tooltip-1-18-0__group--bottom > .kuc-tooltip-1-18-0__group__title .kuc-tooltip-1-18-0__group__title__wrapper {
    flex-direction: column;
  }
  .kuc-tooltip-1-18-0__group.kuc-tooltip-1-18-0__group--left > .kuc-tooltip-1-18-0__group__title .kuc-tooltip-1-18-0__group__title__wrapper {
    flex-direction: row-reverse;
  }
`),Kh=b}})();var ya=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let Yh;(()=>{if(Yh=window.customElements.get("kuc-mobile-button-1-18-0"),!Yh){class b extends ce{constructor(a){super(),this.className="",this.id="",this.text="",this.type="normal",this.content="",this.disabled=!1,this.visible=!0;const u=ze(a);Object.assign(this,u)}_handleClickButton(a){a.stopPropagation(),Ot(this,"click")}_getButtonColorType(){return this.type==="normal"||this.type==="submit"?this.type:"normal"}render(){return bt`
        <button
          type="button"
          class="kuc-mobile-button-1-18-0__button kuc-mobile-button-1-18-0__button--${this._getButtonColorType()}"
          ?disabled="${this.disabled}"
          @click="${this._handleClickButton}"
        >
          ${this.content?vo(this.content):this.text}
        </button>
      `}}ya([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),ya([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),ya([F({type:String})],b.prototype,"text",void 0),ya([F({type:String})],b.prototype,"type",void 0),ya([F()],b.prototype,"content",void 0),ya([F({type:Boolean})],b.prototype,"disabled",void 0),ya([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),window.customElements.define("kuc-mobile-button-1-18-0",b),ue(`
  kuc-mobile-button-1-18-0,
  kuc-mobile-button-1-18-0 * {
    font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
      "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
      "Lucida Sans Unicode", Arial, Verdana, sans-serif;
  }
  kuc-mobile-button-1-18-0:lang(es),
  kuc-mobile-button-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-mobile-button-1-18-0:lang(zh),
  kuc-mobile-button-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
      Verdana, sans-serif;
  }
  kuc-mobile-button-1-18-0:lang(zh-TW),
  kuc-mobile-button-1-18-0:lang(zh-TW) * {
      font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
      Verdana,sans-serif
  }
  kuc-mobile-button-1-18-0 {
    display: inline-block;
    vertical-align: top;
  }
  kuc-mobile-button-1-18-0[hidden] {
    display: none;
  }
  .kuc-mobile-button-1-18-0__button {
    min-width: var(--kuc-mobile-button-width, 100px);
    width: var(--kuc-mobile-button-width, auto);
    height: var(--kuc-mobile-button-height, 42px);
    padding: 0 12px;
    user-select: none;
    font-weight: 700;
    font-size: var(--kuc-mobile-button-font-size, 14px);
    line-height: 1;
    display: grid;
    align-items: center;
    align-content: center;
  }
  .kuc-mobile-button-1-18-0__button:focus {
    outline: none;
  }
  .kuc-mobile-button-1-18-0__button--submit {
    border: 2px solid;
    border-color: var(--kuc-mobile-button-background-color, #206694);
    background-color: var(--kuc-mobile-button-background-color, #206694);
    color: var(--kuc-mobile-button-text-color, #ffffff);
    border-radius: 6px;
  }
  .kuc-mobile-button-1-18-0__button--submit:focus {
    border-color: var(--kuc-mobile-button-background-color-focus, var(--kuc-mobile-button-background-color, #206694));
    background-color: var(--kuc-mobile-button-background-color-focus, var(--kuc-mobile-button-background-color, #206694));
  }
  .kuc-mobile-button-1-18-0__button--submit:active {
    border-color: var(--kuc-mobile-button-background-color-active, var(--kuc-mobile-button-background-color, #206694));
    background-color: var(--kuc-mobile-button-background-color-active, var(--kuc-mobile-button-background-color, #206694));
  }
  .kuc-mobile-button-1-18-0__button--submit:disabled {
    color: #ffffff;
    border-color: #a5a5a5;
    background: #a5a5a5;
  }
  .kuc-mobile-button-1-18-0__button--normal {
    border: 2px solid;
    border-color: var(--kuc-mobile-button-background-color, #206694);
    background-color: var(--kuc-mobile-button-background-color, #ffffff);
    color: var(--kuc-mobile-button-text-color, #206694);
    border-radius: 6px;
  }
  .kuc-mobile-button-1-18-0__button--normal:focus {
    border-color: var(--kuc-mobile-button-background-color-focus, var(--kuc-mobile-button-background-color, #206694));
    background-color: var(--kuc-mobile-button-background-color-focus, var(--kuc-mobile-button-background-color, #ffffff));
  }
  .kuc-mobile-button-1-18-0__button--normal:active {
    border-color: var(--kuc-mobile-button-background-color-active, var(--kuc-mobile-button-background-color, #206694));
    background-color: var(--kuc-mobile-button-background-color-active, var(--kuc-mobile-button-background-color, #ffffff));
  }
  .kuc-mobile-button-1-18-0__button--normal:disabled {
    color: #a5a5a5;
    border-color: #a5a5a5;
    background-color: #ffffff;
    cursor: default;
  }
`),Yh=b}})();var Jh=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class Rc extends ce{constructor(){super(...arguments),this.ariaLive="",this.guid="",this.text=""}render(){return bt`
      ${this.ariaLive&&this.ariaLive!==""?bt`
            <div
              class="kuc-base-mobile-error-1-18-0__error"
              .id="${this.guid}-error"
              role="alert"
              aria-live="${this.ariaLive}"
              ?hidden="${!this.text}"
            >
              ${this.text}
            </div>
          `:bt`
            <div
              class="kuc-base-mobile-error-1-18-0__error"
              .id="${this.guid}-error"
              role="alert"
              ?hidden="${!this.text}"
            >
              ${this.text}
            </div>
          `}
    `}}Jh([F({type:String})],Rc.prototype,"ariaLive",void 0),Jh([F({type:String})],Rc.prototype,"guid",void 0),Jh([F({type:String})],Rc.prototype,"text",void 0),window.customElements.get("kuc-base-mobile-error-1-18-0")||(ue(`
  kuc-base-mobile-error-1-18-0 {
    display: block;
    font-size: 13px;
    font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
      "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
      "Lucida Sans Unicode", Arial, Verdana, sans-serif;
  }
  kuc-base-mobile-error-1-18-0:lang(es),
  kuc-base-mobile-error-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-base-mobile-error-1-18-0:lang(zh),
  kuc-base-mobile-error-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
      Verdana, sans-serif;
  }
  kuc-base-mobile-error-1-18-0:lang(zh-TW),
  kuc-base-mobile-error-1-18-0:lang(zh-TW) * {
      font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
      Verdana,sans-serif
  }
  kuc-base-mobile-error-1-18-0[hidden] {
    display: none;
  }
  .kuc-base-mobile-error-1-18-0__error {
    line-height: 1.5;
    color: #000000;
    background-color: #fdffc9;
    border: 1px solid #e5db68;
    border-radius: 0.4em;
    padding: 0.4em 1em;
    margin-top: 0.3em;
    margin-left: 0.5em;
  }
  .kuc-base-mobile-error-1-18-0__error[hidden] {
    display: none;
  }
`),window.customElements.define("kuc-base-mobile-error-1-18-0",Rc));var Qh=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class $c extends ce{constructor(){super(...arguments),this.requiredIcon=!1,this.guid="",this.text=""}render(){return bt`
      ${this._getTextTemplate()}
      <span
        class="kuc-base-mobile-label-1-18-0__required-icon"
        ?hidden="${!this.requiredIcon}"
        >*</span
      >
    `}_getTextTemplate(){return this.guid&&this.guid!==""?bt`
          <span class="kuc-base-mobile-label-1-18-0__text" .id="${this.guid}-group"
            >${this.text}</span
          >
        `:bt` <span class="kuc-base-mobile-label-1-18-0__text">${this.text}</span> `}}Qh([F({type:Boolean})],$c.prototype,"requiredIcon",void 0),Qh([F({type:String})],$c.prototype,"guid",void 0),Qh([F({type:String})],$c.prototype,"text",void 0),window.customElements.get("kuc-base-mobile-label-1-18-0")||(ue(`
  kuc-base-mobile-label-1-18-0 {
    display: inline-table;
    font-size: 13px;
    font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
      "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
      "Lucida Sans Unicode", Arial, Verdana, sans-serif;
  }
  kuc-base-mobile-label-1-18-0:lang(es) ,
  kuc-base-mobile-label-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-base-mobile-label-1-18-0:lang(zh) ,
  kuc-base-mobile-label-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
      Verdana, sans-serif;
  }
  kuc-base-mobile-label-1-18-0:lang(zh-TW),
  kuc-base-mobile-label-1-18-0:lang(zh-TW) * {
      font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
      Verdana,sans-serif
  }
  kuc-base-mobile-label-1-18-0[hidden] {
    display: none;
  }
  .kuc-base-mobile-label-1-18-0__text {
    text-shadow: 0 1px 0 #ffffff;
    color: #888888;
    white-space: normal;
    font-size: 86%;
  }
  .kuc-base-mobile-label-1-18-0__required-icon {
    font-size: 86%;
    position: relative;
    left: 3px;
    color: #d01212;
  }
  .kuc-base-mobile-label-1-18-0__required-icon[hidden] {
    display: none;
  }
`),window.customElements.define("kuc-base-mobile-label-1-18-0",$c));var Dn=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let td;(()=>{if(td=window.customElements.get("kuc-mobile-checkbox-1-18-0"),!td){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.borderVisible=!0,this.disabled=!1,this.requiredIcon=!1,this.visible=!0,this.items=[],this.selectedIndex=[],this.value=[],this._valueMapping={},this._GUID=ti();const u=ze(a);this._setInitialValue(u),Object.assign(this,u)}_setInitialValue(a){const u="value"in a,s="selectedIndex"in a,T=a.selectedIndex||[];if(!u&&s){if(!Xe(T))return;const k=this._getValueMapping(a);this.value=this._getValidValue(k,T)}}_getNewValueMapping(a,u){const s=parseInt(u,10),T=Object.keys(this._valueMapping),k={...this._valueMapping};return T.indexOf(u)>-1?(delete k[s],k):(k[s]=a,k)}_handleChangeInput(a){a.stopPropagation();const u=a.target,s=u.dataset.index||"0",T=u.value,k=this.value?[...this.value]:this.value,$=this._getNewValueMapping(T,s),X=this.items.map(St=>St.value),J=Object.values($).filter(St=>X.indexOf(St)>-1);if(J===k)return;const Zt=Object.keys($).map(St=>parseInt(St,10));this.value=J,this.selectedIndex=Zt,Ot(this,"change",{oldValue:k,value:J})}_getCheckboxIconSvgTemplate(a){return Ce`
       <svg
         class="kuc-mobile-checkbox-1-18-0__group__select-menu__item__label__icon"
         xmlns="http://www.w3.org/2000/svg"
         x="0px"
         y="0px"
         width="44px"
         height="34px"
         viewBox="0 0 44 34"
         enable-background="new 0 0 44 34"
         xml:space="preserve">
         <image width="44" height="34" x="0" y="0" href="${this._getSVGStrokeValue(a)}"/>
      </svg>
       `}_getSVGStrokeValue(a){return a?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAiCAQAAACOh/P6AAAABGdBTUEAALGPC/xhBQAAACBjSFJN AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElN RQfkCQcFITUNIbrXAAADHklEQVRIx63US2sTURQH8P9kmsykQtoMSbStreZRkRBxY3BR7EJwEyuo WQiCmy4EBXHhyi8g4qYfQCjYpRgQBK0GEoUmohYUsURjKz4WrTTNNDYzmUcz42Lymkfz0nN298z9 zeXcM0OgJeLoJxLkhTn14+P5uJJoWR3oy9Kx5xcCl6s4RybuQ2muk60PhXtmWc/xh8GL+0GBnvGu 599D/S9wwetOH51yg4UEt4H+B7jgZVKTkX0oQYUKEcNwttB9wwUvkwpFHOCg1lLEMOgZX43uE9ZY OwTdqgh3g7b12NYGG4yQ4KEYkoUD9nsnfX2NW8HLpAIRG3iLGge2/G32AweiZ1hjCUuWB8vlr6+8 gWRqBetRFljPXmiC4CaZlD+iWjRBAQeWy19bSaMACWiFCW5yKB24MpQueK3ZWHRwORRRLFke23VW hAoQTTYWpZMBFwkRPz4VT3s2zSydDLkEwyTUm8Dp2CZMxKJ0MuiqoAInSPw00Inaa/+gasEK2FnL Xi3km2wdJmJROul3lWrbnLDr6IShrg8R5bXXs5t5sJCa/wpbnT3sYiE3rkHEeIRJab1OmOqtKWjs Z2zFxSYLDGjsIVdRdxoOCsYjxGrlzNPl2AlzvR4yeI1l47K+QsJxbGnMV8Ru45vXUoKKEap8KVCi H0y4tkx1FSpkVHRsTgdTeEdOgSEstvHwU9TZUWrDkt2FaDitHkaBK2ZHThEMTFsV7MCHX5ZsFZKp CXpYhcRzxczoNMFYbWdRtWBVyBa9NZwY1TptY1R0k4CQeXtj84vxyowwoGj02LSNUTqyBCrPn93k vmPbOAlmuAeaRGVx8RbWUYrvGofPCm7QB6dtTHVPdgCCxv6JW4y1NdwFbYfYht0bRlzJSTzHLh04 Yp8wj5gDUlu2DRxGWMlJXPnrK3+ACulbSHdk28JAWMlJkFYz/qAjJDdOS0PuyHaAa7S8mg0EHSEJ KkjQEB69uN2J7QgDYTUnazQVUkCBvftyDuvYac92AbfSzhB7JzOPDZQ7sV3BDXrJkV1+gt/g4kon Vg8TbZ8kMQg7BAjogtXHX2EwhA6/OKOlAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTA5LTA3VDA1 OjMzOjUzKzAwOjAwOdR5sgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wOS0wN1QwNTozMzo1Mysw MDowMEiJwQ4AAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAiCAQAAACOh/P6AAAABGdBTUEAALGPC/xhBQAAACBjSFJN AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElN RQfkCQcFIRBGJW6QAAACvklEQVRIx6XWQZKbRhSA4Z8GBhACenwC5wZUypXKMlRlmUVcXrtKHMEn meQEUmWfmnHZe65ATpDcIA3MMGKEhBdgGRAaWZqnjarp94H6PTWtNWg0tPEX54fARNzwT72qed8b Ny6weqFzhbO0Fg1rHlf9Ky+CdSw5X3q/O+x4WAro0S+ADSw5T4LQw6LBRFt+5rc9LV7CeokMA1xs bOYE+MvPixfCBpb0ExkGzDDR0bFG9EVwywahzwwDAWiIPf1pcSHcZ/U90NIuHrObv+UF8DTb0hoG utKjd+qgKzSA/R9mirWlN8lCw5Yn9RT9kh4shc6VtJdXUp9ENQzs18fZmkrdR2/Sr4/QC+e1dWuG m3AdVaqeYJ3QS3zp4xxhi+jHdD//215xF84TV17xRJEWI7pl/SSQ8wl2x5a1uu+xvaW4C/3kWl4T IJGhn1jSGLCz0E+k9HC6Bhuyj2nxg0r7o92cj13aDBsXn6BHt6yXSOlhY3QFHrJ59L/KOIA/9tJ0 dGYdbUsD0WOtSbZMs0ipnMcxfDtKE+jMCJBh8K8b2rgn2DzKVM6aYbkNcG496Q7SBOAAQhpJ/cG8 8eT8BFsx7iIBRmSmBmKQJtBx8HklXy2vL2BBwK//raNNumM3umBg4xFwrGTPsV3xflZ5VKbbEa2h Y2Jhoh+w9Ql2324/HaEFYrRIsGNDedd2wjEWxNctZ5o+jB0bylX2VqniGXawCX0PvWPDwyqLFcVB gx2FITtBt2weKwoqts/+sgGcd3Q9SX9j70+yI7giR6ksKu82B/SQPVWJEVxTUaBU9rZcDelz2YNX U03TfuIGd2F29z2fnTgJbaloaCAGd2Gitewf+YfsDHbyiLWlar/EMFvobCjjfJXxcAZ75Oy26+gm 3mIuqrhYZTyexR49FLZ0wyY2/qzSkpKns1jQmrOmf398ARuVc7WA4gOtAAAAJXRFWHRkYXRlOmNy ZWF0ZQAyMDIwLTA5LTA3VDA1OjMzOjE2KzAwOjAw76ZY7wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAy MC0wOS0wN1QwNTozMzoxNiswMDowMJ774FMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVh ZHlxyWU8AAAAAElFTkSuQmCC"}_isCheckedItem(a,u){const s=Object.values(this._valueMapping),T=Object.keys(this._valueMapping);return s.filter((k,$)=>k===a.value&&u===parseInt(T[$],10)).length>0}_getItemTemplate(a,u){const s=this._isCheckedItem(a,u);return bt`
        <label
          for="${this._GUID}-item-${u}"
          class="kuc-mobile-checkbox-1-18-0__group__select-menu__item${a.disabled?" kuc-mobile-checkbox-1-18-0__group__select-menu__item--disabled":""}"
          ?borderVisible="${this.borderVisible}"
        >
          <input
            type="checkbox"
            id="${this._GUID}-item-${u}"
            class="kuc-mobile-checkbox-1-18-0__group__select-menu__item__input"
            name="${this._GUID}-group"
            data-index="${u}"
            value="${a.value!==void 0?a.value:""}"
            aria-describedby="${this._GUID}-error}"
            aria-required="${this.requiredIcon}"
            aria-invalid="${this.error!==""}"
            ?disabled="${a.disabled||this.disabled}"
            @change="${this._handleChangeInput}"
          />
          <div class="kuc-mobile-checkbox-1-18-0__group__select-menu__item__label">
            ${this._getCheckboxIconSvgTemplate(s)}${a.label===void 0?a.value:a.label}
          </div>
        </label>
      `}shouldUpdate(a){return a.has("items")&&!Xe(this.items)?(this.throwErrorAfterUpdateComplete(bo),!1):a.has("value")&&!Xe(this.value)?(this.throwErrorAfterUpdateComplete(kc),!1):!(a.has("selectedIndex")&&!Xe(this.selectedIndex)&&(this.throwErrorAfterUpdateComplete(Sc),1))}willUpdate(a){if(a.has("value")){if(this.value.length>0)return;this.selectedIndex=[]}}update(a){(a.has("items")||a.has("value")||a.has("selectedIndex"))&&(this._valueMapping=this._getValueMapping({items:this.items,value:this.value,selectedIndex:this.selectedIndex}),this._setValueAndSelectedIndex()),super.update(a)}render(){return bt`
        <fieldset class="kuc-mobile-checkbox-1-18-0__group">
          <legend
            class="kuc-mobile-checkbox-1-18-0__group__label"
            ?hidden="${!this.label}"
          >
            <kuc-base-mobile-label-1-18-0
              .text="${this.label}"
              .requiredIcon="${this.requiredIcon}"
            ></kuc-base-mobile-label-1-18-0>
          </legend>
          <div
            class="kuc-mobile-checkbox-1-18-0__group__select-menu ${this.requiredIcon?"kuc-mobile-checkbox-1-18-0__group__select-menu--required":""}"
            ?borderVisible="${this.borderVisible}"
            ?disabled="${this.disabled}"
          >
            ${this.items.map((a,u)=>this._getItemTemplate(a,u))}
          </div>
          <kuc-base-mobile-error-1-18-0
            .text="${this.error}"
            .guid="${this._GUID}"
            ariaLive="assertive"
          >
          </kuc-base-mobile-error-1-18-0>
        </fieldset>
      `}updated(){this._inputEls.forEach(a=>{a.checked=this.value.indexOf(a.value)>-1})}_setValueAndSelectedIndex(){this.value=Object.values(this._valueMapping),this.selectedIndex=Object.keys(this._valueMapping).map(a=>parseInt(a,10))}_getValueMapping(a){const u=a.items||[],s=a.value||[],T=a.selectedIndex||[],k=u.map(J=>J.value||""),$=Object.assign({},k),X={};if(s.length===0){const J=this._getValidValue($,T);return T.forEach((Zt,St)=>X[Zt]=J[St]),X}return this._getValidSelectedIndex($).forEach((J,Zt)=>X[J]=s[Zt]),X}_getValidValue(a,u){return u.filter(s=>a[s]).map(s=>a[s])}_getValidSelectedIndex(a){const u=[];for(let s=0;s<this.value.length;s++){const T=this.selectedIndex[s];if(a[T]===this.value[s]){u.push(T);continue}const k=this.items.findIndex($=>$.value===this.value[s]);u.push(k)}return u}}Dn([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),Dn([F({type:String})],b.prototype,"error",void 0),Dn([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),Dn([F({type:String})],b.prototype,"label",void 0),Dn([F({type:Boolean})],b.prototype,"borderVisible",void 0),Dn([F({type:Boolean})],b.prototype,"disabled",void 0),Dn([F({type:Boolean})],b.prototype,"requiredIcon",void 0),Dn([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),Dn([F({type:Array})],b.prototype,"items",void 0),Dn([F({type:Array})],b.prototype,"selectedIndex",void 0),Dn([F({type:Array})],b.prototype,"value",void 0),Dn([rn(".kuc-mobile-checkbox-1-18-0__group__select-menu__item__input")],b.prototype,"_inputEls",void 0),Dn([se()],b.prototype,"_valueMapping",void 0),window.customElements.define("kuc-mobile-checkbox-1-18-0",b),ue(`
  kuc-mobile-checkbox-1-18-0,
  kuc-mobile-checkbox-1-18-0 * {
    font-size: 13px;
    color: #333333;
    font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
      "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
      "Lucida Sans Unicode", Arial, Verdana, sans-serif;
  }
  kuc-mobile-checkbox-1-18-0:lang(es),
  kuc-mobile-checkbox-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-mobile-checkbox-1-18-0:lang(zh),
  kuc-mobile-checkbox-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
      Verdana, sans-serif;
  }
  kuc-mobile-checkbox-1-18-0:lang(zh-TW),
  kuc-mobile-checkbox-1-18-0:lang(zh-TW) * {
      font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
      Verdana,sans-serif
  }
  kuc-mobile-checkbox-1-18-0 {
    width: 100%;
    display: inline-block;
  }
  kuc-mobile-checkbox-1-18-0[hidden] {
    display: none;
  }
  .kuc-mobile-checkbox-1-18-0__group {
    border: none;
    padding: 0px;
    height: auto;
    display: inline-block;
    width: 100%;
    box-sizing: border-box;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
  }
  .kuc-mobile-checkbox-1-18-0__group__label {
    display: inline-block;
    font-size: 86%;
    font-weight: bold;
    line-height: 1.5;
    padding: 0px;
    margin: 0 0 4px 0;
    white-space: nowrap;
  }
  .kuc-mobile-checkbox-1-18-0__group__label[hidden] {
    display: none;
  }
  .kuc-mobile-checkbox-1-18-0__group__label__text {
    text-shadow: 0 1px 0 #ffffff;
    color: #888888;
    white-space: normal;
    font-size: inherit;
  }
  .kuc-mobile-checkbox-1-18-0__group__label__required-icon {
    position: relative;
    left: 3px;
    color: #d01212;
  }
  .kuc-mobile-checkbox-1-18-0__group__label__required-icon[hidden] {
    display: none;
  }
  .kuc-mobile-checkbox-1-18-0__group__select-menu {
    margin-left: 0.5em;
    margin-right: 0.5em;
  }
  .kuc-mobile-checkbox-1-18-0__group__select-menu[bordervisible] {
    border-color: #b3b3b3;
    border-width: 1px;
    border-style: solid;
    border-radius: 8px;
  }
  .kuc-mobile-checkbox-1-18-0__group__select-menu[disabled],
  .kuc-mobile-checkbox-1-18-0__group__select-menu__item--disabled {
    background-color: #d5d7d9;
    color: #999999;
    -webkit-text-fill-color: #999999;
    background-color: #d5d7d9;
    opacity: 1;
  }
  .kuc-mobile-checkbox-1-18-0__group__select-menu--required[bordervisible] {
    border-color: #cf4a38;
    border-width: 1px;
    border-style: solid;
    border-radius: 8px;
  }
  .kuc-mobile-checkbox-1-18-0__group__select-menu__item[bordervisible] {
    padding: 4px;
    border: 1px solid transparent;
    position: relative;
    white-space: normal;
    word-wrap: normal;
    height: 30px;
    display: block;
    border-bottom: 1px solid #b3b3b3;
    padding: 8px;
  }
  .kuc-mobile-checkbox-1-18-0__group__select-menu__item {
    padding: 4px;
    border: 1px solid transparent;
    position: relative;
    white-space: normal;
    word-wrap: normal;
    height: 30px;
    display: block;
    padding: 8px;
  }
  .kuc-mobile-checkbox-1-18-0__group__select-menu__item:last-child {
    border-bottom: 0px;
  }
  .kuc-mobile-checkbox-1-18-0__group__select-menu[bordervisible]
  .kuc-mobile-checkbox-1-18-0__group__select-menu__item:first-child {
    border-top-left-radius: 7px;
    border-top-right-radius: 7px;
  }
  .kuc-mobile-checkbox-1-18-0__group__select-menu[bordervisible]
  .kuc-mobile-checkbox-1-18-0__group__select-menu__item:last-child {
    border-bottom-left-radius: 7px;
    border-bottom-right-radius: 7px;
  }
  .kuc-mobile-checkbox-1-18-0__group__select-menu__item__input {
    position: absolute;
    opacity: 0;
  }
  .kuc-mobile-checkbox-1-18-0__group__select-menu__item__input[disabled]
    + .kuc-mobile-checkbox-1-18-0__group__select-menu__item__label {
    background-color: #d5d7d9;
    color: #999999;
    -webkit-text-fill-color: #999999;
    background-color: #d5d7d9;
    opacity: 1;
  }
  .kuc-mobile-checkbox-1-18-0__group__select-menu__item__label {
    position: relative;
    margin: -7px 0px 0px 34px;
    display: inline-block;
    vertical-align: middle;
    white-space: nowrap;
    padding: 11px 13px 13px 0px;
    font-size: 14.04px;
  }
  .kuc-mobile-checkbox-1-18-0__group__select-menu__item__label__icon {
    position: absolute;
    top: 50%;
    left: -30px;
    margin-top: -13px;
    box-sizing: border-box;
    width: 22px;
    height: 22px;
    background-size: 22px 17px;
    content: "";
  }
  .kuc-mobile-checkbox-1-18-0__group__error {
    line-height: 1.5;
    border: 1px solid #e5db68;
    background-color: #fdffc9;
    margin-top: 0.3em;
    margin-left: 0.5em;
    padding: 0.4em 1em;
    border-radius: 0.4em;
    color: #000000;
  }
  .kuc-mobile-checkbox-1-18-0__group__error[hidden] {
    display: none;
  }
`),td=b}})();var so=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let ed;(()=>{if(ed=window.customElements.get("kuc-mobile-dropdown-1-18-0"),!ed){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.value="",this.selectedIndex=-1,this.disabled=!1,this.requiredIcon=!1,this.visible=!0,this.items=[],this._hasValueInItems=!1,this._GUID=ti();const u=ze(a);this._setInitialValue(u),Object.assign(this,u)}_setInitialValue(a){!("value"in a)&&"selectedIndex"in a&&(this.value=this._getValue(a)||"")}_handleChangeInput(a){a.stopPropagation();const u=a.target,s=u.value;if(this.value===s&&this.selectedIndex===u.selectedIndex)return;const T={oldValue:this.value,value:s};this.value=s,this.selectedIndex=u.selectedIndex,Ot(this,"change",T)}shouldUpdate(a){return a.has("items")&&!Xe(this.items)?(this.throwErrorAfterUpdateComplete(bo),!1):a.has("value")&&!as(this.value)?(this.throwErrorAfterUpdateComplete(os),!1):!(a.has("selectedIndex")&&!fa(this.selectedIndex)&&(this.throwErrorAfterUpdateComplete(Ic),1))}willUpdate(a){if((a.has("items")||a.has("value"))&&(this._hasValueInItems=this.items.some(u=>u.value===this.value)),a.has("value")){if(this.value!==""||this._hasValueInItems)return;this.selectedIndex=-1}}update(a){(a.has("items")||a.has("value")||a.has("selectedIndex"))&&(this.selectedIndex=this._getSelectedIndex(),this.value=this._getValue({items:this.items,selectedIndex:this.selectedIndex})||""),super.update(a)}_getSelectedIndex(){if(!this.value&&!this._hasValueInItems)return this.items[this.selectedIndex]?this.selectedIndex:-1;const a=this.items.findIndex(s=>s.value===this.value);if(a===-1)return-1;const u=this.items.findIndex((s,T)=>s.value===this.value&&T===this.selectedIndex);return u>-1?u:a}_getValue(a){const u=(a.items||[])[a.selectedIndex===0||a.selectedIndex?a.selectedIndex:-1];return u?u.value:""}_isCheckedItem(a,u){return this.value?a.value===this.value&&this.selectedIndex===u:this.selectedIndex===u}_getItemTemplate(a,u){const s=this._isCheckedItem(a,u);return bt`
        <option
          value="${a.value||""}"
          ?selected="${s}"
          ?disabled="${a.disabled}"
        >
          ${a.label===void 0?a.value:a.label}
        </option>
      `}render(){return bt`
        <label
          class="kuc-mobile-dropdown-1-18-0__label"
          for="${this._GUID}-label"
          ?hidden="${!this.label}"
        >
          <kuc-base-mobile-label-1-18-0
            .text="${this.label}"
            .requiredIcon="${this.requiredIcon}"
          ></kuc-base-mobile-label-1-18-0>
        </label>
        <div class="kuc-mobile-dropdown-1-18-0__input-form">
          <div
            class="kuc-mobile-dropdown-1-18-0__input-form__select
            ${this.requiredIcon?"kuc--required":""}"
          >
            <select
              class="kuc-mobile-dropdown-1-18-0__input-form__select__input"
              id="${this._GUID}-label"
              aria-describedby="${this._GUID}-error"
              aria-required="${this.requiredIcon}"
              aria-invalid="${this.error!==""}"
              ?disabled="${this.disabled}"
              @change="${this._handleChangeInput}"
            >
              ${this.items.map((a,u)=>this._getItemTemplate(a,u))}
            </select>
          </div>
        </div>
        <kuc-base-mobile-error-1-18-0
          .text="${this.error}"
          .guid="${this._GUID}"
          ariaLive="assertive"
        >
        </kuc-base-mobile-error-1-18-0>
      `}updated(a){a.has("selectedIndex")&&(this._selectEl.selectedIndex=this.selectedIndex),super.update(a)}}so([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),so([F({type:String})],b.prototype,"error",void 0),so([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),so([F({type:String})],b.prototype,"label",void 0),so([F({type:String})],b.prototype,"value",void 0),so([F({type:Number})],b.prototype,"selectedIndex",void 0),so([F({type:Boolean})],b.prototype,"disabled",void 0),so([F({type:Boolean})],b.prototype,"requiredIcon",void 0),so([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),so([F({type:Array})],b.prototype,"items",void 0),so([qt(".kuc-mobile-dropdown-1-18-0__input-form__select__input")],b.prototype,"_selectEl",void 0),window.customElements.define("kuc-mobile-dropdown-1-18-0",b),ue(`
  kuc-mobile-dropdown-1-18-0,
  kuc-mobile-dropdown-1-18-0 * {
    font-size: 13px;
    color: #333333;
    font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
      "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
      "Lucida Sans Unicode", Arial, Verdana, sans-serif;
  }
  kuc-mobile-dropdown-1-18-0:lang(es),
  kuc-mobile-dropdown-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-mobile-dropdown-1-18-0:lang(zh),
  kuc-mobile-dropdown-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
      Verdana, sans-serif;
  }
  kuc-mobile-dropdown-1-18-0:lang(zh-TW),
  kuc-mobile-dropdown-1-18-0:lang(zh-TW) * {
      font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
      Verdana,sans-serif
  }
  kuc-mobile-dropdown-1-18-0 {
    display: inline-block;
    width: 100%;
  }

  kuc-mobile-dropdown-1-18-0[hidden] {
    display: none;
  }

  .kuc-mobile-dropdown-1-18-0__label {
    display: inline-block;
    font-size: 86%;
    font-weight: bold;
    line-height: 1.5;
    padding: 0px;
    margin: 0 0 4px 0;
    white-space: nowrap;
  }

  .kuc-mobile-dropdown-1-18-0__label[hidden] {
    display: none;
  }

  .kuc-mobile-dropdown-1-18-0__input-form {
    word-wrap: break-word;
    min-height: 1em;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .kuc-mobile-dropdown-1-18-0__input-form__select {
    display: inline-block;
    border-radius: 0.4em;
    max-width: 100%;
  }

  .kuc-mobile-dropdown-1-18-0__input-form__select.kuc--required {
    border: 1px solid #cf4a38;
  }

  .kuc-mobile-dropdown-1-18-0__input-form__select__input {
    min-width: 100px;
    max-width: 100%;
  }

  .kuc-mobile-dropdown-1-18-0__input-form__select__input:disabled {
    color: #999999;
    -webkit-text-fill-color: #999999;
    background-color: #d5d7d9;
    opacity: 1;
  }
`),ed=b}})();var lo=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let id;(()=>{if(id=window.customElements.get("kuc-mobile-multi-choice-1-18-0"),!id){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.disabled=!1,this.requiredIcon=!1,this.visible=!0,this.items=[],this.selectedIndex=[],this.value=[],this._valueMapping={},this._GUID=ti();const u=ze(a);this._setInitialValue(u),Object.assign(this,u)}_setInitialValue(a){const u="value"in a,s="selectedIndex"in a,T=a.selectedIndex||[];if(!u&&s){if(!Xe(T))return;const k=this._getValueMapping(a);this.value=this._getValidValue(k,T)}}_handleChangeInput(a){a.stopPropagation();const u=a.target,s=this.value?[...this.value]:this.value,T=Array.from(u.selectedOptions,X=>X.value),k=Array.from(u.selectedOptions,X=>X.dataset.index),$={value:T,oldValue:s};this.value=T,this.selectedIndex=k.map(X=>X?parseInt(X,10):0),Ot(this,"change",$)}shouldUpdate(a){return a.has("items")&&!Xe(this.items)?(this.throwErrorAfterUpdateComplete(bo),!1):a.has("value")&&!Xe(this.value)?(this.throwErrorAfterUpdateComplete(kc),!1):!(a.has("selectedIndex")&&!Xe(this.selectedIndex)&&(this.throwErrorAfterUpdateComplete(Sc),1))}willUpdate(a){if(a.has("value")){if(this.value.length>0)return;this.selectedIndex=[]}}update(a){(a.has("items")||a.has("value")||a.has("selectedIndex"))&&(this._valueMapping=this._getValueMapping({items:this.items,value:this.value,selectedIndex:this.selectedIndex}),this._setValueAndSelectedIndex()),super.update(a)}_getValueMapping(a){const u=a.items||[],s=a.value||[],T=a.selectedIndex||[],k=u.map(J=>J.value||""),$=Object.assign({},k),X={};if(s.length===0){const J=this._getValidValue($,T);return T.forEach((Zt,St)=>X[Zt]=J[St]),X}return this._getValidSelectedIndex($).forEach((J,Zt)=>X[J]=s[Zt]),X}_getValidValue(a,u){return u.filter(s=>a[s]).map(s=>a[s])}_getValidSelectedIndex(a){const u=[];for(let s=0;s<this.value.length;s++){const T=this.selectedIndex[s];if(a[T]===this.value[s]){u.push(T);continue}const k=this.items.findIndex($=>$.value===this.value[s]);u.push(k)}return u}_setValueAndSelectedIndex(){this.value=Object.values(this._valueMapping),this.selectedIndex=Object.keys(this._valueMapping).map(a=>parseInt(a,10))}_isCheckedItem(a,u){const s=Object.values(this._valueMapping),T=Object.keys(this._valueMapping);return s.filter((k,$)=>k===a.value&&u===parseInt(T[$],10)).length>0}_getItemTemplate(a,u){const s=this._isCheckedItem(a,u);return bt`
        <option
          value="${a.value||""}"
          data-index="${u}"
          ?selected="${a.value!==void 0&&s}"
          ?disabled="${a.disabled}"
        >
          ${a.label===void 0?a.value:a.label}
        </option>
      `}render(){return bt`
        <label
          class="kuc-mobile-multi-choice-1-18-0__label"
          for="${this._GUID}-label"
          ?hidden="${!this.label}"
        >
          <kuc-base-mobile-label-1-18-0
            .text="${this.label}"
            .requiredIcon="${this.requiredIcon}"
          ></kuc-base-mobile-label-1-18-0>
        </label>
        <div class="kuc-mobile-multi-choice-1-18-0__input-form">
          <div
            class="kuc-mobile-multi-choice-1-18-0__input-form__select
            ${this.requiredIcon?"kuc--required":""}"
          >
            <select
              class="kuc-mobile-multi-choice-1-18-0__input-form__select__input"
              id="${this._GUID}-label"
              aria-describedby="${this._GUID}-error"
              aria-required="${this.requiredIcon}"
              aria-invalid="${this.error!==""}"
              ?disabled="${this.disabled}"
              multiple
              @change="${this._handleChangeInput}"
            >
              ${this.items.map((a,u)=>this._getItemTemplate(a,u))}
            </select>
          </div>
        </div>
        <kuc-base-mobile-error-1-18-0
          .text="${this.error}"
          .guid="${this._GUID}"
          ariaLive="assertive"
        >
        </kuc-base-mobile-error-1-18-0>
      `}}lo([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),lo([F({type:String})],b.prototype,"error",void 0),lo([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),lo([F({type:String})],b.prototype,"label",void 0),lo([F({type:Boolean})],b.prototype,"disabled",void 0),lo([F({type:Boolean})],b.prototype,"requiredIcon",void 0),lo([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),lo([F({type:Array})],b.prototype,"items",void 0),lo([F({type:Array})],b.prototype,"selectedIndex",void 0),lo([F({type:Array})],b.prototype,"value",void 0),lo([se()],b.prototype,"_valueMapping",void 0),window.customElements.define("kuc-mobile-multi-choice-1-18-0",b),ue(`
  kuc-mobile-multi-choice-1-18-0,
  kuc-mobile-multi-choice-1-18-0 * {
    font-size: 13px;
    color: #333333;
    font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
      "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
      "Lucida Sans Unicode", Arial, Verdana, sans-serif;
  }
  kuc-mobile-multi-choice-1-18-0:lang(es),
  kuc-mobile-multi-choice-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-mobile-multi-choice-1-18-0:lang(zh),
  kuc-mobile-multi-choice-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
      Verdana, sans-serif;
  }
  kuc-mobile-multi-choice-1-18-0:lang(zh-TW),
  kuc-mobile-multi-choice-1-18-0:lang(zh-TW) * {
      font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
      Verdana,sans-serif
  }
  kuc-mobile-multi-choice-1-18-0 {
    display: inline-block;
    width: 100%;
  }

  kuc-mobile-multi-choice-1-18-0[hidden] {
    display: none;
  }

  .kuc-mobile-multi-choice-1-18-0__label {
    display: inline-block;
    font-size: 86%;
    font-weight: bold;
    line-height: 1.5;
    padding: 0px;
    margin: 0 0 4px 0;
    white-space: nowrap;
  }

  .kuc-mobile-multi-choice-1-18-0__label[hidden] {
    display: none;
  }

  .kuc-mobile-multi-choice-1-18-0__input-form {
    word-wrap: break-word;
    min-height: 1em;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .kuc-mobile-multi-choice-1-18-0__input-form__select {
    display: inline-block;
    border-radius: 0.4em;
    max-width: 100%;
  }

  .kuc-mobile-multi-choice-1-18-0__input-form__select.kuc--required {
    border: 1px solid #cf4a38;
  }

  .kuc-mobile-multi-choice-1-18-0__input-form__select__input {
    min-width: 100px;
    max-width: 100%;
  }

  .kuc-mobile-multi-choice-1-18-0__input-form__select__input:disabled {
    color: #999999;
    -webkit-text-fill-color: #999999;
    background-color: #d5d7d9;
    opacity: 1;
  }

  .kuc-mobile-multi-choice-1-18-0__input-form__select__input option:disabled {
    color: #999999;
    -webkit-text-fill-color: #999999;
    background-color: #d5d7d9;
    opacity: 1;
  }

  .kuc-mobile-multi-choice-1-18-0__input-form__select__input option:disabled[selected] {
    background-color: #cecece; /* Chrome */
    background-color: -moz-cellhighlight; /* Firefox */
    opacity: 1;
  }

  .kuc-mobile-multi-choice-1-18-0__input-form__select__input:disabled option {
    color: #999999;
    -webkit-text-fill-color: #999999;
  }
`),id=b}})();var Wn=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let nd;(()=>{if(nd=window.customElements.get("kuc-mobile-radio-button-1-18-0"),!nd){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.value="",this.selectedIndex=-1,this.borderVisible=!0,this.disabled=!1,this.requiredIcon=!1,this.visible=!0,this.items=[],this._GUID=ti();const u=ze(a);this._setInitialValue(u),Object.assign(this,u)}_setInitialValue(a){!("value"in a)&&"selectedIndex"in a&&(this.value=this._getValue(a)||"")}willUpdate(a){if(a.has("value")){if(this.value!=="")return;this.selectedIndex=-1}}_handleChangeInput(a){a.stopPropagation();const u=a.target,s=u.value,T=u.dataset.index||"0",k=parseInt(T,10);if(this.value===s&&this.selectedIndex===k)return;const $={oldValue:this.value,value:s};this.value=s,this.selectedIndex=k,Ot(this,"change",$)}_getRadioIconSvgTemplate(a,u){return Ce`
      <svg
        class="kuc-mobile-radio-button-1-18-0__group__select-menu__item__label__icon"
        width="21"
        height="21"
        viewBox="0 0 21 21"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
      <defs>
        <radialGradient id="${this._GUID}-shadow">
          <stop offset="0%" style="stop-color:#5b5b5b;stop-opacity:0" />
          <stop offset="30%" style="stop-color:#5b5b5b;stop-opacity:0" />
          <stop offset="80%" style="stop-color:#5b5b5b;stop-opacity:0.1" />
          <stop offset="90%" style="stop-color:#5b5b5b;stop-opacity:0.15" />
          <stop offset="100%" style="stop-color:#5b5b5b;stop-opacity:0.2" />
        </radialGradient>
      </defs>
        <circle
          fill="url(#shadow)"
          cx="10.5"
          cy="10.5"
          r="10.15"
          stroke="#bbbbbb" stroke-width="1"/>
        ${u?Ce`<circle cx="10.5" cy="10.5" r="6.5" fill="${"#5b5b5b"}"/>`:""}
      </svg>
    `}_isCheckedItem(a,u){return this.value?a.value===this.value&&this.selectedIndex===u:this.selectedIndex===u}_getItemTemplate(a,u){const s=this._isCheckedItem(a,u);return bt`
        <div
          class="kuc-mobile-radio-button-1-18-0__group__select-menu__item${a.disabled?" kuc-mobile-radio-button-1-18-0__group__select-menu__item--disabled":""}"
        >
          <input
            type="radio"
            aria-describedby="${this._GUID}-error"
            id="${this._GUID}-item-${u}"
            data-index="${u}"
            class="kuc-mobile-radio-button-1-18-0__group__select-menu__item__input"
            name="${this._GUID}-group"
            value="${a.value!==void 0?a.value:""}"
            aria-invalid="${this.error!==""}"
            aria-required="${this.requiredIcon}"
            ?disabled="${this.disabled||a.disabled}"
            @change="${this._handleChangeInput}"
          />
          <label
            class="kuc-mobile-radio-button-1-18-0__group__select-menu__item__label"
            for="${this._GUID}-item-${u}"
            >${this._getRadioIconSvgTemplate(this.disabled,s)}
            <div
              class="kuc-mobile-radio-button-1-18-0__group__select-menu__item__label__value"
            >
              ${a.label===void 0?a.value:a.label}
            </div>
          </label>
        </div>
      `}shouldUpdate(a){return a.has("items")&&!Xe(this.items)?(this.throwErrorAfterUpdateComplete(bo),!1):a.has("value")&&!as(this.value)?(this.throwErrorAfterUpdateComplete(os),!1):!(a.has("selectedIndex")&&!fa(this.selectedIndex)&&(this.throwErrorAfterUpdateComplete(Ic),1))}update(a){(a.has("items")||a.has("value")||a.has("selectedIndex"))&&(this.selectedIndex=this._getSelectedIndex(),this.value=this._getValue({items:this.items,selectedIndex:this.selectedIndex})||""),super.update(a)}render(){return bt`
        <div class="kuc-mobile-radio-button-1-18-0__group">
          <div
            class="kuc-mobile-radio-button-1-18-0__group__label"
            ?hidden="${!this.label}"
          >
            <kuc-base-mobile-label-1-18-0
              .text="${this.label}"
              .requiredIcon="${this.requiredIcon}"
            ></kuc-base-mobile-label-1-18-0>
          </div>
          <div
            class="kuc-mobile-radio-button-1-18-0__group__select-menu"
            ?borderVisible="${this.borderVisible}"
            ?disabled="${this.disabled}"
          >
            ${this.items.map((a,u)=>this._getItemTemplate(a,u))}
          </div>
          <kuc-base-mobile-error-1-18-0
            .text="${this.error}"
            .guid="${this._GUID}"
            ariaLive="assertive"
          >
          </kuc-base-mobile-error-1-18-0>
        </div>
      `}updated(){this._inputEls.forEach((a,u)=>{a.checked=this.value===a.value&&u===this.selectedIndex})}_getSelectedIndex(){if(!this.value)return this.items[this.selectedIndex]?this.selectedIndex:-1;const a=this.items.findIndex(s=>s.value===this.value);if(a===-1)return-1;const u=this.items.findIndex((s,T)=>s.value===this.value&&T===this.selectedIndex);return u>-1?u:a}_getValue(a){const u=(a.items||[])[a.selectedIndex===0||a.selectedIndex?a.selectedIndex:-1];return u?u.value:""}}Wn([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),Wn([F({type:String})],b.prototype,"error",void 0),Wn([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),Wn([F({type:String})],b.prototype,"label",void 0),Wn([F({type:String})],b.prototype,"value",void 0),Wn([F({type:Number})],b.prototype,"selectedIndex",void 0),Wn([F({type:Boolean})],b.prototype,"borderVisible",void 0),Wn([F({type:Boolean})],b.prototype,"disabled",void 0),Wn([F({type:Boolean})],b.prototype,"requiredIcon",void 0),Wn([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),Wn([F({type:Array})],b.prototype,"items",void 0),Wn([rn(".kuc-mobile-radio-button-1-18-0__group__select-menu__item__input")],b.prototype,"_inputEls",void 0),window.customElements.define("kuc-mobile-radio-button-1-18-0",b),ue(`
  kuc-mobile-radio-button-1-18-0,
  kuc-mobile-radio-button-1-18-0 * {
    font-size: 13px;
    color: #333333;
    font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
      "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
      "Lucida Sans Unicode", Arial, Verdana, sans-serif;
  }
  kuc-mobile-radio-button-1-18-0:lang(es),
  kuc-mobile-radio-button-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-mobile-radio-button-1-18-0:lang(zh) ,
  kuc-mobile-radio-button-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
      Verdana, sans-serif;
  }
  kuc-mobile-radio-button-1-18-0:lang(zh-TW),
  kuc-mobile-radio-button-1-18-0:lang(zh-TW) * {
      font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
      Verdana,sans-serif
  }
  kuc-mobile-radio-button-1-18-0 {
    width: 100%;
    display: inline-block;
  }

  kuc-mobile-radio-button-1-18-0[hidden] {
    display: none;
  }

  .kuc-mobile-radio-button-1-18-0__group {
    border: none;
    height: auto;
    display: inline-block;
    width: 100%;
    vertical-align: top;
  }

  .kuc-mobile-radio-button-1-18-0__group__label {
    display: inline-block;
    font-size: 86%;
    font-weight: bold;
    line-height: 1.5;
    padding: 0px;
    margin: 0 0 4px 0;
    white-space: nowrap;
  }

  .kuc-mobile-radio-button-1-18-0__group__label[hidden] {
    display: none;
  }

  .kuc-mobile-radio-button-1-18-0__group__select-menu {
    margin-right: 0.5em;
    margin-left: 0.5em;
  }

  .kuc-mobile-radio-button-1-18-0__group__select-menu[bordervisible] {
    border-color: #b3b3b3;
    border-width: 1px;
    border-style: solid;
    border-radius: 0.4em;
  }

  .kuc-mobile-radio-button-1-18-0__group__select-menu__item {
    border: 1px solid transparent;
    position: relative;
    white-space: normal;
    word-wrap: normal;
    height: 45px;
    display: block;
  }

  .kuc-mobile-radio-button-1-18-0__group__select-menu[bordervisible]
    .kuc-mobile-radio-button-1-18-0__group__select-menu__item {
    border-bottom: 1px solid #b3b3b3;
  }

  .kuc-mobile-radio-button-1-18-0__group__select-menu[bordervisible]
    .kuc-mobile-radio-button-1-18-0__group__select-menu__item:last-child {
    border-bottom: 0px;
  }

  .kuc-mobile-radio-button-1-18-0__group__select-menu__item__input {
    position: absolute;
    opacity: 0;
    cursor: pointer;
  }

  .kuc-mobile-radio-button-1-18-0__group__select-menu__item__label__icon {
    position: absolute;
    top: 50%;
    box-sizing: border-box;
    margin-top: -11px;
    width: 21px;
    height: 21px;
    box-shadow: 1px 1px 3px #f5f5f5 inset, -1px -1px 3px #f5f5f5 inset;
    content: "";
    border-radius: 9px;
    left: 8px;
  }

  .kuc-mobile-radio-button-1-18-0__group__select-menu__item__label__value {
    height: 45px;
    line-height: 45px;
    padding-left: 35px;
  }

  .kuc-mobile-radio-button-1-18-0__group__select-menu[disabled], 
  .kuc-mobile-radio-button-1-18-0__group__select-menu__item--disabled {
    background-color: #d5d7d9;
    color: #999999;
    -webkit-text-fill-color: #999999;
    background-color: #d5d7d9;
    opacity: 1;
  }
  .kuc-mobile-radio-button-1-18-0__group__select-menu[bordervisible]
  .kuc-mobile-radio-button-1-18-0__group__select-menu__item--disabled:last-child {
    border-bottom-left-radius: 0.3em;
    border-bottom-right-radius: 0.3em;
  }
  .kuc-mobile-radio-button-1-18-0__group__select-menu[bordervisible]
  .kuc-mobile-radio-button-1-18-0__group__select-menu__item--disabled:first-child {
    border-top-left-radius: 0.3em;
    border-top-right-radius: 0.3em;
  }

  .kuc-mobile-radio-button-1-18-0__group__select-menu__item__label {
    position: absolute;
    white-space: nowrap;
    width: 100%;
    top: 50%;
    transform: translateY(-50%);
    height: 100%;
    padding: 0px;
  }
`),nd=b}})();var Xn=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let od;(()=>{if(od=window.customElements.get("kuc-mobile-text-1-18-0"),!od){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.placeholder="",this.prefix="",this.suffix="",this.textAlign="left",this.value="",this.disabled=!1,this.requiredIcon=!1,this.visible=!0,this._GUID=ti();const u=ze(a);Object.assign(this,u)}_handleFocusInput(a){const u={value:this.value};Ot(this,"focus",u)}_handleChangeInput(a){a.stopPropagation();const u=a.target,s={value:"",oldValue:this.value};this.value=u.value,s.value=this.value,Ot(this,"change",s)}_handleInputText(a){a.stopPropagation();const u={value:a.target.value,data:a.data};Ot(this,"input",u)}render(){return bt`
        <label
          class="kuc-mobile-text-1-18-0__label"
          for="${this._GUID}-label"
          ?hidden="${!this.label}"
        >
          <kuc-base-mobile-label-1-18-0
            .requiredIcon="${this.requiredIcon}"
            .text="${this.label}"
          ></kuc-base-mobile-label-1-18-0>
        </label>
        <div class="kuc-mobile-text-1-18-0__input-form">
          <span
            class="kuc-mobile-text-1-18-0__input-form__prefix"
            ?hidden="${!this.prefix}"
            >${this.prefix}</span
          >
          <input
            class="kuc-mobile-text-1-18-0__input-form__input"
            id="${this._GUID}-label"
            placeholder="${this.placeholder}"
            textAlign="${this.textAlign}"
            type="text"
            .value="${this.value}"
            ?disabled="${this.disabled}"
            aria-invalid="${this.error!==""}"
            aria-describedby="${this._GUID}-error"
            aria-required="${this.requiredIcon}"
            @focus="${this._handleFocusInput}"
            @change="${this._handleChangeInput}"
            @input="${this._handleInputText}"
          />
          <span
            class="kuc-mobile-text-1-18-0__input-form__suffix"
            ?hidden="${!this.suffix}"
            >${this.suffix}</span
          >
        </div>
        <kuc-base-mobile-error-1-18-0 .guid="${this._GUID}" .text="${this.error}">
        </kuc-base-mobile-error-1-18-0>
      `}}Xn([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),Xn([F({type:String})],b.prototype,"error",void 0),Xn([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),Xn([F({type:String})],b.prototype,"label",void 0),Xn([F({type:String})],b.prototype,"placeholder",void 0),Xn([F({type:String})],b.prototype,"prefix",void 0),Xn([F({type:String})],b.prototype,"suffix",void 0),Xn([F({type:String})],b.prototype,"textAlign",void 0),Xn([F({type:String})],b.prototype,"value",void 0),Xn([F({type:Boolean})],b.prototype,"disabled",void 0),Xn([F({type:Boolean})],b.prototype,"requiredIcon",void 0),Xn([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),window.customElements.define("kuc-mobile-text-1-18-0",b),ue(`
  kuc-mobile-text-1-18-0,
  kuc-mobile-text-1-18-0 * {
    font-size: 13px;
    font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
      "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
      "Lucida Sans Unicode", Arial, Verdana, sans-serif;
  }
  kuc-mobile-text-1-18-0:lang(es),
  kuc-mobile-text-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-mobile-text-1-18-0:lang(zh),
  kuc-mobile-text-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
      Verdana, sans-serif;
  }
  kuc-mobile-text-1-18-0:lang(zh-TW),
  kuc-mobile-text-1-18-0:lang(zh-TW) * {
      font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
      Verdana,sans-serif
  }
  kuc-mobile-text-1-18-0 {
    display: block;
  }
  kuc-mobile-text-1-18-0[hidden] {
    display: none;
  }
  .kuc-mobile-text-1-18-0__label {
    display: inline-block;
    font-weight: bold;
    line-height: 1.5;
    padding: 0;
    margin: 0 0 4px 0;
    white-space: nowrap;
  }
  .kuc-mobile-text-1-18-0__label[hidden] {
    display: none;
  }
  .kuc-mobile-text-1-18-0__input-form {
    padding-left: 0.5em;
    padding-right: 0.5em;
    display: flex;
    align-items: center;
  }
  .kuc-mobile-text-1-18-0__input-form__prefix {
    margin-right: 4px;
    color: #888888;
  }
  .kuc-mobile-text-1-18-0__input-form__prefix[hidden] {
    display: none;
  }
  .kuc-mobile-text-1-18-0__input-form__input {
    width: 100%;
    min-width: 20px;
    padding: 0.4em;
    border: 1px solid #b3b3b3;
    outline: 0;
    box-shadow: 0 1px 0 #ffffff, inset 0 2px 3px #dadada;
    border-radius: 0.4em;
    box-sizing: border-box;
    text-align: left;
  }
  .kuc-mobile-text-1-18-0__input-form__input[aria-required="true"] {
    border: 1px solid #cf4a38;
  }
  .kuc-mobile-text-1-18-0__input-form__input[textAlign="right"] {
    text-align: right;
  }
  .kuc-mobile-text-1-18-0__input-form__input:disabled {
    color: #999999;
    background-color: #d5d7d9;
    -webkit-text-fill-color: #999999;
    opacity: 1;
    -webkit-opacity: 1;
  }
  .kuc-mobile-text-1-18-0__input-form__suffix {
    margin-left: 4px;
    color: #888888;
  }
  .kuc-mobile-text-1-18-0__input-form__suffix[hidden] {
    display: none;
  }
`),od=b}})();var Yo=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let rd;(()=>{if(rd=window.customElements.get("kuc-mobile-textarea-1-18-0"),!rd){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.placeholder="",this.value="",this.disabled=!1,this.requiredIcon=!1,this.visible=!0,this._GUID=ti();const u=ze(a);Object.assign(this,u)}_handleFocusInput(a){const u={value:this.value};Ot(this,"focus",u)}_handleChangeInput(a){a.stopPropagation();const u=a.target,s={value:"",oldValue:this.value};this.value=u.value,s.value=this.value,Ot(this,"change",s)}_handleInputTextArea(a){a.stopPropagation();const u={value:a.target.value,data:a.data};Ot(this,"input",u)}render(){return bt`
        <label
          class="kuc-mobile-textarea-1-18-0__label"
          for="${this._GUID}-label"
          ?hidden="${!this.label}"
        >
          <kuc-base-mobile-label-1-18-0
            .requiredIcon="${this.requiredIcon}"
            .text="${this.label}"
          ></kuc-base-mobile-label-1-18-0>
        </label>
        <div class="kuc-mobile-textarea-1-18-0__form">
          <textarea
            class="kuc-mobile-textarea-1-18-0__form__textarea"
            id="${this._GUID}-label"
            placeholder="${this.placeholder}"
            ?disabled="${this.disabled}"
            .value="${this.value}"
            aria-invalid="${this.error!==""}"
            aria-describedby="${this._GUID}-error"
            aria-required="${this.requiredIcon}"
            @focus="${this._handleFocusInput}"
            @change="${this._handleChangeInput}"
            @input="${this._handleInputTextArea}"
          /></textarea>
        </div>
        <kuc-base-mobile-error-1-18-0 .guid="${this._GUID}" .text="${this.error}">
        </kuc-base-mobile-error-1-18-0>
      `}}Yo([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),Yo([F({type:String})],b.prototype,"error",void 0),Yo([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),Yo([F({type:String})],b.prototype,"label",void 0),Yo([F({type:String})],b.prototype,"placeholder",void 0),Yo([F({type:String})],b.prototype,"value",void 0),Yo([F({type:Boolean})],b.prototype,"disabled",void 0),Yo([F({type:Boolean})],b.prototype,"requiredIcon",void 0),Yo([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),window.customElements.define("kuc-mobile-textarea-1-18-0",b),ue(`
  kuc-mobile-textarea-1-18-0,
  kuc-mobile-textarea-1-18-0 * {
    font-size: 13px;
    font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
      "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
      "Lucida Sans Unicode", Arial, Verdana, sans-serif;
  }
  kuc-mobile-textarea-1-18-0:lang(es),
  kuc-mobile-textarea-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-mobile-textarea-1-18-0:lang(zh),
  kuc-mobile-textarea-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
      Verdana, sans-serif;
  }
  kuc-mobile-textarea-1-18-0:lang(zh-TW),
  kuc-mobile-textarea-1-18-0:lang(zh-TW) * {
      font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
      Verdana,sans-serif
  }
  kuc-mobile-textarea-1-18-0 {
    display: block;
  }
  kuc-mobile-textarea-1-18-0[hidden] {
    display: none;
  }
  .kuc-mobile-textarea-1-18-0__label {
    padding: 0;
    margin: 0 0 4px 0;
    display: inline-block;
    font-weight: bold;
    line-height: 1.5;
    white-space: nowrap;
  }
  .kuc-mobile-textarea-1-18-0__label[hidden] {
    display: none;
  }
  .kuc-mobile-textarea-1-18-0__form {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }
  .kuc-mobile-textarea-1-18-0__form__textarea {
    width: 100%;
    height: 120px;
    padding: 0.4em;
    border: 1px solid #b3b3b3;
    outline: 0;
    box-shadow: 0 1px 0 #ffffff, inset 0 2px 3px #dadada;
    border-radius: 0.4em;
    box-sizing: border-box;
    vertical-align: top;
  }
  .kuc-mobile-textarea-1-18-0__form__textarea[aria-required="true"] {
    border: 1px solid #cf4a38;
  }
  .kuc-mobile-textarea-1-18-0__form__textarea:disabled {
    color: #999999;
    background-color: #d5d7d9;
    opacity: 1;
  }
`),rd=b}})();var _l=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let ad;(()=>{if(ad=window.customElements.get("kuc-mobile-notification-1-18-0"),!ad){class b extends ce{constructor(a){super(),this.className="",this.text="",this.duration=-1,this.container=document.body,this._isOpened=!1;const u=ze(a);Object.assign(this,u)}_handleClickCloseButton(a){this.close()}_getCloseButtonSvgTemplate(){return Ce`
      <svg
        height="12"
        width="12"
        viewBox="0 0 512.001 512.001"
        xmlns="http://www.w3.org/2000/svg">
          <g>
            <path
              d="m512.001 84.853-84.853-84.853-171.147 171.147-171.148-171.147-84.853 84.853 171.148 171.147-171.148 171.148 84.853 84.853 171.148-171.147 171.147 171.147 84.853-84.853-171.148-171.148z"/>
          </g>
        </svg>
      `}_setAutoCloseTimer(){!Number.isFinite(this.duration)||this.duration<0||(this._clearAutoCloseTimer(),this._timeoutID=window.setTimeout(()=>{this.close()},this.duration))}_clearAutoCloseTimer(){this._timeoutID&&window.clearTimeout(this._timeoutID)}open(){if(!this._isValidContainerElement())return document.body.appendChild(this),requestAnimationFrame(()=>{document.body.removeChild(this)}),void this.performUpdate();this.container.appendChild(this),this.performUpdate(),this.classList.remove("kuc-mobile-notification-fadeout-1-18-0"),this.classList.add("kuc-mobile-notification-fadein-1-18-0"),this._isOpened=!0,this._setAutoCloseTimer()}close(){this._close(),Ot(this,"close")}_close(){this._isOpened=!1,this.classList.remove("kuc-mobile-notification-fadein-1-18-0"),this.classList.add("kuc-mobile-notification-fadeout-1-18-0"),this._clearAutoCloseTimer()}shouldUpdate(a){if(a.has("container")){if(this.container===null||this.container===void 0)return this._isOpened&&this._close(),!1;const u=this._isValidContainerElement(),s=!u||!document.contains(this.container);if(this._isOpened&&s&&this._close(),!u)return this.throwErrorAfterUpdateComplete(Tc),!1}return!0}_isValidContainerElement(){return this.container instanceof HTMLElement}render(){return bt`
        <div class="kuc-mobile-notification-1-18-0__notification">
          <pre
            class="kuc-mobile-notification-1-18-0__notification__title"
            aria-live="assertive"
            role="${this._isOpened?"alert":""}"
          ><!---->${this.text}</pre>
          <button
            class="kuc-mobile-notification-1-18-0__notification__close-button"
            type="button"
            aria-label="close"
            @click="${this._handleClickCloseButton}"
          >
            ${this._getCloseButtonSvgTemplate()}
          </button>
        </div>
      `}}_l([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),_l([F({type:String})],b.prototype,"text",void 0),_l([F({type:Number})],b.prototype,"duration",void 0),_l([F()],b.prototype,"container",void 0),_l([se()],b.prototype,"_isOpened",void 0),window.customElements.define("kuc-mobile-notification-1-18-0",b),ue(`
  kuc-mobile-notification-1-18-0 {
    display: block;
    font-size: 13px;
    font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
      "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
      "Lucida Sans Unicode", Arial, Verdana, sans-serif;
    visibility: hidden;
    animation-fill-mode: forwards;
    position: relative;
    top: -100px;
    left: 0;
  }
  kuc-mobile-notification-1-18-0:lang(es),
  kuc-mobile-notification-1-18-0:lang(es) * {
    font-family: sans-serif;
  }
  kuc-mobile-notification-1-18-0:lang(zh),
  kuc-mobile-notification-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
      Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
      Verdana, sans-serif;
  }
  kuc-mobile-notification-1-18-0:lang(zh-TW),
  kuc-mobile-notification-1-18-0:lang(zh-TW) * {
      font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
      Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
      Verdana,sans-serif
  }
  .kuc-mobile-notification-fadein-1-18-0 {
    animation-name: kuc-mobile-notification-fade-in-1-18-0;
    animation-duration: 250ms;
    animation-timing-function: ease-out;
    width: 100%;
    position: fixed;
    visibility: visible;
  }

  .kuc-mobile-notification-fadeout-1-18-0 {
    animation-name: kuc-mobile-notification-fade-out-1-18-0;
    animation-duration: 250ms;
    animation-timing-function: ease-out;
    width: 100%;
    position: fixed;
  }

  .kuc-mobile-notification-1-18-0__notification {
    background-color: #ffffcf;
    background: linear-gradient(#ffda4a, #ffc32c);
    width: 100%;
    min-height: 48px;
    z-index: 20;
    font-size: 12px;
    font-weight: 700;
    line-height: 14px;
    text-shadow: rgba(255, 255, 255, 0.5) 0 1px 0;
    color: #333333;
    text-align: center;
    vertical-align: top;
  }

  .kuc-mobile-notification-1-18-0__notification__title {
    display: inline-block;
    vertical-align: middle;
    padding: 17px 44px 11px 44px;
    margin: 0 0 0 -20px;
    text-align: left;
    font-weight: inherit;
    font-family: inherit;
    word-break: break-word;
    white-space: pre-wrap;
  }

  .kuc-mobile-notification-1-18-0__notification__close-button {
    position: absolute;
    right: 0;
    top: 0;
    width: 44px;
    height: 48px;
    padding: 0;
    background-color: transparent;
    border: none;
    vertical-align: middle;
    pointer-events: auto;
    outline: none;
  }
  @keyframes kuc-mobile-notification-fade-in-1-18-0 {
    0% {
      top: -100px;
      left: 0;
    }
    50% {
      top: -50px;
      left: 0;
    }
    100% {
      top: 0;
      left: 0;
    }
  }
  @keyframes kuc-mobile-notification-fade-out-1-18-0 {
    0% {
      visibility: visible;
      top: 0;
      left: 0;
    }
    50% {
      visibility: visible;
      top: -50px;
      left: 0;
    }
    100% {
      top: -100px;
      left: 0;
    }
  }
`),ad=b}})();var va=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class zr extends ce{constructor(){super(...arguments),this.language="en",this.month=1,this.year=new Date().getFullYear(),this._locale=mi("en")}update(p){p.has("language")&&(this._locale=mi(this.language)),this._monthOptions=this._generateMonthOptions(),this._yearOptions=this._generateYearOptions(),super.update(p)}render(){return bt`
      <div class="kuc-base-mobile-datetime-calendar-header-1-18-0__group">
        <button
          aria-label="previous month"
          type="button"
          class="kuc-base-mobile-datetime-calendar-header-1-18-0__group__button kuc-base-mobile-datetime-calendar-header-1-18-0__group__button--previous-month"
          @click="${this._handleClickCalendarPrevMonthBtn}"
        >
          ${this._getLeftArrowIconSvgTemplate()}
        </button>
        <div class="kuc-base-mobile-datetime-calendar-header-1-18-0__group__center">
          ${this._getYearMonthTemplate()}
        </div>
        <button
          aria-label="next month"
          type="button"
          class="kuc-base-mobile-datetime-calendar-header-1-18-0__group__button kuc-base-mobile-datetime-calendar-header-1-18-0__group__button--next-month"
          @click="${this._handleClickCalendarNextMonthBtn}"
        >
          ${this._getRightArrowIconSvgTemplate()}
        </button>
      </div>
    `}updated(p){p.has("month")&&this._setSelectMonthWidth(this.month),p.has("year")&&this._setYearSelectedIndex(),super.update(p)}_setSelectMonthWidth(p){const a=this._monthOptions[p-1].label;if(!a)return;const u=document.createElement("span");u.innerText=a;const s=(T=>{const k=(J=>{const Zt=document.createElement("div");return Zt.style.cssText=`
  height: 0px;
  overflow: hidden;
  display: inline-block;
  font-size: 14px;
  font-family: ${window.getComputedStyle(J).fontFamily};
  `,Zt})(T),$=T.cloneNode(!0);if($.hasAttribute("hidden"))return 0;k.appendChild($),document.body.appendChild(k);const X=k.getBoundingClientRect().width;return document.body.removeChild(k),X})(u);this._selectMonthEl.selectedIndex=this.month-1,this._selectMonthEl.style.width=s+35+"px"}_setYearSelectedIndex(){this.year<100?this._selectYearEl.selectedIndex=this.year:this._selectYearEl.selectedIndex=100}_generateMonthOptions(){return this._locale.MONTH_SELECT.map((p,a)=>({value:`${a+1}`,label:`${p}`}))}_generateYearOptions(){return this._getYearOptions().map(p=>({value:`${p}`,label:`${p}${this._locale.YEAR_SELECT_POSTFIX}`}))}_getYearOptions(){const p=[];Number.isInteger(this.year)||(this.year=new Date().getFullYear());let a=this.year<100?0:this.year-100;const u=this.year>=9899?9999:this.year+100;for(a>=u&&(a=u-100);a<=u;a++)p.push(a);return p}_getYearMonthTemplate(){return this.language==="zh"||this.language==="ja"||this.language==="zh-TW"?bt` ${this._getYearTemplate()}${this._getMonthTemplate()} `:bt` ${this._getMonthTemplate()}${this._getYearTemplate()} `}_handleChangeMonthDropdown(p){p.stopPropagation(),p.preventDefault();const a=p.target;this.month=parseInt(a.value,10),this._dispatchCalendarHeaderChangeEvent()}_handleChangeYearDropdown(p){p.stopPropagation(),p.preventDefault();const a=p.target;this.year=parseInt(a.value,10),this._dispatchCalendarHeaderChangeEvent()}_handleClickCalendarPrevMonthBtn(p){p.stopPropagation(),this.month===1?(this.month=12,this.year--):this.month-=1,this._dispatchCalendarHeaderChangeEvent()}_handleClickCalendarNextMonthBtn(p){p.stopPropagation(),this.month===12?(this.month=1,this.year++):this.month+=1,this._dispatchCalendarHeaderChangeEvent()}_dispatchCalendarHeaderChangeEvent(){const p=this.year,a=this.month;Ot(this,"kuc:mobile-calendar-header-change",{value:`${p}-${a}`})}_getOptionsMonthTemplate(){return this._monthOptions.map(p=>bt`
        <option
          ?selected="${parseInt(p.value,10)===this.month}"
          value="${p.value}"
        >
          ${p.label}
        </option>
      `)}_getOptionsYearTemplate(){return this._yearOptions.map(p=>bt`
        <option
          ?selected="${parseInt(p.value,10)===this.year}"
          value="${p.value}"
        >
          ${p.label}
        </option>
      `)}_getMonthTemplate(){return bt`
      <div
        class="kuc-base-mobile-datetime-calendar-header-1-18-0__group__center__month"
      >
        <select
          class="kuc-base-mobile-datetime-calendar-header-1-18-0__group__center__month__select"
          @change="${this._handleChangeMonthDropdown}"
        >
          ${this._getOptionsMonthTemplate()}
        </select>
      </div>
    `}_getYearTemplate(){return bt`
      <div
        class="kuc-base-mobile-datetime-calendar-header-1-18-0__group__center__year"
      >
        <select
          class="kuc-base-mobile-datetime-calendar-header-1-18-0__group__center__year__select"
          @change="${this._handleChangeYearDropdown}"
        >
          ${this._getOptionsYearTemplate()}
        </select>
      </div>
    `}_getLeftArrowIconSvgTemplate(){return Ce`
    <svg
      width="16"
      height="14"
      viewBox="0 0 16 14"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M8.70788 11.9567C9.0984 12.3472 9.0984 12.9804 8.70788 13.3709C8.31735 13.7614 7.68419 13.7614 7.29366 13.3709L2.34392 8.42118L0.929703 7.00696L2.34392 5.59275L7.29366 0.643003C7.68419 0.25248 8.31735 0.25248 8.70788 0.643003C9.0984 1.03353 9.0984 1.66669 8.70788 2.05722L4.68709 6.07801L14.0718 6.07801C14.6241 6.07801 15.0718 6.52572 15.0718 7.07801C15.0718 7.63029 14.6241 8.07801 14.0718 8.07801L4.82917 8.07801L8.70788 11.9567Z"
        fill="#206694"
      />
    </svg>`}_getRightArrowIconSvgTemplate(){return Ce`
    <svg
      width="16"
      height="14"
      viewBox="0 0 16 14"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M7.29396 2.0572C6.90344 1.66668 6.90344 1.03351 7.29396 0.642991C7.68449 0.252466 8.31765 0.252467 8.70817 0.642991L13.6579 5.59274L15.0721 7.00695L13.6579 8.42117L8.70817 13.3709C8.31765 13.7614 7.68448 13.7614 7.29396 13.3709C6.90344 12.9804 6.90344 12.3472 7.29396 11.9567L11.3148 7.93591L1.93 7.93591C1.37772 7.93591 0.93 7.48819 0.93 6.93591C0.93 6.38362 1.37772 5.93591 1.93 5.93591L11.1727 5.93591L7.29396 2.0572Z"
        fill="#206694"
      />
    </svg>`}}va([F({type:String,attribute:"lang",reflect:!0})],zr.prototype,"language",void 0),va([F({type:Number,hasChanged(b){return(p=b)>0&&p<13;var p}})],zr.prototype,"month",void 0),va([F({type:Number,hasChanged(b){return(p=b)>=0&&p<1e4;var p}})],zr.prototype,"year",void 0),va([se()],zr.prototype,"_monthOptions",void 0),va([se()],zr.prototype,"_yearOptions",void 0),va([qt(".kuc-base-mobile-datetime-calendar-header-1-18-0__group__center__month__select")],zr.prototype,"_selectMonthEl",void 0),va([qt(".kuc-base-mobile-datetime-calendar-header-1-18-0__group__center__year__select")],zr.prototype,"_selectYearEl",void 0),window.customElements.get("kuc-base-mobile-datetime-calendar-header-1-18-0")||(ue(`
kuc-base-mobile-datetime-calendar-header-1-18-0,
kuc-base-mobile-datetime-calendar-header-1-18-0 * {
    font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
    "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
    "Lucida Sans Unicode", Arial, Verdana, sans-serif;
}
kuc-base-mobile-datetime-calendar-header-1-18-0:lang(zh),
kuc-base-mobile-datetime-calendar-header-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
    Verdana, sans-serif;
}
kuc-base-mobile-datetime-calendar-header-1-18-0:lang(zh-TW),
kuc-base-mobile-datetime-calendar-header-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
    Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
    Verdana,sans-serif
}
kuc-base-mobile-datetime-calendar-header-1-18-0:lang(es),
kuc-base-mobile-datetime-calendar-header-1-18-0:lang(es) * {
    font-family: sans-serif;
}
.kuc-base-mobile-datetime-calendar-header-1-18-0__group {
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-sizing: border-box;
    border-bottom: 1px solid #e3e7e8;
    padding: 0;
    white-space: nowrap;
}
.kuc-base-mobile-datetime-calendar-header-1-18-0__group__button {
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: inherit;
    border: 0;
    margin: 0;
    padding: 0;
    min-width: 40px;
    width: 40px;
    height: 40px;
    overflow: hidden;
    text-indent: 100%;
    white-space: nowrap;
    word-wrap: normal;
    cursor: pointer;
    -webkit-appearance: button;
}
.kuc-base-mobile-datetime-calendar-header-1-18-0__group__button-icon {
    vertical-align: middle;
}
.kuc-base-mobile-datetime-calendar-header-1-18-0__group__button:focus {
    outline: none;
}
.kuc-base-mobile-datetime-calendar-header-1-18-0__group__center {
    text-align: center;
    display: flex;
    flex: 1;
    justify-content: center;
    min-width: 186px;
}
.kuc-base-mobile-datetime-calendar-header-1-18-0__group__center
    > :first-child {
    padding-left: 13px;
}
.kuc-base-mobile-datetime-calendar-header-1-18-0__group__center__month,
.kuc-base-mobile-datetime-calendar-header-1-18-0__group__center__year {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
}
.kuc-base-mobile-datetime-calendar-header-1-18-0__group__center__month__select,
.kuc-base-mobile-datetime-calendar-header-1-18-0__group__center__year__select {
    font-size: 14px;
    font-weight: 700;
    padding: 0 22.4px 0 0;
    line-height: 40px;
    border: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background: url("data:image/svg+xml,%3Csvg%0A%20%20%20%20width%3D%2211%22%0A%20%20%20%20height%3D%226%22%0A%20%20%20%20viewBox%3D%220%200%2011%206%22%0A%20%20%20%20fill%3D%22none%22%0A%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%0A%20%20%3E%0A%20%20%20%20%3Cpath%0A%20%20%20%20%20%20fill-rule%3D%22evenodd%22%0A%20%20%20%20%20%20clip-rule%3D%22evenodd%22%0A%20%20%20%20%20%20d%3D%22M5.5061%206L0%200L11%200L5.5061%206Z%22%0A%20%20%20%20%20%20fill%3D%22%234b4b4b%22%0A%20%20%20%20%2F%3E%0A%20%20%3C%2Fsvg%3E")
    no-repeat center right 0.6em #ffffff;
}
.kuc-base-mobile-datetime-calendar-header-1-18-0__group__center__month__select:focus,
.kuc-base-mobile-datetime-calendar-header-1-18-0__group__center__year__select:focus {
    outline: none;
}
.kuc-base-mobile-datetime-calendar-header-1-18-0__month {
    margin: 0 4px 0 4px;
}
`),window.customElements.define("kuc-base-mobile-datetime-calendar-header-1-18-0",zr));var ls=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class xa extends ce{constructor(){super(),this.month=1,this.year=2021,this.language="en",this.value="",this._month=1,this._year=2021,this._locale=mi("en"),this._handleClickDocument=this._handleClickDocument.bind(this)}connectedCallback(){super.connectedCallback(),setTimeout(()=>{document.addEventListener("click",this._handleClickDocument)},1)}disconnectedCallback(){document.removeEventListener("click",this._handleClickDocument),super.disconnectedCallback()}update(p){if(p.forEach((a,u)=>{u==="language"&&(this._locale=mi(this.language))}),p.has("month")&&(this._month=this.month),p.has("year")&&(this._year=this.year),p.has("value")){const{month:a,year:u}=this._separateDateValue();this._month=parseInt(a,10),this._year=parseInt(u,10)}super.update(p)}render(){return bt`
      <table class="kuc-base-mobile-datetime-calendar-body-1-18-0__table" role="grid">
        ${this._getHeaderItemsTemplate()}<!--
        -->${this._getDateItemsTemplate()}
      </table>
    `}_handleClickDocument(){Ot(this,"kuc:mobile-calendar-body-blur",{})}_handleClickDate(p){p.preventDefault(),p.stopPropagation();const a=p.target;a.setAttribute("aria-selected","true");const u=a.getAttribute("data-date");this._dispatchClickEvent(u)}_dispatchClickEvent(p){const a={oldValue:this.value,value:p};Ot(this,"kuc:mobile-calendar-body-click-date",a),this.value=p}_isToday(p){const a=new Date;return parseInt(p[0],10)===a.getFullYear()&&parseInt(p[1],10)===a.getMonth()+1&&parseInt(p[2],10)===a.getDate()}_separateDateValue(p=this.value){const a=p.split("-");return{day:a[2],month:a[1],year:a[0]}}_getDateClass(p,a){return a?this._isToday(p)?" kuc-base-mobile-datetime-calendar-body-1-18-0__table__date--today":"":" kuc-base-mobile-datetime-calendar-body-1-18-0__table__date--other-month"}_isSameDayOfMoment(p){const a=parseInt(p[1],10),u=parseInt(p[2],10),s=parseInt(p[0],10);let T=new Date().getDate();if(!this.value.split("-")[2])return!1;if(this.value&&(T=new Date(`${this.value}T00:00:00`).getDate()),T===u&&a===this._month)return!0;const k=new Date(s,this._month,0).getDate();return T>k&&k===u&&a===this._month}_getHeaderItemsTemplate(){return bt`
      <thead>
        <tr>
          ${this._locale.WEEK_DAYS.map(p=>bt`
              <th
                class="kuc-base-mobile-datetime-calendar-body-1-18-0__table__header"
                role="columnheader"
                abbr="${p.abbr}"
              >
                ${p.text}
              </th>
            `)}
        </tr>
      </thead>
    `}_getDateItemsTemplate(){const p=Sm(this._year,this._month-1),a=this._locale.MONTH_SELECT[this._month-1];return bt`
      <tbody>
        ${p.map(u=>bt`
            <tr>
              ${u.map(s=>{const T=s.text.split("-"),k=this._isSameDayOfMoment(T),$=parseInt(T[1],10)===this._month,X=(this.value===s.attr||k)&&$;return bt`
                  <td
                    role="gridcell"
                    tabindex="${X?0:-1}"
                    aria-selected="${this.value===s.attr}"
                    aria-current="${!!this._isToday(T)&&"date"}"
                    class="kuc-base-mobile-datetime-calendar-body-1-18-0__table__date${X?"--selected":""}${this._getDateClass(T,$)}"
                    data-date="${s.attr}"
                    aria-label="${T[2]} ${a}"
                    @click="${this._handleClickDate}"
                  >
                    ${T[2]||""}
                  </td>
                `})}
            </tr>
          `)}
      </tbody>
    `}}ls([F({type:Number})],xa.prototype,"month",void 0),ls([F({type:Number})],xa.prototype,"year",void 0),ls([F({type:String,attribute:"lang",reflect:!0})],xa.prototype,"language",void 0),ls([F({type:String,reflect:!0})],xa.prototype,"value",void 0),ls([se()],xa.prototype,"_month",void 0),ls([se()],xa.prototype,"_year",void 0),window.customElements.get("kuc-base-mobile-datetime-calendar-body-1-18-0")||(ue(`
kuc-base-mobile-datetime-calendar-body-1-18-0,
kuc-base-mobile-datetime-calendar-body-1-18-0 * {
    font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
    "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
    "Lucida Sans Unicode", Arial, Verdana, sans-serif;
}

kuc-base-mobile-datetime-calendar-body-1-18-0:lang(zh),
kuc-base-mobile-datetime-calendar-body-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
    Verdana, sans-serif;
}

kuc-base-mobile-datetime-calendar-body-1-18-0:lang(zh-TW),
kuc-base-mobile-datetime-calendar-body-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
    Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
    Verdana,sans-serif
}

kuc-base-mobile-datetime-calendar-body-1-18-0:lang(es),
kuc-base-mobile-datetime-calendar-body-1-18-0:lang(es) * {
    font-family: sans-serif;
}

.kuc-base-mobile-datetime-calendar-body-1-18-0__table,
.kuc-base-mobile-datetime-calendar-body-1-18-0__table tr {
    border-collapse: separate;
    border-spacing: 0;
}
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date--selected {
    border-spacing: 1px;
    padding: 0px;
}
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date {
    max-width: 40px;
    border-spacing: 1px;
    cursor: pointer;
    box-sizing: border-box;
    width: 40px;
    height: 40px;
    border: 1px solid #ffffff;
    text-align: center;
    vertical-align: middle;
    user-select: none;
    color: #333333;
    font-size: 14px;
    font-weight: 400;
}
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date
    .kuc-base-mobile-datetime-calendar-body-1-18-0__table__date__button {
    border-spacing: 1px;
    cursor: pointer;
    box-sizing: border-box;
    text-align: center;
    vertical-align: middle;
    color: #333333;
}
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date,
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date--selected,
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__header {
    box-sizing: border-box;
    height: 40px;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    font-weight: 400;
    font-size: 12px;
    color: #333333;
    padding: 0;
}
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date {
    font-size: 14px;
}
th.kuc-base-mobile-datetime-calendar-body-1-18-0__table__header {
    font-weight: 700;
}
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date--selected
    .kuc-base-mobile-datetime-calendar-body-1-18-0__table__date__button,
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date
    .kuc-base-mobile-datetime-calendar-body-1-18-0__table__date__button,
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__header {
    box-sizing: border-box;
    border: 1px solid #ffffff;
}
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date--selected
    .kuc-base-mobile-datetime-calendar-body-1-18-0__table__date__button,
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date
    .kuc-base-mobile-datetime-calendar-body-1-18-0__table__date__button {
    background: none;
    cursor: pointer;
    max-width: 40px;
}
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date--selected {
    border: 1px solid #206694;
    box-sizing: border-box;
    text-align: center;
    font-size: 14px;
}
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date--selected
    .kuc-base-mobile-datetime-calendar-body-1-18-0__table__date__button {
    outline: none;
}
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date
    .kuc-base-mobile-datetime-calendar-body-1-18-0__table__date__button:focus-visible {
    outline: none;
}
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date--today {
    color: #333333;
    background: #d8d8d8;
}
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date--other-month {
    color: #a5a5a5;
}
.kuc-base-mobile-datetime-calendar-body-1-18-0__table__date--selected:focus {
    outline: none;
}
`),window.customElements.define("kuc-base-mobile-datetime-calendar-body-1-18-0",xa));var Nm=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class sd extends ce{constructor(){super(...arguments),this.language="en",this._locale=mi("en")}update(p){p.has("language")&&(this._locale=mi(this.language)),super.update(p)}_handleClickCalendarFooterButtonClose(p){p.stopPropagation(),Ot(this,"kuc:mobile-calendar-footer-click-close")}_handleClickCalendarFooterButtonNone(p){p.stopPropagation(),Ot(this,"kuc:mobile-calendar-footer-click-none")}_handleClickCalendarFooterButtonToday(p){p.stopPropagation(),Ot(this,"kuc:mobile-calendar-footer-click-today")}render(){return bt`
      <div class="kuc-base-mobile-datetime-calendar-footer-1-18-0__group">
        <button
          type="button"
          class="kuc-base-mobile-datetime-calendar-footer-1-18-0__group__button kuc-base-mobile-datetime-calendar-footer-1-18-0__group__button--today"
          @click="${this._handleClickCalendarFooterButtonToday}"
        >
          ${this._locale.CALENDAR_FOOTER_TEXT.today}
        </button>
        <button
          type="button"
          class="kuc-base-mobile-datetime-calendar-footer-1-18-0__group__button kuc-base-mobile-datetime-calendar-footer-1-18-0__group__button--none"
          @click="${this._handleClickCalendarFooterButtonNone}"
        >
          ${this._locale.CALENDAR_FOOTER_TEXT.none}
        </button>
        <button
          type="button"
          class="kuc-base-mobile-datetime-calendar-footer-1-18-0__group__button kuc-base-mobile-datetime-calendar-footer-1-18-0__group__button--close"
          @click="${this._handleClickCalendarFooterButtonClose}"
        >
          ${this._locale.CALENDAR_FOOTER_TEXT.close}
        </button>
      </div>
    `}}Nm([F({type:String,attribute:"lang",reflect:!0})],sd.prototype,"language",void 0),Nm([se()],sd.prototype,"_locale",void 0),window.customElements.get("kuc-base-mobile-datetime-calendar-footer-1-18-0")||(ue(`
kuc-base-mobile-datetime-calendar-footer-1-18-0,
kuc-base-mobile-datetime-calendar-footer-1-18-0 * {
    font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
    "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
    "Lucida Sans Unicode", Arial, Verdana, sans-serif;
}

kuc-base-mobile-datetime-calendar-footer-1-18-0:lang(zh),
kuc-base-mobile-datetime-calendar-footer-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
    Verdana, sans-serif;
}
kuc-base-mobile-datetime-calendar-footer-1-18-0:lang(zh-TW),
kuc-base-mobile-datetime-calendar-footer-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
    Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
    Verdana,sans-serif
}
kuc-base-mobile-datetime-calendar-footer-1-18-0:lang(es),
kuc-base-mobile-datetime-calendar-footer-1-18-0:lang(es) * {
    font-family: sans-serif;
}
.kuc-base-mobile-datetime-calendar-footer-1-18-0__group {
    display: flex;
    justify-content: space-between;
    box-sizing: border-box;
    padding: 0;
    white-space: nowrap;
}
.kuc-base-mobile-datetime-calendar-footer-1-18-0__group__button {
    background: transparent;
    border: 1px solid transparent;
    color: #206694;
    height: 40px;
    cursor: pointer;
    font-size: 14px;
    outline: none;
    padding: 0;
    margin: 0;
    font-weight: 700;
}
.kuc-base-mobile-datetime-calendar-footer-1-18-0__group__center {
    width: 100%;
}
`),window.customElements.define("kuc-base-mobile-datetime-calendar-footer-1-18-0",sd));var Vc=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class fl extends ce{constructor(){super(...arguments),this.language="en",this.value="",this._month=1,this._year=new Date().getFullYear()}update(p){p.has("value")&&this._updateValue(),super.update(p)}render(){return bt`
      <div
        class="kuc-base-mobile-datetime-calendar-1-18-0__group"
        role="dialog"
        aria-modal="true"
        aria-label="Calender"
        @click="${this._handleClickCalendarGroup}"
      >
        <kuc-base-mobile-datetime-calendar-header-1-18-0
          .year="${this._year}"
          .month="${this._month}"
          .language="${this.language}"
          @kuc:mobile-calendar-header-change="${this._handleCalendarHeaderChange}"
        ></kuc-base-mobile-datetime-calendar-header-1-18-0>
        <kuc-base-mobile-datetime-calendar-body-1-18-0
          .year="${this._year}"
          .month="${this._month}"
          .value="${this.value}"
          .language="${this.language}"
        ></kuc-base-mobile-datetime-calendar-body-1-18-0>
        <kuc-base-mobile-datetime-calendar-footer-1-18-0
          .language="${this.language}"
        ></kuc-base-mobile-datetime-calendar-footer-1-18-0>
      </div>
    `}updated(p){super.updated(p)}_handleClickCalendarGroup(p){p.stopPropagation()}_handleCalendarHeaderChange(p){const{year:a,month:u}=this._separateValue(p.detail.value);this._year=a,this._month=u}_updateValue(){this.value===""&&(this.value=Ar().slice(0,7)+"-01");const{year:p,month:a}=this._separateValue(this.value);this._year=p,this._month=a}_separateValue(p){const a=p.split("-");return{year:parseInt(a[0],10),month:parseInt(a[1],10)}}}Vc([F({type:String,attribute:"lang",reflect:!0})],fl.prototype,"language",void 0),Vc([F({type:String,reflect:!0})],fl.prototype,"value",void 0),Vc([se()],fl.prototype,"_month",void 0),Vc([se()],fl.prototype,"_year",void 0),window.customElements.get("kuc-base-mobile-datetime-calendar-1-18-0")||(ue(`
.kuc-base-mobile-datetime-calendar-1-18-0__group {
    display: inline-block;
    box-sizing: border-box;
    width: 290px;
    padding: 0 10px;
    background: #ffffff;
    text-align: center;
    font-size: 13px;
    border: 1px solid #d8d8d8;
}
`),window.customElements.define("kuc-base-mobile-datetime-calendar-1-18-0",fl));var Eo=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class co extends ce{constructor(){super(...arguments),this.inputId="",this.language="en",this.value="",this.disabled=!1,this.inputAriaInvalid=!1,this.required=!1,this._dateTimeCalendarVisible=!1,this._calendarValue="",this._inputValue=""}update(p){p.has("inputId")&&(this._GUID=this.inputId),(p.has("value")||p.has("language"))&&this._updateValueProp(),super.update(p)}render(){return bt`
      <div class="kuc-mobile-base-date-1-18-0__group${this._getGroupClass()}">
        <input
          class="kuc-mobile-base-date-1-18-0__group__input"
          type="text"
          id="${this._GUID}-label"
          readonly="readonly"
          .value="${this._inputValue}"
          aria-label="Date"
          aria-describedby="${this._GUID}-error"
          aria-invalid="${this.inputAriaInvalid}"
          aria-required="${this.required}"
          ?disabled="${this.disabled}"
          @click="${this._handleClickOpenCalendar}"
        />
        <button
          type="button"
          class="kuc-mobile-base-date-1-18-0__group__button"
          aria-label="calendar"
          @click="${this._handleClickOpenCalendar}"
          ?disabled="${this.disabled}"
        >
          ${this._getCalendarIconTemplate()}
        </button>
        ${this._getCalendarTemplate()}
      </div>
    `}updated(p){this._dateTimeCalendarVisible&&this._setCalendarPosition(),super.updated(p)}_setCalendarPosition(){const{inputToBottom:p,inputToTop:a}=dl(this),u=this._inputEl.getBoundingClientRect().height;p>=a||(this._calendarEl.style.bottom=u+2+"px",this._calendarEl.style.top="auto")}_getGroupClass(){let p="";return this.disabled&&(p+=" kuc-mobile-base-date-1-18-0__group--disabled"),this.required&&(p+=" kuc-mobile-base-date-1-18-0__group--required"),p}_handleClickOpenCalendar(p){if(this._dateTimeCalendarVisible)return p.preventDefault(),void p.stopPropagation();this._calendarValue=this._getNewCalendarValue(this._inputValue||""),this._openCalendar()}_updateValueProp(){if(this.value)return this._inputValue=Cm(this.language,this.value),void(this._calendarValue=this.value);const p=Ar();this._inputValue="",this._calendarValue=this._calendarValue?this._calendarValue.slice(0,7)+"-01":p.slice(0,7)}_getNewCalendarValue(p){if(Em(this.language,p))return Sh(this.language,p);let a=this._calendarValue.slice(0,7);return p===""&&(a=this._calendarValue.slice(0,7)+"-01"),a}_closeCalendar(){this._dateTimeCalendarVisible=!1}_openCalendar(){this._dateTimeCalendarVisible=!0}_handleClickCalendarClickDate(p){this._closeCalendar(),p.detail.oldValue=this.value,p.detail.oldValue!==p.detail.value&&(this.value=p.detail.value,Ot(this,"kuc:mobile-base-date-change",p.detail),this._btnToggleEl.focus())}_handleClickCalendarFooterButtonNone(){this._closeCalendar(),this._inputValue="";let p=this.value?this.value.slice(0,7)+"-01":"";p||(p=this._calendarValue.slice(0,7)+"-01"),this._calendarValue=p,this._dispathDateChangeCustomEvent("")}_handleClickCalendarFooterButtonToday(){this._closeCalendar();const p=Ar();this._dispathDateChangeCustomEvent(p)}_handleClickCalendarFooterButtonClose(){this._closeCalendar(),this._btnToggleEl.focus()}_handleCalendarBlurBody(p){p.preventDefault(),this._dateTimeCalendarVisible=!1}_dispathDateChangeCustomEvent(p){const a={value:p,oldValue:this.value};this.value=p,Ot(this,"kuc:mobile-base-date-change",a),this._btnToggleEl.focus()}_getCalendarTemplate(){return this._dateTimeCalendarVisible?bt`
          <kuc-base-mobile-datetime-calendar-1-18-0
            class="kuc-base-mobile-date-1-18-0__calendar"
            .language="${this.language}"
            .value="${this._calendarValue}"
            ?hidden="${!this._dateTimeCalendarVisible}"
            @kuc:mobile-calendar-body-click-date="${this._handleClickCalendarClickDate}"
            @kuc:mobile-calendar-footer-click-none="${this._handleClickCalendarFooterButtonNone}"
            @kuc:mobile-calendar-footer-click-today="${this._handleClickCalendarFooterButtonToday}"
            @kuc:mobile-calendar-footer-click-close="${this._handleClickCalendarFooterButtonClose}"
            @kuc:mobile-calendar-body-blur="${this._handleCalendarBlurBody}"
          >
          </kuc-base-mobile-datetime-calendar-1-18-0>
        `:""}_getCalendarIconTemplate(){return bt`
      <svg width="24" height="24" viewBox="0 0 28 28" fill="none">
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M10 4C9.44772 4 9 4.44772 9 5V6H6C4.89543 6 4 6.89543 4 8V21C4 22.1046 4.89543 23 6 23H22C23.1046 23 24 22.1046 24 21V8C24 6.89543 23.1046 6 22 6H19V5C19 4.44772 18.5523 4 18 4C17.4477 4 17 4.44772 17 5V6H11V5C11 4.44772 10.5523 4 10 4ZM9 8V9C9 9.55228 9.44772 10 10 10C10.5523 10 11 9.55228 11 9V8H17V9C17 9.55228 17.4477 10 18 10C18.5523 10 19 9.55228 19 9V8H22V11H6V8H9ZM6 13V21H22V13H6Z"
          fill="#4b4b4b"
        />
      </svg>
    `}}Eo([F({type:String})],co.prototype,"inputId",void 0),Eo([F({type:String,attribute:"lang",reflect:!0})],co.prototype,"language",void 0),Eo([F({type:String,reflect:!0})],co.prototype,"value",void 0),Eo([F({type:Boolean})],co.prototype,"disabled",void 0),Eo([F({type:Boolean})],co.prototype,"inputAriaInvalid",void 0),Eo([F({type:Boolean})],co.prototype,"required",void 0),Eo([qt(".kuc-mobile-base-date-1-18-0__group__button")],co.prototype,"_btnToggleEl",void 0),Eo([qt(".kuc-mobile-base-date-1-18-0__group__input")],co.prototype,"_inputEl",void 0),Eo([qt(".kuc-base-mobile-date-1-18-0__calendar")],co.prototype,"_calendarEl",void 0),Eo([se()],co.prototype,"_dateTimeCalendarVisible",void 0),window.customElements.get("kuc-mobile-base-date-1-18-0")||(ue(`
kuc-mobile-base-date-1-18-0,
kuc-mobile-base-date-1-18-0 * {
    font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
    "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
    "Lucida Sans Unicode", Arial, Verdana, sans-serif;
}
kuc-mobile-base-date-1-18-0:lang(zh),
kuc-mobile-base-date-1-18-0:lang(zh) * {
    font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
    Verdana, sans-serif;
}
kuc-mobile-base-date-1-18-0:lang(zh-TW),
kuc-mobile-base-date-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
    Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
    Verdana,sans-serif
}
kuc-mobile-base-date-1-18-0:lang(es),
kuc-mobile-base-date-1-18-0:lang(es) * {
    font-family: sans-serif;
}
.kuc-mobile-base-date-1-18-0__group {
    display: flex;
    align-items: center;
    position: relative;
    border-radius: 5.148px;
    background-color: #ffffff;
}
.kuc-mobile-base-date-1-18-0__group__input[aria-required="true"] {
    border-color: #cf4a38;
}
input.kuc-mobile-base-date-1-18-0__group__input {
    color: #000000;
    width: 100%;
    height: 31.28px;
    font-size: 99%;
    -webkit-flex-grow: 1;
    flex-grow: 1;
    padding: 5.148px;
    border-radius: 5.148px;
    box-shadow: 0px 1px 0px #ffffff, inset 0px 2px 3px #dadada;
    border: 1px solid #b3b3b3;
    font-weight: 400;
    -webkit-appearance: none;
    appearance: none;
    outline: 0;
    background: transparent;
    box-sizing: border-box;
}
.kuc-mobile-base-date-1-18-0__group--disabled {
    background-color: #d5d7d9;
    opacity: 1;
}
.kuc-mobile-base-date-1-18-0__group--disabled input {
    color: #999999;
    -webkit-text-fill-color: #999999;
}
.kuc-base-mobile-date-1-18-0__calendar {
    position: absolute;
    left: 0;
    top: 39px;
    z-index: 1000;
}
.kuc-mobile-base-date-1-18-0__group__button {
    position: absolute;
    display: flex;
    right: 10px;
    background-color: transparent;
    border: 0;
    padding: 0;
    height: 100%;
    align-items: center;
}
`),window.customElements.define("kuc-mobile-base-date-1-18-0",co));var Ao=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let ld;(()=>{if(ld=window.customElements.get("kuc-mobile-date-picker-1-18-0"),!ld){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.disabled=!1,this.requiredIcon=!1,this.language="auto",this.value="",this.visible=!0,this._dateConverted="",this._inputValue="",this._GUID=ti();const u=ze(a);Object.assign(this,u)}shouldUpdate(a){return!(this.value!==void 0&&this.value!==""&&(Pm(this.value)?(this._dateConverted=Ec(this.value),this._dateConverted!==""&&!_a(this._dateConverted)&&(this.throwErrorAfterUpdateComplete(yo),1)):(this.throwErrorAfterUpdateComplete(yo),1)))}willUpdate(a){a.has("value")&&this.value!==void 0&&this.value!==""&&(this.value=this._dateConverted)}update(a){a.has("value")&&this._updateInputValue(),super.update(a)}render(){return bt`
        <div class="kuc-mobile-date-picker-1-18-0__group">
          <label
            class="kuc-mobile-date-picker-1-18-0__group__label"
            for="${this._GUID}-label"
            @click="${this._handleClickLabel}"
            ?hidden="${!this.label}"
          >
            <kuc-base-mobile-label-1-18-0
              .requiredIcon="${this.requiredIcon}"
              .text="${this.label}"
            ></kuc-base-mobile-label-1-18-0>
          </label>
          <kuc-mobile-base-date-1-18-0
            class="kuc-mobile-date-picker-1-18-0__group__base__date"
            .disabled="${this.disabled}"
            .value="${this._inputValue}"
            .inputId="${this._GUID}"
            .inputAriaInvalid="${this.error!==""}"
            .required="${this.requiredIcon}"
            .language="${this._getLanguage()}"
            @kuc:mobile-base-date-change="${this._handleDateChange}"
          >
          </kuc-mobile-base-date-1-18-0>
          <kuc-base-mobile-error-1-18-0 .guid="${this._GUID}" .text="${this.error}">
          </kuc-base-mobile-error-1-18-0>
        </div>
      `}_updateInputValue(){this.value!==void 0&&this.value!==""?this._inputValue=this.value:this._inputValue=""}_getLanguage(){const a=["en","ja","zh","zh-TW","es"];return a.indexOf(this.language)!==-1?this.language:a.indexOf(document.documentElement.lang)!==-1?document.documentElement.lang:"en"}_handleClickLabel(a){a.preventDefault()}_handleDateChange(a){a.stopPropagation(),a.preventDefault();const u={oldValue:this.value,value:""};this.value=a.detail.value,u.value=this.value,this._dispatchChangeEvent(u)}_dispatchChangeEvent(a){Ot(this,"change",a)}}Ao([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),Ao([F({type:String})],b.prototype,"error",void 0),Ao([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),Ao([F({type:String})],b.prototype,"label",void 0),Ao([F({type:Boolean})],b.prototype,"disabled",void 0),Ao([F({type:Boolean})],b.prototype,"requiredIcon",void 0),Ao([F({type:String,attribute:"lang",reflect:!0,converter:pa})],b.prototype,"language",void 0),Ao([F({type:String})],b.prototype,"value",void 0),Ao([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),Ao([se()],b.prototype,"_inputValue",void 0),window.customElements.define("kuc-mobile-date-picker-1-18-0",b),ue(`
kuc-mobile-date-picker-1-18-0,
kuc-mobile-date-picker-1-18-0 * {
  color: #333333;
  font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
    "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
    "Lucida Sans Unicode", Arial, Verdana, sans-serif;
}
kuc-mobile-date-picker-1-18-0:lang(zh),
kuc-mobile-date-picker-1-18-0:lang(zh) * {
  font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
    Verdana, sans-serif;
}
kuc-mobile-date-picker-1-18-0:lang(zh-TW),
kuc-mobile-date-picker-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
    Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
    Verdana,sans-serif
}
kuc-mobile-date-picker-1-18-0:lang(es),
kuc-mobile-date-picker-1-18-0:lang(es) * {
    font-family: sans-serif;
}
kuc-mobile-date-picker-1-18-0 {
  font-size: 13px;
  color: #333333;
  display: inline-table;
  vertical-align: top;
  width: 100%;
}
kuc-mobile-date-picker-1-18-0[hidden] {
  display: none;
}
.kuc-mobile-date-picker-1-18-0__group {
  display: flex;
  flex-direction: column;
  border: none;
  padding: 0px;
  height: auto;
  margin: 0px;
}
.kuc-mobile-date-picker-1-18-0__group__label {
  display: inline-block;
  font-weight: bold;
  line-height: 1.5;
  padding: 0px;
  white-space: nowrap;
  margin: 0 0 4px 0;
}
.kuc-mobile-date-picker-1-18-0__group__base__date {
  width: 130px;
  margin-right: 0.5em;
  margin-left: 0.5em;
}
.kuc-mobile-date-picker-1-18-0__group__label[hidden] {
  display: none;
}
.kuc-mobile-date-picker-1-18-0__group input.kuc-base-date-1-18-0__input {
  width: 100px;
  height: 40px;
  padding: 0px;
  text-align: center;
  border: 1px solid #e3e7e8;
  box-sizing: border-box;
  font-size: 14px;
  box-shadow: 2px 2px 4px #f5f5f5 inset, -2px -2px 4px #f5f5f5 inset;
}

.kuc-mobile-date-picker-1-18-0__group input.kuc-base-date-1-18-0__input:focus {
  outline: none;
  border: 1px solid #3498db;
}
.kuc-mobile-date-picker-1-18-0__group input.kuc-base-date-1-18-0__input--focus {
  box-shadow: 2px 2px 4px #f5f5f5 inset, -2px -2px 4px #f5f5f5 inset;
  border: 1px solid #3498db;
  background-color: #ffffff;
  color: #333333;
}
.kuc-mobile-date-picker-1-18-0__group input.kuc-base-date-1-18-0__input:disabled {
  color: #888888;
  background-color: #d4d7d7;
  box-shadow: none;
  cursor: not-allowed;
}
`),ld=b}})();var bn=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};class an extends ce{constructor(p){super(),this.guid="",this.language="en",this.value="",this.disabled=!1,this.hour12=!1,this.required=!1,this._timeStep=1,this._hours="",this._minutes="",this._suffix="",this._locale=mi("en");const a=ze(p);Object.assign(this,a)}update(p){p.has("language")&&(this._locale=mi(this.language)),p.has("hour12")&&(this._hourOptions=((a=!1)=>a?Am("AM").concat(Am("PM")):(()=>{const u=[];u.push({value:"00",label:"00"});for(let s=1;s<=23;s++)u.push({value:Be(s),label:`${Be(s)}`});return u})())(this.hour12)),p.has("_timeStep")&&(this._minuteOptions=((a=1)=>{const u=[];for(let s=0;s<=59;s+=a)u.push({value:Be(s),label:Be(s)});return u})(this._timeStep)),super.update(p)}render(){return bt`
      <fieldset
        class="kuc-base-mobile-time-1-18-0__group${this.disabled?" kuc-base-mobile-time-1-18-0__group--disabled":""}${this.required?" kuc-base-mobile-time-1-18-0__group--required":""}"
        aria-label="label-text"
      >
        <select
          class="kuc-base-mobile-time-1-18-0__group__hours"
          aria-label="Hour"
          aria-describedby="${this.guid}-error"
          ?disabled="${this.disabled}"
          @change="${this._handleChangeHours}"
        >
          <option value selected></option>
          ${this._getOptionsHourTemplate()}
        </select>
        <span class="kuc-base-mobile-time-1-18-0__group__colon">:</span>
        <select
          class="kuc-base-mobile-time-1-18-0__group__minutes"
          aria-label="Minute"
          aria-describedby="${this.guid}-error"
          ?disabled="${this.disabled}"
          @change="${this._handleChangeMinutes}"
        >
          <option value selected></option>
          ${this._getOptionsMinuteTemplate()}
        </select>
      </fieldset>
    `}updated(p){p.has("value")&&this._updateInputValue(),super.update(p)}_updateInputValue(){const p=((a,u)=>{const s={hours:"",minutes:"",suffix:""},T=a.split(":"),k=parseInt(T[0],10),$=parseInt(T[1],10),X=k%da;return isNaN(X)||(s.hours=Be(u?Im(X):X),s.suffix=u?Tm(X):""),isNaN($)||(s.minutes=Be($)),s})(this.value,this.hour12);this._hours=p.hours,this._minutes=p.minutes,this._suffix=p.suffix||"",this._setValueToInput(p)}_setValueToInput(p){this._minutesEl.value=p.minutes,p.suffix?this._hoursEl.value=p.suffix+" "+p.hours:this._hoursEl.value=p.hours}_handleChangeMinutes(p){p.preventDefault(),p.stopPropagation();const a=this._getTimeValueString(),u=p.target.value;this._minutes=u;const s=this._getTimeValueString();this.value=s,this._dispatchEventTimeChange(s,a)}_handleChangeHours(p){p.preventDefault(),p.stopPropagation();const a=this._getTimeValueString(),u=p.target.value.split(" ");u.length===2?(this._hours=u[1],this._suffix=u[0]):(this._hours=u[0],this._suffix="");const s=this._getTimeValueString();this.value=s,this._dispatchEventTimeChange(s,a)}_getTimeValueString(){const p=`${this._hours}:${this._minutes}`;return this._suffix?hl(`${p} ${this._suffix}`):hl(p)}_dispatchEventTimeChange(p,a){const u=p===":"?"":p,s={value:u,oldValue:a===":"?"":a};s.error=ma(u)?"":this._locale.INVALID_TIME_FORMAT,Ot(this,"kuc:base-mobile-time-change",s)}_getOptionsMinuteTemplate(){return this._minuteOptions.map(p=>bt` <option value="${p.value}">${p.label}</option> `)}_getOptionsHourTemplate(){return this._hourOptions.map(p=>bt` <option value="${p.value}">${p.label}</option> `)}}bn([F({type:String})],an.prototype,"guid",void 0),bn([F({type:String,attribute:"lang",reflect:!0})],an.prototype,"language",void 0),bn([F({type:String})],an.prototype,"value",void 0),bn([F({type:Boolean})],an.prototype,"disabled",void 0),bn([F({type:Boolean})],an.prototype,"hour12",void 0),bn([F({type:Boolean})],an.prototype,"required",void 0),bn([se()],an.prototype,"_timeStep",void 0),bn([se()],an.prototype,"_hours",void 0),bn([se()],an.prototype,"_minutes",void 0),bn([se()],an.prototype,"_suffix",void 0),bn([se()],an.prototype,"_hourOptions",void 0),bn([se()],an.prototype,"_minuteOptions",void 0),bn([qt(".kuc-base-mobile-time-1-18-0__group__hours")],an.prototype,"_hoursEl",void 0),bn([qt(".kuc-base-mobile-time-1-18-0__group__minutes")],an.prototype,"_minutesEl",void 0),window.customElements.get("kuc-base-mobile-time-1-18-0")||(ue(`
kuc-base-mobile-time-1-18-0,
kuc-base-mobile-time-1-18-0 * {
  font-size: 13px;
  font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
  "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
  "Lucida Sans Unicode", Arial, Verdana, sans-serif;
}

kuc-base-mobile-time-1-18-0:lang(zh),
kuc-base-mobile-time-1-18-0:lang(zh) * {
  font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
  Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
  Verdana, sans-serif;
}

kuc-base-mobile-time-1-18-0:lang(zh-TW),
kuc-base-mobile-time-1-18-0:lang(zh-TW) * {
  font-family: "微軟正黒體", "Microsoft JhengHei", "新宋体", NSimSun, STHeiti,
  Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
  Verdana, sans-serif
}

kuc-base-mobile-time-1-18-0:lang(es),
kuc-base-mobile-time-1-18-0:lang(es) * {
  font-family: sans-serif;
}

kuc-base-mobile-time-1-18-0 {
  width: 100%;
  display: inline-block;
  vertical-align: top;
}

kuc-base-mobile-time-1-18-0[hidden] {
  display: none;
}

.kuc-base-mobile-time-1-18-0__group {
  padding: 0;
  margin: 0;
  height: 31.28px;
  border: 1px solid #b3b3b3;
  border-radius: 5.2px;
  box-sizing: border-box;
  background-color: #ffffff;
  display: -webkit-flex;
  display: flex;
  -webkit-align-items: center;
  align-items: center;
  box-shadow: 0px 1px 0px #ffffff, inset 0px 2px 3px #dadada;
}

.kuc-base-mobile-time-1-18-0__group--required {
  border-color: #cf4a38;
}

.kuc-base-mobile-time-1-18-0__group__hours {
  padding: 5.148px 7.722px;
}

.kuc-base-mobile-time-1-18-0__group__minutes {
  padding: 5.148px 7.722px;
  -webkit-flex-grow: 1;
  flex-grow: 1;
}

.kuc-base-mobile-time-1-18-0__group__hours,
.kuc-base-mobile-time-1-18-0__group__minutes {
  font-size: 99%;
  height: 100%;
  color: #000000;
  border: none;
  border-radius: 5.148px;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-color: transparent;
}

.kuc-base-mobile-time-1-18-0__group__colon {
  color: #000000;
}

.kuc-base-mobile-time-1-18-0__group__hours:disabled
+ .kuc-base-mobile-time-1-18-0__group__colon {
  color: #999999;
  -webkit-text-fill-color: #999999;
  opacity: 1;
}

.kuc-base-mobile-time-1-18-0__group--disabled {
  color: #999999;
  -webkit-text-fill-color: #999999;
  background-color: #d5d7d9;
  opacity: 1;
}

.kuc-base-mobile-time-1-18-0__group__hours:disabled,
.kuc-base-mobile-time-1-18-0__group__minutes:disabled {
  color: #999999;
  -webkit-text-fill-color: #999999;
  opacity: 1;
}

.kuc-base-mobile-time-1-18-0__group__hours:focus {
  outline: none;
}

.kuc-base-mobile-time-1-18-0__group__minutes:focus {
  outline: none;
}
`),window.customElements.define("kuc-base-mobile-time-1-18-0",an));var Kn=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let cd;(()=>{if(cd=window.customElements.get("kuc-mobile-time-picker-1-18-0"),!cd){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.language="auto",this.value="",this.disabled=!1,this.hour12=!1,this.requiredIcon=!1,this.visible=!0,this._inputValue="",this._errorFormat="",this._isSelectError=!1,this._GUID=ti();const u=ze(a);Object.assign(this,u)}shouldUpdate(a){return this.value===void 0||this.value===""||!!ma(this.value)||(this.throwErrorAfterUpdateComplete(yo),!1)}willUpdate(){this.value!==void 0&&this.value!==""&&(this.value=Zo(this.value))}update(a){a.has("value")&&!this._isSelectError&&(this.value===void 0?this._inputValue="":this._inputValue=this.value||"",this._errorFormat=""),super.update(a)}render(){return bt`
        <div class="kuc-mobile-time-picker-1-18-0__group">
          <label
            class="kuc-mobile-time-picker-1-18-0__group__label"
            ?hidden="${!this.label}"
          >
            <kuc-base-mobile-label-1-18-0
              .guid="${this._GUID}"
              .text="${this.label}"
              .requiredIcon="${this.requiredIcon}"
            ></kuc-base-mobile-label-1-18-0>
          </label>
          <div class="kuc-base-mobile-time-1-18-0__group__wrapper">
            <kuc-base-mobile-time-1-18-0
              .value="${this._inputValue}"
              .disabled="${this.disabled}"
              .hour12="${this.hour12}"
              .guid="${this._GUID}"
              .language="${this._getLanguage()}"
              .required="${this.requiredIcon}"
              @kuc:base-mobile-time-change="${this._handleTimeChange}"
            ></kuc-base-mobile-time-1-18-0>
          </div>
          <kuc-base-mobile-error-1-18-0
            .guid="${this._GUID}"
            .text="${this._errorFormat||this.error}"
            ariaLive="assertive"
          ></kuc-base-mobile-error-1-18-0>
        </div>
      `}updated(){this._isSelectError=!1}_handleTimeChange(a){a.preventDefault(),a.stopPropagation();const u={value:a.detail.value,oldValue:this.value};if(this._inputValue=a.detail.value,a.detail.error)return this._isSelectError=!0,this._errorFormat=a.detail.error,this.value=void 0,u.value=void 0,this.error="",void Ot(this,"change",u);this._isSelectError=!1,this._errorFormat="",this.value=a.detail.value,Ot(this,"change",u)}_getLanguage(){const a=["en","ja","zh","zh-TW","es"];return a.indexOf(this.language)!==-1?this.language:a.indexOf(document.documentElement.lang)!==-1?document.documentElement.lang:"en"}}Kn([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),Kn([F({type:String})],b.prototype,"error",void 0),Kn([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),Kn([F({type:String})],b.prototype,"label",void 0),Kn([F({type:String,attribute:"lang",reflect:!0,converter:pa})],b.prototype,"language",void 0),Kn([F({type:String,hasChanged:(p,a)=>(p===""||p===void 0)&&p===a||p!==a})],b.prototype,"value",void 0),Kn([F({type:Boolean})],b.prototype,"disabled",void 0),Kn([F({type:Boolean})],b.prototype,"hour12",void 0),Kn([F({type:Boolean})],b.prototype,"requiredIcon",void 0),Kn([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),Kn([se()],b.prototype,"_inputValue",void 0),Kn([se()],b.prototype,"_errorFormat",void 0),window.customElements.define("kuc-mobile-time-picker-1-18-0",b),ue(`
kuc-mobile-time-picker-1-18-0,
kuc-mobile-time-picker-1-18-0 * {
  font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
  "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
  "Lucida Sans Unicode", Arial, Verdana, sans-serif;
}
kuc-mobile-time-picker-1-18-0:lang(zh),
kuc-mobile-time-picker-1-18-0:lang(zh) * {
  font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
  Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
  Verdana, sans-serif;
}
kuc-mobile-time-picker-1-18-0:lang(zh-TW),
kuc-mobile-time-picker-1-18-0:lang(zh-TW) * {
  font-family: "微軟正黒體", "Microsoft JhengHei", "新宋体", NSimSun, STHeiti,
  Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
  Verdana, sans-serif
}
kuc-mobile-time-picker-1-18-0:lang(es),
kuc-mobile-time-picker-1-18-0:lang(es) * {
  font-family: sans-serif;
}
kuc-mobile-time-picker-1-18-0 {
  font-size: 13px;
  display: inline-block;
  vertical-align: top;
  width: 100%;
}
kuc-mobile-time-picker-1-18-0[hidden] {
  display: none;
}
.kuc-mobile-time-picker-1-18-0__group__label {
  display: inline-block;
  font-weight: bold;
  line-height: 1.5;
  padding: 0px;
  margin: 0 0 4px 0;
  white-space: nowrap;
}
.kuc-mobile-time-picker-1-18-0__group__label[hidden] {
  display: none;
}
.kuc-base-mobile-time-1-18-0__group__wrapper {
  padding-left: 0.5em;
  max-width: 10px;
}
`),cd=b}})();var yn=function(b,p,a,u){var s,T=arguments.length,k=T<3?p:u===null?u=Object.getOwnPropertyDescriptor(p,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,p,a,u);else for(var $=b.length-1;$>=0;$--)(s=b[$])&&(k=(T<3?s(k):T>3?s(p,a,k):s(p,a))||k);return T>3&&k&&Object.defineProperty(p,a,k),k};let ud;(()=>{if(ud=window.customElements.get("kuc-mobile-datetime-picker-1-18-0"),!ud){class b extends ce{constructor(a){super(),this.className="",this.error="",this.id="",this.label="",this.language="auto",this.value="",this.disabled=!1,this.hour12=!1,this.requiredIcon=!1,this.visible=!0,this._dateConverted="",this._changeDateByUI=!1,this._changeTimeByUI=!1,this._previousTimeValue="",this._previousDateValue="",this._dateValue="",this._timeValue="",this._errorFormat="",this._errorText="",this._GUID=ti();const u=ze(a);Object.assign(this,u)}shouldUpdate(a){return this.value===void 0||this.value===""||(typeof this.value!="string"?(this.throwErrorAfterUpdateComplete(yo),!1):(this._dateAndTime=this._getDateTimeValue(this.value),this._dateConverted=Ec(this._dateAndTime.date),!(!Lm(this._dateAndTime.date,this._dateAndTime.time)||!_a(this._dateConverted))||(this.throwErrorAfterUpdateComplete(yo),!1)))}willUpdate(a){this._changeDateByUI||this._changeTimeByUI?this._updateValueAndErrorWhenUIChange():(this._errorFormat="",this._updateErrorText(),this._updateValueWhenSetter())}update(a){a.has("value")&&(this.value===void 0&&this._setUndefinedValue(),this.value===""&&this._setEmptyValue()),super.update(a)}_updateValueWhenSetter(){this._errorFormat="",this.value!==""&&this.value!==void 0?(this._setDateTimeValueSeparate(this._dateAndTime,this._dateConverted),this.value=this._getDateTimeString()):this._previousTimeValue=""}_setDateTimeValueSeparate(a,u){this._dateValue=u,this._timeValue=this._dateValue&&_a(u)?Zo(a.time.slice(0,5)):this._previousTimeValue}_updateValueAndErrorWhenUIChange(){const a=this._checkDateTimeFormat();this.value=a?this.value:void 0,this._updateErrorText()}_checkDateTimeFormat(){const a=!!this._timeValue&&!this._dateValue,u=!!this._dateValue&&!this._timeValue;return!this._errorFormat&&!a&&!u}_setUndefinedValue(){if(!this._changeTimeByUI){if(this._errorFormat)return this._changeDateByUI?void 0:(this._dateValue="",void(this._timeValue=""));this._dateValue=this._previousDateValue,this._timeValue=this._previousTimeValue}}_setEmptyValue(){this._dateValue="",this._timeValue="",this._previousTimeValue="",this._previousDateValue=""}_getDateTimeValue(a){if(a===""||a===void 0)return{date:"",time:""};const u=a.split("T"),s=u[0],T=u[1];if(a.indexOf("T")===a.length-1||u.length>2)return{date:s,time:""};if(!T)return{date:s,time:"00:00"};const[k,$,X]=T.split(":"),J=`${k}:${$||"00"}`;return X?{date:s,time:`${J}:${X}`}:{date:s,time:J}}render(){return bt`
        <fieldset
          class="kuc-mobile-datetime-picker-1-18-0__group"
          aria-describedby="${this._GUID}-error"
        >
          <legend
            class="kuc-mobile-datetime-picker-1-18-0__group__label"
            ?hidden="${!this.label}"
          >
            <kuc-base-mobile-label-1-18-0
              .requiredIcon="${this.requiredIcon}"
              .text="${this.label}"
            ></kuc-base-mobile-label-1-18-0>
          </legend>
          <div class="kuc-mobile-datetime-picker-1-18-0__group__input">
            <kuc-mobile-base-date-1-18-0
              class="kuc-mobile-datetime-picker-1-18-0__group__input--date"
              .disabled="${this.disabled}"
              .value="${this._dateValue}"
              .inputId="${this._GUID}"
              .inputAriaInvalid="${this.error!==""}"
              .required="${this.requiredIcon}"
              .language="${this._getLanguage()}"
              @kuc:mobile-base-date-change="${this._handleDateChange}"
            >
            </kuc-mobile-base-date-1-18-0>
            <kuc-base-mobile-time-1-18-0
              class="kuc-mobile-datetime-picker-1-18-0__group__input--time"
              .value="${this._timeValue}"
              .disabled="${this.disabled}"
              .hour12="${this.hour12}"
              .guid="${this._GUID}"
              .language="${this._getLanguage()}"
              .required="${this.requiredIcon}"
              @kuc:base-mobile-time-change="${this._handleTimeChange}"
            ></kuc-base-mobile-time-1-18-0>
          </div>
          <kuc-base-mobile-error-1-18-0
            .guid="${this._GUID}"
            .text="${this._errorText}"
          >
          </kuc-base-mobile-error-1-18-0>
        </fieldset>
      `}updated(){this._resetState()}_resetState(){this._previousTimeValue="",this._previousDateValue="",this._changeDateByUI=!1,this._changeTimeByUI=!1}_updateErrorText(){this._errorText=this._errorFormat||this.error}_getLanguage(){const a=["en","ja","zh","zh-TW","es"];return a.indexOf(this.language)!==-1?this.language:a.indexOf(document.documentElement.lang)!==-1?document.documentElement.lang:"en"}_handleDateChange(a){if(a.stopPropagation(),a.preventDefault(),a.detail.value===this._dateValue)return;this._changeDateByUI=!0;let u=this._dateValue;a.detail.error?(this._errorFormat=a.detail.error,this.error=""):u=a.detail.value,this._updateDateTimeValue(u,"date")}_handleTimeChange(a){a.preventDefault(),a.stopPropagation(),this._changeTimeByUI=!0;let u=this._timeValue;a.detail.error?(this._errorFormat=a.detail.error,this.error=""):this._errorFormat="",u=a.detail.value,this._updateDateTimeValue(u,"time")}_updateDateTimeValue(a,u){const s=this.value;u==="date"?this._dateValue=a||"":this._timeValue=a,this._previousTimeValue=this._timeValue,this._previousDateValue=this._dateValue;const T=this._errorFormat?void 0:this._getDateTimeString(),k=this._errorFormat?void 0:T;this.value=k;const $=this._errorFormat?void 0:T;this.value=$,Ot(this,"change",{value:k,oldValue:s,changedPart:u})}_getDateTimeString(){if(this._dateValue===""&&this._timeValue==="")return"";if(!this._dateValue||!this._timeValue)return;if(!this.value)return`${this._dateValue}T${this._timeValue}:00`;const a=this.value.split(":");return a.length===3?`${this._dateValue}T${this._timeValue}:${a[2]}`:`${this._dateValue}T${this._timeValue}:00`}}yn([F({type:String,reflect:!0,attribute:"class"})],b.prototype,"className",void 0),yn([F({type:String})],b.prototype,"error",void 0),yn([F({type:String,reflect:!0,attribute:"id"})],b.prototype,"id",void 0),yn([F({type:String})],b.prototype,"label",void 0),yn([F({type:String,attribute:"lang",reflect:!0,converter:pa})],b.prototype,"language",void 0),yn([F({type:String,hasChanged:(p,a)=>(p===""||p===void 0)&&p===a||p!==a})],b.prototype,"value",void 0),yn([F({type:Boolean})],b.prototype,"disabled",void 0),yn([F({type:Boolean})],b.prototype,"hour12",void 0),yn([F({type:Boolean})],b.prototype,"requiredIcon",void 0),yn([F({type:Boolean,attribute:"hidden",reflect:!0,converter:We})],b.prototype,"visible",void 0),yn([se()],b.prototype,"_dateValue",void 0),yn([se()],b.prototype,"_timeValue",void 0),yn([se()],b.prototype,"_errorFormat",void 0),yn([se()],b.prototype,"_errorText",void 0),window.customElements.define("kuc-mobile-datetime-picker-1-18-0",b),ue(`
kuc-mobile-datetime-picker-1-18-0,
kuc-mobile-datetime-picker-1-18-0 * {
color: #333333;
font-family: "メイリオ", Meiryo, "Hiragino Kaku Gothic ProN",
    "ヒラギノ角ゴ ProN W3", "ＭＳ Ｐゴシック", "Lucida Grande",
    "Lucida Sans Unicode", Arial, Verdana, sans-serif;
}
kuc-mobile-datetime-picker-1-18-0:lang(zh),
kuc-mobile-datetime-picker-1-18-0:lang(zh) * {
font-family: "微软雅黑", "Microsoft YaHei", "新宋体", NSimSun, STHeiti,
    Hei, "Heiti SC", "Lucida Grande", "Lucida Sans Unicode", Arial,
    Verdana, sans-serif;
}
kuc-mobile-datetime-picker-1-18-0:lang(zh-TW),
kuc-mobile-datetime-picker-1-18-0:lang(zh-TW) * {
    font-family: "微軟正黒體","Microsoft JhengHei","新宋体",NSimSun,STHeiti,
    Hei,"Heiti SC","Lucida Grande","Lucida Sans Unicode",Arial,
    Verdana,sans-serif
}
kuc-mobile-datetime-picker-1-18-0:lang(es),
kuc-mobile-datetime-picker-1-18-0:lang(es) * {
    font-family: sans-serif;
}
kuc-mobile-datetime-picker-1-18-0 {
font-size: 13px;
color: #333333;
display: inline-table;
vertical-align: top;
width: 100%;
}
kuc-mobile-datetime-picker-1-18-0[hidden] {
display: none;
}
.kuc-mobile-datetime-picker-1-18-0__group {
border: 0;
padding: 0;
}
.kuc-mobile-datetime-picker-1-18-0__group__label {
display: inline-block;
font-weight: bold;
line-height: 1.5;
padding: 0px;
white-space: nowrap;
margin: 0 0 4px 0;
}
.kuc-mobile-datetime-picker-1-18-0__group__label[hidden] {
display: none;
}
.kuc-mobile-datetime-picker-1-18-0__group__input {
display: flex;
align-items: center;
margin-right: 0.5em;
margin-left: 0.5em;
}
.kuc-mobile-datetime-picker-1-18-0__group__input--date {
width: 130px;
margin-right: 10px;
}
.kuc-mobile-datetime-picker-1-18-0__group__input--time {
max-width: 10px;
}
`),ud=b}})();var hd={d:(b,p)=>{for(var a in p)hd.o(p,a)&&!hd.o(b,a)&&Object.defineProperty(b,a,{enumerable:!0,get:p[a]})},o:(b,p)=>Object.prototype.hasOwnProperty.call(b,p)};hd.d({},{r:()=>z1});const z1="1.18.0";var dd={d:(b,p)=>{for(var a in p)dd.o(p,a)&&!dd.o(b,a)&&Object.defineProperty(b,a,{enumerable:!0,get:p[a]})},o:(b,p)=>Object.prototype.hasOwnProperty.call(b,p)};dd.d({},{$:()=>L1});const L1=void 0,B1=[{id:"first",label:"|◀"},{id:"prev",label:"◀◀"},{id:"play",label:"▶"},{id:"stop",label:"||"},{id:"next",label:"▶▶"},{id:"last",label:"▶|"}];let Fc=null;const Oc=[],Nc=[],pd=[];let wa=0,md=!1,cs=null,Uc=!1,gl=!0;const _d={style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}},layers:[{id:"osm-layer",type:"raster",source:"osm"}],sky:{}},center:[139.6917,35.6895],zoom:10},R1=((b,p={})=>{var a,u,s,T;return b("gsidem",(k,$)=>{const X=k.url.replace("gsidem://","");return Hf.request(X,$)}),{type:"raster-dem",tiles:[`gsidem://${(a=p.tileUrl)!=null?a:"https://cyberjapandata.gsi.go.jp/xyz/dem_png/{z}/{x}/{y}.png"}`],tileSize:256,minzoom:(u=p.minzoom)!=null?u:1,maxzoom:(s=p.maxzoom)!=null?s:14,attribution:(T=p.attribution)!=null?T:'<a href="https://maps.gsi.go.jp/development/ichiran.html">地理院タイル</a>'}})(Ff.addProtocol),$1={style:{version:8,sources:{seamlessphoto:{type:"raster",tiles:["https://cyberjapandata.gsi.go.jp/xyz/seamlessphoto/{z}/{x}/{y}.jpg"],maxzoom:18,tileSize:256,attribution:'<a href="https://maps.gsi.go.jp/development/ichiran.html">地理院タイル</a>'},terrain:R1},layers:[{id:"seamlessphoto",type:"raster",source:"seamlessphoto"}],terrain:{source:"terrain",exaggeration:1.2},sky:{"sky-color":"#2481f9","sky-horizon-blend":.5,"horizon-color":"#8fcbf0","horizon-fog-blend":.1,"fog-color":"#ffffff","fog-ground-blend":.5}},center:[139.6917,35.6895],zoom:13,pitch:60,maxPitch:85},Um=async({mapContainer:b,coordinates:p,timestamps:a,photos:u})=>{const s=await V1({container:b.id,params:{center:p.length?p[0]:_d.center}});return await F1({map:s,coordinates:p,timestamps:a}),await ig({map:s,coordinate:p.length?p[0]:_d.center}),u.length&&await O1({map:s,files:structuredClone(u)}),q1({map:s,container:b.parentNode,mapContainer:b,coordinates:p,timestamps:a}),s},V1=async({container:b,params:p})=>{const a=Uc?{...$1,...p}:{..._d,...p},u=document.getElementById(b);for(;u.children.length;)u.removeChild(u.firstChild);const s=new fc.Map({container:b,...a});return await rg(1e3),s},F1=async({map:b,coordinates:p,timestamps:a})=>{const u={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:p},properties:{timestamps:a}}]};b.addSource("line",{type:"geojson",data:u}),b.addLayer({id:"line-layer",type:"line",source:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#0000FF","line-width":7}})},O1=async({map:b,files:p})=>{pd.length=0,pd.push(...p);const a=[];for(const u of p)a.push({...await N1(u),comment:u.comment});a.forEach(u=>{if(u.coordinate){const s=document.createElement("div");s.classList.add("popup-body");const T=document.createElement("img");T.classList.add("popup-body-image"),T.src=u.blobUrl,s.appendChild(T);const k=document.createElement("div");k.classList.add("popup-body-desc");const $=document.createElement("div");$.classList.add("popup-body-desc-comment"),$.innerHTML=u.comment,k.appendChild($);const X=document.createElement("div");X.classList.add("popup-body-desc-timestamp"),X.innerHTML=u.timestamp?Lr(u.timestamp):"",k.appendChild(X),s.appendChild(k);const J=new fc.Popup({className:"popup"}).setMaxWidth("400px").setDOMContent(s);new fc.Marker().setLngLat([u.coordinate.lon,u.coordinate.lat]).setPopup(J).addTo(b)}})},N1=async b=>{const p=URL.createObjectURL(b.blob),a=new File([b.blob],b.name,{type:b.blob.type}),u=await U1(a),s=H1(u),T=j1(u);return{name:b.name,blobUrl:p,coordinate:s,timestamp:T}},U1=async b=>new Promise((p,a)=>{try{Wp.getData(b,function(){const u=Wp.getAllTags(this);p(u)})}catch(u){a(u)}}),H1=b=>b.GPSLatitude&&b.GPSLongitude?{lat:b.GPSLatitude[0]+b.GPSLatitude[1]/60+b.GPSLatitude[2]/3600,lon:b.GPSLongitude[0]+b.GPSLongitude[1]/60+b.GPSLongitude[2]/3600,alt:Number(b.GPSAltitude)}:null,j1=b=>{const p=(b.DateTimeOriginal||b.DateTimeDigitized||b.DateTime||"").match(new RegExp(/^([0-9]+)[:/]([0-9]+)[:/]([0-9]+)[T ]([0-9]+):([0-9]+):([0-9]+)/));if(p&&p.length){const a=`${p[1]}/${p[2]}/${p[3]} ${p[4]}:${p[5]}:${p[6]}`;return new Date(a)}return null},q1=({map:b,container:p,mapContainer:a,coordinates:u,timestamps:s})=>{const T=document.querySelector(".control-box");T&&T.parentElement.removeChild(T);const k=document.createElement("div");k.classList.add("control-box"),p.appendChild(k),G1({map:b,container:k,mapContainer:a,buttons:B1,coordinates:u,timestamps:s}),J1({map:b,container:k,coordinates:u,timestamps:s})},G1=({map:b,container:p,mapContainer:a,buttons:u,coordinates:s,timestamps:T})=>{const k=document.createElement("div");k.classList.add("animation-control-box"),Z1(b,k,a),W1(k,T[0]),X1(k,u),p.children.length&&p.removeChild(p.firstChild),p.appendChild(k),T&&T.length&&K1({map:b,coordinates:s,timestamps:T})},Z1=(b,p,a)=>{const u=document.createElement("div");u.classList.add("disp-control-box");const s=document.createElement("div");s.classList.add("disp-control-button"),Uc&&s.classList.add("is-active");const T=document.createElement("div");T.classList.add("disp-control-button-label"),T.innerHTML="3D",s.appendChild(T),u.appendChild(s),s.addEventListener("click",async()=>{Uc=!Uc,s.classList.toggle("is-active"),await Um({mapContainer:a,coordinates:Oc,timestamps:Nc,photos:pd})});const k=document.createElement("div");k.classList.add("disp-control-button","is-active",gl?"is-north-up":"is-heading-up");const $=document.createElement("div");$.classList.add("disp-control-button-label"),$.innerHTML="<div>▲</div>",k.appendChild($),k.addEventListener("click",()=>{k.classList.toggle("is-north-up"),k.classList.toggle("is-heading-up"),gl=!gl,gl&&b.rotateTo(0)}),u.appendChild(k),p.appendChild(u)},W1=(b,p)=>{const a=document.createElement("div");a.classList.add("current-position-box"),a.innerHTML=p?Lr(p):"no data",b.appendChild(a)},X1=(b,p)=>{const a=document.createElement("div");a.classList.add("position-control-box"),p.forEach(u=>{const s=document.createElement("div");s.classList.add("control-button",`button-${u.id}`,"disabled");const T=document.createElement("div");T.classList.add("control-button-label"),T.innerHTML=u.label,s.appendChild(T),a.appendChild(s)}),b.appendChild(a)},K1=({map:b,coordinates:p,timestamps:a})=>{document.querySelector(".button-first").addEventListener("click",()=>{ka({map:b,coordinates:p,timestamps:a,index:0})}),document.querySelector(".button-prev").addEventListener("mousedown",()=>{cs||(cs=setInterval(()=>{ka({map:b,coordinates:p,timestamps:a,index:wa-1})},20))}),document.querySelector(".button-prev").addEventListener("mouseup",Hc),document.querySelector(".button-prev").addEventListener("mouseleave",Hc),document.querySelector(".button-play").addEventListener("click",()=>{Y1({map:b,coordinates:p,timestamps:a,index:wa})}),document.querySelector(".button-stop").addEventListener("click",()=>{Hm()}),document.querySelector(".button-next").addEventListener("mousedown",()=>{cs||(cs=setInterval(()=>{ka({map:b,coordinates:p,timestamps:a,index:wa+1})},20))}),document.querySelector(".button-next").addEventListener("mouseup",Hc),document.querySelector(".button-next").addEventListener("mouseleave",Hc),document.querySelector(".button-last").addEventListener("click",()=>{ka({map:b,coordinates:p,timestamps:a,index:a.length-1})}),document.querySelectorAll(".control-button").forEach(u=>u.classList.remove("disabled"))},ka=({map:b,coordinates:p,timestamps:a,index:u})=>{u<0&&(u=0),u>=a.length&&(u=a.length-1),wa=u,document.querySelector(".current-position-box").innerHTML=Lr(a[wa]);const s=document.querySelector(".point-list-table tbody"),T=s.querySelector("tr.selected-row");T&&T.classList.remove("selected-row");const k=s.querySelector(`tr:nth-of-type(${wa+1})`);k&&k.classList.add("selected-row"),k.scrollIntoView({behavior:"auto",block:"center"}),eg(b,p[wa])},Hc=()=>{clearInterval(cs),cs=null},Y1=async({map:b,coordinates:p,timestamps:a,index:u})=>{md=!0,u>=p.length-1&&(u=0),document.querySelector(".position-control-box").classList.toggle("is-playing");const s={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:p.slice(0,u+1)},properties:{timestamps:a}}]};jm({map:b,line:s,coordinates:p,timestamps:a,index:u})},Hm=()=>{md=!1,document.querySelector(".position-control-box").classList.toggle("is-playing")},jm=({map:b,line:p,coordinates:a,timestamps:u,index:s})=>{if(md){if(p.features[0].geometry.coordinates.push(a[s]),ka({map:b,coordinates:a,timestamps:u,index:s}),!gl&&s+1<a.length){const T=ng(a[s],a[s+1]);b.rotateTo(T)}b.getSource("line").setData(p),++s<a.length?requestAnimationFrame(()=>{jm({map:b,line:p,coordinates:a,timestamps:u,index:s})}):Hm()}},J1=({map:b,container:p,coordinates:a,timestamps:u})=>{const s=document.createElement("div");s.classList.add("point-list-box");const T=document.createElement("div");T.classList.add("point-list-header");const k=document.createElement("div");k.classList.add("point-list-steps"),k.innerHTML=`total: ${a.length} steps`,T.appendChild(k);const $=document.createElement("div");$.classList.add("point-list-min-button","is-closed"),$.innerHTML="🔼",$.title="リストを閉じる",$.addEventListener("click",Zt=>{tg(Zt.target)}),T.appendChild($),s.appendChild(T);const X=document.createElement("div");X.classList.add("point-list-table-container","is-closed");const J=document.createElement("div");J.classList.add("point-list-table-container-inner"),Fc=new P1({columns:[{title:"STEP",field:"index"},{title:"緯度",field:"lat"},{title:"経度",field:"lon"},{title:"標高",field:"alt"},{title:"日時",field:"timestamp"}],className:"point-list-table",pagination:!1}),J.appendChild(Fc),X.appendChild(J),s.appendChild(X),p.appendChild(s),Q1({coordinates:a,timestamps:u}),Fc.addEventListener("click",Zt=>{const St=Zt.target.closest("tr");if(St&&St.parentNode.tagName==="TBODY"){Array.from(St.parentNode.children).forEach(Ae=>Ae.classList.remove("selected-row")),St.classList.add("selected-row");const ge=Array.from(St.parentNode.children).indexOf(St);ka({map:b,coordinates:a,timestamps:u,index:ge})}}),setTimeout(()=>{u.length&&ka({map:b,coordinates:a,timestamps:u,index:0})},2e3)},Q1=({coordinates:b,timestamps:p})=>{const a=b.map((u,s)=>({index:s+1,lon:(u[0]?u[0]:0).toFixed(6),lat:(u[1]?u[1]:0).toFixed(6),alt:(u[2]?u[2]:0).toFixed(1),timestamp:Lr(p[s],"time")}));Fc.data=a,document.querySelector(".point-list-steps").innerHTML=`total: ${b.length} steps`,document.querySelector(".current-position-box").innerHTML=p.length?Lr(p[0]):"no data"},tg=b=>{b.classList.toggle("is-closed"),document.querySelector(".point-list-table-container").classList.toggle("is-closed")},eg=(b,p)=>{b.setCenter(p);const a=b.getSource("points");a&&a.setData({type:"Point",coordinates:p})},ig=async({map:b,coordinate:p,size:a=128})=>new Promise(u=>{const s={width:a,height:a,data:new Uint8Array(a*a*4),onAdd(){const T=document.createElement("canvas");T.width=this.width,T.height=this.height,this.context=T.getContext("2d")},render(){const T=performance.now()%1e3/1e3,k=a/2*.3,$=a/2*.7*T+k,X=this.context;return X.clearRect(0,0,this.width,this.height),X.beginPath(),X.arc(this.width/2,this.height/2,$,0,2*Math.PI),X.fillStyle=`rgba(255, 200, 200,${1-T})`,X.fill(),X.beginPath(),X.arc(this.width/2,this.height/2,k,0,2*Math.PI),X.fillStyle="rgba(255, 100, 100, 1)",X.strokeStyle="white",X.lineWidth=2+4*(1-T),X.fill(),X.stroke(),this.data=X.getImageData(0,0,this.width,this.height).data,b.triggerRepaint(),!0}};b.addImage("pulsing-dot",s,{pixelRatio:2}),b.addSource("points",{type:"geojson",data:{type:"Point",coordinates:p}}),b.addLayer({id:"points",type:"symbol",source:"points",layout:{"icon-image":"pulsing-dot","icon-anchor":"center"}}),u()}),Lr=(b,p="datetime")=>p==="date"?`${b.getFullYear()}/${(b.getMonth()+1).toString().padStart(2,"0")}/${b.getDate().toString().padStart(2,"0")}`:p==="time"?`${b.getHours().toString().padStart(2,"0")}:${b.getMinutes().toString().padStart(2,"0")}:${b.getSeconds().toString().padStart(2,"0")}`:`${Lr(b,"date")} ${Lr(b,"time")}`,ng=(b,p)=>{const a=jc(b[1]),u=jc(b[0]),s=jc(p[1]),T=jc(p[0])-u,k=Math.sin(T)*Math.cos(s),$=Math.cos(a)*Math.sin(s)-Math.sin(a)*Math.cos(s)*Math.cos(T);return(og(Math.atan2(k,$))+360)%360},jc=b=>b*Math.PI/180,og=b=>180*b/Math.PI,rg=b=>new Promise(p=>setTimeout(p,b)),qm="gpx_viewer",us="map_container",qc="./data",ag=`${qc}/records.json`,Gm=async b=>{const p=b.src.replace("/record.json",""),a=await Hp(`${qc}/${b.src}`,!0),u=`${qc}/${p}/${a.gpx}`;if(!u)return;const s=await(async X=>{const J=await hh(X);return J.ok?await J.text():""})(u),{coordinates:T,timestamps:k}=await(async X=>{const J=(St=>new DOMParser().parseFromString(St,"application/xml"))(X),Zt=(St=>{const ge=St.querySelectorAll("trkpt[lat][lon]");return Array.from(ge).map(Ye=>{const gi={lat:Number(Ye.attributes.lat.value),lon:Number(Ye.attributes.lon.value)},oi=Ye.querySelector("ele");oi&&(gi.ele=Number(oi.innerHTML));const ft=Ye.querySelector("time");return ft&&(gi.time=new Date(ft.innerHTML)),gi})})(J);return Oc.length=0,Nc.length=0,Zt.forEach((St,ge)=>{if(St.lat&&St.lon){const Ae=[St.lon,St.lat];St.ele&&Ae.push(St.ele),Oc.push(Ae),St.time&&(Nc[ge]=St.time)}}),{coordinates:Oc,timestamps:Nc}})(s),$=[];if(a.photos.length){a.photos.forEach(X=>{(X.src.toLowerCase().endsWith(".jpg")||X.src.toLowerCase().endsWith(".jpeg"))&&$.push({src:X.src,comment:X.comment||""})});for(const X of $){const J=await Vf(`${qc}/${p}/${X.src}`);X.blob=J}}return{coordinates:T,timestamps:k,photos:$}},fd=async({coordinates:b,timestamps:p,photos:a,rootContainer:u,className:s})=>{const T=document.querySelector(".control-box");T&&T.parentElement.removeChild(T);const k=(()=>{const $=document.getElementById(us);if($)return $;const X=document.createElement("div");return X.id=us,X.classList.add(us,s),u.appendChild(X),X})();await Um({mapContainer:k,coordinates:b,timestamps:p,photos:a})},Gc=(b,p)=>{if(p){const a=document.createElement("div");a.classList.add("loader"),b.appendChild(a)}else{const a=b.querySelector(".loader");a&&b.removeChild(a)}};(async()=>{const b=document.getElementById(qm);if(b){Gc(b,!0);const p=await Hp(ag);if(p.length){const{coordinates:a,timestamps:u,photos:s}=await Gm(p[0]);await fd({coordinates:a,timestamps:u,photos:s,rootContainer:b,className:us}),((T,k)=>{(({data:X,container:J,className:Zt="",selectedIndex:St=0})=>{const ge=new D1({items:X,className:Zt,selectedIndex:St});return J.appendChild(ge),ge})({data:T.map(X=>{const J=X.date||"";return{label:`${X.title}${J?` [${Lr(new Date(J),"date")}]`:""}`,value:X.id.toString()}}),container:k,className:"record-select"}).addEventListener("change",async X=>{const J=T.find(St=>St.id.toString()===X.detail.value),Zt=document.getElementById(qm);if(J&&Zt){Gc(Zt,!0);const{coordinates:St,timestamps:ge,photos:Ae}=await Gm(J);await fd({coordinates:St,timestamps:ge,photos:Ae,rootContainer:Zt,className:us}),Gc(Zt,!1)}})})(p,b)}else await fd({coordinates:[],timestamps:[],photos:[],rootContainer:b,className:us});Gc(b,!1)}})()})();
